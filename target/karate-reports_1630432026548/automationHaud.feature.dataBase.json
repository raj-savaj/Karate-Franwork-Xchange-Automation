[{"line":1,"elements":[{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def dbHandler = Java.type(\"helpers.DbHandler\")","result":{"duration":12126100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4},{"name":"url apiUrl","result":{"duration":429200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5},{"name":"def tokenResponse = callonce read('classpath:helpers\/createToken.feature')","result":{"duration":2885006800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":6},{"name":"helpers\/createToken.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":6},{"name":"url apiUrl","result":{"duration":546400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":3},{"name":"path 'oauth\/token'","result":{"duration":892200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":4},{"name":"params {username:#(userName),\"password\":#(password),grant_type:\"password\"}","result":{"duration":391828500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":5},{"name":"header Authorization = 'Basic Y2xpZW50SWQ6c2VjcmV0'","result":{"duration":3018800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":6},{"name":"method post","result":{"duration":2427963400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":7},{"name":"status 200","result":{"duration":31300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":8},{"name":"def accessToken = response.access_token","result":{"duration":1298200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":9},{"name":"def token = tokenResponse.accessToken","result":{"duration":1294800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7}]},{"line":9,"name":"Check the country count","description":"","id":"check-the-country-count","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'destinations\/countries'","result":{"duration":614900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":10},{"name":"header Authorization = 'Bearer ' + token","result":{"duration":14882800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":11},{"name":"method get","result":{"duration":962849500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":12},{"name":"status 200","result":{"duration":12300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":13},{"name":"def apiCountryCount = response.countries.length","result":{"duration":2378000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":14},{"name":"def countyId = get[0] response.countries[?(@.country_name=='Malta')].country_id","result":{"duration":43022300,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":15},{"name":"def dbCount = dbHandler.getRowCount(\"country\")","result":{"duration":2236469500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":16},{"name":"match dbCount.count == apiCountryCount","result":{"duration":15949100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":17},{"name":"path \"destinations\/countries\/\"+countyId+\"\/networks\"","result":{"duration":953900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":20},{"name":"header Authorization = 'Bearer ' + token","result":{"duration":855000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":21},{"name":"method get","result":{"duration":1265636100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":22},{"name":"status 200","result":{"duration":12500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":23},{"name":"def apiNetworkCount = response.networks.length","result":{"duration":1086700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":24},{"name":"def dbCount = dbHandler.getRowCount(\"network where country_id='\"+countyId+\"'\")","result":{"duration":1983301500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":25},{"name":"match dbCount.count == apiNetworkCount","result":{"duration":577100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":26}],"tags":[]}],"name":"automationHaud\/feature\/dataBase.feature","description":"Work with database","id":"work-with-database","keyword":"Feature","uri":"automationHaud\/feature\/dataBase.feature"}]