(this.webpackJsonpgui=this.webpackJsonpgui||[]).push([[0],{211:function(e){e.exports=JSON.parse('["#333333","#004D40","#FF0000","#D81B60","#1C83DE","#68C5BD","#FFC107","#FF9F43","#EE5253","#F0932B","#F9CA24","#27AE60","#2980B9","#8E44AD","#6C5CE7","#341F97","#0ABDE3","#10AC84","#01A3A4","#44BD32","#40739E"]')},404:function(e){e.exports=JSON.parse('[{"title":"Total Cost Today","query":{"measures":["Stats.total_cost_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[],"renewQuery":true},"renderItem":"segment","from":"today","to":"now","background":"Red"},{"title":"Total Revenue Today","query":{"measures":["Stats.revenue_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[],"renewQuery":true},"renderItem":"segment","from":"today","to":"now","background":"Green"},{"title":"Total Profit Today","query":{"measures":["Stats.profit_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[],"renewQuery":true},"renderItem":"segment","from":"today","to":"now","background":"Blue"},{"title":"Total Profit This Month","query":{"measures":["Stats.profit_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[],"renewQuery":true},"renderItem":"segment","from":"month","to":"now","background":"Purple"},{"title":"Total Cost Yesterday","query":{"measures":["Stats.total_cost_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[],"renewQuery":true},"renderItem":"segment","from":"yesterday","to":"yesterday","background":"Red"},{"title":"Total Revenue Yesterday","query":{"measures":["Stats.revenue_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[],"renewQuery":true},"renderItem":"segment","from":"yesterday","to":"yesterday","background":"Green"},{"title":"Total Profit Yesterday","query":{"measures":["Stats.profit_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[]},"renderItem":"segment","from":"yesterday","to":"yesterday","background":"Blue"},{"title":"Total Profit Since Yesterday","query":{"measures":["Stats.profit_in_base"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Stats.baseCurrency"],"order":{},"filters":[],"renewQuery":true},"renderItem":"segment","from":"yesterday","to":"now","background":"Purple"},{"title":"Top 10 Clients by Revenue Today","query":{"measures":["Stats.revenue_in_base"],"timeDimensions":[{"dimension":"Stats.time"}],"dimensions":["Client.name"],"filters":[],"renewQuery":true,"limit":10,"order":{"Stats.revenue_in_base":"desc"}},"renderItem":"grid","from":"today","to":"now","background":"Orange","size":4},{"title":"Least 10 Suppliers by Delivery Rate < 80%","query":{"measures":["Stats.delivered_percent"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":["Supplier.name"],"filters":[{"dimension":"Stats.delivered_percent","operator":"lt","values":["80"]},{"dimension":"StatsKey.supplierId","operator":"set"}],"limit":10,"order":{"Stats.delivered_percent":"asc"},"renewQuery":true},"renderItem":"grid","from":"today","to":"now","background":"Orange","size":4},{"title":"Traffic Today per Status","query":{"measures":["Stats.delivered","Stats.undelivered","Stats.rejected","Stats.enroute","Stats.pending","Stats.submitted","Stats.expired","Stats.others"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"dimensions":[],"filters":[],"order":{}},"renderItem":"grid","from":"today","to":"now","background":"Orange","pivotConfig":{"x":["measures"],"y":[]},"size":4,"renewQuery":true,"removeText":"Stats."},{"title":"Traffic Today per Status per Hour","query":{"measures":["Stats.sent","Stats.delivered","Stats.undelivered","Stats.rejected","Stats.pending","Stats.enroute","Stats.submitted","Stats.expired","Stats.others"],"timeDimensions":[{"dimension":"Stats.time","granularity":"hour","dateRange":"Today"}],"filters":[],"order":{}},"renderItem":"line","from":"today","to":"now","background":"Orange","size":12,"renewQuery":true,"stack":false,"height":"Tall","showLabels":false,"isTimeCategory":true,"showTooltip":true,"yAxisTitle":"Message Count","categoryTitle":"Time"},{"title":"Current Routes with Negative Profit","query":{"dimensions":["Client.name","Supplier.name","Country.name","CountryMcc.mcc","Network.name","NetworkMnc.mnc","Prices.price","Prices.cost","Prices.profit"],"timeDimensions":[],"filters":[{"dimension":"Prices.profit","operator":"lt","values":["0.0"]}],"order":{}},"renderItem":"grid","height":"Tall","background":"Orange","size":12,"renewQuery":true},{"title":"Negative Profit Today","query":{"dimensions":["Client.name","Supplier.name","Country.name","CountryMcc.mcc","Network.name","NetworkMnc.mnc","Stats.costCurrency","Stats.cost","Stats.priceCurrency","Stats.price","Stats.baseCurrency"],"timeDimensions":[{"dimension":"Stats.time","dateRange":"Today"}],"measures":["Stats.profit_in_base","Stats.sent"],"filters":[{"dimension":"Stats.profit_in_base","operator":"lt","values":["0"]}],"order":{"Stats.profit_in_base":"asc"}},"renderItem":"grid","from":"today","to":"now","height":"Tall","background":"Orange","size":12,"renewQuery":true}]')},405:function(e){e.exports=JSON.parse('{"chart":{"chartOptions":{"title":"","axis":{"vertical":{"title":{"text":""}},"horizontal":{"title":{"text":""}}},"legend":{"visible":true,"align":"center","position":"top","orientation":"horizontal"},"chartType":"single"},"categories":[],"series":[]}}')},426:function(e,t,n){},442:function(e,t){},444:function(e,t){},455:function(e,t){},457:function(e,t){},484:function(e,t){},486:function(e,t){},487:function(e,t){},492:function(e,t){},494:function(e,t){},500:function(e,t){},502:function(e,t){},521:function(e,t){},533:function(e,t){},536:function(e,t){},839:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(56),r=n.n(c),s=n(21),l=n(9),o=n(3),u=(n(426),n(192)),d=n(12),m=n(5);function b(){var e=Object(l.d)((function(e){var t=e.auth;return null==t.get("authorities")?new m.e:t.get("authorities")})),t=i.a.useState((function(){return e})),n=Object(o.a)(t,2),a=n[0],c=n[1];return i.a.useEffect((function(){!0!==e.equals(a)&&c(e)}),[e,a]),a}var j="25645-RC",f="clientId",h="secret",p="/api",g="/customer-portal";function O(e){switch(e){case"customer-portal":default:return!1}}var v=n(15),x=n(7),C=n(33),_=n(860),y=n(855),S=n(853),k=n(6),w=n(8),E=n(862),I=n(96),D=n(88),T=n.n(D),M="AUTH_LOGIN",N="AUTH_LOGOUT",R="FIELD_ADD",A="FIELD_REMOVE",P="CLIENT_CONTACT_TYPE_ADD",L="CLIENT_CONTACT_TYPE_CLEAR",F="RULE_ADD",U="RULE_CLEAR",q="RULE_SET",G="VIRTUAL_NUMBERS_ADD",H="VIRTUAL_NUMBERS_CLEAR",B="SID_SET",V="CONTENT_SET",z="SUPPLIER_SITE_CATEGORY_ADD",W="SUPPLIER_SITE_CATEGORY_CLEAR",K="SUPPLIER_CONTACT_TYPE_ADD",J="SUPPLIER_CONTACT_TYPE_CLEAR",Y="CURRENCY_ADD",Q="CURRENCY_CLEAR",X="TIMEZONE_ADD",$="TIMEZONE_CLEAR",Z="COUNTRY_ADD",ee="COUNTRY_CLEAR",te="NETWORK_ADD",ne="NETWORK_CLEAR",ae="SIDEBAR_OPEN",ie="SIDEBAR_CLOSE",ce="ALERT_ENQUEUE",re="ALERT_DEQUEUE",se="AUDIT_CLIENT_RATE_ADD",le="AUDIT_CLIENT_RATE_CLEAR",oe="AUDIT_SUPPLIER_RATE_ADD",ue="AUDIT_SUPPLIER_RATE_CLEAR",de="AUDIT_ADD",me="AUDIT_CLEAR",be="CLIENT_ADD",je="CLIENT_CLEAR",fe="CLIENT_ROUTE_SET",he="CLIENT_WALLET_SET",pe="CLIENT_ROUTE_CLEAR",ge="CLIENT_CONTACT_SET",Oe="CLIENT_PRICE_PLAN_SET",ve="CLIENT_CONNECTION_SET",xe="CLIENT_ROUTE_WHITELIST_SID_SET",Ce="CLIENT_ROUTE_PRICE_SCHEDULE_SET",_e="CLIENT_CUSTOMER_PORTAL_USER_SET",ye="CLIENT_CUSTOMER_PORTAL_USER_CLEAR",Se="CLIENT_CONNECTION_TOKEN_MASKED_SET",ke="CLIENT_CONTACT_ADD",we="CLIENT_CONTACT_CLEAR",Ee="CLIENT_CONNECTION_ADD",Ie="CLIENT_CONNECTION_CLEAR",De="CLIENT_CONNECTION_VIRTUAL_NUMBER_SET",Te="CLIENT_CONNECTION_VIRTUAL_NUMBER_CLEAR",Me="CLIENT_WALLET_ADD",Ne="CLIENT_WALLET_CLEAR",Re="SUPPLIER_ADD",Ae="SUPPLIER_CLEAR",Pe="SUPPLIER_CONTACT_SET",Le="SUPPLIER_CONNECTION_SET",Fe="SUPPLIER_COMMITMENT_SET",Ue="SUPPLIER_VIRTUAL_NUMBER_SET",qe="SUPPLIER_CONNECTION_ADD",Ge="SUPPLIER_CONNECTION_CLEAR",He="SUPPLIER_CONNECTION_LINK_SET",Be="SUPPLIER_CONNECTION_NETWORK_HISTORY_SET",Ve="SUPPLIER_CONNECTION_NETWORK_HISTORY_CLEAR",ze="export const SUPPLIER_CONNECTION_PRICES_SET",We="export const SUPPLIER_CONNECTION_PRICES_CLEAR",Ke="SUPPLIER_CONNECTION_IMPORT_SETTINGS_SET",Je="SUPPLIER_CONNECTION_IMPORT_SETTINGS_CLEAR",Ye="SUPPLIER_RATE_SCHEDULE_ADD",Qe="SUPPLIER_RATE_SCHEDULE_CLEAR",Xe="SUPPLIER_RATE_SCHEDULE_PRICE_SET",$e="SUPPLIER_RATE_SCHEDULE_PRICE_CLEAR",Ze="SUPPLIER_CONNECTION_LINK_ADD",et="SUPPLIER_CONNECTION_LINK_CLEAR",tt="SUPPLIER_CONTACT_ADD",nt="SUPPLIER_CONTACT_CLEAR",at="SUPPLIER_VIRTUAL_NUMBER_ADD",it="SUPPLIER_VIRTUAL_NUMBER_ClEAR",ct="SUPPLIER_COMMITMENT_ADD",rt="SUPPLIER_COMMITMENT_CLEAR",st="SUPPLIER_COMMITMENT_NETWORK_SET",lt="SUPPLIER_COMMITMENT_CONNECTION_SET",ot="QOS_ADD",ut="QOS_CLEAR",dt="LCR_ADD",mt="LCR_CLEAR",bt="LCR_CONNECTION_SET",jt="LCR_COMMITMENT_SET",ft="CATEGORISATION_ADD",ht="CATEGORISATION_CLEAR",pt="ROUTE_ADD",gt="ROUTE_CLEAR",Ot="ROUTE_RULE_SET",vt="ROUTE_NETWORK_SET",xt="ROUTE_RULE_LCR_SET",Ct="ROUTE_MNP_PROVIDER_SET",_t="ROUTE_MNP_PROVIDER_CLEAR",yt="ROUTE_RULE_CONNECTION_SET",St="ROUTE_RULE_QOS_CONDITION_SET",kt="ROUTE_RULE_CATEGORY_CONDITION_SET",wt="ROUTE_RULE_COMMITMENT_CONDITION_SET",Et="ROUTE_RULE_TIME_BASED_CONDITION_SET",It="MNP_PROVIDER_ADD",Dt="MNP_PROVIDER_CLEAR",Tt="ROUTE_RULE_ADD",Mt="ROUTE_RULE_CLEAR",Nt="ROUTE_RULE_HISTORY_SET",Rt="ROUTE_RULE_HISTORY_CLEAR",At="ROUTE_RULE_TIME_BASED_CONDITION_ADD",Pt="ROUTE_RULE_TIME_BASED_CONDITION_CLEAR",Lt="ROUTE_RULE_COMMITMENT_CONDITION_ADD",Ft="ROUTE_RULE_COMMITMENT_CONDITION_CLEAR",Ut="ROUTE_RULE_CATEGORY_CONDITION_ADD",qt="ROUTE_RULE_CATEGORY_CONDITION_CLEAR",Gt="ROUTE_RULE_QOS_CONDITION_ADD",Ht="ROUTE_RULE_QOS_CONDITION_CLEAR",Bt="ROUTE_RULE_CONNECTION_ADD",Vt="ROUTE_RULE_CONNECTION_CLEAR",zt="TRAFFIC_EXPORT_ADD",Wt="TRAFFIC_EXPORT_CLEAR",Kt="VIRTUAL_NUMBERS_TRAFFIC_EXPORT_ADD",Jt="VIRTUAL_NUMBERS_TRAFFIC_EXPORT_CLEAR",Yt="TRAFFIC_STATUSES_ADD",Qt="TRAFFIC_STATUSES_CLEAR",Xt="VIRTUAL_NUMBERS_TRAFFIC_STATUSES_ADD",$t="VIRTUAL_NUMBERS_TRAFFIC_STATUSES_CLEAR",Zt="TRAFFIC_ERROR_CODE_ADD",en="TRAFFIC_ERROR_CODE_CLEAR",tn="STATISTICS_LATEST_REPORTS_ADD",nn="STATISTICS_LATEST_REPORTS_CLEAR",an="STATISTICS_SAVED_REPORTS_ADD",cn="STATISTICS_SAVED_REPORTS_CLEAR",rn="STATISTICS_SCHEDULED_REPORTS_ADD",sn="STATISTICS_SCHEDULED_REPORTS_CLEAR",ln="STATISTICS_SHARE_REPORTS_ADD",on="STATISTICS_SHARE_REPORTS_CLEAR",un="DLR_ADD",dn="DLR_CLEAR",mn="CLIENT_PRICE_PLAN_ADD",bn="CLIENT_PRICE_PLAN_CLEAR",jn="CLIENT_PRICE_PLAN_NETWORK_PRICE_SET",fn="CLIENT_ROUTE_PRICE_SCHEDULE_ADD",hn="CLIENT_ROUTE_PRICE_SCHEDULE_CLEAR",pn="CLIENT_ROUTE_PRICE_SCHEDULE_DATE_SET",gn="CLIENT_ROUTE_PRICE_SCHEDULE_STATUS_SET",On="CLIENT_ROUTE_PRICE_SCHEDULE_PRICE_SET",vn="TEMPLATE_ADD",xn="TEMPLATE_CLEAR",Cn="TEMPLATE_PRICE_SET",_n="TEMPLATE_PRICE_SCHEDULE_ADD",yn="TEMPLATE_PRICE_SCHEDULE_CLEAR",Sn="TEMPLATE_PRICE_SCHEDULE_DATE_SET",kn="TEMPLATE_PRICE_SCHEDULE_STATUS_SET",wn="TEMPLATE_PRICE_SCHEDULE_PRICE_SET",En="WHITELIST_SID_ADD",In="WHITELIST_SID_CLEAR",Dn="WHITELIST_SID_SID_SET",Tn="WHITELIST_SID_CLIENT_SET",Mn="WHITELIST_SID_SID_ADD",Nn="WHITELIST_SID_SID_CLEAR",Rn="WHITELIST_SID_SID_STATUS_ADD",An="WHITELIST_SID_SID_STATUS_CLEAR",Pn="USER_ADD",Ln="USER_CLEAR",Fn="USER_ACCESS_GROUP_SET",Un="USER_ACCESS_RIGHT_SET",qn="USER_ACCESS_GROUP_CLEAR",Gn="USER_ACCESS_RIGHT_CLEAR",Hn="LDAP_USER_ADD",Bn="LDAP_USER_CLEAR",Vn="ACCESS_GROUP_ADD",zn="ACCESS_GROUP_CLEAR",Wn="ACCESS_GROUP_LDAP_GROUP_SET",Kn="ACCESS_GROUP_LDAP_GROUP_CLEAR",Jn="ACCESS_GROUP_ACCESS_RIGHT_SET",Yn="ACCESS_GROUP_ACCESS_RIGHT_CLEAR",Qn="LDAP_GROUP_ADD",Xn="LDAP_GROUP_CLEAR",$n="ACCESS_RIGHT_MODULE_ADD",Zn="ACCESS_RIGHT_MODULE_CLEAR",ea="ROUTE_RULE_SCHEDULE_ADD",ta="ROUTE_RULE_SCHEDULE_CLEAR",na="ROUTE_RULE_SCHEDULE_DETAILS_SET",aa="ROUTE_RULE_SCHEDULE_DETAILS_CLEAR",ia="CUSTOMER_PORTAL_USER_ADD",ca="CUSTOMER_PORTAL_USER_CLEAR",ra="SUBSIDIARIES_ADD",sa="SUBSIDIARIES_CLEAR",la="SALES_REGIONS_ADD",oa="SALES_REGIONS_CLEAR",ua="HTTP_PROVIDER_ADD",da="HTTP_PROVIDER_CLEAR",ma="HTTP_PROVIDER_FIELD_SET",ba="HTTP_PROVIDER_FIELD_CLEAR",ja="SYSTEM_VERSION_ADD",fa="SYSTEM_VERSION_CLEAR",ha=n(393),pa=n.n(ha),ga=n(20),Oa=n.n(ga),va=Oa.a.create({crossdomain:!0,baseURL:"".concat(p).concat("/oauth")}),xa=Oa.a.create({crossdomain:!0,baseURL:"".concat(p).concat(g)}),Ca=new Error("Internal Server Error, kindly contact an Administrator");function _a(e){var t=pa.a.decode(e.access_token,h,!0);return{type:M,data:{scope:t.scope,group:t.group,username:t.user_name,token_type:e.token_type,expires_in:e.expires_in,access_token:e.access_token,authorities:t.authorities,refresh_token:e.refresh_token,misc:{customer_client_id:t.customer_client_id}}}}function ya(){return localStorage.removeItem("refresh_token"),{type:N}}function Sa(e,t){return function(n){return va.post("/token",null,{params:{username:e,password:t,grant_type:"password"},headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(window.btoa("".concat(f,":").concat(h)))}}).then((function(e){n(_a(e.data)),localStorage.setItem("refresh_token",e.data.refresh_token)})).catch((function(e){var t=null!=e.response&&e.response.data&&e.response.data.error_description,n=null!=e.response&&500===e.response.status?"Internal Server Error, kindly contact an Administrator":"An error occured during authentication";throw new Error(null!=t?t:n)}))}}function ka(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.getItem("refresh_token");return function(t){return null==e?(t(ya()),Promise.reject(Ca)):va.post("/token",null,{params:{grant_type:"refresh_token",refresh_token:e},headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(window.btoa("".concat(f,":").concat(h)))}}).then((function(e){t(_a(e.data)),localStorage.setItem("refresh_token",e.data.refresh_token)})).catch((function(e){t(ya());var n=null!=e.response&&e.response.data&&e.response.data.error_description,a=null!=e.response&&500===e.response.status?"Something went wrong with the service. Please contact support.":"An error occured during authentication";throw new Error(null!=n?n:a)}))}}function wa(e){return function(){return xa.post("/password/reset",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}var Ea=n(162),Ia=n.n(Ea);function Da(e){var t=Object.assign({},e);return null!=e.sort&&(t.sort=!0===Array.isArray(e.sort)?e.sort:Object.keys(e.sort).reduce((function(t,n){return t.push("".concat(n,",").concat(e.sort[n])),t}),[])),Ia.a.stringify(t)}var Ta=n(142),Ma=n.n(Ta),Na=n(194),Ra=n(394),Aa=n(168);function Pa(e){return[{scopes:["FRONTEND:CLIENTS-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:CLIENT_DETAILS:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:CLIENT-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:CLIENT_DETAILS:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:SUPPLIERS-PAGE-ACCESS"],decision:function(e){return["API:SUPPLIER_DETAILS:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:SUPPLIER-PAGE-ACCESS"],decision:function(e){return["API:SUPPLIER_DETAILS:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:QOSES-PAGE-ACCESS"],decision:function(e){return["API:QOS:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:LCRS-PAGE-ACCESS"],decision:function(e){return["API:QOS:READ","API:LCR:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:LCR-PAGE-ACCESS"],decision:function(e){return["API:QOS:READ","API:LCR:READ","API:SUPPLIER_CONNECTION:READ","API:SUPPLIER_COMMITMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CATEGORIES-PAGE-ACCESS"],decision:function(e){return["API:CATEGORY:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:WHITELIST-SIDS-PAGE-ACCESS"],decision:function(e){return["API:WHITELIST:READ","API:CLIENT_DETAILS:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:TRAFFIC-SEARCH-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:CATEGORY:READ","API:CLIENT_DETAILS:READ","API:SUPPLIER_DETAILS:READ","API:ROUTE_MANAGEMENT:READ","API:CLIENT_CONNECTION:READ","API:TRAFFIC_MANAGEMENT:READ","API:SUPPLIER_CONNECTION:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:TRAFFIC-DOCUMENTS-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:TRAFFIC_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:TRAFFIC-PAGE-ACCESS"],decision:function(e){return["FRONTEND:TRAFFIC-SEARCH-PAGE-ACCESS","FRONTEND:TRAFFIC-DOCUMENTS-PAGE-ACCESS"].some((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-SEARCH-PAGE-ACCESS"],decision:function(e){return["API:CLIENT_DETAILS:READ","API:SUPPLIER_DETAILS:READ","API:CLIENT_CONNECTION:READ","API:SUPPLIER_CONNECTION:READ","API:VIRTUAL_NUMBERS_TRAFFIC_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-DOCUMENTS-PAGE-ACCESS"],decision:function(e){return["API:VIRTUAL_NUMBERS_TRAFFIC_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CLIENT-VIRTUAL-NUMBERS-PAGE-ACCESS"],decision:function(e){return["API:VIRTUAL_NUMBER:READ","API:CLIENT_CONNECTION:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:SUPPLIER-VIRTUAL-NUMBERS-PAGE-ACCESS"],decision:function(e){return["API:VIRTUAL_NUMBER:READ","API:SUPPLIER_CONNECTION:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-PAGE-ACCESS"],decision:function(e){return["FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-SEARCH-PAGE-ACCESS","FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-DOCUMENTS-PAGE-ACCESS"].some((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:ROUTES-PAGE-ACCESS"],decision:function(e){return["API:ROUTE_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:ROUTE-RULE-PAGE-ACCESS"],decision:function(e){return["API:ROUTE_MANAGEMENT:READ","API:SUPPLIER_CONNECTION:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:PRICING-MANAGER-CLIENT-PRICE-PLANS-PAGE-ACCESS"],decision:function(e){return["API:CLIENT_DETAILS:READ","API:ROUTE_MANAGEMENT:READ","API:CLIENT_PRICE_MANAGEMENT:READ","API:TEMPLATE_PRICE_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:PRICING-MANAGER-CLIENT-PRICE-PLAN-PAGE-ACCESS"],decision:function(e){return["API:ROUTE_MANAGEMENT:READ","API:CLIENT_PRICE_MANAGEMENT:WRITE","API:TEMPLATE_PRICE_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:PRICING-MANAGER-TEMPLATES-PAGE-ACCESS"],decision:function(e){return["API:ROUTE_MANAGEMENT:READ","API:TEMPLATE_PRICE_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:PRICING-MANAGER-TEMPLATE-PAGE-ACCESS"],decision:function(e){return["API:ROUTE_MANAGEMENT:READ","API:TEMPLATE_PRICE_MANAGEMENT:WRITE"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:PRICING-MANAGER-PAGE-ACCESS"],decision:function(e){return["FRONTEND:PRICING-MANAGER-TEMPLATES-PAGE-ACCESS","FRONTEND:PRICING-MANAGER-CLIENT-PRICE-PLANS-PAGE-ACCESS"].some((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:STATISTICS-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:STATISTIC:READ","API:CLIENT_DETAILS:READ","API:ROUTE_MANAGEMENT:READ","API:SUPPLIER_DETAILS:READ","API:CLIENT_CONNECTION:READ","API:SUPPLIER_CONNECTION:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:STATISTICS-LATEST-REPORTS-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:STATISTICS_REPORTING:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:STATISTICS-SCHEDULED-REPORTS-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:STATISTICS_REPORTING:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:AUDIT-GENERAL-PAGE-ACCESS"],decision:function(e){return["API:USER:READ","API:AUDIT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:AUDIT-CLIENT-RATES-PAGE-ACCESS"],decision:function(e){return["API:CLIENT_DETAILS:READ","API:ROUTE_MANAGEMENT:READ","API:AUDIT_HISTORY_PRICE:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:AUDIT-SUPPLIER-RATES-PAGE-ACCESS"],decision:function(e){return["API:SUPPLIER_DETAILS:READ","API:SUPPLIER_CONNECTION:READ","API:AUDIT_HISTORY_SUPPLIER_RATES:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CLIENT-WALLETS-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:CLIENT_WALLET:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:CLIENT-CONNECTIONS-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:ROUTE_MANAGEMENT:READ","API:CLIENT_CONNECTION:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:CLIENT-CLIENT-PRICING-PAGE-ACCESS"],decision:function(e){return[["API:CUSTOMER_PORTAL:READ"].every((function(t){return e.includes(t)})),["API:ROUTE_MANAGEMENT:READ","API:CLIENT_PRICE_MANAGEMENT:READ","API:TEMPLATE_PRICE_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))].some((function(e){return!0===e}))}},{scopes:["FRONTEND:CLIENT-CLIENT-WHITELIST-SIDS-PAGE-ACCESS"],decision:function(e){return["API:WHITELIST:READ","API:CLIENT_DETAILS:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CLIENT-SUPPLIER-RATES-PAGE-ACCESS"],decision:function(e){return["API:SUPPLIER_RATE:READ","API:SUPPLIER_CONNECTION:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CLIENT-SUPPLIER-CONNECTIONS-PAGE-ACCESS"],decision:function(e){return["API:SUPPLIER_CONNECTION:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CLIENT-SUPPLIER-COMMITMENTS-PAGE-ACCESS"],decision:function(e){return["API:SUPPLIER_COMMITMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CLIENT-SUPPLIER-COMMITMENT-PAGE-ACCESS"],decision:function(e){return["API:SUPPLIER_COMMITMENT:READ","API:SUPPLIER_CONNECTION:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:DASHBOARD-PAGE-ACCESS"],decision:function(e){return["API:DASHBOARD:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:USER-MANAGEMENT-PAGE-ACCESS"],decision:function(e){return["API:USER:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:ROUTE-RULE-SCHEDULED-CHANGE-PAGE-ACCESS"],decision:function(e){return["API:ROUTE_MANAGEMENT:READ"].every((function(t){return e.includes(t)}))}},{scopes:["FRONTEND:CLIENT-CUSTOMER-PORTAL-ACCOUNTS-PAGE-ACCESS"],decision:function(e){return["API:CUSTOMER_PORTAL_ACCOUNTS:READ"].every((function(t){return e.includes(t)}))}}].reduce((function(e,t){return!0===t.decision(e)&&e.push.apply(e,Object(x.a)(t.scopes)),e}),e)}var La=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return new m.b;case de:return t.data.reduce((function(t,n){return null==n.audit_id?t:t.set(n.audit_id,["audit_id","uri","request","response","action","previous_value","new_value","user","ip","session_id","date"].reduce((function(e,t){var a=n[t];return null==a?e:("users"===t&&(a=["id","username"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),e.set(t,a))}),new m.b(e.get(n.audit_id))))}),e);default:return e}};var Fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return new m.b;case ye:return null==t.data.id?e:e.deleteIn([t.data.id,"customer-portal-users"]);case _e:var n=t.data,a=n.id,i=n.userIDs;return null==t.data.id?e:e.setIn([a,"customer-portal-users"],new m.e(i));case he:var c=t.data,r=c.id,s=c.wallets;return null==r?e:e.set(r,new m.b(e.get(r)).set("wallets",new m.e(s)));case pe:var l=t.data.id;return null==l?e:e.removeIn([l,"routes"]);case xe:var o=t.data,u=o.id,d=o.routeID,b=o.whitelistSIDID;return null==u?e:e.setIn([u,"routes",d,"whitelist-sid"],b);case ve:var j=t.data,f=j.id,h=j.connections;return null==f?e:e.set(f,new m.b(e.get(f)).set("connections",new m.e(h)));case fe:var p=t.data,g=p.id,O=p.routes;return null==g?e:O.reduce((function(e,t){return e.setIn([g,"routes",t],new m.b({id:t}))}),e);case Oe:var v=t.data,x=v.id,C=v.pricePlans;return null==x?e:e.set(x,new m.b(e.get(x)).set("price_plans",new m.e(C)));case Ce:var _=t.data,y=_.id,S=_.routePriceSchedules;return null==y?e:e.set(y,new m.b(e.get(y)).set("route_price_schedules",new m.e(S)));case ge:var k=t.data,w=k.id,E=k.contacts;return null==w?e:e.set(w,new m.b(e.get(w)).set("contacts",new m.e(E)));case be:return t.data.reduce((function(t,n){return null==n.client_id?t:t.set(n.client_id,["client_id","client_name","client_fields"].reduce((function(e,t){var a=n[t];return null==a?e:("client_fields"===t&&(a=n[t].reduce((function(e,t){var n=t.value;return null==n?e:e.set(t.field_id,n)}),new m.b)),e.set(t,a))}),new m.b(e.get(n.client_id))))}),e);default:return e}};var Ua={open:!1};var qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae:return new m.b;case Pe:var n=t.data,a=n.id,i=n.contacts;return null==a?e:e.set(a,new m.b(e.get(a)).set("contacts",new m.e(i)));case Ue:var c=t.data,r=c.id,s=c.virtualNumbers;return null==r?e:e.set(r,new m.b(e.get(r)).set("virtual-numbers",new m.e(s)));case Le:var l=t.data,o=l.id,u=l.connections;return null==o?e:e.set(o,new m.b(e.get(o)).set("connections",new m.e(u)));case Fe:var d=t.data,b=d.id,j=d.commitments;return null==b?e:e.set(b,new m.b(e.get(b)).set("commitments",new m.e(j)));case Re:return t.data.reduce((function(t,n){return null==n.supplier_id?t:t.set(n.supplier_id,["supplier_id","supplier_name","supplier_fields"].reduce((function(e,t){var a=n[t];return null==a?e:("supplier_fields"===t&&(a=n[t].reduce((function(e,t){var n=t.value;return null==n?e:e.set(t.field_id,n)}),new m.b)),e.set(t,a))}),new m.b(e.get(n.supplier_id))))}),e);default:return e}};var Ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return new m.b;case se:return t.data.reduce((function(t,n){return null==n.audit_id?t:t.set(n.audit_id,["audit_id","route","client","network_id","country_id","price_currency","price","active_from","active_to","isactive","charge_on_status","charge_on_status_enabled"].reduce((function(e,t){var a=n[t];return null==a?e:("client"===t&&(a=["client_id","client_name"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),"route"===t&&(a=["route_id","route_name"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),e.set(t,a))}),new m.b(e.get(n.audit_id))))}),e);default:return e}};var Ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return new m.b;case oe:return t.data.reduce((function(t,n){return null==n.audit_id?t:t.set(n.audit_id,["audit_id","supplier","network_id","supplier_connection","country_id","currency","cost","active_from","active_to","isactive"].reduce((function(e,t){var a=n[t];return null==a?e:("supplier"===t&&(a=["supplier_id","supplier_name"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),"supplier_connection"===t&&(a=["supplier_connection_id","supplier_connection_name"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),e.set(t,a))}),new m.b(e.get(n.audit_id))))}),e);default:return e}};var Ba=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Aa.c,Va=Object(Aa.b)({qos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:return new m.b;case ot:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","lookBackMin","deliveryRate","minTrafficVolume"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},lcr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return new m.b;case bt:var n=t.data,a=n.id,i=n.connections;return null==a?e:e.set(a,new m.b(e.get(a)).set("connections",new m.e(i)));case jt:var c=t.data,r=c.id,s=c.commitments;return null==r?e:e.set(r,new m.b(e.get(r)).set("commitments",new m.e(s)));case dt:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","load_sharing_rate","qos_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},dlr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dn:return new m.b;case un:return t.data.reduce((function(e,t){if(null==t.message_id)return e;var n=e.get(t.message_id);return null==n&&(n=new m.e),e.set(t.message_id,n.add(["message_id","error_code","dlr_message","processed_time","received_time","remote_message_id","status","supplier_connection_link_name","supplier_message_id","is_smsc_delivery_report"].reduce((function(e,n){var a=t[n];return null==a?e:e.set(n,a)}),new m.b)))}),e);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ln:return new m.b;case qn:var n=t.data.id;return null==n?e:e.deleteIn([n,"access-groups"]);case Gn:var a=t.data.id;return null==a?e:e.deleteIn([a,"access-rights"]);case Fn:var i=t.data,c=i.id,r=i.accessGroups;return null==c?e:r.reduce((function(t,n){return null==n.id?t:t.setIn([c,"access-groups",n.id],["id","type"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.getIn([c,"access-groups",n.id]))))}),e);case Un:var s=t.data,l=s.id,o=s.accessRights;return null==l?e:o.reduce((function(t,n){return null==n.id?t:t.setIn([l,"access-rights",n.id],["id","access-level","access-groups"].reduce((function(e,t){var a=n[t];return null==a?e:("access-groups"===t&&(a=new m.e(a)),e.set(t,a))}),new m.b(e.getIn([l,"access-rights",n.id]))))}),e);case Pn:return t.data.reduce((function(t,n){return null==n.user_id?t:t.set(n.user_id,["user_id","ldap_id","suspended","ldap_user_fields"].reduce((function(e,t){var a=n[t];return null==a?e:("ldap_user_fields"===t&&(a=new m.e(a.map((function(e){return new m.b(e)})))),e.set(t,a))}),new m.b(e.get(n.user_id))))}),e);default:return e}},rule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return new m.b;case F:return t.data.reduce((function(t,n){return null==n.category_rule_id?t:t.set(n.category_rule_id,["category_rule_id","sid","content"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.category_rule_id))))}),e);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){default:return e;case M:return["misc","scope","group","username","token_type","expires_in","authorities","access_token","refresh_token"].reduce((function(e,n){var a=t.data[n];return null==a?e:("authorities"===n&&(a=new m.e(Pa(a.map((function(e){return"API:".concat(e)}))))),!0===["group","scope"].includes(n)&&(a=new m.e(a)),!0===["misc"].includes(n)&&(a=["customer_client_id"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),e.set(n,a))}),e);case N:return new m.b}},audit:La,route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gt:return new m.b;case _t:return null==t.data.id?e:e.deleteIn([t.data.id,"countries"]);case Ct:var n=t.data,a=n.id,i=n.countryID,c=n.mnpProvider;return null==a?e:e.set(a,new m.b(e.get(a)).setIn(["countries",i],new m.b({mnp_provider:c})));case Ot:var r=t.data,s=r.id,l=r.networkID,o=r.rules;return null==s?e:e.setIn([s,"networks",l,"rules"],new m.e(o));case vt:var u=t.data,d=u.id,b=u.networks;return null==d?e:b.reduce((function(e,t){var n=t.summary,a=t.id;return e.setIn([d,"networks",a],new m.b({summary:n,id:a}))}),e);case pt:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","description"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},field:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object.assign({},e,Object(C.a)({},t.data.namespace,t.data.fields));case A:var n=Object.assign({},e);return delete n[t.data.namespace],n;default:return e}},alerts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){default:return e;case re:return e.shift();case ce:return e.push(["message","duration","severity","action"].reduce((function(e,n){var a=t.data[n];return null==a||"action"===n&&null==a.label?e:e.set(n,a)}),new m.b))}},client:Fa,traffic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:return new m.b;default:return e}},network:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return new m.b;case te:return t.data.reduce((function(t,n){return null==n.network_id?t:t.set(n.network_id,["mccmnc","network_id","country_id","network_name"].reduce((function(e,t){var a=n[t];return null==a?e:("mccmnc"===t&&(a=new m.a(n[t].map((function(e){return new m.b(e)})))),e.set(t,a))}),new m.b(e.get(n.network_id))))}),e);default:return e}},country:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return new m.b;case Z:return t.data.reduce((function(t,n){return null==n.country_id?t:t.set(n.country_id,["mcc","country_id","country_name","iso_code"].reduce((function(e,t){var a=n[t];return null==a?e:("mcc"===t&&(a=new m.a(n[t])),e.set(t,a))}),new m.b(e.get(n.country_id))))}),e);default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){default:return e;case ae:return Object.assign({},{open:!0});case ie:return Object.assign({},{open:!1})}},timezone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return new m.e;case X:return new m.e(t.data);default:return e}},ldapUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Bn:return new m.b;case Hn:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","active","domain","ldap_user_fields"].reduce((function(e,t){var a=n[t];return null==a?e:("ldap_user_fields"===t&&(a=new m.e(a.map((function(e){return new m.b(e)})))),e.set(t,a))}),new m.b(e.get(n.id))))}),e);default:return e}},supplier:qa,currency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return new m.b;case Y:return t.data.reduce((function(t,n){return null==n.currency?t:t.set(n.currency,["currency","settings"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.currency))))}),e);default:return e}},template:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xn:return new m.b;case Cn:var n=t.data,a=n.id,i=n.networkPrices;return null==a?e:i.reduce((function(e,t){return null==t.network_id?e:e.setIn([a,"prices",t.network_id],new m.b({id:t.id,type:t.type,cost:t.cost,notes:t.notes,value:t.value,min_price:t.min_price,network_id:t.network_id,dp_rounding:t.dp_rounding,charge_on_status:t.charge_on_status,charge_on_status_enabled:t.charge_on_status_enabled}))}),e);case vn:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","route_id","currency_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},routeRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rt:return null==t.data.ruleID?e:e.deleteIn([t.data.ruleID,"history"]);case Mt:return new m.b;case xt:var n=t.data,a=n.id,i=n.lcr;return null==a?e:e.set(a,new m.b(e.get(a)).set("lcr",i));case yt:var c=t.data,r=c.id,s=c.connections;return null==r?e:e.set(r,new m.b(e.get(r)).set("connections",new m.e(s)));case kt:var l=t.data,o=l.id,u=l.conditions;return null==o?e:e.set(o,new m.b(e.get(o)).set("category_conditions",new m.e(u)));case wt:var d=t.data,b=d.id,j=d.conditions;return null==b?e:e.set(b,new m.b(e.get(b)).set("commitment_conditions",new m.e(j)));case Et:var f=t.data,h=f.id,p=f.conditions;return null==h?e:e.set(h,new m.b(e.get(h)).set("time_based_conditions",new m.e(p)));case St:var g=t.data,O=g.id,v=g.conditions;return null==O?e:e.set(O,new m.b(e.get(O)).set("qos_conditions",new m.e(v)));case Nt:var x=t.data,C=x.id,_=x.changes;return null==t.data.id?e:e.setIn([C,"history"],_.reduce((function(e,t){return null==t.schedule_id?e:e.push(["action","status","conditions","schedule_id","scheduled_date"].reduce((function(e,n){var a=t[n];return null==a?e:e.set(n,a)}),new m.b))}),new m.a));case Tt:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","type","summary","priority","next_scheduled_change"].reduce((function(e,t){var a=n[t];return null==a?e:("next_scheduled_change"===t&&(a=["action","schedule_id","scheduled_date"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),e.set(t,a))}),new m.b(e.get(n.id))))}),e);default:return e}},ldapGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xn:return new m.b;case Qn:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},accessGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zn:return new m.b;case Wn:var n=t.data,a=n.id,i=n.ldapGroups;return null==a?e:e.setIn([a,"ldap-groups"],new m.e(i));case Jn:var c=t.data,r=c.id,s=c.accessRights;return null==r?e:s.reduce((function(t,n){return null==n.id?t:t.setIn([r,"access-rights",n.id],["id","access-level"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.getIn([r,"access-rights",n.id]))))}),e);case Kn:var l=t.data.id;return null==l?e:e.deleteIn([l,"ldap-groups"]);case Yn:var o=t.data.id;return null==o?e:e.deleteIn([o,"access-rights"]);case Vn:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","deleted"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},mnpProvider:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:return new m.b;case It:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},whitelistSID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case In:return new m.b;case Dn:var n=t.data,a=n.id,i=n.sidIDs;return null==a?e:e.set(a,new m.b(e.get(a)).set("sids",new m.e(i)));case Tn:var c=t.data,r=c.id,s=c.clientIDs;return null==r?e:e.set(r,new m.b(e.get(r)).set("clients",new m.e(s)));case En:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","last_modified_on"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},clientWallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return new m.b;case Me:return t.data.reduce((function(t,n){return null==n.wallet_id?t:t.set(n.wallet_id,["credits","currency","wallet_id","suspended","last_alarm","wallet_type","last_top_up","credit_limit","last_changed"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.wallet_id))))}),e);default:return e}},subsidiaries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sa:return new m.b;case ra:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","is_default","subsidiary_name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},salesRegions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oa:return new m.b;case la:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","is_default","region_name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},httpProvider:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case da:return new m.b;case ba:var n=t.data.id;return null==n?e:e.deleteIn([n,"fields"]);case ma:var a=t.data,i=a.id,c=a.fields;return null==i?e:e.setIn([i,"fields"],c.reduce((function(e,t){return e.add(["field_id","editable","required","field_type","field_name"].reduce((function(e,n){var a=t[n];return null==a?e:e.set(n,a)}),new m.b))}),new m.e));case ua:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},trafficExport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt:return new m.b;case zt:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","link","username","requested_time","status"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.username))))}),e);default:return e}},clientContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return new m.b;case ke:return t.data.reduce((function(t,n){return null==n.contact_id?t:t.set(n.contact_id,["contact_id","contact_name","contact_email","contact_type_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.contact_id))))}),e);default:return e}},virtualNumbers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return new m.b;case G:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","msisdn","supplier"].reduce((function(e,t){var a=n[t];return null==a?e:("supplier"===t&&(a=new m.b({id:a.id,name:a.name})),e.set(t,a))}),new m.b(e.get(n.id))))}),e);default:return e}},categorisation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return new m.b;case B:var n=t.data,a=n.id,i=n.sids;return null==a?e:e.set(a,new m.b(e.get(a)).set("sids",new m.e(i)));case V:var c=t.data,r=c.id,s=c.contents;return null==r?e:e.set(r,new m.b(e.get(r)).set("contents",new m.e(s)));case ft:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","profiling","priority","category_type","last_updated"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},auditClientRate:Ga,whitelistSIDSID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nn:return new m.b;case Mn:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","value","match_type","case_sensitive","last_modified_on"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},supplierContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nt:return new m.b;case tt:return t.data.reduce((function(t,n){return null==n.contact_id?t:t.set(n.contact_id,["contact_id","contact_name","contact_email","contact_type_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.contact_id))))}),e);default:return e}},clientPricePlan:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bn:return new m.b;case jn:var n=t.data,a=n.id,i=n.networkPrices;return null==a?e:i.reduce((function(e,t){return null==t.network_id?e:e.setIn([a,"prices",t.network_id],new m.b({id:t.id,type:t.type,cost:t.cost,notes:t.notes,value:t.value,price:t.price,min_price:t.min_price,network_id:t.network_id,dp_rounding:t.dp_rounding,template_type:t.template_type,charge_on_status:t.charge_on_status,charge_on_status_enabled:t.charge_on_status_enabled}))}),e);case mn:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","value","route_id","currency_id","template_id","charge_on_status","notification_period","template_inherit_all","charge_on_status_enabled"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},trafficStatuses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt:return new m.b;case Yt:return t.data.reduce((function(t,n){return null==n.code?t:t.set(n.code,["code","description","charge_on_status","charge_on_status_default"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.code))))}),e);default:return e}},systemVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ja:return Object.assign({},e,t.data);case fa:return{};default:return e}},clientConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return new m.b;case Se:return e.setIn([t.data.connectionID,"token_masked"],t.data.tokenMasked);case Te:var n=t.data.id;return null==n?e:e.deleteIn([n,"virtual-numbers"]);case De:var a=t.data,i=a.id,c=a.virtualNumbers;return null==i?e:e.setIn([i,"virtual-numbers"],new m.e(c));case Ee:return t.data.reduce((function(t,n){return null==n.connection_id?t:t.set(n.connection_id,["mps","note","name","active","route_id","password","system_id","route_name","token_masked","connection_id","maximum_binds","connection_name","connection_type","delivery_report","allowed_ip_list","default_alphabet","connection_active"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.connection_id))))}),e);default:return e}},routeRuleSchedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ta:return new m.b;case aa:return null==t.data.id?e:e.deleteIn([t.data.id,"details"]);case ea:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","type","user","route","status","action","rule_id","conditions","network_id","creation_date","scheduled_date","additional_info"].reduce((function(e,t){var a=n[t];return null==a?e:(["route","user"].includes(t)&&(a=new m.b({id:a.id,name:a.name})),e.set(t,a))}),new m.b(e.get(n.id))))}),e);case na:var n=t.data,a=n.id,i=n.details;return null==t.data.id?e:e.setIn([a,"details"],new m.b({old:i.old,new:i.new}));default:return e}},trafficErrorCodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case en:return new m.b;case Zt:return t.data.reduce((function(t,n){return null==n.code?t:t.set(n.code,["code","description"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.code))))}),e);default:return e}},accessRightModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zn:return new m.b;case $n:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},clientContactType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return new m.b;case P:return t.data.reduce((function(t,n){return null==n.contact_type_id?t:t.set(n.contact_type_id,["contact_type_id","contact_type_name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.contact_type_id))))}),e);default:return e}},auditSupplierRate:Ha,supplierConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return new m.b;case He:var n=t.data,a=n.id,i=n.links;return null==a?e:e.set(a,new m.b(e.get(a)).set("links",new m.e(i)));case Ve:return null==t.data.connectionID||null==t.data.networkID?e:e.deleteIn([t.data.id,"history",t.data.networkID]);case Be:return null==t.data.connectionID||null==t.data.networkID?e:e.setIn([t.data.connectionID,"history",t.data.networkID],t.data.prices.reduce((function(e,t){return null==t.schedule_id?e:e.push(["date","price","schedule_id"].reduce((function(e,n){var a=t[n];return null==a?e:e.set(n,a)}),new m.b))}),new m.a));case We:return null==t.data.id?e:e.deleteIn([t.data.id,"prices"]);case ze:var c=t.data,r=c.id,s=c.data;return null==r?e:e.setIn([r,"prices"],s.reduce((function(e,t){return null==t.network_id?e:e.set(t.network_id,["price","network_id","schedule_id","next_price_change"].reduce((function(e,n){var a=t[n];return null==a?e:("next_price_change"===n&&(a=["price","schedule_id","scheduled_date"].reduce((function(e,t){var n=a[t];return null==n?e:e.set(t,n)}),new m.b)),e.set(n,a))}),new m.b))}),new m.b));case Je:return null==t.data.id?e:e.deleteIn([t.data.id,"import_settings"]);case Ke:var l=t.data,o=l.id,u=l.settings;return null==o?e:e.setIn([o,"import_settings"],["subject","filename","time_zone","properties","time_format","file_format","mcc_location","mnc_location","sender_email","data_location","mccmnc_format","csv_delimiter","decimal_separator","receiver_email","currency_format","mccmnc_delimiter","subject_operator","currency_location","filename_operator","new_rate_location","notification_email","rate_fail_on_errors","rate_replace_prices","global_default_rate_location","sheet_activation_date_location","network_activation_date_location"].reduce((function(e,t){var n=u[t];return null==n?e:(!0===["notification_email"].includes(t)&&(n=new m.e(n)),e.set(t,n))}),new m.b));case qe:return t.data.reduce((function(t,n){return null==n.connection_id?t:t.set(n.connection_id,["supplier_id","connection_id","connection_name","connection_type","connection_currency","missing_rate_traffic","support_virtual_number"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.connection_id))))}),e);default:return e}},supplierCommitment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return new m.b;case st:var n=t.data,a=n.id,i=n.networks;return null==a?e:e.set(a,new m.b(e.get(a)).set("networks",new m.e(i)));case lt:var c=t.data,r=c.id,s=c.connections;return null==r?e:e.set(r,new m.b(e.get(r)).set("connections",new m.e(s)));case ct:return t.data.reduce((function(t,n){return null==n.commitment_id?t:t.set(n.commitment_id,["commitment_id","commitment_name","commitment_cost","commitment_date","commitment_volume","commitment_period","commitment_currency"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.commitment_id))))}),e);default:return e}},customerPortalUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ca:return new m.b;case ia:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","name","email","status","username","ip_from_last_login","last_successful_login"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},supplierContactType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return new m.b;case K:return t.data.reduce((function(t,n){return null==n.contact_type_id?t:t.set(n.contact_type_id,["contact_type_id","contact_type_name"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.contact_type_id))))}),e);default:return e}},routeRuleConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Vt:return new m.b;case Bt:return t.data.reduce((function(t,n){return null==n.connection_id?t:t.set(n.connection_id,["connection_id","ratio"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.connection_id))))}),e);default:return e}},supplierSiteCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return new m.b;case z:return t.data.reduce((function(e,t){return""===t.site_id?e:e.set(t.site_name,["site_id","site_name"].reduce((function(e,n){var a=t[n];return null==a?e:e.set(n,a)}),new m.b))}),e);default:return e}},supplierRateSchedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:var n=t.data,a=n.id,i=n.data;return null==a?e:e.setIn([a,"prices"],i.reduce((function(e,t){return null==t.network_id?e:e.set(t.network_id,["info","status","new_price","network_id","current_price","scheduled_date"].reduce((function(e,n){var a=t[n];return null==a?e:e.set(n,a)}),new m.b))}),new m.b));case $e:return null==t.data.id?e:e.deleteIn([t.data.id,"prices"]);case Qe:return new m.b;case Ye:return t.data.reduce((function(e,t){return null==t.schedule_id?e:["type","info","status","schedule_id","created_date","connection_id","scheduled_date","connection_name","connection_currency"].reduce((function(e,n){var a=t[n];return null==a?e:(!0===["info","status","scheduled_date"].includes(n)&&(a=new m.e(a)),e.setIn([t.schedule_id,n],a))}),e)}),e);default:return e}},whitelistSIDSIDStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case An:return new m.b;case Rn:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","status","file_name","uploaded_on","whitelist_name","error_summary"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},statisticsShareReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case on:return new m.b;case ln:return t.data.reduce((function(t,n){return null==n.shared_search_id?t:t.set(n.shared_search_id,["shared_search","shared_search_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.saved_search_id))))}),e);default:return e}},statisticsSavedReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cn:return new m.b;case an:return t.data.reduce((function(t,n){return null==n.saved_search_id?t:t.set(n.saved_search_id,["saved_search_id","saved_search_name","created_on","saved_search"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.saved_search_id))))}),e);default:return e}},routeRuleQOSCondition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:return new m.b;case Gt:return t.data.reduce((function(t,n){return null==n.condition_qos_id?t:t.set(n.condition_qos_id,["condition_qos_id","qos_id","connection_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.condition_qos_id))))}),e);default:return e}},templatePriceSchedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yn:return new m.b;case Sn:var n=t.data,a=n.id,i=n.date;return null==a?e:e.setIn([a,"schedule_date"],i);case kn:var c=t.data,r=c.id,s=c.status;return null==r?e:e.setIn([r,"status"],s);case wn:var l=t.data,o=l.id,u=l.scheduledPrices;return null==o?e:u.reduce((function(e,t){return null==t.network_id?e:e.setIn([o,"prices",t.network_id],new m.b({type:t.type,notes:t.notes,value:t.value,min_price:t.min_price,country_id:t.country_id,network_id:t.network_id,dp_rounding:t.dp_rounding,charge_on_status:t.charge_on_status,charge_on_status_enabled:t.charge_on_status_enabled}))}),e);case _n:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","status","created_on","template_id","no_of_changes","scheduled_for","error_summary","charge_on_status","charge_on_status_enabled"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},supplierVirtualNumber:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:return new m.b;case at:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","msisdn","client","client_connection"].reduce((function(e,t){var a=n[t];return null==a?e:(["client","client_connection"].includes(t)&&(a=new m.b({id:a.id,name:a.name})),e.set(t,a))}),new m.b(e.get(n.id))))}),e);default:return e}},statisticsLatestReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nn:return new m.b;case tn:return t.data.reduce((function(t,n){return null==n.report_id?t:t.set(n.report_id,["status","report_id","created_on","report_name","download_link"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.report_id))))}),e);default:return e}},supplierConnectionLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case et:return new m.b;case Ze:return t.data.reduce((function(t,n){return null==n.link_id?t:t.set(n.link_id,["host","note","port","is_ssl","active","link_id","site_id","password","system_id","link_name","system_type","provider_id","connection_type","provider_fields","default_alphabet","optional_settings"].reduce((function(e,t){var a=n[t];return null==a?e:("provider_fields"===t&&(a=n[t].reduce((function(e,t){var n=t.value;return null==n?e:e.set(t.field_id,n)}),new m.b)),e.set(t,a))}),new m.b(e.get(n.link_id))))}),e);default:return e}},clientRoutePriceSchedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hn:return new m.b;case pn:var n=t.data,a=n.id,i=n.date;return null==a?e:e.setIn([a,"schedule_for"],i);case gn:var c=t.data,r=c.id,s=c.status;return null==r?e:e.setIn([r,"status"],s);case On:var l=t.data,o=l.id,u=l.scheduledPrices;return null==o?e:u.reduce((function(e,t){return null==t.network_id?e:e.setIn([o,"prices",t.network_id],new m.b({type:t.type,notes:t.notes,value:t.value,price:t.price,min_price:t.min_price,country_id:t.country_id,network_id:t.network_id,dp_rounding:t.dp_rounding,charge_on_status:t.charge_on_status,charge_on_status_enabled:t.charge_on_status_enabled}))}),e);case fn:return t.data.reduce((function(t,n){return null==n.id?t:t.set("".concat(n.id,"\u200b-").concat(n.route_id,"\u200b"),["id","status","route_id","created_on","change_type","no_of_changes","scheduled_for","route_price_id","charge_on_status","notification_sent","charge_on_status_enabled"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.id))))}),e);default:return e}},statisticsScheduledReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return new m.b;case rn:return t.data.reduce((function(t,n){return null==n.schedule_id?t:t.set(n.schedule_id,["send_email","schedule_id","report_name","schedule_day","generate_csv","generate_pdf","render_report","schedule_time","attach_export","search_details","schedule_frequency"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.schedule_id))))}),e);default:return e}},routeRuleCategoryCondition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return new m.b;case Ut:return t.data.reduce((function(t,n){return null==n.category_condition_id?t:t.set(n.category_condition_id,["category_condition_id","category_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.category_condition_id))))}),e);default:return e}},routeRuleTimeBasedCondition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pt:return new m.b;case At:return t.data.reduce((function(t,n){return null==n.condition_time_based_id?t:t.set(n.condition_time_based_id,["condition_time_based_id","to_hours","to_minutes","from_hours","from_minutes"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.condition_time_based_id))))}),e);default:return e}},virtualNumbersTrafficStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $t:return new m.b;case Xt:return t.data.reduce((function(t,n){return null==n.code?t:t.set(n.code,["code","description"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.code))))}),e);default:return e}},virtualNumbersTrafficExport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return new m.b;case Kt:return t.data.reduce((function(t,n){return null==n.id?t:t.set(n.id,["id","link","username","requested_time","status"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.username))))}),e);default:return e}},routeRuleCommitmentCondition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return new m.b;case Lt:return t.data.reduce((function(t,n){return null==n.condition_commitment_id?t:t.set(n.condition_commitment_id,["condition_commitment_id","commitment_id"].reduce((function(e,t){var a=n[t];return null==a?e:e.set(t,a)}),new m.b(e.get(n.condition_commitment_id))))}),e);default:return e}}}),za=Object(Aa.d)(Va,Ba(Object(Aa.a)(Ra.a))),Wa=n(62),Ka=n(1),Ja=function(e,t){return Object(v.a)(Object(v.a)({},e),t)};function Ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!0===t.some((function(t){return null!=Object(d.g)(e,{path:t,exact:!0})})))return!0;for(var a=0;a<n.length;a++){var i=n[a],c=i.route,r=i.match,s=void 0===r?[]:r,l=i.items,o=void 0===l?[]:l;if(!0===Ya(e,[c].concat(Object(x.a)(s)),o))return!0}return!1}function Qa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignore,a=void 0===n?[]:n;return Object.keys(e).reduce((function(e,t){if(!0===a.includes(t))return e;var n=e.controls[t],i=ei(n.value,n.validation);return""!==i?(n.valid=!1,n.validationMessage=n.elementConfig.placeholder+i,e.invalidMessages.push(n.validationMessage)):(n.valid=!0,n.validationMessage=""),e}),{invalidMessages:[],controls:Object.assign({},e)})}function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var n=t.value,a=t.label,i=t.setErrors,c=t.validations,r=ei(n,c);if(""===r)return e;var s="".concat(a," ").concat(r);return e.push(s),"function"===typeof i&&i([s]),e}),[])}function $a(e){return/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*(\/(\d|[1-2]\d|3[0-2]))?$)|(^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*(\/(\d){1,3})?$))/.test(e)}var Za=function(e,t){if(t){if(t.required&&(null==e||""===e.toString().trim()))return" is a required field";if(t.isPassword&&!0!==function(e){return/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/.test(e)}(e))return" is not a valid Password. It needs to contain a capital letter, a number and a symbol";if(t.isEmail&&(!1!==t.required||""!==e&&null!=e)&&!0!==function(e){return/^((([!#$%&'*+\-/=?^_`{|}~\w])|([!#$%&'*+\-/=?^_`{|}~\w][!#$%&'*+\-/=?^_`{|}~.\w]{0,}[!#$%&'*+\-/=?^_`{|}~\w]))[@]\w+([-.]\w+)*\.\w+([-.]\w+)*)$/.test(e)}(e))return" is not a valid Email Address";if(t.isURL&&(!1!==t.required||""!==e&&null!=e)&&!0!==function(e){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/.test(e)}(e))return" is not a valid URL";if(t.isIP&&!0!==$a(e))return" is not a valid IP Address";if(t.isDomain&&!0!==$a(e)&&!0!==function(e){return/^((?=[a-z0-9-]{1,63}\.)[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,4}$/.test(e)}(e))return" is not a valid Domain or IP Address";if(t.isGT&&null!=e&&""!==e.toString().trim()&&!0!==function(e){return/^[a-eA-E0-9]+$/.test(e)}(e))return" is not a valid GT";if(t.isSid&&(!1!==t.required||""!==e)&&!0!==function(e){return/^[0-9a-eA-E]{1,20}$/.test(e)||/(?:^(?:[-\]\\\\@_\xa3$^{}[~|\u20ac!"#%&()*+,.:;<=>?\x20\x{00A1}\x{00A4}\x{00A5}\x{00A7}\x{00BF}\x{00C4}\x{00C5}\x{00C6}\x{00C7}\x{00CA}\x{00D1}\x{00D6}\x{00D8}\x{00DC}\x{00DF}\x{00E0}\x{00E4}\x{00E5}\x{00E6}\x{00E8}\x{00E9}\x{00EC}\x{00F1}\x{00F2}\x{00F6}\x{00F8}\x{00FA}\x{00FC}\x{0393}\x{0394}\x{0398}\x{039B}\x{039E}\x{03A0}\x{03A3}\x{03A6}\x{03A8}\x{03A9}\r\nA-Za-z0-9]){1,11}$)/.test(e)}(e))return" is not a valid SID";if(null!=e&&null!=t.validFileTypes){var n=t.validFileTypes.includes(e.type),a=t.validFileTypes.some((function(t){return e.name.endsWith(t)}));if(!1===n&&!1===a)return"Invalid file type"}if(t.isRealm&&""!==e.toString().trim()&&!0!==function(e){return/^epc\.mnc[0-9]{3}\.mcc[0-9]{3}$/.test(e)}(e))return" is not valid must be in the form epc.mnc000.mcc000";if(t.minLength&&null!=e&&""!==e.toString().trim()&&e.toString().length<t.minLength)return" is too short: Minimum "+t.minLength+" characters";if(t.maxLength&&null!=e&&e.toString().length>t.maxLength)return" is too Long: Maximum "+t.maxLength+" characters";if(t.isNumeric&&null!=e&&""!==e.toString().trim()){if(!0!==function(e){return/^-?\d+(\.\d{1,})?$/.test(e)}(e))return" must be numeric";if(null!=t.minValue&&e<t.minValue)return" must be greater than "+t.minValue;if(null!=t.maxValue&&e>t.maxValue)return" must be less than "+t.maxValue}if(t.isBoolean&&!1===["true","false"].includes(e))return" must be a boolean (i.e. 'true' or 'false')";if(t.pattern&&!1===t.pattern.test(e))return" is invalid"}return""},ei=function(e,t){if(Array.isArray(e)){var n="";return!0===t.required&&0===e.length&&(n=" is a required field"),e.forEach((function(e){n=Za(e,t)})),n}return Za(e,t)},ti=function(e){return{Accept:"application/json","Cache-Control":"no-cache",Authorization:"Bearer ".concat(e),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};function ni(e){var t={};return null!=e.take&&null!=e.skip&&(t.size=e.take,t.page=e.skip/e.take),null!=e.filter&&e.filter.filters.forEach((function(e){var n=(Array.isArray(e.value)?e.value:[e.value]).reduce((function(e,t){return null==t||""===t||e.push(t instanceof Date?new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())).getTime():t),e}),[]).join(",");null!=n&&""!==n&&(t[e.field]=n)})),null!=e.sort&&e.sort.forEach((function(e){null==t.sort&&(t.sort={}),t.sort[e.field]=e.dir})),t}function ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.includeSpecialCountries,a=void 0===n||n,i=["Rest of the World"];return(!0===a?e:e.filter((function(e){return!1===i.includes(e.name)}))).sort((function(e,t){return i.includes(e.name)?-1:i.includes(t.name)||e.name>t.name?1:-1}))}function ii(e,t){var n=e.type,a=e.value,i=e.cost,c=e.dp_rounding,r=e.min_price,s=void 0===r?0:r,l=null;if(null==a||null==i)return null;switch(n){case t.FIXED.id:l=s>a?s-i:a-i;break;case t.COST_MARGIN.id:l=s>i+a?s-i:a;break;case t.PERCENTAGE_MARGIN.id:var o=i+i*a;l=s>o?s-i:o-i}return null==l?null:null==c?l:l.toFixed(c)}function ci(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.required,a=void 0!==n&&n,i=t.defaultValue,c=void 0===i?null:i;!0!==e.elementConfig.disabled&&(e.valid=!0,e.value=c,e.validationMessage="",e.elementConfig.disabled=!0,e.validation.required=a)}function ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.defaultValue,a=t.required,i=void 0===a||a;!1!==e.elementConfig.disabled&&(e.valid=!0,e.validationMessage="",e.validation.required=i,e.elementConfig.disabled=!1),void 0!==n&&(e.value=n)}function si(e,t){var n=new Date;return n.setHours(e),n.setMinutes(t),{hours:n.getUTCHours(),minutes:n.getUTCMinutes()}}function li(e,t){var n=new Date;return n.setUTCHours(e),n.setUTCMinutes(t),{hours:n.getHours(),minutes:n.getMinutes()}}function oi(){for(var e=new Date,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=n[0],c=void 0===i?e.getUTCFullYear():i,r=n[1],s=void 0===r?e.getUTCMonth():r,l=n[2],o=void 0===l?e.getUTCDate():l,u=n[3],d=void 0===u?e.getUTCHours():u,m=n[4],b=void 0===m?e.getUTCMinutes():m,j=n[5],f=void 0===j?e.getUTCSeconds():j,h=n[6],p=void 0===h?e.getUTCMilliseconds():h;return new Date(Date.UTC(c,s,o,d,b,f,p))}function ui(e){var t=function(e){return("0"+e).slice(-2)},n=e.getUTCFullYear(),a=t(e.getUTCMonth()+1),i=t(e.getUTCDate()),c=t(e.getUTCHours()),r=t(e.getUTCMinutes()),s=t(e.getUTCSeconds());return"".concat(n,"-").concat(a,"-").concat(i," ").concat(c,":").concat(r,":").concat(s)}var di,mi,bi=null;function ji(){return(ji=Object(Na.a)(Ma.a.mark((function e(){return Ma.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==bi){e.next=2;break}return e.abrupt("return",bi);case 2:return bi=za.dispatch(ka()).then((function(){return bi=null,ti(za.getState().auth.get("access_token"))})).catch((function(e){throw bi=null,e})),e.abrupt("return",bi);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fi(){return[function(e){return function(){return ji.apply(this,arguments)}().then((function(t){return Object.assign({},e,{headers:t})}))}]}function hi(e){return[function(e){return e},function(t){if(null==t.response)throw t;if(401!==t.response.status){if(503===t.response.status)throw za.dispatch(ya()),new Error("Internal Server Error, kindly contact an Administrator");throw t}return e.request(t.config)}]}var pi=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/definitions")});(di=pi.interceptors.request).use.apply(di,Object(x.a)(fi())),(mi=pi.interceptors.response).use.apply(mi,Object(x.a)(hi(pi)));var gi=pi;function Oi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{type:R,data:{fields:n,namespace:e}}}function vi(e){return{data:{namespace:e},type:A}}function xi(e){return function(t){return gi.get(e).then((function(n){t(Oi.apply(void 0,[e].concat(Object(x.a)(n.data.fields))))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function Ci(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:P,data:t}}var _i,yi,Si=function(){return function(e){return gi.get("/client-contact-types").then((function(t){e(Ci.apply(void 0,Object(x.a)(t.data.contact_types)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ki=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/virtual-numbers")});(_i=ki.interceptors.request).use.apply(_i,Object(x.a)(fi())),(yi=ki.interceptors.response).use.apply(yi,Object(x.a)(hi(ki)));var wi=ki;function Ei(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:G,data:t}}function Ii(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:K,data:t}}var Di=function(){return{type:J}},Ti=function(){return function(e){return gi.get("/supplier-contact-types").then((function(t){e(Ii.apply(void 0,Object(x.a)(t.data.contact_types)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Mi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:z,data:t}}var Ni,Ri,Ai=function(){return{type:W}},Pi=function(){return function(e){return gi.get("/sites").then((function(t){e(Mi.apply(void 0,Object(x.a)(t.data.sites)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Li=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/utils")});(Ni=Li.interceptors.request).use.apply(Ni,Object(x.a)(fi())),(Ri=Li.interceptors.response).use.apply(Ri,Object(x.a)(hi(Li)));var Fi=Li;function Ui(e){return{type:ce,data:{message:e.message,duration:e.duration,severity:e.severity,action:null==e.action?null:{label:e.action.label,onClick:e.action.onClick}}}}function qi(){return{type:ae}}function Gi(){return{type:ie}}function Hi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Y,data:t}}var Bi,Vi,zi=function(){return function(e){return gi.get("/currencies/settings").then((function(t){e(Hi.apply(void 0,Object(x.a)(t.data.currency_settings)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Wi=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/destinations")});(Bi=Wi.interceptors.request).use.apply(Bi,Object(x.a)(fi())),(Vi=Wi.interceptors.response).use.apply(Vi,Object(x.a)(hi(Wi)));var Ki=Wi;function Ji(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:X,data:t}}var Yi=function(){return function(e){return Ki.get("/timezones").then((function(t){return e(Ji.apply(void 0,Object(x.a)(t.data.time_zones))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Qi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Z,data:t}}function Xi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:te,data:t}}var $i,Zi,ec=function(){return function(e){return Ki.get("/networks").then((function(t){return e(Xi.apply(void 0,Object(x.a)(t.data.networks))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},tc=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/audit")});($i=tc.interceptors.request).use.apply($i,Object(x.a)(fi())),(Zi=tc.interceptors.response).use.apply(Zi,Object(x.a)(hi(tc)));var nc=tc;function ac(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:oe}}var ic=function(e){return function(t){return nc.get("/history/supplierrates",{params:e}).then((function(e){return t(ac.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function cc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:se}}var rc=function(e){return function(t){return nc.get("/history/price",{params:e}).then((function(e){return t(cc.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function sc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:de}}var lc,oc,uc=function(e){return function(t){return nc.get("",{params:e}).then((function(e){return t(sc.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},dc=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/clients")});(lc=dc.interceptors.request).use.apply(lc,Object(x.a)(fi())),(oc=dc.interceptors.response).use.apply(oc,Object(x.a)(hi(dc)));var mc,bc,jc=dc,fc=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/client")});(mc=fc.interceptors.request).use.apply(mc,Object(x.a)(fi())),(bc=fc.interceptors.response).use.apply(bc,Object(x.a)(hi(fc)));var hc,pc,gc=fc,Oc=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/routes")});(hc=Oc.interceptors.request).use.apply(hc,Object(x.a)(fi())),(pc=Oc.interceptors.response).use.apply(pc,Object(x.a)(hi(Oc)));var vc,xc,Cc=Oc,_c=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/least-cost-routings")});(vc=_c.interceptors.request).use.apply(vc,Object(x.a)(fi())),(xc=_c.interceptors.response).use.apply(xc,Object(x.a)(hi(_c)));var yc,Sc,kc=_c,wc=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/suppliers")});(yc=wc.interceptors.request).use.apply(yc,Object(x.a)(fi())),(Sc=wc.interceptors.response).use.apply(Sc,Object(x.a)(hi(wc)));var Ec,Ic,Dc=wc,Tc=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/supplierconnections")});(Ec=Tc.interceptors.request).use.apply(Ec,Object(x.a)(fi())),(Ic=Tc.interceptors.response).use.apply(Ic,Object(x.a)(hi(Tc)));var Mc,Nc,Rc=Tc;function Ac(){return{type:Ge}}function Pc(e){return{data:{id:e},type:Je}}function Lc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:qe}}function Fc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Ze}}function Uc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,links:n},type:He}}function qc(e){return{data:{id:e},type:We}}function Gc(e,t,n){return function(a){return Dc.get("/".concat(e,"/connections/").concat(t,"/").concat(n,"/links")).then((function(e){return a(Fc.apply(void 0,Object(x.a)(e.data.links))),a(Uc.apply(void 0,[n].concat(Object(x.a)(e.data.links.map((function(e){return e.link_id})))))),{total:e.data.links.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function Hc(e){return function(t){return Rc.get("/".concat(e,"/links")).then((function(n){return t(Fc.apply(void 0,Object(x.a)(n.data.links))),t(Uc.apply(void 0,[e].concat(Object(x.a)(n.data.links.map((function(e){return e.link_id})))))),{total:n.data.links.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function Bc(e){return function(t){return Rc.get("",{params:e}).then((function(e){return t(Lc.apply(void 0,Object(x.a)(e.data.connections))),{total:e.data.connections.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function Vc(e){return function(t){return Rc.get("/".concat(e)).then((function(e){t(Lc(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function zc(e){return function(t){return Rc.get("/".concat(e,"/prices/import")).then((function(n){var a,i;t((a=e,i=n.data,{data:{id:a,settings:i},type:Ke}))})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}}function Wc(e,t){return function(n){return Rc.get("/".concat(e,"/prices/networks"),{params:t}).then((function(t){var a,i;return n((a=e,i=t.data.data,{data:{id:a,data:i},type:ze})),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function Kc(e,t,n){return function(a){return Rc.get("/".concat(e,"/prices/networks/").concat(t,"/history"),{params:n}).then((function(n){return a(function(e,t,n){return{data:{connectionID:e,networkID:t,prices:n},type:Be}}(e,t,n.data.data)),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function Jc(e,t,n,a){return function(){return Dc.post("/".concat(e,"/connections/").concat(n,"/").concat(a,"/links"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function Yc(e,t,n,a,i){return function(){return Dc.patch("/".concat(e,"/connections/").concat(n,"/").concat(a,"/links/").concat(i),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}var Qc=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/suppliercommitments")});(Mc=Qc.interceptors.request).use.apply(Mc,Object(x.a)(fi())),(Nc=Qc.interceptors.response).use.apply(Nc,Object(x.a)(hi(Qc)));var Xc=Qc;function $c(){return{type:rt}}function Zc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:ct}}function er(){return function(e){return Xc.get("").then((function(t){return e(Zc.apply(void 0,Object(x.a)(t.data.commitments))),{total:t.data.commitments.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}function tr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:dt,data:t}}var nr=function(){return{type:mt}};function ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,connections:n},type:bt}}function ir(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,commitments:n},type:jt}}var cr,rr,sr=function(){return function(e){return kc.get("").then((function(t){e(tr.apply(void 0,Object(x.a)(t.data.lcrs)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},lr=function(e){return function(t){return kc.get("".concat(e,"/commitments")).then((function(n){return t(Zc.apply(void 0,Object(x.a)(n.data.commitments))),t(ir.apply(void 0,[e].concat(Object(x.a)(n.data.commitments.map((function(e){return e.commitment_id})))))),{total:n.data.commitments.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},or=function(e){return function(t){return kc.get("".concat(e,"/connections")).then((function(n){return t(Lc.apply(void 0,Object(x.a)(n.data.connections))),t(ar.apply(void 0,[e].concat(Object(x.a)(n.data.connections.map((function(e){return e.connection_id})))))),{total:n.data.connections.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ur=function(e,t){return function(){return kc.put("/".concat(e),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},dr=function(e,t){return function(){return kc.post("/".concat(e,"/connections"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},mr=function(e,t){return function(){return kc.post("/".concat(e,"/commitments"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function br(){return{type:Mt}}function jr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Tt}}var fr=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/suppliermnps")});(cr=fr.interceptors.request).use.apply(cr,Object(x.a)(fi())),(rr=fr.interceptors.response).use.apply(rr,Object(x.a)(hi(fr)));var hr=fr;function pr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:It,data:t}}function gr(){return{type:Vt}}function Or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Bt}}function vr(){return{type:Ht}}function xr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Gt}}function Cr(){return{type:qt}}function _r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Ut}}function yr(){return{type:Pt}}function Sr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:At}}function kr(){return{type:Ft}}function wr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Lt}}function Er(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:pt,data:t}}function Ir(e,t){return{data:{id:e,networks:t},type:vt}}function Dr(e,t,n){return{data:{id:e,countryID:t,mnpProvider:n},type:Ct}}function Tr(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return{data:{id:e,networkID:t,rules:a},type:Ot}}function Mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,connections:n},type:yt}}function Nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,conditions:n},type:kt}}function Rr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,conditions:n},type:wt}}function Ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,conditions:n},type:Et}}function Pr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,conditions:n},type:St}}var Lr=function(){return{type:gt}},Fr=function(){return function(e){return Cc.get("").then((function(t){e(Er.apply(void 0,Object(x.a)(t.data.routes)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Ur=function(e){return function(t){return Cc.get("/".concat(e)).then((function(e){t(Er(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},qr=function(e,t,n,a){return function(i){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a)).then((function(t){return i(jr(t.data)),i(Tr(e,n,t.data.id)),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Gr=function(e,t,n,a){return function(i){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/conditions/category-conditions")).then((function(e){return i(_r.apply(void 0,Object(x.a)(e.data.category_conditions))),i(Nr.apply(void 0,[a].concat(Object(x.a)(e.data.category_conditions.map((function(e){return e.category_condition_id})))))),e.data})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}},Hr=function(e,t,n,a){return function(i){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/conditions/commitment-conditions")).then((function(e){return i(wr.apply(void 0,Object(x.a)(e.data.commitment_conditions))),i(Rr.apply(void 0,[a].concat(Object(x.a)(e.data.commitment_conditions.map((function(e){return e.condition_commitment_id})))))),e.data})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}},Br=function(e,t,n,a){return function(i){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/conditions/time-based-conditions")).then((function(e){return i(Sr.apply(void 0,Object(x.a)(e.data.time_based_conditions))),i(Ar.apply(void 0,[a].concat(Object(x.a)(e.data.time_based_conditions.map((function(e){return e.condition_time_based_id})))))),e.data})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}},Vr=function(e,t,n,a){return function(i){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/conditions/qos-conditions")).then((function(e){return i(xr.apply(void 0,Object(x.a)(e.data.qos_conditions))),i(Pr.apply(void 0,[a].concat(Object(x.a)(e.data.qos_conditions.map((function(e){return e.condition_qos_id})))))),e.data})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}},zr=function(e,t,n,a){return function(i){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/distribution/lcr")).then((function(e){i(tr(e.data)),i(function(e,t){return{data:{id:e,lcr:t},type:xt}}(a,e.data.id))})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}},Wr=function(e,t,n,a){return function(i){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/distribution/connections")).then((function(e){i(Lc.apply(void 0,Object(x.a)(e.data.connections))),i(Or.apply(void 0,Object(x.a)(e.data.connections))),i(Mr.apply(void 0,[a].concat(Object(x.a)(e.data.connections.map((function(e){return e.connection_id}))))))})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}};function Kr(e,t,n,a,i){return function(c){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/history"),{params:i}).then((function(e){return c(function(e,t){return{data:{id:e,changes:t},type:Nt}}(a,e.data.data)),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}var Jr,Yr,Qr=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/whitelists")});(Jr=Qr.interceptors.request).use.apply(Jr,Object(x.a)(fi())),(Yr=Qr.interceptors.response).use.apply(Yr,Object(x.a)(hi(Qr)));var Xr=Qr;function $r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Mn,data:t}}function Zr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:En,data:t}}function es(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,clientIDs:n},type:Tn}}function ts(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,sidIDs:n},type:Dn}}var ns,as,is=function(){return{type:In}},cs=function(e){return function(t){return Xr.get("/sids",{params:e}).then((function(e){return t(Zr.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},rs=function(e){return function(t){return Xr.get("/sids/".concat(e,"/clients")).then((function(n){return t(ks.apply(void 0,Object(x.a)(n.data.clients))),t(es.apply(void 0,[e].concat(Object(x.a)(n.data.clients.map((function(e){return e.client_id})))))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ss=function(e,t){return function(n){return Xr.get("/sids/".concat(e,"/sids"),{params:t}).then((function(t){return n($r.apply(void 0,Object(x.a)(t.data.data))),n(ts.apply(void 0,[e].concat(Object(x.a)(t.data.data.map((function(e){return e.id})))))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ls=function(e,t){return function(){return Xr.patch("/sids/".concat(e),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},os=function(e,t){return function(){return Xr.post("/sids/".concat(e,"/sids"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},us=function(e,t){return function(){var n=new FormData;return n.append("data",t.data),n.append("replace_sids",t.replace_sids),0===t.replace_sids&&n.append("update_existing_sids",t.update_existing_sids),Xr.post("/sids/".concat(e,"/sids"),n,{headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function ds(){return{type:Ne}}function ms(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Me}}function bs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:ke}}var js=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/client-price-plans")});(ns=js.interceptors.request).use.apply(ns,Object(x.a)(fi())),(as=js.interceptors.response).use.apply(as,Object(x.a)(hi(js)));var fs=js;function hs(){return{type:bn}}function ps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:mn}}function gs(){return{type:Ie}}function Os(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Ee}}function vs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,virtualNumbers:n},type:De}}var xs=function(e,t,n){return function(a){return jc.get("/".concat(e,"/connection/").concat(t,"/virtual-numbers"),{params:n}).then((function(e){return a(Ei.apply(void 0,Object(x.a)(e.data.data))),a(vs.apply(void 0,[t].concat(Object(x.a)(e.data.data.map((function(e){return e.id})))))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Cs(){return{type:hn}}function _s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:fn}}var ys=function(){return{type:je}},Ss=function(e){return{data:{id:e},type:ye}};function ks(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:be}}function ws(e,t){return{data:{id:e,userIDs:t},type:_e}}function Es(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,contacts:n},type:ge}}function Is(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,connections:n},type:ve}}function Ds(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,routes:n},type:fe}}function Ts(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,wallets:n},type:he}}function Ms(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,pricePlans:n},type:Oe}}function Ns(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,routePriceSchedules:n},type:Ce}}function Rs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,scheduledPrices:n},type:On}}function As(e,t){return{data:{id:e,date:t},type:pn}}function Ps(e,t){return{data:{id:e,status:t},type:gn}}function Ls(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,networkPrices:n},type:jn}}var Fs=function(){return function(e){return jc.get("").then((function(t){return e(ks.apply(void 0,Object(x.a)(t.data.clients))),{total:t.data.clients.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Us=function(e){return function(t){return jc.get("/".concat(e)).then((function(e){return t(ks(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},qs=function(){return function(e){return gc.get("").then((function(t){return e(ks(t.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Gs=function(e){return function(t){return jc.get("".concat(e,"/contacts")).then((function(n){return t(bs.apply(void 0,Object(x.a)(n.data.contacts))),t(Es.apply(void 0,[e].concat(Object(x.a)(n.data.contacts.map((function(e){return e.contact_id})))))),{total:n.data.contacts.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Hs=function(e){return function(t){return gc.get("/contacts").then((function(n){return t(bs.apply(void 0,Object(x.a)(n.data.contacts))),t(Es.apply(void 0,[e].concat(Object(x.a)(n.data.contacts.map((function(e){return e.contact_id})))))),{total:n.data.contacts.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Bs=function(e){return function(t){return jc.get("/".concat(e,"/wallets")).then((function(n){return t(ms.apply(void 0,Object(x.a)(n.data.wallets))),t(Ts.apply(void 0,[e].concat(Object(x.a)(n.data.wallets.map((function(e){return e.wallet_id})))))),{total:n.data.wallets.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Vs=function(e,t){return function(n){return jc.get("/".concat(e,"/wallets/").concat(t)).then((function(t){n(ms(t.data)),n(Ts(e,t.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},zs=function(e,t){return function(n){return jc.get("".concat(e,"/price-plan"),{params:t}).then((function(t){return n(ps.apply(void 0,Object(x.a)(t.data.route_prices))),n(Ms.apply(void 0,[e].concat(Object(x.a)(t.data.route_prices.map((function(e){return e.id})))))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Ws=function(e,t){return function(n){return jc.get("".concat(e,"/price-plan/").concat(t)).then((function(t){return n(ps(t.data)),n(Ms(e,t.data.id)),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Ks=function(e,t){return function(n){return gc.get("price-plan/".concat(t)).then((function(t){return n(ps(t.data)),n(Ms(e,t.data.id)),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Js=function(e,t){return function(n){return jc.get("".concat(e,"/route-price-schedulings"),{params:t}).then((function(t){return n(_s.apply(void 0,Object(x.a)(t.data.route_price_schedule))),n(Ns.apply(void 0,[e].concat(Object(x.a)(t.data.route_price_schedule.map((function(e){return"".concat(e.id,"\u200b-").concat(e.route_id,"\u200b")})))))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Ys=function(e,t,n){return function(a){return jc.get("".concat(e,"/price-plan/").concat(t,"/schedule-route-network-pricings/").concat(n)).then((function(e){return a(As(n,e.data.schedule_for)),a(Ps(n,e.data.status)),a(Rs.apply(void 0,[n].concat(Object(x.a)(e.data.prices)))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Qs=function(e){return function(t){return gc.get("price-plan/schedule-route-network-pricings/".concat(e)).then((function(n){return t(As(e,n.data.schedule_for)),t(Ps(e,n.data.status)),t(Rs.apply(void 0,[e].concat(Object(x.a)(n.data.prices)))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Xs=function(e,t){return function(n){return jc.get("".concat(e,"/price-plan/").concat(t,"/pricing")).then((function(e){return n(Ls.apply(void 0,[t].concat(Object(x.a)(e.data.route_price_country_network_list)))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},$s=function(e){return function(t){return gc.get("price-plan/".concat(e,"/pricing")).then((function(n){return t(Ls.apply(void 0,[e].concat(Object(x.a)(n.data.route_price_country_network_list)))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Zs=function(e,t){return function(n){return jc.get("/".concat(e,"/connections"),{params:t}).then((function(t){return n(Os.apply(void 0,Object(x.a)(t.data.connections))),n(Is.apply(void 0,[e].concat(Object(x.a)(t.data.connections.map((function(e){return e.connection_id})))))),{total:t.data.connections.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},el=function(e){return function(t){return gc.get("/connections").then((function(n){return t(Os.apply(void 0,Object(x.a)(n.data.connections))),t(Is.apply(void 0,[e].concat(Object(x.a)(n.data.connections.map((function(e){return e.connection_id})))))),{total:n.data.connections.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},tl=function(e){return function(t){return jc.get("".concat(e,"/routes")).then((function(n){return t(Er.apply(void 0,Object(x.a)(n.data.routes))),t(Ds.apply(void 0,[e].concat(Object(x.a)(n.data.routes.map((function(e){return e.id})))))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},nl=function(e,t){return function(n){return jc.get("".concat(e,"/routes/").concat(t,"/whitelist")).then((function(a){return n(Zr(a.data)),n(function(e,t,n){return{data:{id:e,routeID:t,whitelistSIDID:n},type:xe}}(e,t,a.data.id)),a.data})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))}},al=function(e,t,n){return function(a){return jc.get("".concat(e,"/connections/").concat(n,"/").concat(t)).then((function(n){a(Os(n.data)),a(Is(e,t))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},il=function(e,t,n){return function(a){return gc.get("/connections/".concat(n,"/").concat(t)).then((function(n){a(Os(n.data)),a(Is(e,t))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},cl=function(e,t){return function(){return jc.post("/".concat(e,"/contacts"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},rl=function(e,t){return function(){return jc.post("/".concat(e,"/wallets"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},sl=function(e,t){return function(n){return jc.post("/".concat(e,"/connections/rest/").concat(t,"/refresh-token")).then((function(e){n(function(e,t){return{data:{connectionID:e,tokenMasked:t},type:Se}}(t,e.data.masked_token))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ll=function(e,t){return function(){return jc.delete("/".concat(e,"/contacts/").concat(t)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ol=function(e,t){return function(){return jc.delete("".concat(e,"/price-plan/").concat(t)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function ul(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:tt}}function dl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:at}}var ml=function(){return{type:Ae}};function bl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Re}}function jl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,contacts:n},type:Pe}}function fl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,connections:n},type:Le}}function hl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,commitments:n},type:Fe}}function pl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,networks:n},type:st}}function gl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,connections:n},type:lt}}function Ol(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,virtualNumbers:n},type:Ue}}var vl=function(e){return function(t){return Dc.get("",{params:e}).then((function(e){return t(bl.apply(void 0,Object(x.a)(e.data.suppliers))),{total:e.data.suppliers.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},xl=function(e){return function(t){return Dc.get("/".concat(e)).then((function(e){return t(bl(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Cl=function(e){return function(t){return Dc.get("".concat(e,"/contacts")).then((function(n){return t(ul.apply(void 0,Object(x.a)(n.data.contacts))),t(jl.apply(void 0,[e].concat(Object(x.a)(n.data.contacts.map((function(e){return e.contact_id})))))),{total:n.data.contacts.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},_l=function(e,t){return function(n){return Dc.get("/".concat(e,"/virtual-numbers"),{params:t}).then((function(t){return n(dl.apply(void 0,Object(x.a)(t.data.virtual_numbers))),n(Ol.apply(void 0,[e].concat(Object(x.a)(t.data.virtual_numbers.map((function(e){return e.id})))))),{total:t.data.virtual_numbers.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},yl=function(e){return function(t){return Dc.get("/".concat(e,"/connections")).then((function(n){return t(Lc.apply(void 0,Object(x.a)(n.data.connections))),t(fl.apply(void 0,[e].concat(Object(x.a)(n.data.connections.map((function(e){return e.connection_id})))))),{total:n.data.connections.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Sl=function(e,t,n){return function(a){return Dc.get("/".concat(e,"/connections/").concat(n,"/").concat(t)).then((function(n){a(Lc(n.data)),a(fl(e,t))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},kl=function(e,t){return function(n){return Dc.get("".concat(e,"/commitments/").concat(t,"/networks")).then((function(e){return n(Xi.apply(void 0,Object(x.a)(e.data.networks))),n(pl.apply(void 0,[t].concat(Object(x.a)(e.data.networks.map((function(e){return e.network_id})))))),{total:e.data.networks.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},wl=function(e,t){return function(n){return Dc.get("".concat(e,"/commitments/").concat(t,"/connections")).then((function(e){return n(Lc.apply(void 0,Object(x.a)(e.data.connections))),n(gl.apply(void 0,[t].concat(Object(x.a)(e.data.connections.map((function(e){return e.connection_id})))))),{total:e.data.connections.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},El=function(e,t){return function(){return Dc.post("/".concat(e,"/contacts"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Il=function(e,t,n){return function(){return Dc.post("/".concat(e,"/commitments/").concat(t,"/connections"),{connections:n}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Dl=function(e,t,n){return function(){return Dc.post("/".concat(e,"/commitments/").concat(t,"/networks"),{networks:n}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Tl=function(e,t,n,a){return function(){return Dc.patch("/".concat(e,"/connections/").concat(n,"/").concat(a),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Ml=function(e,t,n){return function(){return Dc.patch("/".concat(e,"/commitments/").concat(t),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Nl=function(e,t){return function(){return Dc.delete("/".concat(e,"/contacts/").concat(t)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Rl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Ye,data:t}}function Al(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{type:Xe,data:{id:e,data:n}}}var Pl,Ll,Fl=function(){return{type:Qe}},Ul=function(e,t,n){return function(a){return Dc.get("/".concat(e,"/rate-schedules/").concat(t),{params:n}).then((function(e){return a(Rl(e.data)),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ql=function(e,t,n){return function(a){return Dc.get("/".concat(e,"/rate-schedules/").concat(t,"/prices"),{params:n}).then((function(e){return a(Al.apply(void 0,[t].concat(Object(x.a)(e.data.data)))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Gl=function(e,t,n){return function(){return Dc.delete("/".concat(e,"/rate-schedules/").concat(t,"/prices/").concat(n)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Hl(){return{type:et}}var Bl=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/categories")});(Pl=Bl.interceptors.request).use.apply(Pl,Object(x.a)(fi())),(Ll=Bl.interceptors.response).use.apply(Ll,Object(x.a)(hi(Bl)));var Vl=Bl;function zl(){return{type:U}}function Wl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:F}}function Kl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:ft,data:t}}var Jl=function(){return{type:ht}};function Yl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,rules:n},type:q}}var Ql,Xl,$l=function(e){return function(t){return Vl.get("",{params:e}).then((function(e){return t(Kl.apply(void 0,Object(x.a)(e.data.categories))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Zl=function(e){return function(t){return Vl.get("/".concat(e)).then((function(e){return t(Kl(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},eo=function(e,t){return function(n){return Vl.get("/".concat(e,"/rules"),{params:t}).then((function(t){return n(Wl.apply(void 0,Object(x.a)(t.data.rules))),n(Yl.apply(void 0,[e].concat(Object(x.a)(t.data.rules.map((function(e){return e.category_rule_id})))))),{total:t.data.total_records}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},to=function(e,t){return function(){return Vl.patch("/".concat(e),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},no=function(e,t){return function(){return Vl.post("/".concat(e,"/rules"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ao=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/quality-of-services")});(Ql=ao.interceptors.request).use.apply(Ql,Object(x.a)(fi())),(Xl=ao.interceptors.response).use.apply(Xl,Object(x.a)(hi(ao)));var io=ao;function co(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:ot,data:t}}var ro,so,lo=function(){return{type:ut}},oo=function(){return function(e){return io.get("").then((function(t){return e(co.apply(void 0,Object(x.a)(t.data.quality_of_services))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},uo=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/traffic")});(ro=uo.interceptors.request).use.apply(ro,Object(x.a)(fi())),(so=uo.interceptors.response).use.apply(so,Object(x.a)(hi(uo)));var mo=uo;function bo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:zt,data:t}}var jo=function(){return function(e){return mo.get("/sms/export/statuses").then((function(t){e(bo.apply(void 0,Object(x.a)(t.data.data)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function fo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Kt,data:t}}var ho=function(){return function(e){return mo.get("/virtualnumber/export/statuses").then((function(t){e(fo.apply(void 0,Object(x.a)(t.data.data)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function po(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Yt,data:t}}var go=function(){return function(e){return mo.get("/sms/statuses").then((function(t){e(po.apply(void 0,Object(x.a)(t.data.statuses)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Oo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Xt,data:t}}var vo=function(){return function(e){return mo.get("/virtualnumber/statuses").then((function(t){e(Oo.apply(void 0,Object(x.a)(t.data.statuses)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function xo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Zt,data:t}}var Co,_o,yo=function(){return function(e){return mo.get("/error-codes").then((function(t){e(xo.apply(void 0,Object(x.a)(t.data.error_codes)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},So=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/statistics")});(Co=So.interceptors.request).use.apply(Co,Object(x.a)(fi())),(_o=So.interceptors.response).use.apply(_o,Object(x.a)(hi(So)));var ko=So;function wo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:tn,data:t}}var Eo=function(){return function(e){return ko.get("/sms/reports").then((function(t){e(wo.apply(void 0,Object(x.a)(t.data.reports)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Io(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:an,data:t}}var Do=function(){return{type:cn}};function To(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:rn,data:t}}var Mo=function(e){return function(t){return ko.get("/sms/share/".concat(e)).then((function(n){return t(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:ln,data:t}}({shared_search_id:e,shared_search:n.data})),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function No(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:un,data:t}}var Ro,Ao,Po=function(e){return function(t){return mo.get("/dlrs",e).then((function(e){t(No.apply(void 0,Object(x.a)(e.data.data)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Lo=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/templates")});(Ro=Lo.interceptors.request).use.apply(Ro,Object(x.a)(fi())),(Ao=Lo.interceptors.response).use.apply(Ao,Object(x.a)(hi(Lo)));var Fo=Lo;function Uo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,networkPrices:n},type:Cn}}function qo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:vn,data:t}}var Go,Ho,Bo=function(){return{type:xn}},Vo=function(e){return function(t){return Fo.get("",{params:e}).then((function(e){t(qo.apply(void 0,Object(x.a)(e.data.templates)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},zo=function(e){return function(t){return Fo.get("/".concat(e)).then((function(e){t(qo(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Wo=function(e){return function(t){return Fo.get("".concat(e,"/pricing")).then((function(n){return t(Uo.apply(void 0,[e].concat(Object(x.a)(n.data.template_pricing_list)))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Ko=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/template-schedulings")});(Go=Ko.interceptors.request).use.apply(Go,Object(x.a)(fi())),(Ho=Ko.interceptors.response).use.apply(Ho,Object(x.a)(hi(Ko)));var Jo=Ko;function Yo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,scheduledPrices:n},type:wn}}function Qo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:_n,data:t}}var Xo=function(){return{type:yn}},$o=function(e){return function(t){return Jo.get("",{params:e}).then((function(e){return t(Qo.apply(void 0,Object(x.a)(e.data.template_schedule_list))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Zo=function(e,t){return function(n){return Fo.get("".concat(e,"/schedule-template-network-pricings/").concat(t)).then((function(e){return n(function(e,t){return{data:{id:e,date:t},type:Sn}}(t,e.data.schedule_date)),n(function(e,t){return{data:{id:e,status:t},type:kn}}(t,e.data.status)),n(Yo.apply(void 0,[t].concat(Object(x.a)(e.data.template_changes)))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function eu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Rn,data:t}}var tu,nu,au=function(e){return function(t){return Xr.get("/sid-statuses",{params:e}).then((function(e){return t(eu.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},iu=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/users")});(tu=iu.interceptors.request).use.apply(tu,Object(x.a)(fi())),(nu=iu.interceptors.response).use.apply(nu,Object(x.a)(hi(iu)));var cu,ru,su=iu,lu=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/access-groups")});(cu=lu.interceptors.request).use.apply(cu,Object(x.a)(fi())),(ru=lu.interceptors.response).use.apply(ru,Object(x.a)(hi(lu)));var ou,uu,du=lu,mu=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/ldap-groups")});(ou=mu.interceptors.request).use.apply(ou,Object(x.a)(fi())),(uu=mu.interceptors.response).use.apply(uu,Object(x.a)(hi(mu)));var bu=mu;function ju(){return{type:Xn}}function fu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:Qn}}var hu,pu,gu=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/access-rights")});(hu=gu.interceptors.request).use.apply(hu,Object(x.a)(fi())),(pu=gu.interceptors.response).use.apply(pu,Object(x.a)(hi(gu)));var Ou=gu;function vu(){return{type:Zn}}function xu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:t,type:$n}}function Cu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,ldapGroups:n},type:Wn}}function _u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,accessRights:n},type:Jn}}function yu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Vn,data:t}}var Su=function(){return{type:zn}},ku=function(e){return function(t){return du.get("",{params:e}).then((function(e){return t(yu.apply(void 0,Object(x.a)(e.data.groups))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},wu=function(e){return function(t){return du.get("/".concat(e,"/ldap-groups")).then((function(n){t(fu.apply(void 0,Object(x.a)(n.data.groups))),t(Cu.apply(void 0,[e].concat(Object(x.a)(n.data.groups.map((function(e){return e.id}))))))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Eu=function(e){return function(t){return du.get("/".concat(e,"/access-rights")).then((function(n){t(xu.apply(void 0,Object(x.a)(n.data.access_rights.map((function(e){return{id:e.module_id,name:e.module_name}}))))),t(_u.apply(void 0,[e].concat(Object(x.a)(n.data.access_rights.map((function(e){return{id:e.module_id,"access-level":e.access_level}}))))))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Iu=function(e,t){return function(){return du.post("/".concat(e,"/ldap-groups"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Du=function(e,t){return function(){return du.patch("/".concat(e),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Tu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,accessGroups:n},type:Fn}}function Mu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{data:{id:e,accessRights:n},type:Un}}function Nu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Pn,data:t}}var Ru,Au,Pu=function(){return{type:Ln}},Lu=function(e){return function(t){return su.get("",{params:e}).then((function(e){return t(Nu.apply(void 0,Object(x.a)(e.data.users))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Fu=function(e){return function(t){return su.get("/".concat(e,"/access-groups")).then((function(n){t(yu.apply(void 0,Object(x.a)(n.data.groups))),t(Tu.apply(void 0,[e].concat(Object(x.a)(n.data.groups))))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Uu=function(e){return function(t){return su.get("/".concat(e,"/access-rights")).then((function(n){t(xu.apply(void 0,Object(x.a)(n.data.access_rights.map((function(e){return{id:e.module_id,name:e.module_name}}))))),t(yu.apply(void 0,Object(x.a)(n.data.access_rights.reduce((function(e,t){return e.push.apply(e,Object(x.a)(t.access_groups)),e}),[])))),t(Mu.apply(void 0,[e].concat(Object(x.a)(n.data.access_rights.map((function(e){return{id:e.module_id,"access-level":e.access_level,"access-groups":e.access_groups.map((function(e){return e.id}))}}))))))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},qu=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/ldap-users")});(Ru=qu.interceptors.request).use.apply(Ru,Object(x.a)(fi())),(Au=qu.interceptors.response).use.apply(Au,Object(x.a)(hi(qu)));var Gu=qu;function Hu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:Hn,data:t}}var Bu,Vu,zu=function(){return{type:Bn}},Wu=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/route-rules-schedules")});(Bu=Wu.interceptors.request).use.apply(Bu,Object(x.a)(fi())),(Vu=Wu.interceptors.response).use.apply(Vu,Object(x.a)(hi(Wu)));var Ku=Wu;function Ju(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:ea,data:t}}var Yu=function(){return{type:ta}};var Qu,Xu,$u=function(e){return function(t){return Ku.get("",{params:e}).then((function(e){return t(Ju.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},Zu=function(e){return function(t){return Ku.get("/".concat(e,"/details")).then((function(n){var a,i;return t((a=e,i=n.data,{data:{id:a,details:i},type:na})),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},ed=function(e){return function(){return Ku.delete("/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},td=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat(g)});(Qu=td.interceptors.request).use.apply(Qu,Object(x.a)(fi())),(Xu=td.interceptors.response).use.apply(Xu,Object(x.a)(hi(td)));var nd=td;function ad(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:ia,data:t}}var id=function(){return{type:ca}},cd=function(e,t,n){return function(){return nd.patch("/clients/".concat(e,"/users/").concat(t),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function rd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:ra,data:t}}var sd=function(){return{type:sa}},ld=function(){return function(e){return gi.get("/subsidiaries/").then((function(t){return e(rd.apply(void 0,Object(x.a)(t.data.subsidiaries))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function od(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:la,data:t}}var ud,dd,md=function(){return{type:oa}},bd=function(){return function(e){return gi.get("/sales-regions/").then((function(t){return e(od.apply(void 0,Object(x.a)(t.data.regions))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},jd=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/http-providers")});(ud=jd.interceptors.request).use.apply(ud,Object(x.a)(fi())),(dd=jd.interceptors.response).use.apply(dd,Object(x.a)(hi(jd)));var fd=jd;function hd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:ua,data:t}}var pd=function(){return{type:da}};function gd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{type:ma,data:{id:e,fields:n}}}var Od=function(e){return function(t){return fd.get("",{params:e}).then((function(e){return t(hd.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}},vd=function(e){return function(t){return fd.get("/".concat(e,"/fields")).then((function(n){return t(gd.apply(void 0,[e].concat(Object(x.a)(n.data.data)))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};var xd=function(){return function(e){return gi.get("/manifest-version").then((function(t){var n;e((n=t.data,{type:ja,data:n}))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}};function Cd(e){var t=e.dataItem.id,n=Object(l.c)(),a=i.a.useState(0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=Object(l.d)((function(e){var n=e.audit.get(t);return null==n?{}:[{field:"request",name:"request"},{field:"response",name:"response"},{field:"new_value",name:"newValue"},{field:"previous_value",name:"previousValue"}].reduce((function(e,t){var a=t.field,i=t.name,c=n.get(a);if(null==c)return e;try{e[i]=JSON.stringify(JSON.parse(c),null,"    ")}catch(r){e[i]=c}return e}),{})})),d=u.request,m=void 0===d?null:d,b=u.response,j=void 0===b?null:b,f=u.newValue,h=void 0===f?null:f,p=u.previousValue,g=void 0===p?null:p,O=i.a.useCallback((function(e){n(Ui(e))}),[n]),v=i.a.useCallback((function(e){s(e.selected)}),[]);return Object(Ka.jsxs)(w.i,{animation:!1,selected:r,onSelect:v,children:[null!=m&&Object(Ka.jsx)(w.j,{title:"Request",children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(I.CopyToClipboard,{text:m,onCopy:function(){return O({severity:"success",message:"Request Audit Report Copied"})},children:Object(Ka.jsx)(k.a,{primary:!0,children:"Copy to clipboard"})})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("code",{className:"sr-only",children:m}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,"aria-hidden":!0,children:m})]})]})}),null!=j&&Object(Ka.jsx)(w.j,{title:"Response",children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(I.CopyToClipboard,{text:j,onCopy:function(){return O({severity:"success",message:"Response Audit Report Copied"})},children:Object(Ka.jsx)(k.a,{primary:!0,children:"Copy to clipboard"})})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("code",{className:"sr-only",children:j}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,"aria-hidden":!0,children:j})]})]})}),null!=g&&Object(Ka.jsx)(w.j,{title:"Previous Value",children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(I.CopyToClipboard,{text:g,onCopy:function(){return O({severity:"success",message:"Previous Value Audit Report Copied"})},children:Object(Ka.jsx)(k.a,{primary:!0,children:"Copy to clipboard"})})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("code",{className:"sr-only",children:g}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,"aria-hidden":!0,children:g})]})]})}),null!=h&&Object(Ka.jsx)(w.j,{title:"New Value",children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(I.CopyToClipboard,{text:h,onCopy:function(){return O({severity:"success",message:"New Value Audit Report Copied"})},children:Object(Ka.jsx)(k.a,{primary:!0,children:"Copy to clipboard"})})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("code",{className:"sr-only",children:h}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,"aria-hidden":!0,children:h})]})]})})]})}var _d=i.a.memo(Cd),yd=n(24),Sd=n(141);function kd(e){var t=e.children,n=e.variant,a=void 0===n?"default":n,c=Object(yd.a)(e,["children","variant"]),r=i.a.useMemo((function(){var e=["Badge"];switch(a){case"primary":e.push("Badge--Primary");break;case"info":e.push("Badge--Info");break;case"error":e.push("Badge--Error");break;case"warning":e.push("Badge--Warning");break;case"success":e.push("Badge--Success")}return e.join(" ")}),[a]);return Object(Ka.jsx)("span",Object(v.a)(Object(v.a)({},c),{},{className:r,children:t}))}var wd=i.a.memo(kd);function Ed(e){var t=e.value,n=e.variant,a=void 0===n?"primary":n,c=Object(yd.a)(e,["value","variant"]),r=i.a.useState(!1),s=Object(o.a)(r,2),l=s[0],u=s[1];return i.a.useEffect((function(){if(!1!==l){var e=window.setTimeout((function(){u(!1)}),1e3);return function(){return window.clearTimeout(e)}}}),[l]),null==t?null:Object(Ka.jsx)("div",{className:"uuid",children:Object(Ka.jsx)(Sd.a,{anchorElement:"target",children:Object(Ka.jsx)(I.CopyToClipboard,{text:t,onCopy:function(){u(!0)},children:Object(Ka.jsx)(wd,Object(v.a)(Object(v.a)({},c),{},{variant:a,title:t,children:!0===l?"COPIED":t.substring(0,6)}))})})})}var Id=i.a.memo(Ed);function Dd(){return i.a.useMemo((function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}),[])}var Td=i.a.memo(Dd);function Md(e){var t=e.utc,n=e.includeTimezone,a=void 0===n||n,c=i.a.useMemo((function(){var e=new window.Date(t);return{day:[String(e.getDate()).padStart(2,"0"),String(e.getMonth()+1).padStart(2,"0"),e.getFullYear()].join("/"),time:[String(e.getHours()).padStart(2,"0"),String(e.getMinutes()).padStart(2,"0")].join(":")}}),[t]),r=c.day,s=c.time;return Object(Ka.jsxs)("span",{className:"Date",children:[Object(Ka.jsx)("span",{className:"DateDay",children:r}),"\xa0at\xa0",Object(Ka.jsx)("span",{className:"DateTime",children:s}),a&&Object(Ka.jsxs)("span",{className:"DateTimezone",children:["\xa0|\xa0 ",Object(Ka.jsx)(Td,{})]})]})}var Nd=i.a.memo(Md),Rd=n(863);function Ad(e){e.style;var t=e.valid,n=e.id,a=e.value,c=void 0===a?null:a,r=e.label,s=e.filenameLength,l=void 0===s?20:s,u=e.onChange,d=Object(yd.a)(e,["style","valid","id","value","label","filenameLength","onChange"]),m=i.a.useRef(null),b=i.a.useMemo((function(){return null!=n?n:Object(Rd.a)()}),[n]),j=i.a.useMemo((function(){if(null==c)return r;if(c.length>1)return"".concat(c.length," selected files");var e=c[0].name.split("."),t=1===e.length?null:e.splice(e.length-1,1),n=Object(o.a)(t,1)[0],a=e.join("."),i=[a.substring(0,l)];return a.length>l&&(i[0]+="..."),null!=n&&i.push(n),i.join(".")}),[c,l,r]),f=i.a.useCallback((function(){"function"===typeof u&&u(0===m.current.files.length?null:Object(x.a)(m.current.files))}),[u]),h=i.a.useMemo((function(){var e=["k-button"];return!1===t&&e.push("Text--Error"),e.join(" ")}),[t]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("input",Object(v.a)({id:b,type:"file",ref:m,onChange:f,style:{display:"none"}},d)),Object(Ka.jsx)("label",{htmlFor:b,className:h,style:{width:"100%"},children:j})]})}var Pd=i.a.memo(Ad),Ld=n(50),Fd=n(37);function Ud(e){var t=e.label,n=e.children,a=Object(yd.a)(e,["label","children"]);return null==t?n:Object(Ka.jsx)(Fd.a,Object(v.a)(Object(v.a)({label:t},a),{},{children:n}))}var qd=i.a.memo(Ud);function Gd(e){var t=e.valid,n=e.label,a=e.id,c=e.autofocus,r=void 0!==c&&c,s=e.value,l=void 0===s?new Date:s,o=e.onChange,u=Object(yd.a)(e,["valid","label","id","autofocus","value","onChange"]),d=i.a.useRef(null);i.a.useEffect((function(){!0===r&&d.current.focus()}),[r]);var m=i.a.useMemo((function(){return null!=a?a:Object(Rd.a)()}),[a]),b=i.a.useCallback((function(e){"function"===typeof o&&o(e.value)}),[o]);return Object(Ka.jsx)(qd,{editorId:m,label:n,editorValue:" ",editorValid:t,style:{width:"100%"},children:Object(Ka.jsx)(Ld.c,Object(v.a)({id:m,valid:t,value:l,ref:d,onChange:b},u))})}var Hd=i.a.memo(Gd);function Bd(e){var t=e.valid,n=e.label,a=e.id,c=e.autofocus,r=void 0!==c&&c,s=e.format,l=void 0===s?"dd-MM-yyyy":s,o=e.onChange,u=e.value,d=void 0===u?new window.Date:u,m=e.formatPlaceholder,b=void 0===m?"formatPattern":m,j=Object(yd.a)(e,["valid","label","id","autofocus","format","onChange","value","formatPlaceholder"]),f=i.a.useRef(null);i.a.useEffect((function(){!0===r&&f.current.focus()}),[r]);var h=i.a.useMemo((function(){return null!=a?a:Object(Rd.a)()}),[a]),p=i.a.useCallback((function(e){"function"===typeof o&&o(e.value)}),[o]);return Object(Ka.jsx)(qd,{label:n,editorId:h,editorValue:" ",editorValid:t,style:{width:"100%"},children:Object(Ka.jsx)(Ld.a,Object(v.a)({id:h,valid:t,value:d,format:l,ref:f,onChange:p,formatPlaceholder:b},j))})}var Vd=i.a.memo(Bd),zd=n(31);function Wd(e){var t=e.style,n=e.value,a=void 0===n?"":n,c=e.autofocus,r=void 0!==c&&c,s=e.onChange,l=Object(yd.a)(e,["style","value","autofocus","onChange"]),o=i.a.useRef(null);i.a.useEffect((function(){!0===r&&o.current.focus()}),[r]);var u=i.a.useCallback((function(e){"function"===typeof s&&s(e.target.value)}),[s]);return Object(Ka.jsx)(zd.b,Object(v.a)({value:a,ref:o,onChange:u,style:Object.assign({width:"100%"},t)},l))}var Kd=i.a.memo(Wd);function Jd(e){var t=e.style,n=e.value,a=void 0===n?null:n,c=e.width,r=void 0===c?"100%":c,s=e.autofocus,l=void 0!==s&&s,o=e.onChange,u=Object(yd.a)(e,["style","value","width","autofocus","onChange"]),d=i.a.useRef(null);i.a.useEffect((function(){!0===l&&d.current.focus()}),[l]),i.a.useEffect((function(){var e=d.current.element,t=[{nativeEventName:"keyup",reactEventName:"onKeyUp"},{nativeEventName:"keydown",reactEventName:"onKeyDown"}].reduce((function(t,n){var a=n.reactEventName,i=n.nativeEventName,c=u[a];return"function"!==typeof c||(t[i]=c,e.addEventListener(i,c)),t}),{});return function(){Object.keys(t).forEach((function(n){e.removeEventListener(n,t[n])}))}}),[u]);var m=i.a.useCallback((function(e){"function"===typeof o&&o(e.target.value)}),[o]);return Object(Ka.jsx)(zd.d,Object(v.a)({width:r,value:a,style:t,ref:d,onChange:m},u))}var Yd=i.a.memo(Jd);function Qd(e){var t=e.style,n=(e.valid,e.value),a=void 0!==n&&n,c=e.autofocus,r=void 0!==c&&c,s=e.onChange,l=Object(yd.a)(e,["style","valid","value","autofocus","onChange"]),o=i.a.useRef(null);i.a.useEffect((function(){!0===r&&o.current.focus()}),[r]);var u=i.a.useCallback((function(e){"function"===typeof s&&s(e.value)}),[s]);return Object(Ka.jsx)("div",{style:Object.assign({width:"100%",paddingTop:"24px",display:"inline-block"},t),children:Object(Ka.jsx)(zd.a,Object(v.a)({checked:a,ref:o,onChange:u},l))})}var Xd=i.a.memo(Qd),$d=n(42),Zd=n(30);function em(e){var t=e.style,n=e.value,a=void 0===n?null:n,c=e.disabled,r=void 0!==c&&c,s=e.filterable,l=void 0===s||s,u=e.autofocus,d=void 0!==u&&u,m=e.opened,b=e.dataItemKey,j=void 0===b?"id":b,f=e.textField,h=void 0===f?"name":f,p=e.onOpen,g=e.allowCustom,O=void 0!==g&&g,x=e.data,C=void 0===x?[]:x,_=e.onClose,y=e.onChange,S=e.onFilterChange,k=Object(yd.a)(e,["style","value","disabled","filterable","autofocus","opened","dataItemKey","textField","onOpen","allowCustom","data","onClose","onChange","onFilterChange"]),w=i.a.useRef(null),E=i.a.useState(null),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=null!=m?m:R,L=i.a.useCallback((function(){"function"===typeof p&&p.apply(void 0,arguments),null==m&&A(!0)}),[m,p]),F=i.a.useCallback((function(){"function"===typeof _&&_.apply(void 0,arguments),null==m&&A(!1)}),[m,_]);i.a.useEffect((function(){!0===d&&w.current.focus()}),[d]);var U=i.a.useCallback((function(e){"function"===typeof y&&y(e)}),[y]),q=i.a.useCallback((function(e){T(null),U(e.target.value)}),[U]),G=i.a.useMemo((function(){return Object($d.a)(C,D)}),[C,D]),H=i.a.useCallback((function(e){"function"!==typeof S?!1===G.some((function(t){return t[e.filter.field].toLowerCase().includes(e.filter.value.toLowerCase())}))?T(null):T(e.filter):S(e)}),[G,S]);return i.a.useEffect((function(){!0!==O&&null!=a&&!0!==C.some((function(e){return e[j]===a[j]&&e[h]===a[h]}))&&U(null)}),[C,a,U,O,h,j]),Object(Ka.jsx)(Zd.a,Object(v.a)({data:G,value:a,opened:P,onOpen:L,ref:w,onClose:F,disabled:r,onChange:q,textField:h,filterable:l,dataItemKey:j,allowCustom:O,onFilterChange:H,style:Object.assign({width:"100%"},t)},k))}var tm=i.a.memo(em);function nm(e){var t=i.a.useState(),n=Object(o.a)(t,2),a=n[0],c=n[1];return i.a.useEffect((function(){null!=e&&c("now"===e?new window.Date:e)}),[e]),i.a.useEffect((function(){if("now"===e&&null!=a){var t=window.setTimeout((function(){c(new window.Date)}),1e3*(60-a.getSeconds()));return function(){return window.clearTimeout(t)}}}),[a,e]),a}function am(e){var t=e.valid,n=e.label,a=e.id,c=e.min,r=e.max,s=e.autofocus,l=void 0!==s&&s,o=e.value,u=void 0===o?new Date:o,d=e.onChange,m=e.format,b=void 0===m?"dd-MM-yyyy hh:mm a":m,j=e.formatPlaceholder,f=void 0===j?"formatPattern":j,h=Object(yd.a)(e,["valid","label","id","min","max","autofocus","value","onChange","format","formatPlaceholder"]),p=i.a.useRef(null),g=nm(r),O=nm(c);i.a.useEffect((function(){!0===l&&p.current.focus()}),[l]);var x=i.a.useMemo((function(){return null!=a?a:Object(Rd.a)()}),[a]),C=i.a.useCallback((function(e){"function"===typeof d&&d(e.value)}),[d]);return Object(Ka.jsx)(qd,{label:n,editorId:x,editorValue:" ",editorValid:t,style:{width:"100%"},children:Object(Ka.jsx)(Ld.b,Object(v.a)({id:x,min:O,max:g,valid:t,value:u,format:b,ref:p,onChange:C,formatPlaceholder:f},h))})}var im=i.a.memo(am);function cm(e){var t=e.valid,n=e.style,a=e.label,c=e.id,r=e.value,s=void 0===r?"":r,l=e.autofocus,o=void 0!==l&&l,u=e.onChange,d=Object(yd.a)(e,["valid","style","label","id","value","autofocus","onChange"]),m=i.a.useRef(null);i.a.useEffect((function(){!0===o&&m.current.focus()}),[o]);var b=i.a.useMemo((function(){return null!=c?c:Object(Rd.a)()}),[c]),j=i.a.useCallback((function(e){"function"===typeof u&&u(e.value)}),[u]);return Object(Ka.jsx)(qd,{label:a,editorId:b,editorValue:" ",editorValid:t,style:{width:"100%"},children:Object(Ka.jsx)(zd.f,Object(v.a)({id:b,value:s,valid:t,ref:m,onChange:j,style:Object.assign({width:"100%"},n)},d))})}var rm=i.a.memo(cm);function sm(e){var t=e.style,n=e.value,a=void 0===n?[]:n,c=e.disabled,r=void 0!==c&&c,s=e.autoClose,l=void 0!==s&&s,u=e.filterable,d=void 0===u||u,m=e.autofocus,b=void 0!==m&&m,j=e.opened,f=e.dataItemKey,h=void 0===f?"id":f,p=e.textField,g=void 0===p?"name":p,O=e.onOpen,x=e.allowCustom,_=void 0!==x&&x,y=e.data,S=void 0===y?[]:y,k=e.onClose,w=e.onChange,E=e.onFilterChange,I=e.allowUnknownValues,D=void 0!==I&&I,T=Object(yd.a)(e,["style","value","disabled","autoClose","filterable","autofocus","opened","dataItemKey","textField","onOpen","allowCustom","data","onClose","onChange","onFilterChange","allowUnknownValues"]),M=i.a.useRef(null),N=i.a.useState(null),R=Object(o.a)(N,2),A=R[0],P=R[1],L=i.a.useState(!1),F=Object(o.a)(L,2),U=F[0],q=F[1],G=null!=j?j:U,H=i.a.useCallback((function(){"function"===typeof O&&O.apply(void 0,arguments),null==j&&q(!0)}),[j,O]),B=i.a.useCallback((function(){"function"===typeof k&&k.apply(void 0,arguments),null==j&&q(!1)}),[j,k]);i.a.useEffect((function(){!0===b&&M.current.focus()}),[b]);var V=i.a.useCallback((function(e){"function"===typeof w&&w(e)}),[w]),z=i.a.useCallback((function(e){V(e.target.value.map((function(e){var t;return Object.assign({},e,(t={},Object(C.a)(t,g,e[g]),Object(C.a)(t,h,null!=e[h]?e[h]:"frontend-id-".concat(Object(Rd.a)())),t))})))}),[V,h,g]),W=i.a.useCallback((function(e){"function"!==typeof E?P(e.filter):E(e.filter)}),[E]),K=i.a.useMemo((function(){return Object($d.a)(S,A)}),[S,A]);i.a.useEffect((function(){!1===_&&0===K.length&&B()}),[K,B,_]);var J=i.a.useMemo((function(){return!0===_||!0===D}),[_,D]);return i.a.useEffect((function(){if(!0!==J){var e=a.filter((function(e){return S.some((function(t){return t[h]===e[h]&&t[g]===e[g]}))}));e.length!==a.length&&V(e)}}),[a,S,V,g,h,J]),Object(Ka.jsx)(Zd.c,Object(v.a)({data:K,value:a,opened:G,onOpen:H,ref:M,onClose:B,disabled:r,onChange:z,autoClose:l,textField:g,filterable:d,allowCustom:_,dataItemKey:h,onFilterChange:W,style:Object.assign({width:"100%"},t)},T))}var lm=i.a.memo(sm);function om(e){var t=e.label,n=e.valid,a=e.data,c=void 0===a?[]:a,r=e.value,s=void 0===r?null:r,l=e.dataItemKey,o=void 0===l?"id":l,u=e.textField,d=void 0===u?"name":u,m=e.onChange,b=Object(yd.a)(e,["label","valid","data","value","dataItemKey","textField","onChange"]),j=i.a.useCallback((function(e){"function"===typeof m&&m(e)}),[m]);i.a.useEffect((function(){null!=s&&!0!==c.some((function(e){return e.id===s}))&&j(null)}),[c,s,j]);var f=i.a.useMemo((function(){return c.map((function(e){var t=e[o]===s;return Object(Ka.jsx)(k.a,{togglable:!0,primary:t,selected:t,onClick:function(){return j(e[o])},children:e[d]},e[o])}))}),[c,s,j,d,o]);return Object(Ka.jsxs)(_.a,{role:"group","aria-label":t,children:[Object(Ka.jsx)(Fd.b,{editorValue:" ",editorValid:n,style:{display:"block"},children:t}),Object(Ka.jsx)(k.b,Object(v.a)(Object(v.a)({width:"100%"},b),{},{children:f}))]})}var um=i.a.memo(om);function dm(e){var t=e.pageSize,n=void 0===t?100:t,a=e.dataItemKey,c=void 0===a?"id":a,r=e.textField,s=void 0===r?"name":r,l=e.request,u=Object(yd.a)(e,["pageSize","dataItemKey","textField","request"]),d=i.a.useState(0),b=Object(o.a)(d,2),j=b[0],f=b[1],h=i.a.useState(),p=Object(o.a)(h,2),g=p[0],O=p[1],C=i.a.useState(!1),_=Object(o.a)(C,2),y=_[0],S=_[1],k=i.a.useState(0),w=Object(o.a)(k,2),E=w[0],I=w[1],D=i.a.useReducer((function(e,t){switch(t.type){default:return e;case"CLEAR":return new m.b;case"ADD":return t.data.reduce((function(e,t){return e.set(t[c],t)}),e)}}),new m.b),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useCallback((function(e){f(e.page.skip)}),[]),A=i.a.useMemo((function(){return Math.floor((j+50)/n)}),[j,n]),P=i.a.useMemo((function(){return Object(x.a)(M.values()).slice(j,j+n)}),[M,j,n]),L=i.a.useCallback((function(e,t){S(!0),l({page:e,size:n,filter:null==t?null:t.value}).then((function(e){var t=e.data,n=e.totalRecords;N({type:"ADD",data:t}),I(n)})).then((function(){return S(!1)}))}),[l,n]);return i.a.useEffect((function(){f(0),N({type:"CLEAR"})}),[g]),i.a.useEffect((function(){var e=setTimeout((function(){L(A,g)}),1e3);return function(){return window.clearTimeout(e)}}),[A,g,L]),Object(Ka.jsx)(lm,Object(v.a)(Object(v.a)({},u),{},{loading:y,data:P,textField:s,dataItemKey:c,onFilterChange:O,onPageChange:R,allowUnknownValues:!0,virtual:{skip:j,pageSize:n,total:E}}))}var mm=i.a.memo(dm);function bm(e){return i.a.useCallback((function(){if("function"===typeof e)return e.apply(void 0,arguments)}),[e])}function jm(e){var t=e.value,n=e.variant,a=(e.valid,e.errors),c=void 0===a?[]:a,r=e.label,s=void 0===r?"":r,l=e.onChange,u=e.validations,d=e.onDirtyChange,m=e.onErrorsChange,b=Object(yd.a)(e,["value","variant","valid","errors","label","onChange","validations","onDirtyChange","onErrorsChange"]),j=i.a.useState(!1),f=Object(o.a)(j,2),h=f[0],p=f[1],g=bm(m),O=i.a.useCallback((function(e){p(e),"function"===typeof d&&d(e)}),[d]),x=i.a.useMemo((function(){return null==u?{}:u}),[u]),C=i.a.useMemo((function(){if(""!==s)return!0===x.required?s+" *":s}),[x,s]),_=i.a.useMemo((function(){return 0===c.length}),[c]),y=i.a.useCallback((function(e){O(!0),"function"===typeof l&&l(e)}),[l,O]);return i.a.useEffect((function(){if(!1!==h){var e=ei(t,x),n=(0===e.length?[]:[e]).map((function(e){return"".concat(s," ").concat(e)}));g(n)}}),[t,h,s,x,g]),i.a.useMemo((function(){var e=Object(v.a)({valid:_,value:t,label:C,onChange:y},b);switch(n){case"File":return Object(Ka.jsx)(Pd,Object(v.a)({},e));case"Time":return Object(Ka.jsx)(Hd,Object(v.a)({},e));case"Date":return Object(Ka.jsx)(Vd,Object(v.a)({},e));case"Input":return Object(Ka.jsx)(Kd,Object(v.a)({},e));case"TextArea":return Object(Ka.jsx)(rm,Object(v.a)({},e));case"Numeric":return Object(Ka.jsx)(Yd,Object(v.a)({},e));case"Checkbox":return Object(Ka.jsx)(Xd,Object(v.a)({},e));case"Combobox":return Object(Ka.jsx)(tm,Object(v.a)({},e));case"DateTime":return Object(Ka.jsx)(im,Object(v.a)({},e));case"MultiSelect":return Object(Ka.jsx)(lm,Object(v.a)({},e));case"ButtonGroup":return Object(Ka.jsx)(um,Object(v.a)({},e));case"MultiSelectAPI":return Object(Ka.jsx)(mm,Object(v.a)({},e));default:return null}}),[n,_,t,C,y,b])}var fm=i.a.memo(jm);function hm(e){var t=e.length,n=e.content,a=void 0===n?"":n;return null!=a&&(a.length<=t?a:Object(Ka.jsx)(Sd.a,{anchorElement:"target",children:Object(Ka.jsx)("span",{title:a,children:a.substring(0,t)+" ..."})}))}var pm=i.a.memo(hm),gm=n(401),Om=n.n(gm),vm=n(22),xm=n(125),Cm=n(264);function _m(){var e=i.a.useState(window.innerWidth),t=Object(o.a)(e,2),n=t[0],a=t[1];return i.a.useEffect((function(){var e=function(){return a(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}var ym=["up","down"],Sm={xs:0,sm:600,md:960,lg:1280,xl:1920};function km(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xs",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up";if(!1===ym.includes(t))throw new Error("invalid direction specified - valid directions: "+ym.join(", "));var n=Sm[e];if(null==n)throw new Error("invalid breakpoint specified - valid breakpoints: "+Object.keys(Sm).join(", "));var a=_m();return"up"===t?a>=n:a<n}var wm="reorder",Em="selected";function Im(e){var t=e.group,n=e.filter,a=e.skip,c=void 0===a?0:a,r=e.sort,s=void 0===r?[]:r,l=e.columns,u=void 0===l?[]:l,d=e.exportData,b=void 0===d?[]:d,j=e.total,f=e.isLoading,h=void 0!==f&&f,p=e.filterable,g=void 0!==p&&p,O=e.exportColumns,_=void 0===O?[]:O,y=e.exportFilename,S=void 0===y?"Export.xlsx":y,w=e.data,E=void 0===w?[]:w,I=e.reorderable,D=void 0!==I&&I,T=e.selectedRecords,M=void 0===T?[]:T,N=e.frontendSorting,R=void 0===N||N,A=e.reorderableTitle,P=void 0===A?" ":A,L=e.detail,F=e.reorderableTooltip,U=void 0===F?" ":F,q=e.frontendFiltering,G=void 0!==q&&q,H=e.frontendPagination,B=void 0!==H&&H,V=e.reorderableHeaderTooltip,z=void 0===V?"":V,W=e.noDataMessage,K=void 0===W?"No records available":W,J=e.noDataIcon,Y=void 0===J?Object(Ka.jsx)("i",{className:"fas fa-times fa-7x"}):J,Q=e.sortable,X=void 0===Q?{allowUnsort:!0,mode:"multiple"}:Q,$=e.pageable,Z=void 0===$?{type:"numeric",value:"input",info:!1,alwaysVisible:!0,pageSizes:[10,20,50,100,500]}:$,ee=e.onReorderDrop,te=e.onReorderStart,ne=e.onRecordSelection,ae=e.onDataStateChange,ie=e.isRecordSelectable,ce=Object(yd.a)(e,["group","filter","skip","sort","columns","exportData","total","isLoading","filterable","exportColumns","exportFilename","data","reorderable","selectedRecords","frontendSorting","reorderableTitle","detail","reorderableTooltip","frontendFiltering","frontendPagination","reorderableHeaderTooltip","noDataMessage","noDataIcon","sortable","pageable","onReorderDrop","onReorderStart","onRecordSelection","onDataStateChange","isRecordSelectable"]),re=i.a.useRef(null),se=i.a.useRef(null),le=km("md","down"),oe=i.a.useState(new m.b),ue=Object(o.a)(oe,2),de=ue[0],me=ue[1],be=i.a.useState(),je=Object(o.a)(be,2),fe=je[0],he=je[1],pe="function"===typeof ne,ge=bm(ee),Oe=bm(te),ve=null!=e.take?e.take:null==Z.pageSizes?10:Z.pageSizes[0];i.a.useEffect((function(){var e=re.current;if(null==e)return{left:0,right:0,top:0,bottom:0};var t=e.querySelector(".k-grid-pager"),n=e.querySelector(".k-grid-header"),a=null==t?20:t.offsetHeight+20+"px";he({left:"10px",right:"20px",top:null==n?0:10+(!0===g?109:45)+"px",bottom:a})}),[re,g]);var xe=i.a.useCallback((function(e){return M.includes(e)}),[M]),Ce=i.a.useMemo((function(){var e={data:[],total:0};e.data=E.map((function(e){return Object.assign({},e,Object(C.a)({},Em,xe(e.id)))})),!0===G&&(e.data=Object($d.a)(e.data,n)),!0===R&&(e.data=Object($d.c)(e.data,s)),e.total=e.data.length,e.data=!1===B?e.data:e.data.slice(c,Math.min(c+ve,e.data.length));var t=u.filter((function(e){return null!=e.view}));return t.length>0&&(e.data=e.data.map((function(e){var n=Object.assign({},e);return t.forEach((function(e){n[e.field]=n[e.view]})),n}))),e}),[c,ve,s,n,u,E,R,xe,G,B]),_e=Ce.data,ye=Ce.total,Se=null!=j?j:ye;i.a.useEffect((function(){var e=u.reduce((function(e,t){var n=t.title,a=t.field,i=t.width;return"fill"===i?e:e.set(t.field,null!=i?i:[n].concat(Object(x.a)(_e.map((function(e){return e[a]})))).reduce((function(e,t){var n=Om()(t,{font:"Roboto",fontSize:"15px"}).width;return Math.max(n+48,e)}),!0===g?240:0))}),new m.b);!0!==e.equals(de)&&me(e)}),[_e,u,g,de]);var ke=i.a.useCallback((function(e){return"function"!==typeof ie||!0===ie(e)}),[ie]),we=i.a.useCallback((function(){if(!1!==pe){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.reduce((function(e,t){var n=t.record,a=t.checked;if(!0===a&&!1===ke(n))return e;if(!1===a){var i=e.indexOf(n.id);-1!==i&&e.splice(i,1)}else e.push(n.id);return e}),Object(x.a)(M));ne(Object(x.a)(new window.Set(a)))}}),[M,ke,pe,ne]),Ee=i.a.useCallback((function(e){var t=e.dataItem;we({record:t,checked:!xe(t.id)})}),[we,xe]),Ie=i.a.useCallback((function(e){var t=e.syntheticEvent.target.checked;we.apply(void 0,Object(x.a)(_e.map((function(e){return{record:e,checked:t}}))))}),[_e,we]),De=i.a.useCallback((function(){"function"===typeof ae&&ae.apply(void 0,arguments)}),[ae]),Te=i.a.useMemo((function(){return _e.every((function(e){return!1===ke(e)||xe(e.id)}))}),[_e,ke,xe]),Me=i.a.useMemo((function(){return 0===_.length?null:_.map((function(e){return Object(Ka.jsx)(Cm.b,{field:e.field,title:e.title})}))}),[_]),Ne=i.a.useMemo((function(){var e=[];return!0===pe&&e.push(Object(Ka.jsx)(xm.b,{locked:!0,field:Em,width:"".concat(55,"px"),headerSelectionValue:Te},Em)),!0===D&&e.push(Object(Ka.jsx)(xm.b,{locked:!0,sortable:!1,filterable:!1,field:wm,title:P,width:"".concat(90,"px"),headerCell:z,cell:function(e){var t=e.dataItem,n=e.className,a=e.style;return!0!==t.reorder?Object(Ka.jsx)("td",{}):Object(Ka.jsx)("td",{style:a,className:n,onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.preventDefault(),t.id!==e.dataTransfer.getData("text/plain")&&ge(e,t)},children:Object(Ka.jsx)("div",{className:"ResponsiveGridReorder",children:Object(Ka.jsx)("div",{draggable:!0,className:"k-icon k-i-reorder",title:U,onDragStart:function(e){Oe(e,t),e.dataTransfer.dropEffect="move",e.dataTransfer.setData("text/plain",t.id)}})})},t.id)}},wm)),e.push.apply(e,Object(x.a)(u.map((function(e){e.style;var t=e.field,a=e.locked,i=e.title,c=void 0===i?" ":i,r=Object(yd.a)(e,["style","field","locked","title"]),s=!0===xm.c.active(t,n)?"active":"";return Object(Ka.jsx)(xm.b,Object(v.a)(Object(v.a)({title:c,field:t,locked:a},r),{},{width:de.get(t),headerClassName:s,cell:function(e){var n=e.dataItem,a=e.className,i=e.style;return Object(Ka.jsx)("td",{style:i,className:a,children:n[t]},n.id)}}),t)})))),e}),[n,u,D,de,ge,Oe,P,U,pe,z,Te]),Re=i.a.useMemo((function(){return _e.map((function(e,t){var n=[];if(!0===pe&&!0===ke(e)){var a=!0===xe(e.id),i=!0===a?"Unselect record '".concat(e.id,"' selection"):"Select record '".concat(e.id,"' selection");n.push(Object(Ka.jsx)("div",{className:"ResponsiveGridField",children:Object(Ka.jsx)("div",{className:"ResponsiveGridFieldValue",children:Object(Ka.jsx)(k.a,{role:"switch",title:i,primary:a,"aria-checked":a,onClick:function(){return Ee({dataItem:e})},children:a?"Unselect":"Select"})})},Em))}n.push.apply(n,Object(x.a)(u.map((function(t){return Object(Ka.jsxs)("div",{className:"ResponsiveGridField",children:[null!=t.title&&Object(Ka.jsx)("span",{className:"ResponsiveGridFieldLabel",children:t.title}),Object(Ka.jsx)("div",{className:"ResponsiveGridFieldValue",children:e[t.field]})]},t.field)}))));var c=["ResponsiveGridDetails"];return t%2===0&&c.push("ResponsiveGridDetails--Highlight"),Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)("div",{className:c.join(" "),children:n}),Object(Ka.jsx)("hr",{})]},e.id||t)}))}),[_e,u,xe,Ee,ke,pe]),Ae=i.a.useCallback((function(){null!=se.current&&se.current.save(b,null==Me?Ne:Me)}),[b,Ne,Me]);return Object(Ka.jsxs)("div",{className:"ResponsiveGrid",ref:re,children:[b.length>0&&Object(Ka.jsx)("div",{className:"ResponsiveGridActions",children:Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(Cm.a,{ref:se,fileName:S}),Object(Ka.jsx)(k.a,{look:"flat",icon:"download",onClick:Ae,children:"Export to Excel"})]})}),!1===le?Object(Ka.jsxs)("div",{className:"ResponsiveGridDesktopContent",children:[!0===h?Object(Ka.jsxs)("div",{className:"ResponsiveGridAnnoucement ResponsiveGridAnnouncementLoading",children:[Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin fa-3x"}),Object(Ka.jsx)("strong",{children:"Loading..."})]}):0===_e.length&&Object(Ka.jsxs)("div",{className:"ResponsiveGridAnnoucement",style:fe,children:[Y,K]}),Object(Ka.jsxs)(xm.a,Object(v.a)(Object(v.a)({data:_e,take:ve,skip:c,sort:s,total:Se,group:t,filter:n,sortable:X,pageable:Z,filterable:g,expandField:"expanded",selectedField:Em,onSelectionChange:Ee,onDataStateChange:De,onHeaderSelectionChange:Ie,detail:null!=L&&L},ce),{},{children:[Object(Ka.jsx)(xm.d,{children:"There is no data available"}),Ne]}))]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)("div",{className:"ResponsiveGridMobileContent",children:Re.length>0?Re:Object(Ka.jsx)("span",{className:"ResponsiveGridNoDataMessage",children:K})}),!1!==Z&&Object(Ka.jsx)(vm.b,{skip:c,take:ve,type:"input",info:!1,total:Se,previousNext:!0,pageSizes:null==Z?[]:Z.pageSizes,onPageChange:function(e){De({data:Object.assign({},{take:ve,skip:c,sort:s,group:t,filter:n},e)})}})]})]})}var Dm=i.a.memo(Im),Tm=i.a.createContext({setTitle:function(){},setDescription:function(){},setBreadcrumbs:function(){},setContentTitle:function(){}}),Mm=function(e){var t=e.messageList.map((function(e,t){return Object(Ka.jsx)("li",{children:e},t)}));return Object(Ka.jsx)("ul",{children:t})};function Nm(e){return i.a.useCallback((function(){return Xa(e)}),[e])}var Rm={DELETE:{id:"DELETE",name:"Delete"},READ:{id:"READ",name:"Read"},UPDATE:{id:"UPDATE",name:"Update"},CREATE:{id:"CREATE",name:"Create"}};function Am(e){var t=Rm[e];return null==t?null:t.name}var Pm=Rm,Lm={skip:0,take:20,sort:[{dir:"desc",field:"date"}]};function Fm(){var e=Object(l.c)(),t=i.a.useState(!0),n=Object(o.a)(t,2),a=n[0],c=n[1],r=i.a.useState(0),u=Object(o.a)(r,2),d=u[0],m=u[1],b=i.a.useState(!0),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState([]),g=Object(o.a)(p,2),O=g[0],E=g[1],I=i.a.useReducer((function(e,t){switch(t.type){case"UPDATE":return["ip","uri","skip","take","sort","action","user_id","to_date","audit_id","from_date"].reduce((function(e,n){var a=t.data[n];return null==a?e:Object.assign({},e,Object(C.a)({},n,a))}),e);default:return e}}),Lm),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useMemo((function(){return{skip:T.skip,take:T.take,sort:T.sort}}),[T]),R=i.a.useMemo((function(){return null!=T.from_date&&null!=T.to_date}),[T]),A=i.a.useContext(Tm),P=A.setTitle,L=A.setBreadcrumbs,F=A.setContentTitle,U=i.a.useMemo((function(){var e=new window.Date;return new window.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())}),[]),q=i.a.useMemo((function(){var e=new window.Date(U.getTime());return e.setDate(e.getDate()-15),e}),[U]),G=i.a.useMemo((function(){return[]}),[]),H=i.a.useMemo((function(){return[]}),[]),B=i.a.useMemo((function(){return[]}),[]),V=i.a.useMemo((function(){return[]}),[]),z=i.a.useMemo((function(){return[]}),[]),W=i.a.useState([]),K=Object(o.a)(W,2),J=K[0],Y=K[1],Q=i.a.useState(q),X=Object(o.a)(Q,2),$=X[0],Z=X[1],ee=i.a.useMemo((function(){return{required:!0}}),[]),te=i.a.useState([]),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=i.a.useState(U),re=Object(o.a)(ce,2),se=re[0],le=re[1],oe=i.a.useMemo((function(){return{required:!0}}),[]),ue=i.a.useState([]),de=Object(o.a)(ue,2),be=de[0],je=de[1],fe=i.a.useState(z),he=Object(o.a)(fe,2),pe=he[0],ge=he[1],Oe=i.a.useState([]),ve=Object(o.a)(Oe,2),xe=ve[0],Ce=ve[1],_e=i.a.useState(H),ye=Object(o.a)(_e,2),Se=ye[0],ke=ye[1],we=i.a.useState([]),Ee=Object(o.a)(we,2),Ie=Ee[0],De=Ee[1],Te=i.a.useState(V),Me=Object(o.a)(Te,2),Ne=Me[0],Re=Me[1],Ae=i.a.useMemo((function(){return Object.keys(Pm).map((function(e){return Pm[e]}))}),[]),Pe=i.a.useState([]),Le=Object(o.a)(Pe,2),Fe=Le[0],Ue=Le[1],qe=i.a.useState(B),Ge=Object(o.a)(qe,2),He=Ge[0],Be=Ge[1],Ve=i.a.useState([]),ze=Object(o.a)(Ve,2),We=ze[0],Ke=ze[1],Je=i.a.useState([]),Ye=Object(o.a)(Je,2),Qe=Ye[0],Xe=Ye[1],$e=i.a.useState(G),Ze=Object(o.a)($e,2),et=Ze[0],tt=Ze[1],nt=Nm(i.a.useMemo((function(){return[{label:"From",value:$,setErrors:Y,validations:ee},{label:"To",value:se,setErrors:ie,validations:oe}]}),[$,Y,ee,se,ie,oe])),at=i.a.useCallback((function(t){e(Ui(t))}),[e]);i.a.useEffect((function(){return P("Audits"),F("Audits"),L([{name:"Audits"}]),function(){P(null),L([]),F(null)}}),[P,L,F]);var it=Object(l.d)((function(e){return{user:e.user,audit:e.audit}})),ct=it.user,rt=it.audit;i.a.useEffect((function(){Ke(Object(x.a)(ct.values()).map((function(e){return{id:e.get("user_id"),name:e.get("ldap_id")}})))}),[ct]);var st=i.a.useMemo((function(){if(!1!==R)return["ip","uri","action","user_id","audit_id"].reduce((function(e,t){var n=T[t];return 0===n.length||(e[t]=n.join(",")),e}),Object(v.a)({to_date:T.to_date.getTime(),from_date:T.from_date.getTime()},ni(N)))}),[T,N,R]),lt=i.a.useCallback((function(){e(Pu())}),[e]),ot=i.a.useCallback((function(){e({type:me})}),[e]),ut=i.a.useCallback((function(){return lt(),e(Lu({page:0,size:1e5}))}),[lt,e]),dt=i.a.useCallback((function(t){return ot(),e(uc(t)).then((function(e){m(e.total_records)}))}),[ot,e]),mt=i.a.useCallback((function(){return h(!0),ut().catch((function(e){at({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){h(!1)}))}),[ut,at]),bt=i.a.useCallback((function(){if(null!=st)return c(!0),dt(st).catch((function(e){at({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){c(!1)}))}),[dt,st,at]);i.a.useEffect((function(){return mt(),function(){return lt()}}),[mt,lt]),i.a.useEffect((function(){return bt(),function(){return ot()}}),[bt,ot]),i.a.useEffect((function(){null!=$&&null!=se&&$>se&&le($)}),[$,se]);var jt=i.a.useCallback((function(){le(U),tt(G),Z(q),ke(H),Be(B),Re(V),ge(z)}),[G,H,B,U,V,z,q]),ft=i.a.useCallback((function(){var e=nt();e.length>0?at({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):M({type:"UPDATE",data:{skip:0,to_date:se,from_date:$,ip:et.map((function(e){return e.name})),uri:Se.map((function(e){return e.name})),user_id:He.map((function(e){return e.id})),action:Ne.map((function(e){return e.id})),audit_id:pe.map((function(e){return e.name}))}})}),[se,$,et,Se,He,Ne,pe,at,nt]);i.a.useEffect((function(){!1===R&&ft()}),[T,ft,R]);var ht=i.a.useCallback((function(e){var t=Object(x.a)(O),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),E(t)}),[O]),pt=i.a.useCallback((function(e){M({type:"UPDATE",data:{skip:e.dataState.skip,take:e.dataState.take,sort:e.dataState.sort}})}),[]),gt=i.a.useCallback((function(e){!0!==pe.some((function(t){var n=t.name;return e===n}))&&ge([].concat(Object(x.a)(pe),[{name:e}]))}),[pe]),Ot=i.a.useCallback((function(e){!0!==Se.some((function(t){var n=t.name;return e===n}))&&ke([].concat(Object(x.a)(Se),[{name:e}]))}),[Se]),vt=i.a.useCallback((function(e){!0!==et.some((function(t){var n=t.name;return e===n}))&&tt([].concat(Object(x.a)(et),[{name:e}]))}),[et]),xt=i.a.useCallback((function(e){!0!==Ne.some((function(t){var n=t.id;return e===n}))&&Re([].concat(Object(x.a)(Ne),[Pm[e]]))}),[Ne]),Ct=i.a.useCallback((function(e){if(!0!==He.some((function(t){var n=t.id;return e===n}))){var t=ct.get(e);null!=t&&Be([].concat(Object(x.a)(He),[{id:e,name:t.get("ldap_id")}]))}}),[ct,He]),_t=i.a.useMemo((function(){return[{field:"expand",width:"65px",sortable:!1,filterable:!1},{field:"uri",title:"URI",width:"340px",sortable:!1,filterable:!1},{field:"action",title:"Action",width:"150px",sortable:!1,filterable:!1},{field:"user",title:"User",width:"170px",sortable:!1,filterable:!1},{field:"ip",title:"IP",width:"190px",sortable:!1,filterable:!1},{field:"session_id",title:"Session ID",width:"100px",sortable:!1,filterable:!1},{field:"date",title:"Entry Time",view:"date_dom",width:"250px",filterable:!1},{field:"audit_id",title:"Audit ID",width:"150px",sortable:!1,filterable:!1}]}),[]),yt=i.a.useMemo((function(){return[{field:"audit_id",title:"Audit ID"},{field:"uri",title:"URI"},{field:"action",title:"Action"},{field:"user",title:"User"},{field:"ip",title:"IP"},{field:"request",title:"Request"},{field:"response",title:"Response"},{field:"ip",title:"IP"},{field:"new_value",title:"New Value"},{field:"previous_value",title:"Previous Value"},{field:"date",title:"Entry Time"}]}),[]),St=i.a.useMemo((function(){return Object(x.a)(rt.values()).map((function(e){var t=e.get("audit_id"),n=O.includes(t);return{id:t,expanded:n,expand:Object(Ka.jsx)(k.a,{look:"flat",icon:!0===n?"minus":"add","aria-label":"View Audit Reports",onClick:function(){return ht(t)}}),user:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(s.b,{to:"/users/".concat(e.getIn(["user","id"])),children:e.getIn(["user","username"])}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add User in the filter criteria","aria-label":"Add User in the filter criteria",onClick:function(){return Ct(e.getIn(["user","id"]))}})]}),ip:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.get("ip"),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add IP in the filter criteria","aria-label":"Add IP in the filter criteria",onClick:function(){return vt(e.get("ip"))}})]}),audit_id:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(Id,{value:t}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Audit ID in the filter criteria","aria-label":"Add Audit ID in the filter criteria",onClick:function(){return gt(t)}})]}),date:e.get("date"),date_dom:Object(Ka.jsx)(Nd,{utc:e.get("date")}),session_id:Object(Ka.jsx)(Id,{value:e.get("session_id")}),uri:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(pm,{length:40,content:Um(e.get("uri"))}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add URI in the filter criteria","aria-label":"Add URI in the filter criteria",onClick:function(){return Ot(e.get("uri"))}})]}),action:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(wd,{variant:qm(e.get("action")),children:Am(e.get("action"))}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Action in the filter criteria","aria-label":"Add Action in the filter criteria",onClick:function(){return xt(e.get("action"))}})]})}}))}),[rt,vt,Ot,Ct,O,xt,gt,ht]),kt=i.a.useMemo((function(){return(null==rt?[]:Object(x.a)(rt.values())).map((function(e){var t=new window.Date(e.get("date"));return{audit_id:e.get("audit_id"),uri:e.get("uri"),ip:e.get("ip"),action:Am(e.get("action")),user:e.getIn(["user","username"]),session_id:e.get("session_id"),request:e.get("request"),response:e.get("response"),new_value:e.get("new_value"),previous_value:e.get("previous_value"),date:new window.Date(t).toString()}}))}),[rt]);return Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Filter"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:4,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"From",value:$,errors:J,onChange:Z,onErrorsChange:Y,validations:ee,max:null==se?"now":se})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"To",value:se,errors:ae,onChange:le,onErrorsChange:ie,validations:oe,min:null==$?void 0:$,max:"now"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"audit-id-filter",children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Audit ID",allowCustom:!0,errors:be,value:pe,onChange:ge,onErrorsChange:je})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"action-filter",children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Action",errors:Ie,data:Ae,value:Ne,onChange:Re,onErrorsChange:De})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"user-filter",children:!0===f?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50,"aria-label":"Loading Users"}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"User",errors:Fe,value:He,data:We,onChange:Be,onErrorsChange:Ue})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"ip-filter",children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"IP",allowCustom:!0,errors:Qe,value:et,onChange:tt,onErrorsChange:Xe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"uri-filter",children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"URI",allowCustom:!0,errors:xe,value:Se,onChange:ke,onErrorsChange:Ce})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:jt,children:"Clear"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ft,children:"Search"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{data:St,resizable:!0,groupable:!1,isLoading:a,columns:_t,style:{height:"600px",marginTop:"20px"},skip:N.skip,take:N.take,sort:N.sort,total:d,filter:N.filter,detail:_d,exportData:kt,exportColumns:yt,onDataStateChange:pt})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:bt,children:"Reload"})})]})})]})}function Um(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return null==e||0===String(e).length?t:e}function qm(e){switch(e){case"UPDATE":return"info";case"DELETE":return"error";case"READ":return"warning";case"CREATE":return"success";default:return"default"}}var Gm=i.a.memo(Fm),Hm=n(105),Bm=n(106),Vm=n(110),zm=n(109),Wm=function(e){Object(Vm.a)(n,e);var t=Object(zm.a)(n);function n(){return Object(Hm.a)(this,n),t.apply(this,arguments)}return Object(Bm.a)(n,[{key:"render",value:function(){return Object(Ka.jsx)("div",{style:{height:this.props.height},children:Object(Ka.jsx)("div",{className:this.props.className,children:"Loading..."})})}}]),n}(a.Component);function Km(e){var t=e.kendo,n=e.label,a=Object(yd.a)(e,["kendo","label"]),c=t.value,r=t.onChange,s=i.a.useState(null),l=Object(o.a)(s,2),u=l[0],d=l[1],m=i.a.useMemo((function(){return null!==Jm(c)}),[c]),b=i.a.useMemo((function(){return u!==Jm(c)}),[u,c]);i.a.useEffect((function(){d(Jm(c))}),[c]);var j=i.a.useCallback((function(e,t){if(null==t)return!0;var n=new Date(t),a=new Date(e);return[n.getDate()===a.getDate(),n.getMonth()===a.getMonth(),n.getFullYear()===a.getFullYear()].every((function(e){return!0===e}))}),[]),f=i.a.useCallback((function(e){r({value:e,operator:j})}),[j,r]),h=i.a.useCallback((function(){f(null)}),[f]),p=i.a.useCallback((function(){f(u)}),[u,f]),g=i.a.useCallback((function(e){13===e.keyCode&&p()}),[p]);return Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",justifyContent:"space-between",children:[Object(Ka.jsx)(fm,Object(v.a)(Object(v.a)({value:u},a),{},{onChange:d,onKeyDown:g,label:null==n?null:"Filter By ".concat(n),variant:"Date"})),!0===b&&Object(Ka.jsx)(k.a,{look:"flat",icon:"search",onClick:p,"aria-label":null==n?"Submit Filter":"Submit ".concat(n," Filter")}),!0===m&&Object(Ka.jsx)(k.a,{look:"flat",icon:"close",onClick:h,"aria-label":null==n?"Clear Filter":"Clear ".concat(n," Filter")}),!1===b&&!1===m&&Object(Ka.jsx)("span",{className:"k-icon k-i-filter"})]})}function Jm(e){return!0===[""].includes(e)?null:e}var Ym=i.a.memo(Km);function Qm(e){var t=e.kendo,n=e.label,a=Object(yd.a)(e,["kendo","label"]),c=t.value,r=t.onChange,s=i.a.useState(""),l=Object(o.a)(s,2),u=l[0],d=l[1],m=i.a.useMemo((function(){return""!==Xm(c)}),[c]),b=i.a.useMemo((function(){return u!==Xm(c)}),[u,c]);i.a.useEffect((function(){d(Xm(c))}),[c]);var j=i.a.useCallback((function(e,t){return e.includes(t)}),[]),f=i.a.useCallback((function(e){r({value:e,operator:j})}),[j,r]),h=i.a.useCallback((function(){f("")}),[f]),p=i.a.useCallback((function(){f(u)}),[u,f]),g=i.a.useCallback((function(e){13===e.keyCode&&p()}),[p]);return Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",justifyContent:"space-between",children:[Object(Ka.jsx)(fm,Object(v.a)(Object(v.a)({value:u},a),{},{onChange:d,onKeyDown:g,label:null==n?null:"Filter By ".concat(n),variant:"Input"})),!0===b&&Object(Ka.jsx)(k.a,{look:"flat",icon:"search",onClick:p,"aria-label":null==n?"Submit Filter":"Submit ".concat(n," Filter")}),!0===m&&Object(Ka.jsx)(k.a,{look:"flat",icon:"close",onClick:h,"aria-label":null==n?"Clear Filter":"Clear ".concat(n," Filter")}),!1===b&&!1===m&&Object(Ka.jsx)("span",{className:"k-icon k-i-filter"})]})}function Xm(e){return!0===[null].includes(e)?"":e}var $m=i.a.memo(Qm);function Zm(e){var t=e.kendo,n=e.label,a=Object(yd.a)(e,["kendo","label"]),c=t.value,r=t.onChange,s=i.a.useState(null),l=Object(o.a)(s,2),u=l[0],d=l[1],m=i.a.useMemo((function(){return null!==eb(c)}),[c]),b=i.a.useMemo((function(){return u!==eb(c)}),[u,c]);i.a.useEffect((function(){d(eb(c))}),[c]);var j=i.a.useCallback((function(e,t){return null==t||Number(t)===Number(e)}),[]),f=i.a.useCallback((function(e){r({operator:j,value:null==e?e:String(e)})}),[j,r]),h=i.a.useCallback((function(){f(null)}),[f]),p=i.a.useCallback((function(){f(u)}),[u,f]),g=i.a.useCallback((function(e){13===e.keyCode&&p()}),[p]);return Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",justifyContent:"space-between",children:[Object(Ka.jsx)(fm,Object(v.a)(Object(v.a)({value:u,spinners:!1},a),{},{onChange:d,onKeyDown:g,label:null==n?null:"Filter By ".concat(n),variant:"Numeric"})),!0===b&&Object(Ka.jsx)(k.a,{look:"flat",icon:"search",onClick:p,"aria-label":null==n?"Submit Filter":"Submit ".concat(n," Filter")}),!0===m&&Object(Ka.jsx)(k.a,{look:"flat",icon:"close",onClick:h,"aria-label":null==n?"Clear Filter":"Clear ".concat(n," Filter")}),!1===b&&!1===m&&Object(Ka.jsx)("span",{className:"k-icon k-i-filter"})]})}function eb(e){return!0===[null,""].includes(e)?null:Number(e)}var tb=i.a.memo(Zm);function nb(e){var t=e.kendo,n=e.label,a=e.data,c=void 0===a?[]:a,r=Object(yd.a)(e,["kendo","label","data"]),s=t.value,l=t.onChange,u=i.a.useState(null),d=Object(o.a)(u,2),m=d[0],b=d[1],j=i.a.useMemo((function(){return null!==ab(s)}),[s]),f=i.a.useMemo((function(){return(m&&m.id)!==ab(s)}),[m,s]);i.a.useEffect((function(){var e=ab(s);b(null==e?null:c.find((function(t){return t.id===e})))}),[c,s]);var h=i.a.useCallback((function(e,t){return null==t||t===e}),[]),p=i.a.useCallback((function(e){l({operator:h,value:null==e?null:e.id})}),[h,l]),g=i.a.useCallback((function(){p(null)}),[p]),O=i.a.useCallback((function(){p(m)}),[m,p]),x=i.a.useCallback((function(e){13===e.keyCode&&O()}),[O]);return Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",justifyContent:"space-between",children:[Object(Ka.jsx)(fm,Object(v.a)(Object(v.a)({data:c,value:m,clearButton:!1},r),{},{onChange:b,onKeyDown:x,label:null==n?null:"Filter By ".concat(n),variant:"Combobox"})),!0===f&&Object(Ka.jsx)(k.a,{look:"flat",icon:"search",onClick:O,"aria-label":null==n?"Submit Filter":"Submit ".concat(n," Filter")}),!0===j&&Object(Ka.jsx)(k.a,{look:"flat",icon:"close",onClick:g,"aria-label":null==n?"Clear Filter":"Clear ".concat(n," Filter")}),!1===f&&!1===j&&Object(Ka.jsx)("span",{className:"k-icon k-i-filter"})]})}function ab(e){return!0===[""].includes(e)?null:e}var ib=i.a.memo(nb);function cb(e){var t=e.kendo,n=e.label,a=e.data,c=void 0===a?[]:a,r=Object(yd.a)(e,["kendo","label","data"]),s=t.value,l=t.onChange,o=i.a.useMemo((function(){return 0===s.length}),[s]),u=i.a.useMemo((function(){return!1===Array.isArray(s)?[]:c.filter((function(e){var t=e.id;return s.includes(t)}))}),[c,s]),d=i.a.useCallback((function(e,t){return 0===t.length||t.includes(e)}),[]),m=i.a.useCallback((function(e){l({operator:d,value:e.map((function(e){return e.id}))})}),[d,l]);return Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)(fm,Object(v.a)(Object(v.a)({},r),{},{data:c,value:u,autoClose:!0,onChange:m,variant:"MultiSelect",label:null==n?null:"Filter By ".concat(n)})),!0===o&&Object(Ka.jsx)("span",{className:"k-icon k-i-filter"})]})}var rb=i.a.memo(cb);function sb(e){var t=e.variant,n=e.props,a=void 0===n?{}:n,c=i.a.useState(null),r=Object(o.a)(c,2),s=r[0],l=r[1];i.a.useEffect((function(){var e=Object.keys(a).reduce((function(e,t){return e.set(t,a[t])}),new m.b);!0!==e.equals(s)&&l(e)}),[s,a]);var u=i.a.useMemo((function(){switch(t){case"Date":return Ym;case"Input":return $m;case"Numeric":return tb;case"Combobox":return ib;case"MultiSelect":return rb;default:return null}}),[t]);return i.a.useCallback((function(e){return null==s||null==u?null:Object(Ka.jsx)(u,Object(v.a)({kendo:e},s.toJS()))}),[s,u])}function lb(e){var t=e.fieldID,n=e.fieldName,a=e.namespace;return i.a.useMemo((function(){return a.reduce((function(e,a){return e.push({id:a.get(t),name:a.get(n)}),e}),[])}),[t,n,a])}var ob={DELIVRD:{id:"DELIVRD",name:"Delivered"},UNDELIV:{id:"UNDELIV",name:"Undelivered"},UNKNOWN:{id:"UNKNOWN",name:"Unknown"},REJECTD:{id:"REJECTD",name:"Rejected"},EXPIRED:{id:"EXPIRED",name:"Expired"},DELETED:{id:"DELETED",name:"Deleted"},ACCEPTD:{id:"ACCEPTD",name:"Accepted"},PENDING:{id:"PENDING",name:"Pending"},SUBMITTED:{id:"SUBMITTED",name:"Submitted"},ENROUTE:{id:"ENROUTE",name:"Enroute"}};function ub(e){var t=ob[e];return null==t?e:t.name}var db=ob,mb={skip:0,take:20};function bb(e){var t=e.messageID,n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(mb),d=Object(o.a)(u,2),b=d[0],j=d[1],f=i.a.useCallback((function(e){n(Ui(e))}),[n]),h=Object(l.d)((function(e){return{dlr:e.dlr,trafficErrorCodes:e.trafficErrorCodes}})),p=h.dlr,g=h.trafficErrorCodes,O=i.a.useCallback((function(){j(mb)}),[]),v=i.a.useCallback((function(e){j(e.dataState)}),[]),C=i.a.useCallback((function(){n({type:dn})}),[n]),_=i.a.useCallback((function(){var e={message_id:t};return C(),n(Po({params:e}))}),[n,C,t]),y=i.a.useCallback((function(){if(null!=t)return s(!0),_().then((function(){s(!1)})).catch((function(e){f({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[_,t,f]);i.a.useEffect((function(){y()}),[y]);var E=sb({variant:"Input",props:{label:"DLR Message"}}),I=sb({variant:"Input",props:{label:"Supplier Conn. Link"}}),D=sb({variant:"Date",props:{label:"Processed Date"}}),T=sb({variant:"Date",props:{label:"Received Date"}}),M=sb({variant:"Combobox",props:{label:"SMSC Delivery Report",data:i.a.useMemo((function(){return[{id:!0,name:"Yes"},{id:!1,name:"No"}]}),[])}}),N=sb({variant:"MultiSelect",props:{label:"Status",data:i.a.useMemo((function(){return Object.keys(db).map((function(e){return{id:e,name:db[e].name}}),[])}),[])}}),R=sb({variant:"MultiSelect",props:{label:"Error Code",data:lb({fieldID:"code",fieldName:"description",namespace:i.a.useMemo((function(){return g.set("000",new m.b({code:"000",description:"No Errors (000)"}))}),[g])})}}),A=i.a.useMemo((function(){return[{field:"received_time",title:"Received Time",view:"dateRecieveDOM",width:"250px",filterCell:T},{field:"processed_time",title:"Processed Time",view:"dateProcessDOM",width:"250px",filterCell:D},{field:"status",title:"Status",view:"status_DOM",width:"200px",filterCell:N},{field:"error_code",title:"Error Code",view:"error_code_DOM",width:"200px",filterCell:R},{field:"dlr_message",title:"DLR Message",width:"200px",filterCell:E},{field:"supplier_connection_link_name",title:"Supplier Connection Link",filterCell:I},{field:"is_smsc_delivery_report",view:"is_smsc_delivery_report_DOM",title:"SMSC Delivery Report",width:"250px",filterCell:M}]}),[N,E,R,T,M,D,I]),P=i.a.useMemo((function(){if(null!=t){var e=p.get(t);return(null==e?[]:Object(x.a)(e.values())).map((function(e){return{received_time:e.get("received_time"),is_smsc_delivery_report:e.get("is_smsc_delivery_report"),is_smsc_delivery_report_DOM:!0===e.get("is_smsc_delivery_report")?"Yes":"No",dateRecieveDOM:Object(Ka.jsx)(Nd,{utc:e.get("received_time")}),dlr_message:e.get("dlr_message"),status:e.get("status"),status_DOM:ub(e.get("status")),error_code:e.get("error_code"),error_code_DOM:"000"===e.get("error_code")?"000":g.getIn([e.get("error_code"),"description"])+" ("+e.get("error_code")+")",supplier_connection_link_name:e.get("supplier_connection_link_name"),processed_time:e.get("processed_time"),dateProcessDOM:Object(Ka.jsx)(Nd,{utc:e.get("processed_time")})}}))}}),[t,p,g]),L=i.a.useMemo((function(){if(null!=t){var e=p.get(t);return(null==e?[]:Object(x.a)(e.values())).map((function(e){var t=new window.Date(e.get("received_time")),n=new window.Date(e.get("processed_time"));return{received_time:new window.Date(t).toString(),dlr_message:e.get("dlr_message"),status:e.get("status"),error_code:e.get("error_code"),is_smsc_delivery_report:!0===e.get("is_smsc_delivery_report")?"Yes":"No",supplier_connection_link_name:e.get("supplier_connection_link_name"),processed_time:new window.Date(n).toString()}}))}}),[t,p]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:r,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:b.skip,take:b.take,sort:b.sort,filter:b.filter,data:P,columns:A,total:P.length,exportData:L,exportFilename:"DLR_Export_Message_"+t+".xlsx",onDataStateChange:v})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:y,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:O,children:"Clear Filters and Sorting"})]})]})})})}var jb=i.a.memo(bb),fb=["inbound_ss7","outbound_ss7","inbound_http","inbound_smpp","outbound_smpp"];function hb(e){var t=e.details,n=O("customer-portal"),a=i.a.useState(),c=Object(o.a)(a,2),r=c[0],s=c[1],l=i.a.useState(),u=Object(o.a)(l,2),d=u[0],m=u[1],b=i.a.useState(),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(),g=Object(o.a)(p,2),v=g[0],x=g[1],C=i.a.useState(),y=Object(o.a)(C,2),k=y[0],I=y[1],D=i.a.useState(),M=Object(o.a)(D,2),N=M[0],R=M[1],A=i.a.useState(),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useState(),$=Object(o.a)(X,2),Z=$[0],ee=$[1],te=i.a.useState(),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=i.a.useState(),re=Object(o.a)(ce,2),se=re[0],le=re[1],oe=i.a.useState(),ue=Object(o.a)(oe,2),de=ue[0],me=ue[1],be=i.a.useState(),je=Object(o.a)(be,2),fe=je[0],he=je[1],pe=i.a.useState(),ge=Object(o.a)(pe,2),Oe=ge[0],ve=ge[1],xe=i.a.useState(),Ce=Object(o.a)(xe,2),_e=Ce[0],ye=Ce[1],Se=i.a.useState(),ke=Object(o.a)(Se,2),we=ke[0],Ee=ke[1],Ie=i.a.useState(),De=Object(o.a)(Ie,2),Te=De[0],Me=De[1],Ne=i.a.useState(),Re=Object(o.a)(Ne,2),Ae=Re[0],Pe=Re[1],Le=i.a.useState(),Fe=Object(o.a)(Le,2),Ue=Fe[0],qe=Fe[1],Ge=i.a.useState(),He=Object(o.a)(Ge,2),Be=He[0],Ve=He[1],ze=i.a.useState(),We=Object(o.a)(ze,2),Ke=We[0],Je=We[1],Ye=i.a.useState(),Qe=Object(o.a)(Ye,2),Xe=Qe[0],$e=Qe[1],Ze=i.a.useState(),et=Object(o.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(),it=Object(o.a)(at,2),ct=it[0],rt=it[1],st=i.a.useState(),lt=Object(o.a)(st,2),ot=lt[0],ut=lt[1],dt=i.a.useState(),mt=Object(o.a)(dt,2),bt=mt[0],jt=mt[1],ft=i.a.useState(),ht=Object(o.a)(ft,2),pt=ht[0],gt=ht[1],Ot=i.a.useState(),vt=Object(o.a)(Ot,2),xt=vt[0],Ct=vt[1],_t=i.a.useState(),yt=Object(o.a)(_t,2),St=yt[0],kt=yt[1],wt=i.a.useState(),Et=Object(o.a)(wt,2),It=Et[0],Dt=Et[1],Tt=i.a.useState(),Mt=Object(o.a)(Tt,2),Nt=Mt[0],Rt=Mt[1],At=i.a.useState(),Pt=Object(o.a)(At,2),Lt=Pt[0],Ft=Pt[1],Ut=i.a.useState(),qt=Object(o.a)(Ut,2),Gt=qt[0],Ht=qt[1],Bt=i.a.useState(),Vt=Object(o.a)(Bt,2),zt=Vt[0],Wt=Vt[1],Kt=i.a.useState(),Jt=Object(o.a)(Kt,2),Yt=Jt[0],Qt=Jt[1],Xt=i.a.useState(),$t=Object(o.a)(Xt,2),Zt=$t[0],en=$t[1],tn=i.a.useState(),nn=Object(o.a)(tn,2),an=nn[0],cn=nn[1],rn=i.a.useState(),sn=Object(o.a)(rn,2),ln=sn[0],on=sn[1],un=i.a.useState(),dn=Object(o.a)(un,2),mn=dn[0],bn=dn[1],jn=i.a.useState(),fn=Object(o.a)(jn,2),hn=fn[0],pn=fn[1],gn=i.a.useState(),On=Object(o.a)(gn,2),vn=On[0],xn=On[1],Cn=i.a.useState(),_n=Object(o.a)(Cn,2),yn=_n[0],Sn=_n[1],kn=i.a.useState(),wn=Object(o.a)(kn,2),En=wn[0],In=wn[1],Dn=i.a.useState(),Tn=Object(o.a)(Dn,2),Mn=Tn[0],Nn=Tn[1],Rn=i.a.useState(),An=Object(o.a)(Rn,2),Pn=An[0],Ln=An[1],Fn=i.a.useState(),Un=Object(o.a)(Fn,2),qn=Un[0],Gn=Un[1],Hn=i.a.useState(),Bn=Object(o.a)(Hn,2),Vn=Bn[0],zn=Bn[1],Wn=i.a.useState(),Kn=Object(o.a)(Wn,2),Jn=Kn[0],Yn=Kn[1],Qn=i.a.useState(),Xn=Object(o.a)(Qn,2),$n=Xn[0],Zn=Xn[1],ea=i.a.useState(),ta=Object(o.a)(ea,2),na=ta[0],aa=ta[1],ia=i.a.useState(),ca=Object(o.a)(ia,2),ra=ca[0],sa=ca[1],la=i.a.useState(),oa=Object(o.a)(la,2),ua=oa[0],da=oa[1],ma=i.a.useState(),ba=Object(o.a)(ma,2),ja=ba[0],fa=ba[1],ha=i.a.useState(),pa=Object(o.a)(ha,2),ga=pa[0],Oa=pa[1],va=i.a.useState(),xa=Object(o.a)(va,2),Ca=xa[0],_a=xa[1],ya=i.a.useState(),Sa=Object(o.a)(ya,2),ka=Sa[0],wa=Sa[1],Ea=i.a.useState(),Ia=Object(o.a)(Ea,2),Da=Ia[0],Ta=Ia[1],Ma=i.a.useState(),Na=Object(o.a)(Ma,2),Ra=Na[0],Aa=Na[1],Pa=i.a.useState(),La=Object(o.a)(Pa,2),Fa=La[0],Ua=La[1],qa=i.a.useState(),Ga=Object(o.a)(qa,2),Ha=Ga[0],Ba=Ga[1],Va=i.a.useState(),za=Object(o.a)(Va,2),Wa=za[0],Ja=za[1],Ya=i.a.useState(),Qa=Object(o.a)(Ya,2),Xa=Qa[0],$a=Qa[1],Za=i.a.useState(),ei=Object(o.a)(Za,2),ti=ei[0],ni=ei[1],ai=i.a.useState(),ii=Object(o.a)(ai,2),ci=ii[0],ri=ii[1],si=i.a.useState(),li=Object(o.a)(si,2),oi=li[0],ui=li[1],di=i.a.useState(),mi=Object(o.a)(di,2),bi=mi[0],ji=mi[1],fi=i.a.useState(),hi=Object(o.a)(fi,2),pi=hi[0],gi=hi[1],Oi=i.a.useState(),vi=Object(o.a)(Oi,2),xi=vi[0],Ci=vi[1],_i=i.a.useState(),yi=Object(o.a)(_i,2),Si=yi[0],ki=yi[1],wi=i.a.useState(),Ei=Object(o.a)(wi,2),Ii=Ei[0],Di=Ei[1],Ti=i.a.useState(),Mi=Object(o.a)(Ti,2),Ni=Mi[0],Ri=Mi[1],Ai=i.a.useState(),Pi=Object(o.a)(Ai,2),Li=Pi[0],Fi=Pi[1],Ui=i.a.useState(),qi=Object(o.a)(Ui,2),Gi=qi[0],Hi=qi[1],Bi=i.a.useState(),Vi=Object(o.a)(Bi,2),zi=Vi[0],Wi=Vi[1],Ki=i.a.useState(),Ji=Object(o.a)(Ki,2),Yi=Ji[0],Qi=Ji[1],Xi=i.a.useState(),$i=Object(o.a)(Xi,2),Zi=$i[0],ec=$i[1],tc=i.a.useState(),nc=Object(o.a)(tc,2),ac=nc[0],ic=nc[1],cc=i.a.useState(),rc=Object(o.a)(cc,2),sc=rc[0],lc=rc[1],oc=i.a.useState(),uc=Object(o.a)(oc,2),dc=uc[0],mc=uc[1],bc=i.a.useState(),jc=Object(o.a)(bc,2),fc=jc[0],hc=jc[1],pc=i.a.useState(),gc=Object(o.a)(pc,2),Oc=gc[0],vc=gc[1],xc=i.a.useState(),Cc=Object(o.a)(xc,2),_c=Cc[0],yc=Cc[1],Sc=i.a.useState(),kc=Object(o.a)(Sc,2),wc=kc[0],Ec=kc[1],Ic=i.a.useState(),Dc=Object(o.a)(Ic,2),Tc=Dc[0],Mc=Dc[1],Nc=i.a.useState(),Rc=Object(o.a)(Nc,2),Ac=Rc[0],Pc=Rc[1],Lc=i.a.useState(),Fc=Object(o.a)(Lc,2),Uc=Fc[0],qc=Fc[1],Gc=i.a.useState(),Hc=Object(o.a)(Gc,2),Bc=Hc[0],Vc=Hc[1],zc=i.a.useState(),Wc=Object(o.a)(zc,2),Kc=Wc[0],Jc=Wc[1],Yc=i.a.useState(),Qc=Object(o.a)(Yc,2),Xc=Qc[0],$c=Qc[1],Zc=i.a.useState(),er=Object(o.a)(Zc,2),tr=er[0],nr=er[1],ar=i.a.useState(),ir=Object(o.a)(ar,2),cr=ir[0],rr=ir[1],sr=i.a.useState(),lr=Object(o.a)(sr,2),or=lr[0],ur=lr[1],dr=i.a.useState(),mr=Object(o.a)(dr,2),br=mr[0],jr=mr[1],fr=i.a.useState(),hr=Object(o.a)(fr,2),pr=hr[0],gr=hr[1],Or=i.a.useState(),vr=Object(o.a)(Or,2),xr=vr[0],Cr=vr[1],_r=i.a.useState(),yr=Object(o.a)(_r,2),Sr=yr[0],kr=yr[1],wr=i.a.useState(),Er=Object(o.a)(wr,2),Ir=Er[0],Dr=Er[1],Tr=i.a.useState(),Mr=Object(o.a)(Tr,2),Nr=Mr[0],Rr=Mr[1],Ar=i.a.useState(),Pr=Object(o.a)(Ar,2),Lr=Pr[0],Fr=Pr[1],Ur=i.a.useState(),qr=Object(o.a)(Ur,2),Gr=qr[0],Hr=qr[1],Br=i.a.useState(),Vr=Object(o.a)(Br,2),zr=Vr[0],Wr=Vr[1],Kr=i.a.useState(),Jr=Object(o.a)(Kr,2),Yr=Jr[0],Qr=Jr[1],Xr=i.a.useState(),$r=Object(o.a)(Xr,2),Zr=$r[0],es=$r[1],ts=i.a.useState(),ns=Object(o.a)(ts,2),as=ns[0],is=ns[1],cs=i.a.useState(),rs=Object(o.a)(cs,2),ss=rs[0],ls=rs[1],os=i.a.useState(),us=Object(o.a)(os,2),ds=us[0],ms=us[1],bs=i.a.useState(),js=Object(o.a)(bs,2),fs=js[0],hs=js[1],ps=i.a.useMemo((function(){return Object.keys(t).reduce((function(e,n){return e[n]=fb.includes(n)||null!=t[n]?t[n]:"",e}),{})}),[t]);return i.a.useEffect((function(){s(ps.client_name),m(ps.client_connection_name),h(ps.client_connection_type),x(ps.supplier_name),I(ps.supplier_connection_name),R(ps.supplier_connection_link_name),F(ps.remote_message_id),H(ps.message_id),W(ps.site),Q(ps.source_addr),ee(ps.source_addr_ton),ie(ps.source_addr_npi),le(ps.destination_addr),me(ps.destination_addr_ton),he(ps.destination_addr_npi),ve(ps.country),ye(ps.network),Ee(ps.message_data),Me(ps.has_udh),Pe(ps.udh),qe(ps.is_multipart),Ve(ps.data_coding_scheme),Je(ps.esm_class),$e(ps.status),nt(ps.error_code),rt(ps.dlr_process_time),ut(ps.received_time),jt(ps.processed_time),Ct(ps.time_to_deliver),gt(ps.time_to_submit),kt(ps.profiled_category_name),Dt(ps.validity_period),Rt(ps.delivery_time),Ft(ps.replace_if_present),Ht(ps.protocol_name),Wt(ps.priority_flag),Qt(ps.routing_rule_name),en(ps.category_name),cn(ps.price_currency),on(ps.price),bn(ps.cost),pn(ps.cost_currency),xn(ps.number_lookup_charged),null!=ps.inbound_smpp&&(Sn(ps.inbound_smpp.service_type_inbound_smpp),In(ps.inbound_smpp.sequence_number_inbound_smpp),Nn(ps.inbound_smpp.data_coding_scheme_inbound_smpp),Ln(ps.inbound_smpp.original_message_inbound_smpp),Gn(ps.inbound_smpp.tlv_optional_inbound_smpp),zn(ps.inbound_smpp.tlv_extended_inbound_smpp)),null!=ps.outbound_smpp&&(Yn(ps.outbound_smpp.service_type_outbound_smpp),Zn(ps.outbound_smpp.sequence_number_outbound_smpp),aa(ps.outbound_smpp.data_coding_scheme_outbound_smpp),sa(ps.outbound_smpp.original_message_outbound_smpp),da(ps.outbound_smpp.tlv_optional_outbound_smpp),fa(ps.outbound_smpp.tlv_extended_outbound_smpp)),null!=ps.inbound_http&&(Hr(ps.inbound_http.callback_url_http),Wr(ps.inbound_http.destination_id_http),Qr(ps.inbound_http.request_id_http)),null!=ps.inbound_ss7&&(Oa(ps.inbound_ss7.sri_originating_gt_inbound_ss7),_a(ps.inbound_ss7.sri_destination_gt_inbound_ss7),wa(ps.inbound_ss7.sri_source_transaction_id_inbound_ss7),Ta(ps.inbound_ss7.sri_destination_transaction_id_inbound_ss7),Aa(ps.inbound_ss7.sri_smsc_inbound_ss7),Ua(ps.inbound_ss7.hr_imsi_inbound_ss7),Ba(ps.inbound_ss7.routing_type_inbound_ss7),Ja(ps.inbound_ss7.sms_originating_gt_inbound_ss7),$a(ps.inbound_ss7.sms_destination_gt_inbound_ss7),ni(ps.inbound_ss7.sms_source_transaction_id_inbound_ss7),ri(ps.inbound_ss7.sms_destination_transaction_id_inbound_ss7),ui(ps.inbound_ss7.sri_application_context_inbound_ss7),ji(ps.inbound_ss7.sri_response_error_code_inbound_ss7),gi(ps.inbound_ss7.sri_tcap_handshake_inbound_ss7),Ci(ps.inbound_ss7.sms_application_context_inbound_ss7),ki(ps.inbound_ss7.sms_response_error_code_inbound_ss7),Di(ps.inbound_ss7.sms_m3ua_inbound_ss7),Ri(ps.inbound_ss7.sri_m3ua_inbound_ss7),Fi(ps.inbound_ss7.sms_tcap_handshake_inbound_ss7),Hi(ps.inbound_ss7.sms_map_istransaction_inbound_ss7),Wi(ps.inbound_ss7.sri_response_gt_inbound_ss7),Qi(ps.inbound_ss7.sms_response_gt_inbound_ss7),ec(ps.inbound_ss7.hr_msc_inbound_ss7)),null!=ps.outbound_ss7&&(ic(ps.outbound_ss7.sri_originating_gt_outbound_ss7),lc(ps.outbound_ss7.sri_destination_gt_outbound_ss7),mc(ps.outbound_ss7.sri_source_transaction_id_outbound_ss7),hc(ps.outbound_ss7.sri_destination_transaction_id_outbound_ss7),vc(ps.outbound_ss7.sri_smsc_outbound_ss7),yc(ps.outbound_ss7.hr_imsi_outbound_ss7),Ec(ps.outbound_ss7.routing_type_outbound_ss7),Mc(ps.outbound_ss7.sms_originating_gt_outbound_ss7),Pc(ps.outbound_ss7.sms_destination_gt_outbound_ss7),qc(ps.outbound_ss7.sms_source_transaction_id_outbound_ss7),Vc(ps.outbound_ss7.sms_destination_transaction_id_outbound_ss7),Jc(ps.outbound_ss7.sri_application_context_outbound_ss7),$c(ps.outbound_ss7.sri_response_error_code_outbound_ss7),nr(ps.outbound_ss7.sri_tcap_handshake_outbound_ss7),rr(ps.outbound_ss7.sms_application_context_outbound_ss7),ur(ps.outbound_ss7.sms_response_error_code_outbound_ss7),jr(ps.outbound_ss7.sms_m3ua_outbound_ss7),gr(ps.outbound_ss7.sri_m3ua_outbound_ss7),Cr(ps.outbound_ss7.sms_tcap_handshake_outbound_ss7),kr(ps.outbound_ss7.sms_map_istransaction_outbound_ss7),Dr(ps.outbound_ss7.sms_response_gt_outbound_ss7),Rr(ps.outbound_ss7.sri_response_gt_outbound_ss7),Fr(ps.outbound_ss7.hr_msc_outbound_ss7)),es(ps.sid_rewritten),is(ps.sid_rewrite_id),ms(ps.source_original_ton),ls(ps.source_original_npi),hs(ps.source_original_address)}),[ps]),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Client Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!1===n&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Client Name",readOnly:!0,value:r})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:!1===n?"Client Connection Name":"Connection Name",value:d})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:!1===n?"Client Connection Type":"Connection Type",value:f})})]})})]})}),!1===n&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Supplier Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Supplier Name",value:v})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Supplier Connection Name",value:k})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Supplier Connection Link",value:N})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Remote Message ID",value:L})})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Message Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Message ID",value:G})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Site",value:z})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Source",value:Y})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Source TON",value:Z})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Source NPI",value:ae})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Destination",value:se})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Destination TON",value:de})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Destination NPI",value:fe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Country",value:Oe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Network",value:_e})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Message",value:we})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Has UDH",value:Te})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"UDH",value:Ae})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Multipart",value:Ue})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Data Coding Scheme",value:Be})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"ESM Class",value:Ke})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Profiled Category",value:St})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Status",value:Xe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:!1===n&&Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Error Code",value:tt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"DLR Time",value:ct})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Received Time",value:ot})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Processed Time",value:bt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Time to Submit",value:pt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Time to Deliver",value:xt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4})]})})]})}),!1===n&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(w.g,{children:Object(Ka.jsx)(w.h,{expanded:!1,title:Object(Ka.jsx)(_.a,{width:"100%",children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Dlrs"})}),children:Object(Ka.jsx)(jb,{messageID:ps.message_id})})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(w.g,{children:Object(Ka.jsx)(w.h,{expanded:!1,title:Object(Ka.jsx)(_.a,{width:"100%",children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Additional Details"})}),children:Object(Ka.jsx)(_.a,{m:2,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[null!=ps.inbound_ss7&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Inbound SS7"})}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[null!=ga&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Originating GT",value:ga})}),null!=Ca&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Destination GT",value:Ca})}),null!=zi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Response GT",value:zi})}),null!=ka&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Source Transaction ID",value:ka})}),null!=Da&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Destination Transaction ID",value:Da})}),null!=Ra&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI SMSC",value:Ra})}),null!=oi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Application Context",value:oi})}),null!=bi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Response Error Code",value:bi})}),null!=pi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI TCAP Handshake",value:pi})}),null!=Ni&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI M3UA",value:Ni})}),null!=Ra&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI SMSC",value:Ra})}),null!=Ha&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Routing Type",value:Ha})}),null!=Fa&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"HR IMSI",value:Fa})}),null!=Zi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"HR MSC",value:Zi})}),null!=Wa&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Originating GT",value:Wa})}),null!=Xa&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Destination GT",value:Xa})}),null!=Yi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Response GT",value:Yi})}),null!=ti&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Source Transaction ID",value:ti})}),null!=ci&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Destination Transaction ID",value:ci})}),null!=xi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Application Context",value:xi})}),null!=Si&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Response Error Code",value:Si})}),null!=Li&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS TCAP Handshake",value:Li})}),null!=Ii&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS M3UA",value:Ii})}),null!=Gi&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS MAP Istransaction",value:Gi})})]})]}),null!=ps.outbound_ss7&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Outbound SS7"})}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[null!=ac&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Originating GT",value:ac})}),null!=sc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Destination GT",value:sc})}),null!=Ir&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Response GT",value:Ir})}),null!=dc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Source Transaction ID",value:dc})}),null!=fc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Destination Transaction ID",value:fc})}),null!=Oc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI SMSC",value:Oc})}),null!=Kc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Application Context",value:Kc})}),null!=Xc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI Response Error Code",value:Xc})}),null!=tr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI TCAP Handshake",value:tr})}),null!=pr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI M3UA",value:pr})}),null!=Oc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SRI SMSC",value:Oc})}),null!=wc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Routing Type",value:wc})}),null!=_c&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"HR IMSI",value:_c})}),null!=Lr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"HR MSC",value:Lr})}),null!=Tc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Originating GT",value:Tc})}),null!=Ac&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Destination GT",value:Ac})}),null!=Nr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Response GT",value:Nr})}),null!=Uc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Source Transaction ID",value:Uc})}),null!=Bc&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Destination Transaction ID",value:Bc})}),null!=cr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Application Context",value:cr})}),null!=or&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS Response Error Code",value:or})}),null!=xr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS TCAP Handshake",value:xr})}),null!=br&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS M3UA",value:br})}),null!=Sr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SMS MAP Istransaction",value:Sr})})]})]}),null!=ps.inbound_http&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Inbound HTTP"})}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[null!=Gr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Call-back URL",value:Gr})}),null!=zr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Destination ID",value:zr})}),null!=Yr&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Request ID",value:Yr})})]})]}),null!=ps.inbound_smpp&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Inbound SMPP"})}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[null!=yn&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Service Type",value:yn})}),null!=Pn&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Original Message",value:Pn})}),null!=Mn&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Data Coding Scheme",value:Mn})}),null!=En&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Sequence Number",value:En})})]}),null!=qn&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[Object(Ka.jsx)("label",{children:"TLV Optional"}),Object(Ka.jsx)("code",{className:"sr-only",children:JSON.stringify(JSON.parse(qn),null,"    ")}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,customStyle:{height:"185px"},"aria-hidden":!0,children:JSON.stringify(JSON.parse(qn),null,"    ")})]}),null!=Vn&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[Object(Ka.jsx)("label",{children:"TLV Extended"}),Object(Ka.jsx)("code",{className:"sr-only",children:JSON.stringify(JSON.parse(Vn),null,"    ")}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,customStyle:{height:"185px"},"aria-hidden":!0,children:JSON.stringify(JSON.parse(Vn),null,"    ")})]})]})]}),null!=ps.outbound_smpp&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Outbound SMPP"})}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[null!=Jn&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Service Type",value:Jn})}),null!=ra&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Original Message",value:ra})}),null!=na&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Data Coding Scheme",value:na})}),null!=$n&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Sequence Number",value:$n})})]}),null!=ua&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[Object(Ka.jsx)("label",{children:"TLV Optional"}),Object(Ka.jsx)("code",{className:"sr-only",children:JSON.stringify(JSON.parse(ua),null,"    ")}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,customStyle:{height:"185px"},"aria-hidden":!0,children:JSON.stringify(JSON.parse(ua),null,"    ")})]}),null!=ja&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[Object(Ka.jsx)("label",{children:"TLV Extended"}),Object(Ka.jsx)("code",{className:"sr-only",children:JSON.stringify(JSON.parse(ja),null,"    ")}),Object(Ka.jsx)(E.a,{language:"javascript",style:T.a,customStyle:{height:"185px"},"aria-hidden":!0,children:JSON.stringify(JSON.parse(ja),null,"    ")})]})]})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Validity Period",value:It})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Delivery Time",value:Nt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Protocol",value:Gt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Priority Flag",value:zt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Replace if Present",value:Lt})})]})})})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Routing Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Routing Plan",value:Yt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Categories",value:Zt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "})]})})]})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Pricing Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Price",value:ln})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Currency",value:an})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),!1===n&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Supplier Rate",value:mn})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Currency",value:hn})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Number Lookup Charged",value:vn})})]})]})})]})}),!1===n&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"SenderID Rewrite Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SenderID Rewritten",value:Zr})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SenderID Rewrite ID",value:as})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SenderID Original Address",value:fs})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SenderID Original NPI",value:ss})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"SenderID Original TON",value:ds})})]})})]})})]})}var pb=i.a.memo(hb),gb={skip:0,take:20,sort:[{dir:"asc",field:"received_time"}]},Ob=[20,50,100,200,500];function vb(e){var t=e.searchParams,n=e.onHideTrafficSearch,a=Object(l.c)(),c=O("customer-portal"),r=i.a.useState(!0),s=Object(o.a)(r,2),u=s[0],d=s[1],b=i.a.useState([]),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),C=g[0],y=g[1],E=i.a.useState(!1),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(gb),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState([]),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState(new m.b),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useCallback((function(){"function"===typeof n&&n()}),[n]),z=i.a.useCallback((function(e){A(e.dataState)}),[]),W=i.a.useCallback((function(e){a(Ui(e))}),[a]),K=Object(l.d)((function(e){return{trafficErrorCodes:e.trafficErrorCodes,network:e.network}})),J=K.trafficErrorCodes,Y=K.network,Q=i.a.useMemo((function(){var e=Object.assign({},t);return e.size=R.take,e.page=R.skip/R.take,e.sort=R.sort.map((function(e){return{order:e.dir,field:e.field}}),[]),e}),[R,t]);i.a.useEffect((function(){var e;d(!0),a((e=Q,function(){return mo.post("/sms/cdrs",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){h(e.data.data),y(e.data.has_more),d(!1)})).catch((function(e){W({severity:"error",message:e.message,action:{label:"Dismiss"}}),V()}))}),[a,W,R,Q,V]),i.a.useEffect((function(){var e=Object(x.a)(Y.values()).reduce((function(e,t){var n=t.get("network_name");return null==n?e:e.set(n,t)}),new m.b);B(e)}),[Y]);var X=i.a.useCallback((function(){d(!0);var e,t=Object.assign({},Q);delete t.page,delete t.size,a((e=t,function(){return mo.post("/sms/export",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){W({severity:"success",message:"Traffic Search Export Request Successful"})})).catch((function(e){W({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return d(!1)}))}),[a,W,Q]),$=i.a.useCallback((function(e){T(!0),U(e)}),[]),Z=i.a.useMemo((function(){return{field:"client_connection_name",title:"Connection",sortable:!1,filterable:!1}}),[]),ee=i.a.useMemo((function(){return{field:"source_addr",title:"Source",filterable:!1,sortable:!1}}),[]),te=i.a.useMemo((function(){return{field:"destination_addr",title:"Destination",filterable:!1,sortable:!1}}),[]),ne=i.a.useMemo((function(){return{field:"country",title:"Country",filterable:!1,sortable:!1}}),[]),ae=i.a.useMemo((function(){return{field:"mcc",title:"MCC",filterable:!1,sortable:!1}}),[]),ie=i.a.useMemo((function(){return{field:"network",title:"Network",filterable:!1,sortable:!1}}),[]),ce=i.a.useMemo((function(){return{field:"mnc",title:"MNC",filterable:!1,sortable:!1}}),[]),re=i.a.useMemo((function(){return{field:"status",title:"Status",width:"150px",view:"statusDOM",filterable:!1,sortable:!1}}),[]),se=i.a.useMemo((function(){return{field:"received_time",title:"Timestamp",view:"dateDOM",width:"250px",filterable:!1,sortable:!0}}),[]),le=i.a.useMemo((function(){return{field:"client_name",title:"Client Name",filterable:!1,sortable:!1}}),[]),oe=i.a.useMemo((function(){return{field:"supplier_name",title:"Supplier Name",filterable:!1,sortable:!1}}),[]),ue=i.a.useMemo((function(){return{field:"supplier_connection_name",title:"Supplier Connection",filterable:!1,sortable:!1}}),[]),de=i.a.useMemo((function(){return{field:"error_code",title:"Error Code",filterable:!1,sortable:!1}}),[]),me=i.a.useMemo((function(){return{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"75px"}}),[]),be=i.a.useMemo((function(){return!0===c?[Z,ee,te,ne,ae,ie,ce,re,se,me]:[se,le,ee,te,oe,ue,ne,ae,ie,ce,re,de,me]}),[ae,ce,c,ee,re,me,ne,ie,de,se,Z,le,te,oe,ue]),je=i.a.useMemo((function(){return f.map((function(e){var t=new window.Date(e.received_time),n=new window.Date(e.processed_time),a=new window.Date(e.dlr_processed_time),r=H.get(e.network),s=0===e.delivery_time?null:new window.Date(e.delivery_time),l=null==e.error_code?null:"000"===e.error_code?"No Error (000)":null==J.getIn([e.error_code,"description"])?"Undefined ("+e.error_code+")":J.getIn([e.error_code,"description"])+" ("+e.error_code+")",o={client_name:e.client_name,client_connection_name:e.client_connection_name,client_connection_type:e.client_connection_type,supplier_name:e.supplier_name,supplier_connection_name:e.supplier_connection_name,supplier_connection_link_name:e.supplier_connection_link_name,message_id:e.message_id,site:e.site_name,source_addr:e.source_addr,source_addr_ton:e.source_addr_ton,source_addr_npi:e.source_addr_npi,destination_addr:e.destination_addr,destination_addr_ton:e.destination_addr_ton,destination_addr_npi:e.destination_addr_npi,country:e.country,network:e.network,profiled_category_name:e.profiled_category_name,original_message:e.original_message,message_data:e.message_data,has_udh:e.has_udh,udh:e.udh,is_multipart:e.is_multipart,data_coding_scheme:e.data_coding_scheme,esm_class:e.esm_class,status:ub(e.status),error_code:l,delivery_time:null==s?null:s.toString().replace(/\(.*\)$/,""),received_time:t.toString().toString().replace(/\(.*\)$/,""),processed_time:n.toString().toString().replace(/\(.*\)$/,""),dlr_process_time:a.toString().toString().replace(/\(.*\)$/,""),validity_period:e.validity_period,replace_if_present:e.replace_if_present,protocol_name:e.protocol_name,priority_flag:e.priority_flag,routing_rule_name:e.routing_rule_name,category_name:e.category_name,price_name:e.price_name,price:e.price,supplier_cost_name:e.supplier_cost_name,price_currency:e.price_currency,parent_message_id:e.parent_message_id,remote_message_id:e.remote_message_id,cost:e.cost,cost_currency:e.cost_currency,time_to_submit:e.time_to_submit,time_to_deliver:e.time_to_deliver,sid_rewritten:e.sid_rewritten,sid_rewrite_id:e.sid_rewrite_id,source_original_npi:e.source_original_npi,source_original_ton:e.source_original_ton,source_original_address:e.source_original_address,number_lookup_charged:!0===e.number_lookup_charged?"Yes":"No"};return o=null==e.inbound_http?Object.assign({inbound_http:null},o):Object.assign({inbound_http:{callback_url_http:e.inbound_http.callback_url,destination_id_http:e.inbound_http.destination_id,request_id_http:e.inbound_http.request_id}},o),o=null==e.inbound_smpp?Object.assign({inbound_smpp:null},o):Object.assign({inbound_smpp:{service_type_inbound_smpp:e.inbound_smpp.service_type,data_coding_scheme_inbound_smpp:e.inbound_smpp.data_coding,sequence_number_inbound_smpp:e.inbound_smpp.sequence_number,original_message_inbound_smpp:e.inbound_smpp.original_message,tlv_optional_inbound_smpp:e.inbound_smpp.tlv_optional,tlv_extended_inbound_smpp:e.inbound_smpp.tlv_extended}},o),o=null==e.outbound_smpp?Object.assign({outbound_smpp:null},o):Object.assign({outbound_smpp:{service_type_outbound_smpp:e.outbound_smpp.service_type,data_coding_scheme_outbound_smpp:e.outbound_smpp.data_coding,sequence_number_outbound_smpp:e.outbound_smpp.sequence_number,original_message_outbound_smpp:e.outbound_smpp.original_message,tlv_optional_outbound_smpp:e.outbound_smpp.tlv_optional,tlv_extended_outbound_smpp:e.outbound_smpp.tlv_extended}},o),o=null==e.inbound_ss7?Object.assign({inbound_ss7:null},o):Object.assign({inbound_ss7:{sri_originating_gt_inbound_ss7:e.inbound_ss7.sri_originating_gt,sri_destination_gt_inbound_ss7:e.inbound_ss7.sri_destination_gt,sri_source_transaction_id_inbound_ss7:e.inbound_ss7.sri_source_transaction_id,sri_destination_transaction_id_inbound_ss7:e.inbound_ss7.sri_destination_transaction_id,sri_smsc_inbound_ss7:e.inbound_ss7.sri_smsc,hr_imsi_inbound_ss7:e.inbound_ss7.hr_imsi,routing_type_inbound_ss7:e.inbound_ss7.routing_type,sms_originating_gt_inbound_ss7:e.inbound_ss7.sms_originating_gt,sms_destination_gt_inbound_ss7:e.inbound_ss7.sms_destination_gt,sms_source_transaction_id_inbound_ss7:e.inbound_ss7.sms_source_transaction_id,sms_destination_transaction_id_inbound_ss7:e.inbound_ss7.sms_destination_transaction_id,sri_application_context_inbound_ss7:e.inbound_ss7.sri_application_context,sri_response_error_code_inbound_ss7:e.inbound_ss7.sri_response_error_code,sri_tcap_handshake_inbound_ss7:e.inbound_ss7.sri_tcap_handshake,sri_m3ua_inbound_ss7:e.inbound_ss7.sri_m3ua,sms_application_context_inbound_ss7:e.inbound_ss7.sms_application_context,sms_response_error_code_inbound_ss7:e.inbound_ss7.sms_response_error_code,sms_m3ua_inbound_ss7:e.inbound_ss7.sms_m3ua,sms_tcap_handshake_inbound_ss7:e.inbound_ss7.sms_tcap_handshake,sms_map_istransaction_inbound_ss7:e.inbound_ss7.sms_map_istransaction,sri_response_gt_inbound_ss7:e.inbound_ss7.sri_response_gt,sms_response_gt_inbound_ss7:e.inbound_ss7.sms_response_gt,hr_msc_inbound_ss7:e.inbound_ss7.hr_msc}},o),o=null==e.outbound_ss7?Object.assign({outbound_ss7:null},o):Object.assign({outbound_ss7:{sri_originating_gt_outbound_ss7:e.outbound_ss7.sri_originating_gt,sri_destination_gt_outbound_ss7:e.outbound_ss7.sri_destination_gt,sri_source_transaction_id_outbound_ss7:e.outbound_ss7.sri_source_transaction_id,sri_destination_transaction_id_outbound_ss7:e.outbound_ss7.sri_destination_transaction_id,sri_smsc_outbound_ss7:e.outbound_ss7.sri_smsc,hr_imsi_outbound_ss7:e.outbound_ss7.hr_imsi,routing_type_outbound_ss7:e.outbound_ss7.routing_type,sms_originating_gt_outbound_ss7:e.outbound_ss7.sms_originating_gt,sms_destination_gt_outbound_ss7:e.outbound_ss7.sms_destination_gt,sms_source_transaction_id_outbound_ss7:e.outbound_ss7.sms_source_transaction_id,sms_destination_transaction_id_outbound_ss7:e.outbound_ss7.sms_destination_transaction_id,sri_application_context_outbound_ss7:e.outbound_ss7.sri_application_context,sri_response_error_code_outbound_ss7:e.outbound_ss7.sri_response_error_code,sri_tcap_handshake_outbound_ss7:e.outbound_ss7.sri_tcap_handshake,sri_m3ua_outbound_ss7:e.outbound_ss7.sri_m3ua,sms_application_context_outbound_ss7:e.outbound_ss7.sms_application_context,sms_response_error_code_outbound_ss7:e.outbound_ss7.sms_response_error_code,sms_m3ua_outbound_ss7:e.outbound_ss7.sms_m3ua,sms_tcap_handshake_outbound_ss7:e.outbound_ss7.sms_tcap_handshake,sms_map_istransaction_outbound_ss7:e.outbound_ss7.sms_map_istransaction,sri_response_gt_outbound_ss7:e.outbound_ss7.sri_response_gt,sms_response_gt_outbound_ss7:e.outbound_ss7.sms_response_gt,hr_msc_outbound_ss7:e.outbound_ss7.hr_msc}},o),Object(v.a)({received_time:t,dateDOM:Object(Ka.jsx)(Nd,{utc:e.received_time}),client_name:e.client_name,source_addr:e.source_addr,destination_addr:e.destination_addr,supplier_name:e.supplier_name,supplier_connection_name:e.supplier_connection_name,country:e.country,network:e.network,mcc:r.getIn(["mccmnc",0,"mcc"]),mnc:r.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),status:ub(e.status),statusDOM:Object(Ka.jsx)("strong",{className:xb(e.status),children:ub(e.status)}),error_code:l,actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",onClick:function(){return $(o)}})})},!0===c&&{client_connection_name:e.client_connection_name})}))}),[f,c,J,$,H]),fe=i.a.useCallback((function(){T(!1)}),[]),he=i.a.useCallback((function(){var e=R.skip+R.take,t=Object.assign({},R,{skip:e});A(t)}),[R]),pe=i.a.useCallback((function(){var e=R.skip-R.take<0?0:R.skip-R.take,t=Object.assign({},R,{skip:e});A(t)}),[R]),ge=i.a.useCallback((function(e){var t=Object.assign({},R,{take:e.value});A(t)}),[R]),Oe=i.a.useCallback((function(){A(gb)}),[]);return Object(Ka.jsx)(S.a,{item:!0,container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(w.a,{children:!0===D?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Traffic Search Result Details"})}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"close",style:{marginBottom:"10px"},onClick:function(){return fe()},children:"Close Details View"}),Object(Ka.jsx)(pb,{details:F})]})]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.d,{children:[Object(Ka.jsx)(w.f,{children:"Traffic Search Results"}),Object(Ka.jsx)(w.e,{children:Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("strong",{children:"Time Period:"})," ",Object(Ka.jsx)(Nd,{utc:t.filters.receive_time_from})," -"," ",Object(Ka.jsx)(Nd,{utc:t.filters.receive_time_to})]})})]}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsx)(S.a,{item:!0,container:!0,spacing:5,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:3,children:Object(Ka.jsx)(k.a,{primary:!0,icon:"download",onClick:X,disabled:0===je.length,children:"Export to Excel"})})}),Object(Ka.jsxs)(S.a,{item:!0,container:!0,spacing:3,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,pageable:!1,groupable:!1,isLoading:u,style:{height:"500px"},skip:R.skip,take:R.take,sort:R.sort,filter:R.filter,data:je,columns:be,onDataStateChange:z})}),Object(Ka.jsx)(S.a,{item:!0,xs:12})]})]}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return V()},children:"Go Back"}),Object(Ka.jsxs)(k.a,{onClick:pe,disabled:0===R.skip,children:[Object(Ka.jsx)("span",{className:"k-icon k-i-arrow-60-left"})," Previous"," ",R.take]}),Object(Ka.jsxs)(_.a,{p:2,alignItems:"center",justifyContent:"center",children:[Object(Ka.jsx)(_.a,{pl:1,pr:1,pb:1,pt:2,component:"strong",children:"Page Size"}),Object(Ka.jsx)(Zd.b,{data:Ob,value:R.take,style:{width:"60px",height:"38px",padding:"6px 0"},onChange:ge})]}),Object(Ka.jsxs)(k.a,{onClick:he,disabled:!1===C,children:["Next ",R.take," ",Object(Ka.jsx)("span",{className:"k-icon k-i-arrow-60-right"})]}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Oe,children:"Clear Filters and Sorting"})]})]})})})})}function xb(e){switch(e){case"DELIVRD":case"ACCEPTD":return"Text--Info";case"UNDELIV":case"REJECTD":case"EXPIRED":case"DELETED":return"Text--Error";case"ENROUTE":case"UNKNOWN":return"Text--Warning";default:return null}}var Cb=i.a.memo(vb);function _b(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setContentTitle,a=e.setBreadcrumbs,c=Object(l.c)(),r=O("customer-portal"),s=i.a.useState({}),u=Object(o.a)(s,2),d=u[0],b=u[1],j=i.a.useState(!1),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),v=Object(o.a)(g,2),C=v[0],_=v[1],E=i.a.useState(!1),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState(!1),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState(!1),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState(!1),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(!1),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useState(!1),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useState(!1),ae=Object(o.a)(ne,2),ie=ae[0],ce=ae[1],re=i.a.useState(!1),se=Object(o.a)(re,2),le=se[0],oe=se[1],ue=i.a.useState(!1),de=Object(o.a)(ue,2),me=de[0],be=de[1],je=i.a.useState(!1),fe=Object(o.a)(je,2),he=fe[0],pe=fe[1],ge=i.a.useState(!1),Oe=Object(o.a)(ge,2),ve=Oe[0],xe=Oe[1],Ce=i.a.useState(!1),_e=Object(o.a)(Ce,2),ye=_e[0],Se=_e[1],ke=i.a.useState(!1),we=Object(o.a)(ke,2),Ee=we[0],Ie=we[1],De=i.a.useState(!1),Te=Object(o.a)(De,2),Me=Te[0],Ne=Te[1],Re=i.a.useState(!1),Ae=Object(o.a)(Re,2),Pe=Ae[0],Le=Ae[1],Fe=i.a.useState(!1),Ue=Object(o.a)(Fe,2),qe=Ue[0],Ge=Ue[1],He=i.a.useState(!1),Be=Object(o.a)(He,2),Ve=Be[0],ze=Be[1],We=i.a.useState(!1),Ke=Object(o.a)(We,2),Je=Ke[0],Ye=Ke[1],Qe=i.a.useState(!1),Xe=Object(o.a)(Qe,2),$e=Xe[0],Ze=Xe[1],et=i.a.useState(!1),tt=Object(o.a)(et,2),nt=tt[0],at=tt[1],it=i.a.useState(!1),ct=Object(o.a)(it,2),rt=ct[0],st=ct[1],lt=i.a.useState(!1),ot=Object(o.a)(lt,2),ut=ot[0],dt=ot[1],mt=i.a.useState([]),bt=Object(o.a)(mt,2),jt=bt[0],ft=bt[1],ht=i.a.useState((function(){var e=new Date;return e.setHours(e.getHours()-1),e})),pt=Object(o.a)(ht,2),gt=pt[0],Ot=pt[1],vt=i.a.useMemo((function(){return{required:!0}}),[]),xt=i.a.useState([]),Ct=Object(o.a)(xt,2),_t=Ct[0],yt=Ct[1],St=i.a.useState(new Date),kt=Object(o.a)(St,2),wt=kt[0],Et=kt[1],It=i.a.useMemo((function(){return{required:!0}}),[]),Dt=i.a.useState([]),Tt=Object(o.a)(Dt,2),Mt=Tt[0],Nt=Tt[1],Rt=i.a.useState([]),At=Object(o.a)(Rt,2),Pt=At[0],Lt=At[1],Ft=i.a.useState([]),Ut=Object(o.a)(Ft,2),qt=Ut[0],Gt=Ut[1],Ht=i.a.useState([]),Bt=Object(o.a)(Ht,2),Vt=Bt[0],zt=Bt[1],Wt=i.a.useState([]),Kt=Object(o.a)(Wt,2),Jt=Kt[0],Yt=Kt[1],Qt=i.a.useState([]),Xt=Object(o.a)(Qt,2),$t=Xt[0],Zt=Xt[1],tn=i.a.useState([]),nn=Object(o.a)(tn,2),an=nn[0],cn=nn[1],rn=i.a.useState([]),sn=Object(o.a)(rn,2),ln=sn[0],on=sn[1],un=i.a.useState([]),dn=Object(o.a)(un,2),mn=dn[0],bn=dn[1],jn=i.a.useState([]),fn=Object(o.a)(jn,2),hn=fn[0],pn=fn[1],gn=i.a.useState([]),On=Object(o.a)(gn,2),vn=On[0],xn=On[1],Cn=i.a.useState([]),_n=Object(o.a)(Cn,2),yn=_n[0],Sn=_n[1],kn=i.a.useState([]),wn=Object(o.a)(kn,2),En=wn[0],In=wn[1],Dn=i.a.useState([]),Tn=Object(o.a)(Dn,2),Mn=Tn[0],Nn=Tn[1],Rn=i.a.useState([]),An=Object(o.a)(Rn,2),Pn=An[0],Ln=An[1],Fn=i.a.useState([]),Un=Object(o.a)(Fn,2),qn=Un[0],Gn=Un[1],Hn=i.a.useState(""),Bn=Object(o.a)(Hn,2),Vn=Bn[0],zn=Bn[1],Wn=i.a.useState([]),Kn=Object(o.a)(Wn,2),Jn=Kn[0],Yn=Kn[1],Qn=i.a.useState(""),Xn=Object(o.a)(Qn,2),$n=Xn[0],Zn=Xn[1],ea=i.a.useState([]),ta=Object(o.a)(ea,2),na=ta[0],aa=ta[1],ia=i.a.useState([]),ca=Object(o.a)(ia,2),ra=ca[0],sa=ca[1],la=i.a.useState([]),oa=Object(o.a)(la,2),ua=oa[0],da=oa[1],ma=i.a.useState([]),ba=Object(o.a)(ma,2),ja=ba[0],fa=ba[1],ha=i.a.useState(""),pa=Object(o.a)(ha,2),ga=pa[0],Oa=pa[1],va=i.a.useState([]),xa=Object(o.a)(va,2),Ca=xa[0],_a=xa[1],ya=i.a.useState([]),Sa=Object(o.a)(ya,2),ka=Sa[0],wa=Sa[1],Ea=i.a.useState([]),Ia=Object(o.a)(Ea,2),Da=Ia[0],Ta=Ia[1],Ma=i.a.useState([]),Na=Object(o.a)(Ma,2),Ra=Na[0],Aa=Na[1],Pa=i.a.useState([]),La=Object(o.a)(Pa,2),Fa=La[0],Ua=La[1],qa=i.a.useState([]),Ga=Object(o.a)(qa,2),Ha=Ga[0],Ba=Ga[1],Va=i.a.useState([]),za=Object(o.a)(Va,2),Wa=za[0],Ja=za[1],Ya=i.a.useState([]),Qa=Object(o.a)(Ya,2),Xa=Qa[0],$a=Qa[1],Za=i.a.useState([]),ei=Object(o.a)(Za,2),ti=ei[0],ni=ei[1],ai=i.a.useState([]),ii=Object(o.a)(ai,2),ci=ii[0],ri=ii[1],si=i.a.useState([]),li=Object(o.a)(si,2),oi=li[0],ui=li[1],di=i.a.useState([]),mi=Object(o.a)(di,2),bi=mi[0],ji=mi[1],fi=i.a.useState([]),hi=Object(o.a)(fi,2),pi=hi[0],gi=hi[1],Oi=i.a.useState([]),vi=Object(o.a)(Oi,2),xi=vi[0],Ci=vi[1],_i=i.a.useState([]),yi=Object(o.a)(_i,2),Si=yi[0],ki=yi[1],wi=i.a.useState([]),Ei=Object(o.a)(wi,2),Ii=Ei[0],Di=Ei[1],Ti=i.a.useState([]),Mi=Object(o.a)(Ti,2),Ni=Mi[0],Ri=Mi[1],Li=i.a.useState([]),Fi=Object(o.a)(Li,2),qi=Fi[0],Gi=Fi[1],Hi=i.a.useState([]),Bi=Object(o.a)(Hi,2),Vi=Bi[0],zi=Bi[1],Wi=i.a.useState([]),Ki=Object(o.a)(Wi,2),Ji=Ki[0],Yi=Ki[1],Qi=i.a.useState([]),Xi=Object(o.a)(Qi,2),$i=Xi[0],Zi=Xi[1],ec=i.a.useState([]),tc=Object(o.a)(ec,2),nc=tc[0],ac=tc[1],ic=i.a.useState([]),cc=Object(o.a)(ic,2),rc=cc[0],sc=cc[1],lc=i.a.useState([]),oc=Object(o.a)(lc,2),uc=oc[0],dc=oc[1],mc=i.a.useMemo((function(){return yn.some((function(e){return"ss7"===e.type}))}),[yn]),bc=Nm(i.a.useMemo((function(){return[{label:"Start",value:gt,setErrors:ft,validations:vt},{label:"End",value:wt,setErrors:yt,validations:It}]}),[gt,ft,vt,wt,yt,It])),jc=i.a.useCallback((function(e){c(Ui(e))}),[c]),fc=i.a.useCallback((function(){_(!1)}),[]);i.a.useEffect((function(){return t("Traffic Search"),n("Traffic Search"),a([{name:"Traffic"},{name:"Search"}]),function(){t(null),a([])}}),[t,n,a]);var hc=Object(l.d)((function(e){var t=e.auth,n=e.route,a=e.client,i=e.country;return{route:n,client:a,network:e.network,country:i,supplier:e.supplier,categorisation:e.categorisation,trafficStatuses:e.trafficStatuses,clientConnection:e.clientConnection,trafficErrorCodes:e.trafficErrorCodes,supplierConnection:e.supplierConnection,supplierSiteCategory:e.supplierSiteCategory,supplierConnectionLink:e.supplierConnectionLink,customerPortalClientID:t.getIn(["misc","customer_client_id"])}})),pc=hc.route,gc=hc.client,Oc=hc.network,vc=hc.country,xc=hc.supplier,Cc=hc.categorisation,_c=hc.trafficStatuses,yc=hc.clientConnection,Sc=hc.trafficErrorCodes,kc=hc.supplierConnection,wc=hc.supplierSiteCategory,Ec=hc.supplierConnectionLink,Ic=hc.customerPortalClientID,Dc=i.a.useCallback((function(e,t){var n=!1===t.dataItem.profiling||!0===t.selected?null:"Text--Primary Text--Bold",a=Object(Ka.jsx)("span",{className:n,children:e.props.children});return i.a.cloneElement(e,e.props,a)}),[]);i.a.useEffect((function(){var e=[c(go()),c(Pi())];return!1===r&&(T(!0),A(!0),U(!0),B(!0),e.push([c(Fr()),c(Fs()),c(vl()),c(yo()),c($l())])),Promise.all(e).catch((function(e){jc({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){p(!1),!1===r&&(T(!1),A(!1),U(!1),B(!1))})),function(){c(Lr()),c(ys()),c(ml()),c({type:en}),c(Jl()),c(Ai())}}),[c,jc,r]);var Tc=i.a.useMemo((function(){return Object(x.a)(Oc.values()).reduce((function(e,t){var n=t.get("country_id");return null==n||(null==e[n]&&(e[n]=[]),e[n].push({id:t.get("network_id"),name:t.get("network_name")+" (".concat(vc.getIn([n,"iso_code"]),") ")})),e}),{})}),[Oc,vc]);i.a.useEffect((function(){var e=new m.e(qt.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(gc.values()).map((function(e){return new m.b({id:e.get("client_id"),name:e.get("client_name")})})));e.equals(t)||Gt(t.toJS())}),[gc,qt]),i.a.useEffect((function(){if(!1!==r){var e=gc.getIn([Ic,"connections"]);Zt(Object(x.a)(null==e?[]:e.values()).map((function(e){return{id:e,name:yc.getIn([e,"connection_name"])}})))}}),[gc,Ic,yc,r]),i.a.useEffect((function(){if(!0!==r){var e=new m.e($t.map((function(e){return new m.b(e)}))),t=new m.e(Pt.reduce((function(e,t){var n=gc.getIn([t.id,"connections"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=yc.get(t);null!=n&&e.push(new m.b({id:n.get("connection_id"),name:n.get("connection_name")}))})),e}),[]));e.equals(t)||Zt(t.toJS())}}),[gc,Pt,r,yc,$t]),i.a.useEffect((function(){var e=new m.e(mn.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(xc.values()).map((function(e){return new m.b({id:e.get("supplier_id"),name:e.get("supplier_name")})})));e.equals(t)||bn(t.toJS())}),[xc,mn]),i.a.useEffect((function(){var e=new m.e(yn.map((function(e){return new m.b(e)}))),t=new m.e(ln.reduce((function(e,t){var n=xc.getIn([t.id,"connections"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=kc.get(t);null!=n&&e.push(new m.b({id:n.get("connection_id"),name:n.get("connection_name"),type:n.get("connection_type"),supplier_id:n.get("supplier_id")}))})),e}),[]));e.equals(t)||Sn(t.toJS())}),[xc,ln,kc,yn]),i.a.useEffect((function(){var e=new m.e(Pn.map((function(e){return new m.b(e)}))),t=new m.e(vn.reduce((function(e,t){var n=kc.getIn([t.id,"links"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=Ec.get(t);null!=n&&e.push(new m.b({id:n.get("link_id"),name:n.get("link_name")}))})),e}),[]));e.equals(t)||Ln(t.toJS())}),[xc,ln,kc,Ec,vn,Pn]),i.a.useEffect((function(){var e=new m.e(uc.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(pc.values()).map((function(e){return new m.b({id:e.get("id"),name:e.get("name")})})));e.equals(t)||dc(t.toJS())}),[pc,uc]),i.a.useEffect((function(){var e=new m.e(Ra.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(_c.values()).map((function(e){return new m.b({id:e.get("code"),name:e.get("description")})})));e.equals(t)||Aa(t.toJS())}),[_c,Ra]),i.a.useEffect((function(){var e=new m.e(Ra.map((function(e){return new m.b(e)}))),t=new m.e([{id:"000",name:"No Errors (000)"}].concat(Object(x.a)(Object(x.a)(Sc.values()).map((function(e){return new m.b({id:e.get("code"),name:e.get("description")+" ("+e.get("code")+")"})})))));e.equals(t)||Zi(t.toJS())}),[Sc,Ra]),i.a.useEffect((function(){var e=new m.e(pi.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(Cc.values()).map((function(e){return new m.b({id:e.get("id"),name:e.get("name"),profiling:e.get("profiling")})})));e.equals(t)||gi(t.toJS())}),[Cc,pi]),i.a.useEffect((function(){var e=new m.e(qi.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(wc.values()).map((function(e){return new m.b({id:e.get("site_id"),name:e.get("site_name")})})));e.equals(t)||Gi(t.toJS())}),[wc,qi]),i.a.useEffect((function(){var e=new m.d(Wa.map((function(e){return new m.b(e)}))),t=new m.d(Object(x.a)(vc.values()).reduce((function(e,t){return"Rest of the World"===t.get("country_name")||e.push(new m.b({id:t.get("country_id"),name:t.get("country_name")})),e}),[]).sort((function(e,t){return e.get("name")>t.get("name")?1:-1})));e.equals(t)||Ja(t.toJS())}),[vc,Wa]),i.a.useEffect((function(){var e=new m.e(ci.map((function(e){return new m.b(e)}))),t=new m.e(Ha.reduce((function(e,t){return e.push.apply(e,Object(x.a)(Tc[t.id].map((function(e){return new m.b(e)})))),e}),[]));e.equals(t)||ri(t.toJS())}),[Ha,Tc,ci]),i.a.useEffect((function(){return K(!0),Promise.all(Pt.map((function(e){return c(Zs(e.id))}))).then((function(){return K(!1)})),function(){return gs()}}),[c,Pt]),i.a.useEffect((function(){!1!==r&&(K(!0),c(el(Ic)).catch((function(e){jc({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){K(!1)})))}),[Ic,c,jc,r]),i.a.useEffect((function(){return X(!0),Promise.all(ln.map((function(e){return c(yl(e.id))}))).then((function(){return X(!1)})),function(){return Ac()}}),[c,ln]),i.a.useEffect((function(){return te(!0),Promise.all(vn.map((function(e){return c(Hc(e.id))}))).then((function(){return te(!1)})),function(){return Hl()}}),[c,vn]);var Mc=i.a.useCallback((function(){var e=bc();if(gt>wt&&e.push("Start Date must be before End date"),e.length>0)jc({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}});else{var t=[{field:"route_id",value:rc.map((function(e){return e.id})),operator:ie},{field:"message_data",value:ga,operator:qe},{field:"source_addr",value:Vn,operator:rt},{field:"destination_addr",value:$n,operator:ut},{field:"message_id",value:ra.map((function(e){return e.name})),operator:!1},{field:"remote_message_id",value:ja.map((function(e){return e.name})),operator:!1},{field:"status",value:Da.map((function(e){return e.id})),operator:Ee},{field:"country_id",value:Ha.map((function(e){return e.id})),operator:he},{field:"network_id",value:ti.map((function(e){return e.id})),operator:me},{field:"category_id",value:bi.map((function(e){return e.id})),operator:Me},{field:"profiled_category_id",value:Si.map((function(e){return e.id})),operator:Ve},{field:"edge_notes_site_id",value:Ni.map((function(e){return e.id})),operator:ye},{field:"error_code",value:Ji.map((function(e){return e.id})),operator:Pe},{field:"client_id",value:Pt.map((function(e){return e.id})),operator:le},{field:"client_connection_id",value:Jt.map((function(e){return e.id})),operator:Je},{field:"supplier_id",value:ln.map((function(e){return e.id})),operator:ve},{field:"supplier_connection_id",value:vn.map((function(e){return e.id})),operator:$e},{field:"supplier_connection_link_id",value:Mn.map((function(e){return e.id})),operator:nt}].reduce((function(e,t){return 0===t.value.length||(e[t.field]={operator:!0===t.operator?"not_equal":"equal",values:!0===Array.isArray(t.value)?t.value:[t.value]}),e}),{receive_time_to:yb(wt).getTime(),receive_time_from:yb(gt).getTime()});b({filters:t}),_(!0)}}),[Me,Je,le,he,$n,ut,ra,ja,Pe,ga,qe,me,ie,Ve,bi,Si,Jt,Pt,Ha,Ji,ti,rc,Ni,Da,Mn,vn,ln,jc,ye,Vn,rt,Ee,nt,$e,ve,gt,wt,bc]);return!0===C?Object(Ka.jsx)(Cb,{searchParams:d,onHideTrafficSearch:fc}):Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsxs)(w.d,{children:[Object(Ka.jsx)(w.f,{children:"Traffic Search"}),Object(Ka.jsx)(w.e,{style:{marginTop:"10px"},children:"Find transactions easily by searching specific attributes."})]}),Object(Ka.jsx)(w.c,{children:!0===h?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:4,children:Object(Ka.jsx)("h4",{style:{marginTop:"26px",marginLeft:"10px",marginRight:"40px",color:"grey"},children:"Select Transactions' Timeframe"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"Start",value:gt,errors:jt,onChange:Ot,onErrorsChange:ft,validations:vt,max:null==wt?void 0:wt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"End",value:wt,errors:_t,onChange:Et,onErrorsChange:yt,validations:It,min:null==gt?void 0:gt})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Client Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!1===r&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===R?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Client",errors:Mt,data:qt,value:Pt,onChange:Lt,onErrorsChange:Nt})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===R?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:le,onChange:oe,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===W?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:!1===r?"Client Connection":"Connection",errors:Vt,data:$t,value:Jt,disabled:!1===r&&0===Pt.length,onChange:Yt,onErrorsChange:zt})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===W?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Je,disabled:!1===r&&0===Pt.length,onChange:Ye,style:{fontWeight:"bold"}})})]})})]})}),!1===r&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Supplier Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===F?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier",errors:an,data:mn,value:ln,onChange:on,onErrorsChange:cn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===F?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ve,onChange:xe,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===Q?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Connection",errors:hn,data:yn,value:vn,disabled:0===ln.length,onChange:xn,onErrorsChange:pn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===Q?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:$e,disabled:0===ln.length,onChange:Ze,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===ee?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Connection Link",errors:En,data:Pn,value:Mn,onChange:Nn,onErrorsChange:In,disabled:0===vn.length||!0===mc})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===ee?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:nt,onChange:at,style:{fontWeight:"bold"},disabled:0===vn.length})})]})})]})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Message Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Message Id",allowCustom:!0,errors:na,value:ra,onChange:sa,onErrorsChange:aa})})})}),!1===r&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Message Id",allowCustom:!0,errors:ua,value:ja,onChange:fa,onErrorsChange:da})})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Message Data",errors:Ca,value:ga,onChange:Oa,onErrorsChange:_a})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:qe,onChange:Ge,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Source Address",errors:qn,value:Vn,onChange:zn,onErrorsChange:Gn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:rt,onChange:st,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Destination Address",errors:Jn,value:$n,onChange:Zn,onErrorsChange:Yn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ut,onChange:dt,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Status",errors:ka,data:Ra,value:Da,onChange:Ta,onErrorsChange:wa})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Ee,onChange:Ie,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Countries",errors:Fa,data:Wa,value:Ha,onChange:Ba,onErrorsChange:Ua})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:he,onChange:pe,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Networks",errors:Xa,data:ci,value:ti,onChange:ni,onErrorsChange:$a,disabled:0===Ha.length})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:me,onChange:be,style:{fontWeight:"bold"},disabled:0===Ha.length})})]})}),!1===r&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===H?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Categories",errors:oi,data:pi,value:bi,onChange:ji,onErrorsChange:ui})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===H?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Me,onChange:Ne,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===H?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Profiled Categories",itemRender:Dc,errors:xi,data:pi,value:Si,onChange:ki,onErrorsChange:Ci})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===H?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Ve,onChange:ze,style:{fontWeight:"bold"}})})]})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Sites",errors:Ii,data:qi,value:Ni,onChange:Ri,onErrorsChange:Di})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ye,onChange:Se,style:{fontWeight:"bold"}})})]})}),!1===r&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Error Codes",errors:Vi,data:$i,value:Ji,onChange:Yi,onErrorsChange:zi})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Pe,onChange:Le,style:{fontWeight:"bold"}})})]})})]})}),!1===r&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Route Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===D?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Route",errors:nc,data:uc,value:rc,onChange:sc,onErrorsChange:ac})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===D?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ie,onChange:ce,style:{fontWeight:"bold"}})})]})})]})]})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Mc,children:"Search"})})]})}function yb(e){var t=new window.Date(e);return t.setSeconds(0),t.setMilliseconds(0),t}var Sb=i.a.memo(_b);function kb(e){var t=e.name,n=e.frequency,a=e.getData,c=e.request,r=e.intervalPolicy,s=void 0===r?"compare":r,u=Object(l.e)(),d=Object(l.c)(),b=i.a.useState(null),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(new m.b({totalRecords:0,data:new m.e})),g=Object(o.a)(p,2),O=g[0],v=g[1],x=i.a.useCallback((function(e){d(Ui(e))}),[d]),C=i.a.useCallback((function(e,t){if("function"===typeof a)return a(e,t)}),[a]),_=i.a.useCallback((function(){if("function"===typeof c)return c().then((function(e){return C(u.getState(),e)}))}),[u,C,c]),y=i.a.useCallback((function(){return _().then(v)}),[_]),S=i.a.useCallback((function(){return h(null),_().then((function(e){O.equals(e)||x({severity:"info",message:"".concat(t," has updated data"),action:{onClick:function(){return v(e)},label:"Refresh"}})}))}),[O,t,_,x]);return i.a.useEffect((function(){return function(){null!=f&&window.clearTimeout(f)}}),[f]),i.a.useEffect((function(){return function(){return h(null)}}),[S]),i.a.useEffect((function(){null!=n&&null==f&&h(window.setTimeout((function(){("compare"===s?S:y)().catch((function(e){x({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),n))}),[y,S,x,f,n,s]),{data:O,update:y,compare:S}}var wb={skip:0,take:20,sort:[{field:"requested_time",dir:"desc"}]},Eb={FAILED:"Failed",QUEUED:"Queued",PENDING:"Pending",COMPLETED:"Completed",IN_PROGRESS:"In Progress"};function Ib(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setContentTitle,a=e.setBreadcrumbs,c=Object(l.c)(),r=i.a.useState(!0),s=Object(o.a)(r,2),u=s[0],d=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(wb),g=Object(o.a)(p,2),O=g[0],v=g[1],x=i.a.useCallback((function(e){v(e.dataState)}),[]);i.a.useEffect((function(){return t("Traffic Documents"),n("Traffic Documents"),a([{name:"Traffic"},{link:"/traffic/export",name:"Traffic Documents"}]),function(){t(null),a([])}}),[t,n,a]);var C=i.a.useCallback((function(e){c(Ui(e))}),[c]),y=i.a.useCallback((function(){c({type:Wt})}),[c]),E=i.a.useCallback((function(){return y(),c(jo())}),[c,y]),I=kb({frequency:1e4,intervalPolicy:"update",name:"Traffic Document",request:i.a.useCallback((function(){return E()}),[E]),getData:i.a.useCallback((function(e){var t=e.trafficExport.reduce((function(e,t){return e.add(new m.b({id:t.get("id"),link:t.get("link"),status:t.get("status"),username:t.get("username"),report_name:t.get("report_name"),schedule_id:t.get("schedule_id"),schedule_day:t.get("schedule_day"),schedule_time:t.get("schedule_time"),requested_time:t.get("requested_time"),schedule_frequency:t.get("schedule_frequency")}))}),new m.e);return new m.b({data:t,totalRecords:t.size})}),[])}),D=I.data,T=I.update,M=i.a.useCallback((function(){return h(!0),T().then((function(){h(!1)})).catch((function(e){C({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[T,C]);i.a.useEffect((function(){return d(!0),T().then((function(){d(!1)})).catch((function(e){C({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return y()}}),[y,C,T]);var N=i.a.useCallback((function(e){window.location.href=e}),[]),R=i.a.useCallback((function(){v(wb)}),[]),A=sb({variant:"Input"}),P=sb({variant:"Date"}),L=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(Eb).map((function(e){return{id:e,name:Eb[e]}}),[])}),[])}}),F=i.a.useMemo((function(){return[{field:"username",title:"Username",filterCell:A},{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:L},{field:"requested_time",title:"Requested Time",view:"dateDOM",width:"250px",filterCell:P},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:A},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"75px"}]}),[A,P,L]),U=i.a.useMemo((function(){return D.get("data").reduce((function(e,t){return e.push({id:t.get("id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:t.get("id")})}),status:t.get("status"),username:t.get("username"),requested_time:t.get("requested_time"),dateDOM:Object(Ka.jsx)(Nd,{utc:t.get("requested_time")}),statusDOM:Object(Ka.jsxs)(Ka.Fragment,{children:["COMPLETED"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-check"}):"FAILED"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-exclamation-triangle"}):Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",Eb[t.get("status")]]}),actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"download",title:"Download Traffic Document","aria-label":"Download Traffic Document",disabled:null==t.get("link"),onClick:function(){return N(t.get("link"))}})})}),e}),[])}),[D,N]);return Object(Ka.jsx)(S.a,{item:!0,container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,lg:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Traffic Documents"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:u,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:O.skip,take:O.take,sort:O.sort,filter:O.filter,data:U,columns:F,onDataStateChange:x})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:M,disabled:!0===f,children:!0===f?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:R,children:"Clear Filters and Sorting"})]})]})})})}var Db=i.a.memo(Ib);var Tb=function(){var e=i.a.useContext(Tm).setTitle;return i.a.useEffect((function(){return e("Page Not Found"),function(){return e(null)}}),[e]),Object(Ka.jsx)("div",{className:"ErrorDiv",children:Object(Ka.jsx)("h1",{className:"Title",children:"Page Not Found"})})};function Mb(e){var t=e.tabs,n=void 0===t?[]:t,a=Object(d.i)().pathname,c=i.a.useMemo((function(){return n.filter((function(e){return!1!==e.visible}))}),[n]),r=i.a.useMemo((function(){var e=c.find((function(e){return null!=Object(d.g)(a,{exact:!0,path:Nb(e.path)})}));return null!=e?e:{key:null}}),[c,a]).key,l=i.a.useMemo((function(){return c.map((function(e){var t=e.title,n=e.path,a=void 0===n?"":n,i=e.url,c=["k-item","k-tab-on-top"];return e.key===r&&c.push("k-state-active"),Object(Ka.jsx)("li",{className:c.join(" "),children:Object(Ka.jsx)(s.b,{tabIndex:0,to:i,className:"k-link",children:t})},a)}))}),[c,r]),o=i.a.useMemo((function(){return c.map((function(e){var t=e.path,n=void 0===t?"":t,a=e.component;return Object(Ka.jsx)(d.c,{exact:!0,path:Nb(n),children:a},n)}))}),[c]);return null==r?Object(Ka.jsx)(Tb,{}):Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsxs)("div",{className:"k-widget k-header k-floatwrap k-tabstrip k-tabstrip-top",children:[Object(Ka.jsx)("ul",{className:"k-tabstrip-items k-reset",role:"tablist",children:l}),Object(Ka.jsx)("div",{className:"k-content k-state-active",children:Object(Ka.jsx)(d.e,{children:o})})]})})}function Nb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e}var Rb=i.a.memo(Mb);function Ab(){var e="/traffic",t=b();return Object(Ka.jsx)(Rb,{tabs:[{url:e,title:"Traffic Search",key:"traffic.search",path:e,component:Object(Ka.jsx)(Sb,{}),visible:t.has("FRONTEND:TRAFFIC-SEARCH-PAGE-ACCESS")},{title:"Traffic Documents",key:"traffic.documents",url:"".concat(e,"/export"),path:"".concat(e,"/export"),component:Object(Ka.jsx)(Db,{}),visible:t.has("FRONTEND:TRAFFIC-DOCUMENTS-PAGE-ACCESS")}]})}var Pb=i.a.memo(Ab);function Lb(){var e=Object(d.j)(),t=e.type,n=e.id,a=Object(d.h)(),c=i.a.useState(!0),r=Object(o.a)(c,2),s=r[0],l=r[1],u=i.a.useState(null),m=Object(o.a)(u,2),b=m[0],j=m[1];return i.a.useEffect((function(){var e=null,i=null;switch(l(!0),t){case"statistics":i="/statistics/latest-reports",e=ko({method:"GET",responseType:"blob",url:"/sms/reports/".concat(n,"/download")});break;case"traffic":i="/traffic/export",e=mo({method:"GET",responseType:"blob",url:"/export/download/".concat(n)});break;default:e=Promise.reject(new Error("Unsupported File Type"))}e.then((function(e){var c=function(e,t){var n=e.headers["content-disposition"];if(null==n)return t;var a=n.split("; ").filter((function(e){return e.startsWith("filename=")}));return null==a?t:a[0].split("=")[1].replace(/"/g,"")}(e,"".concat(t,"-").concat(n)),r=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=r,s.setAttribute("download",c),document.body.appendChild(s),s.click(),window.close(),window.setTimeout((function(){return a.push(i)}),5e3)})).catch((function(e){if(null!=e.response)return e.response.data.text().then((function(e){j(JSON.parse(e).message)})).catch((function(){return j("Please try again later")}));j(e.message)})).then((function(){return l(!1)}))}),[a,t,n]),!0===s?Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",flexDirection:"column",children:[Object(Ka.jsxs)(_.a,{m:2,textAlign:"center",children:[Object(Ka.jsx)("h1",{children:"Downloading File"}),Object(Ka.jsx)("h2",{children:"Please wait"})]}),Object(Ka.jsx)(_.a,{m:2,children:Object(Ka.jsx)("i",{className:"fas fa-download fa-10x"})})]}):null!==b?Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",flexDirection:"column",children:[Object(Ka.jsxs)(_.a,{m:2,textAlign:"center",children:[Object(Ka.jsx)("h1",{children:"Something Went Wrong"}),Object(Ka.jsx)("h2",{children:b})]}),Object(Ka.jsx)(_.a,{m:2,children:Object(Ka.jsx)("i",{className:"fas fa-times fa-10x"})})]}):Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",flexDirection:"column",children:[Object(Ka.jsxs)(_.a,{m:2,textAlign:"center",children:[Object(Ka.jsx)("h1",{children:"File Successfully Downloaded"}),Object(Ka.jsx)("h2",{children:"You will be redirected in 5 seconds..."})]}),Object(Ka.jsx)(_.a,{m:2,children:Object(Ka.jsx)("i",{className:"fas fa-check fa-10x"})})]})}var Fb=i.a.memo(Lb),Ub=n(19),qb={skip:0,take:20};function Gb(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState([]),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useMemo((function(){return e.has("API:CLIENT_PRICE_MANAGEMENT:WRITE")}),[e]),p=i.a.useContext(Tm),g=p.setTitle,O=p.setContentTitle,v=p.setBreadcrumbs,C=i.a.useState(!1),y=Object(o.a)(C,2),S=y[0],E=y[1],I=i.a.useState(qb),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useCallback((function(e){n(Ui(e))}),[n]),R=Object(l.d)((function(e){return{route:e.route,client:e.client,currency:e.currency,template:e.template,clientPricePlan:e.clientPricePlan}})),A=R.route,P=R.client,L=R.currency,F=R.template,U=R.clientPricePlan;i.a.useEffect((function(){return g("Pricing Manager"),O("Pricing Manager"),v([{name:"Pricing Manager"},{name:"Client Price Plans"}]),function(){g(null),v([])}}),[g,O,v]);var q=i.a.useCallback((function(){n(Lr()),n(ys()),n(Bo()),n(hs())}),[n]),G=i.a.useCallback((function(){return q(),Promise.all([n(Fr()),n(Fs()),n(Vo()),n((function(t){return fs.get("",{params:e}).then((function(e){t(ps.apply(void 0,Object(x.a)(e.data.price_plans)));var n=e.data.price_plans.reduce((function(e,t){return null==t.client_id||(null==e[t.client_id]&&(e[t.client_id]=[]),e[t.client_id].push(t.id)),e}),{});return Object.keys(n).forEach((function(e){t(Ms.apply(void 0,[e].concat(Object(x.a)(n[e]))))})),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))]);var e}),[q,n]),H=i.a.useCallback((function(){return s(!0),G().then((function(){s(!1)})).catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[G,N]);i.a.useEffect((function(){return H(),function(){return q()}}),[q,H]);var B=i.a.useCallback((function(){M(qb)}),[]),V=i.a.useCallback((function(e){M(e.dataState)}),[]),z=i.a.useCallback((function(e){f([e]),E(!0)}),[]),W=i.a.useCallback((function(){s(!0);var e=j[0],t=e.clientID,a=e.pricePlanID;n(ol(t,a)).then((function(){N({severity:"success",message:"Price Plan Successfully Deleted"})})).catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return G()})).then((function(){s(!1),f([]),E(!1)}))}),[n,G,N,j]),K=i.a.useCallback((function(){f([]),E(!1)}),[]),J=sb({variant:"Input"}),Y=sb({variant:"MultiSelect",props:{data:lb({fieldID:"name",fieldName:"name",namespace:A})}}),Q=sb({variant:"MultiSelect",props:{data:lb({fieldID:"currency",fieldName:"currency",namespace:L})}}),X=sb({variant:"MultiSelect",props:{data:lb({fieldID:"name",fieldName:"name",namespace:F})}}),$=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return[{id:"Yes",name:"Inherited"},{id:"No",name:"Not Inherited"}]}),[])}}),Z=i.a.useMemo((function(){return[{field:"clientName",title:"Client Name",filterCell:J},{field:"route",title:"Route",filterCell:Y},{field:"currency",title:"Currency",filterCell:Q},{field:"notificationPeriod",title:"Notification Period",filterCell:J},{field:"template",title:"Template",filterCell:X},{field:"inherit",title:"Inherit",width:"250px",filterCell:$},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:J},{field:"actions",width:"110px",locked:!0,sortable:!1,filterable:!1}]}),[J,Y,X,$,Q]),ee=i.a.useMemo((function(){return Object(x.a)(P.values()).reduce((function(e,n){var a=n.get("price_plans");return(null==a?[]:Object(x.a)(a.values())).forEach((function(a){var c=U.get(a),r=c.get("id");null!=c&&e.push({id:r,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:r})}),clientName:n.get("client_name"),currency:c.get("currency_id"),route:A.getIn([c.get("route_id"),"name"]),template:null==F.getIn([c.get("template_id"),"name"])?"-":F.getIn([c.get("template_id"),"name"]),notificationPeriod:null==c.get("notification_period")||null==c.get("value")?"-":"".concat(c.get("value")," ").concat(c.get("notification_period")),inherit:!0===c.get("template_inherit_all")?"Yes":"No",actions:Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit Price Plan","aria-label":"Edit Price Plan",onClick:function(){return t.push("/clients/".concat(n.get("client_id"),"/pricing/").concat(c.get("id")))}}),!0===h&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable Price Plan","aria-label":"Disable Price Plan",onClick:function(){z({pricePlanID:c.get("id"),clientID:n.get("client_id")})}})]})})})),e}),[])}),[A,P,t,F,U,z,h]),te=i.a.useMemo((function(){return j.map((function(e){var t=e.clientID,n=e.pricePlanID;return Object(Ka.jsxs)("li",{children:[P.getIn([t,"client_name"])," - Price Plan ID:"," ",n]},n)}))}),[P,j]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:r,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:T.skip,take:T.take,sort:T.sort,filter:T.filter,data:ee,columns:Z,onDataStateChange:V})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:H,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:B,children:"Clear Filters and Sorting"})]})]}),!0===S&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:K,children:["Are you sure you want to delete the following Routes?",Object(Ka.jsx)("ul",{children:te}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:W,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:K,children:"Cancel"})]})]})]})}var Hb=i.a.memo(Gb),Bb=function(e){var t=e.formElement.config,n=e.formElement.id,a=t.elementConfig.placeholder,c=i.a.useState(null),r=Object(o.a)(c,2),s=r[0],l=r[1];i.a.useEffect((function(){l(null)}),[t.data]);var u=i.a.useMemo((function(){return Object($d.a)(null==t.data?[]:t.data,s)}),[t.data,s]),d=i.a.useCallback((function(e){l(e.filter)}),[]);if(""!==a&&null!=t.validation&&!0===t.validation.required&&(a+=" *"),!1===t.selected)return null;switch(t.elementType){case"filler":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:"\xa0"});case"multi":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(Zd.c,{autoClose:!1,disabled:t.elementConfig.disabled,allowCustom:!!t.elementConfig.allowCustom&&t.elementConfig.allowCustom,className:t.className,data:u,dataItemKey:t.dataItemKey,"data-lpignore":!0,label:a,name:n,onFilterChange:d,filterable:!0,onChange:function(t){return e.dropDownChangedHandler(t,n)},popupSettings:t.popupSettings?t.popupSettings:{},style:Object.assign({width:"100%"},t.style),textField:t.textField,valid:t.valid,validationMessage:t.validationMessage,value:t.value,listNoDataRender:e.listNoDataRender},n)});case"combo":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(Zd.a,{disabled:t.elementConfig.disabled,allowCustom:!!t.elementConfig.allowCustom&&t.elementConfig.allowCustom,clearButton:void 0===t.clearButton||t.clearButton,className:t.className,data:u,dataItemKey:t.dataItemKey,"data-lpignore":!0,label:a,name:n,onFilterChange:d,filterable:!0,onChange:function(a){!0!==t.elementConfig.readOnly&&e.dropDownChangedHandler(a,n)},popupSettings:t.popupSettings?t.popupSettings:{},style:Object.assign({width:"100%",marginTop:"4px"},t.style),suggest:!0,textField:t.textField,valid:t.valid,validationMessage:t.validationMessage,value:t.value},n)});case"numeric":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(zd.d,{allowCustom:!1,dataItemKey:t.dataItemKey,data:t.data,"data-lpignore":!0,disabled:t.elementConfig.disabled,label:a,name:n,onBlur:function(e){null!=t.elementConfig&&"function"===typeof t.elementConfig.onBlur&&t.elementConfig.onBlur(e,n)},onChange:function(t){return e.inputChangedHandler(t,n)},width:"100%",format:t.elementConfig.format,min:t.elementConfig.min,max:t.elementConfig.max,step:t.elementConfig.step,style:t.style,textField:t.textField,valid:t.valid,validationMessage:t.validationMessage,value:t.value},n)});case"input":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(zd.b,{name:n,label:a,disabled:t.elementConfig.disabled,valid:t.valid,style:Object.assign({width:"100%"},t.style),readOnly:t.elementConfig.readOnly,type:t.elementConfig.type,onChange:function(t){return e.inputChangedHandler(t,n)},validationMessage:t.validationMessage,"data-lpignore":!0,value:t.value},n)});case"textarea":var m=Object(Rd.a)();return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(Fd.a,{editorId:m,editorValue:" ",editorValid:t.valid,style:{width:"100%"},label:a,children:Object(Ka.jsx)(zd.f,{id:m,value:t.value,disabled:t.elementConfig.disabled,onChange:function(t){return e.inputChangedHandler(t,n)},style:Object.assign({width:"100%"},t.style)})})});case"masked":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(zd.c,{name:n,className:t.className,label:a,valid:t.valid,width:t.width,type:t.elementConfig.type,onChange:function(t){return e.inputChangedHandler(t,n)},validationMessage:t.validationMessage,"data-lpignore":!0,mask:"epc.mnc000.mcc000",value:t.value},n)});case"dateTimePicker":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(Fd.a,{editorValue:" ",editorValid:t.valid,style:{width:"100%"},label:a,children:Object(Ka.jsx)(Ld.b,{name:n,valid:t.valid,min:t.minDate,max:t.maxDate,value:t.value,format:"dd-MM-yyyy hh:mm a",formatPlaceholder:"formatPattern",disabled:t.elementConfig.disabled,onChange:function(t){return e.inputChangedHandler(t,n)}},n)})});case"datePicker":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(Fd.a,{editorValue:" ",editorValid:t.valid,style:{width:"100%"},label:a,children:Object(Ka.jsx)(Ld.a,{name:n,valid:t.valid,min:t.minDate,max:t.maxDate,value:t.value,onChange:function(t){return e.inputChangedHandler(t,n)}},n)})});case"timePicker":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(Fd.a,{editorValue:" ",editorValid:t.valid,style:{width:"100%"},label:a,children:Object(Ka.jsx)(Ld.c,{name:n,disabled:t.elementConfig.disabled,maxDate:t.maxDate,minDate:t.minDate,valid:t.valid,value:t.value,style:{width:"100%"},onChange:function(t){return e.inputChangedHandler(t,n)}},n)})});case"buttonGroup":var b=t.data.map((function(a){var i=""!==t.value&&t.value===a.id,c=i?"button selected "+a.name:"button "+a.name;return Object(Ka.jsx)(k.a,{togglable:!0,selected:i,className:c,onClick:function(t){return e.addButtonHandler(t,n,a.id)},children:a.name},"".concat(n,"-").concat(a.id))})),j=t.valid?"GroupLabel":"GroupLabel Invalid";return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)("div",{className:"RuleButtonGroup",style:{width:"100%",marginTop:"1.03125em"},children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:4,children:Object(Ka.jsx)("div",{className:j,children:Object(Ka.jsx)("span",{className:"Label",children:a})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:8,children:Object(Ka.jsx)("div",{className:"Buttons",children:Object(Ka.jsx)(k.b,{selection:"single",children:b},n)})})]})},n+"div")});case"button":var f=t.style?t.style:{};return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,children:Object(Ka.jsx)(k.a,{primary:!0,icon:t.elementConfig.buttonIcon,className:t.className,disabled:t.elementConfig.disabled,style:Object.assign({width:"100%"},f),onClick:function(){return e.addButtonHandler()},children:t.elementConfig.buttonText},n)});case"checkbox":return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:t.flexSize,style:Object.assign({marginTop:"3px",paddingTop:"24px"},t.style),children:Object(Ka.jsx)(zd.a,{name:n,label:a,disabled:t.elementConfig.disabled,style:t.style,readOnly:t.elementConfig.readOnly,onChange:function(t){return e.checkedChangedHandler(t,n)},checked:t.value},n)});default:return""}};function Vb(e){var t=Object(l.c)(),n=i.a.useRef(null);return i.a.useCallback((function(){return null!=n.current||(n.current=t(e()).then((function(e){return n.current=null,e}))),n.current}),[t,e])}function zb(e){var t=e.title,n=e.children,a=e.className,c=e.expanded,r=void 0===c||c,s=e.onToggleExpanded,l=Object(yd.a)(e,["title","children","className","expanded","onToggleExpanded"]),o=i.a.useMemo((function(){var e=[];return!1===r&&e.push("Card--NoBody"),null!=a&&e.push(a),e.join(" ")}),[r,a]),u=bm(s);return Object(Ka.jsxs)(w.a,Object(v.a)(Object(v.a)({},l),{},{className:o,children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[t,Object(Ka.jsx)(k.a,{look:"flat",icon:!0===r?"arrow-chevron-up":"arrow-chevron-down",title:!0===r?"Collapse ".concat(t):"Expand ".concat(t),"aria-label":!0===r?"Collapse ".concat(t):"Expand ".concat(t),onClick:u})]})})}),!0===r&&n]}))}var Wb=i.a.memo(zb);function Kb(e,t){return i.a.useCallback((function(n,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r=n.value,s=Object.assign({},i),l=s[a];l.value="multi"!==l.elementType?r:Object(x.a)(r),l.validationMessage=ei(r,l.validation),l.valid=""===l.validationMessage,c(s)}),[e,t])}function Jb(e){var t=e.show,n=void 0!==t&&t;return i.a.useEffect((function(){if(!1!==n){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[n]),Object(Ka.jsx)(d.a,{when:n,message:"Changes that you made may not be saved."})}var Yb=i.a.memo(Jb),Qb={FIXED:{id:"FIXED",name:"Fixed"},COST_MARGIN:{id:"COST_MARGIN",name:"Margin $"},PERCENTAGE_MARGIN:{id:"PERCENTAGE_MARGIN",name:"Margin %"},DELETED:{id:"DELETED",name:"To Be Deleted"},BLOCKED:{id:"BLOCKED",name:"Blocked"}};var Xb={skip:0,take:20},$b={skip:0,take:20,sort:[{dir:"desc",field:"scheduled_for"}]},Zb={DONE:"Done",CANCELLED:"Cancelled",SCHEDULED:"Scheduled",IN_PROGRESS:"In Progress",PENDING_EMAIL:"Pending Email"};function ej(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=Vb(Vo),c=i.a.useState([]),r=Object(o.a)(c,2),s=r[0],u=r[1],j=i.a.useState({}),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),O=Object(o.a)(g,2),v=O[0],y=O[1],E=i.a.useState([]),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState(!1),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useContext(Tm),G=q.setTitle,H=q.setContentTitle,B=q.setBreadcrumbs,V=D.length>0,z=i.a.useState(!1),W=Object(o.a)(z,2),K=W[0],J=W[1],Y=i.a.useState(!1),Q=Object(o.a)(Y,2),X=Q[0],$=Q[1],Z=i.a.useState(!1),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(Xb),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1],se=i.a.useState($b),le=Object(o.a)(se,2),oe=le[0],ue=le[1],de=i.a.useMemo((function(){return e.has("API:TEMPLATE_PRICE_MANAGEMENT:WRITE")}),[e]),me=Object(l.d)((function(e){return{route:e.route,currency:e.currency,template:e.template}})),be=me.route,je=me.currency,fe=me.template;i.a.useEffect((function(){return G("Pricing Templates"),H("Pricing Templates"),B([{name:"Pricing Manager"},{name:"Templates"}]),function(){G(null),B([])}}),[G,H,B]);var he=i.a.useCallback((function(e){n(Ui(e))}),[n]),pe=i.a.useCallback((function(){n(Lr())}),[n]),ge=i.a.useCallback((function(){n(Bo())}),[n]),Oe=i.a.useCallback((function(){n(Xo())}),[n]),ve=i.a.useCallback((function(){return ge(),Promise.all([n(Fr()),a()])}),[n,a,ge]),xe=i.a.useCallback((function(){return Oe(),Promise.all([n($o(ni(oe))),a()])}),[n,a,Oe,oe]),Ce=kb({frequency:1e4,intervalPolicy:"update",name:"Scheduled Changes",request:i.a.useCallback((function(){return xe()}),[xe]),getData:i.a.useCallback((function(e,t){var n=e.templatePriceSchedule,a=e.template,i=Object(o.a)(t,1)[0];return new m.b({totalRecords:i.total_records,data:n.reduce((function(e,t){return e.add(new m.b({id:t.get("id"),status:t.get("status"),created_on:t.get("created_on"),template_id:t.get("template_id"),error_summary:t.get("error_summary"),no_of_changes:t.get("no_of_changes"),scheduled_for:t.get("scheduled_for"),template_name:a.getIn([t.get("template_id"),"name"])}))}),new m.e)})}),[])}),_e=Ce.data,ye=Ce.update,Se=i.a.useCallback((function(){return Promise.all([ve(),ye()])}),[ve,ye]),ke=i.a.useCallback((function(){return y(!0),ve().then((function(){y(!1)})).catch((function(e){he({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[he,ve]),we=i.a.useCallback((function(){return $(!0),ye().then((function(){$(!1)})).catch((function(e){he({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[he,ye]);i.a.useEffect((function(){return function(){return pe()}}),[pe]),i.a.useEffect((function(){return y(!0),ve().then((function(){y(!1)})).catch((function(e){he({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return ge()}}),[ge,he,ve]),i.a.useEffect((function(){return J(!0),ye().then((function(){J(!1)})).catch((function(e){he({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return Oe()}}),[Oe,he,ye]);var Ee=i.a.useCallback((function(){re(Xb)}),[]),Ie=i.a.useCallback((function(){ue($b)}),[]),De=i.a.useCallback((function(e){re(e.dataState)}),[]),Te=i.a.useCallback((function(e){ue(e.dataState)}),[]),Me=i.a.useCallback((function(){U(!F)}),[F]);i.a.useEffect((function(){T(D.reduce((function(e,t){if(null!=h[t])return e;var n=Object(x.a)(e);return n.splice(n.indexOf(t),1),n}),D))}),[h,D]);var Ne=i.a.useCallback((function(e){!0!==D.includes(e)&&T([].concat(Object(x.a)(D),[e]))}),[D]),Re=i.a.useCallback((function(e){return function(t){var n=Object.assign({},h);n[e]=t,p(n),Ne(e)}}),[h,Ne]),Ae=i.a.useCallback((function(e){if(null==h[e.get("id")]){var t={name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""}};t.name.value=e.get("name");var n=Object.assign({},h);n[e.get("id")]=t,p(n)}}),[h]),Pe=i.a.useCallback((function(e){if(null!=h[e]){var t=Object.assign({},h);delete t[e],p(t)}}),[h]),Le=i.a.useCallback((function(e){var t=Qa(h[e]),a=t.invalidMessages,i=t.controls,c=Object.assign({},h,Object(C.a)({},e,i));if(a.length>0)return he({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}),void p(c);var r={name:tj(i.name)};if(!1===Object.keys(r).some((function(t){return r[t]!==fe.getIn([e,t])})))return delete c[e],void p(c);y(!0),n(function(e,t){return function(){return Fo.put("/".concat(e),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(e,r)).then((function(){return he({severity:"success",message:"Template Successfully Edited"}),Se()})).catch((function(e){he({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){y(!1),delete c[e],p(c)}))}),[n,fe,he,Se,h]),Fe=i.a.useCallback((function(e){!1!==de&&Ae(e.dataItem.originalRecord)}),[Ae,de]),Ue=Kb(),qe=i.a.useCallback((function(e){u([e]),ne(!0)}),[]),Ge=i.a.useCallback((function(){var e;y(!0),ne(!1),n((e=s[0],function(){return Fo.delete("/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){he({severity:"success",message:"Template Successfully Deleted"})})).then((function(){return Se()})).catch((function(e){he({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){u([]),y(!1)}))}),[n,Se,he,s]),He=i.a.useCallback((function(){u([]),ne(!1)}),[]),Be=sb({variant:"Date"}),Ve=sb({variant:"MultiSelect",props:{data:lb({fieldID:"name",fieldName:"name",namespace:be})}}),ze=sb({variant:"Combobox",props:{data:lb({fieldID:"name",fieldName:"name",namespace:fe})}}),We=sb({variant:"MultiSelect",props:{data:lb({fieldID:"currency",fieldName:"currency",namespace:je})}}),Ke=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(Zb).map((function(e){return{id:e,name:Zb[e]}}),[])}),[])}}),Je=sb({variant:"Input"}),Ye=i.a.useMemo((function(){return[{field:"name",title:"Name",width:"200px",filterCell:ze},{field:"currency",title:"Currency",filterCell:We},{field:"route",title:"Route",filterCell:Ve},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:Je},{field:"actions",width:"137px",locked:!0,sortable:!1,filterable:!1}]}),[Je,Ve,ze,We]),Qe=i.a.useMemo((function(){return[{field:"template_name",title:"Template",view:"templateDOM",sortable:!1,filterCell:ze},{field:"scheduled_for",title:"Scheduled",width:"250px",view:"scheduledForDOM",filterCell:Be},{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:Ke},{field:"no_of_changes",title:"No. of Changes",sortable:!1,filterable:!1},{field:"created_on",title:"Created On",width:"250px",view:"createdOnDOM",filterCell:Be},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:Je},{field:"actions",width:"75px",locked:!0,sortable:!1,filterable:!1}]}),[Ke,Je,ze,Be]),Xe=i.a.useMemo((function(){return fe.reduce((function(e,n,a){var c=h[a],r=null!=c,s=Re(a),l=be.getIn([n.get("route_id"),"name"]);return e.push({id:a,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:a})}),originalRecord:n,currency:n.get("currency_id"),route:null==l?"-":l,name:!1===r?n.get("name"):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Ue(e,t,c,s)},formElement:{id:"name",config:c.name}},"name"),actions:!1===r?Object(Ka.jsxs)(i.a.Fragment,{children:[!0===de&&Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit Template","aria-label":"Edit Template",onClick:function(){return Ae(n)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View & Edit Prices","aria-label":"View & Edit Prices",onClick:function(){t.push("/pricing-manager/templates/".concat(a))}}),!0===de&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable Template","aria-label":"Disable Template",onClick:function(){qe(a)}})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel Template Modifications","aria-label":"Cancel Template Modifications",onClick:function(){return Pe(a)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Submit Template Changes","aria-label":"Submit Template Changes",onClick:function(){return Le(a)}})]})}),e}),[])}),[be,t,fe,Ae,Le,qe,h,Pe,de,Ue,Re]),$e=i.a.useMemo((function(){return _e.get("data").reduce((function(e,n){var a=n.get("id"),c=n.get("template_id");return"DONE"!==n.get("status")&&"CANCELLED"!==n.get("status")&&A(!0),e.push({id:a,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:a})}),created_on:n.get("created_on"),template:n.get("template_id"),no_of_changes:n.get("no_of_changes"),scheduled_for:n.get("scheduled_for"),createdOnDOM:Object(Ka.jsx)(Nd,{utc:n.get("created_on")}),scheduledForDOM:Object(Ka.jsx)(Nd,{utc:n.get("scheduled_for")}),templateDOM:n.get("template_name"),status:null==Zb[n.get("status")]?"-":Zb[n.get("status")],statusDOM:Object(Ka.jsxs)(Ka.Fragment,{children:["DONE"===n.get("status")?Object(Ka.jsx)("i",{className:"fas fa-check"}):"SCHEDULED"===n.get("status")?Object(Ka.jsx)("i",{className:"fas fa-calendar-alt"}):"Cancelled"===n.get("status")?Object(Ka.jsx)("i",{className:"fas fa-ban"}):Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",Zb[n.get("status")]]}),actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View Price Templates Changes","aria-label":"View Price Templates Changes",onClick:function(){t.push("/pricing-manager/templates/".concat(c,"/changes/").concat(a))}})})}),e}),[])}),[t,_e]),Ze=i.a.useMemo((function(){return s.map((function(e){return Object(Ka.jsxs)("li",{children:[fe.getIn([e,"name"]),"(ID: ",e,")"]},e)}))}),[fe,s]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:V}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(Wb,{title:"Schedule Changes",expanded:F,className:R?"Card--Highlight":"",onToggleExpanded:Me,children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:K,style:{height:"450px",marginTop:"10px"},skip:oe.skip,take:oe.take,sort:oe.sort,filter:oe.filter,data:$e,columns:Qe,total:_e.get("totalRecords"),onDataStateChange:Te})})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:we,disabled:!0===X,children:!0===X?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Ie,children:"Clear Filters and Sorting"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Templates"})}),Object(Ka.jsx)(w.c,{children:!0===v?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:!0===de&&Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){return t.push("/pricing-manager/templates/new")},children:"Add Template"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,onRowClick:Fe,frontendFiltering:!0,frontendPagination:!0,style:{height:"450px"},skip:ce.skip,take:ce.take,sort:ce.sort,filter:ce.filter,data:Xe,columns:Ye,onDataStateChange:De})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:ke,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Ee,children:"Clear Filters and Sorting"})]})]})})]}),!0===te&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:He,children:["Are you sure you want to delete the following Template?",Object(Ka.jsx)("ul",{children:Ze}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ge,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:He,children:"Cancel"})]})]})]})}function tj(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var nj=i.a.memo(ej),aj=n(26);function ij(e){var t=e.label,n=e.value,a=i.a.useMemo((function(){return Object(Rd.a)()}),[]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("div",{id:a,className:"FormFieldLabel",children:t}),Object(Ka.jsx)("div",{"aria-labelledby":a,className:"FormFieldValue",children:n})]})}var cj=i.a.memo(ij);function rj(e,t){return i.a.useCallback((function(n,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r=n.value,s=Object.assign({},i),l=s[a];l.value=r,l.validationMessage=ei(r,l.validation),l.valid=""===l.validationMessage,c(s)}),[e,t])}function sj(e){var t=e.isEdit,n=void 0===t||t,a=e.controls,c=void 0===a?{}:a,r=e.onButtonClick,s=e.onInputChange,l=e.onCheckChange,o=e.onDropdownChange,u=e.onControlsChange,d=i.a.useCallback((function(e){"function"===typeof u&&u(e)}),[u]),m=Kb(c,d),b=rj(c,d),j=i.a.useCallback((function(e,t){"function"!==typeof s?m(e,t):s(e,t)}),[s,m]),f=i.a.useCallback((function(e,t){"function"!==typeof o?m(e,t):o(e,t)}),[o,m]),h=i.a.useCallback((function(e,t){"function"!==typeof l?b(e,t):l(e,t)}),[b,l]),p=i.a.useCallback((function(e,t,n){"function"===typeof r&&r(e,t,n)}),[r]);return i.a.useMemo((function(){return Object.keys(c).reduce((function(e,t){var a=c[t];if(!0===n&&!1!==a.isEditable)return e.push(Object(Ka.jsx)(Bb,{addButtonHandler:p,inputChangedHandler:j,checkedChangedHandler:h,dropDownChangedHandler:f,formElement:{id:t,config:c[t]}},t)),e;if("button"===c[t].elementType)return e;var i=c[t].elementConfig.placeholder,r=null;switch(c[t].elementType){case"combo":r=c[t].value&&c[t].value.name;break;case"multi":r=Object(Ka.jsx)("ul",{children:(null==c[t].value?[]:c[t].value).map((function(e,t){return Object(Ka.jsx)("li",{children:e},t)}))});break;default:r=c[t].value}return null!=c[t].elementConfig.format&&(r=Object(aj.f)(r,c[t].elementConfig.format)),e.push(Object(Ka.jsx)(S.a,{item:!0,xs:12,md:c[t].flexSize,children:Object(Ka.jsx)(cj,{label:i,value:null==r||""===r?"-":r})},t)),e}),[])}),[n,c,p,j,h,f])}var lj=i.a.memo(sj);function oj(e){return i.a.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qa(e,t)}),[e])}function uj(e){var t=Object(l.d)((function(t){return t.currency.get(e)}));return i.a.useMemo((function(){if(null==t)return{style:"decimal"};var e=t.get("settings");return{style:"currency",currencyDisplay:"code",currency:t.get("currency"),minimumFractionDigits:null!=e&&e.decimal_places}}),[t])}function dj(e){var t=uj(e);return i.a.useCallback((function(e,n){var a=n.type===Qb.PERCENTAGE_MARGIN.id?{style:"percent"}:t,i=e.type===Qb.PERCENTAGE_MARGIN.id?{style:"percent"}:t;return["type","value","notes","minPrice","decimalPoints"].reduce((function(c,r){var s=e[r],l=n[r],o=null,u=null;switch(r){case"type":o=mj(bj(s)),u=mj(bj(l));break;case"minPrice":o=mj(Object(aj.f)(s,t)),u=mj(Object(aj.f)(l,t));break;case"value":o=mj(Object(aj.f)("percent"!==i.style?s:s/100,i)),u=mj(Object(aj.f)("percent"!==a.style?l:l/100,a));break;default:o=mj(s),u=mj(l)}return c[r]={current:o,scheduled:u,hasChanged:s!==l},c}),{})}),[t])}function mj(e){return null==e||0===String(e).length?"-":e}function bj(e){var t=Qb[e];return null==t?null:t.name}function jj(e){var t=e.dataItem,n=dj(t.currency)({type:t.oldType,value:t.oldValue,notes:t.oldNotes,minPrice:t.oldMinPrice,decimalPoints:t.oldDecimalPoints},{type:t.type,value:t.value,notes:t.notes,minPrice:t.minPrice,decimalPoints:t.decimalPoints}),a=n.type,i=n.value,c=n.notes,r=n.minPrice,s=n.decimalPoints,l=!1===a.hasChanged?null:"DifferenceColorHighlight",o=!1===i.hasChanged?null:"DifferenceColorHighlight",u=!1===c.hasChanged?null:"DifferenceColorHighlight",d=!1===r.hasChanged?null:"DifferenceColorHighlight",m=!1===s.hasChanged?null:"DifferenceColorHighlight";return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsx)("strong",{children:"Type: "}),Object(Ka.jsxs)("span",{className:l,children:[a.scheduled," "]}),!0===a.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",a.current,")"]})]}),Object(Ka.jsx)("strong",{children:"Value: "}),Object(Ka.jsxs)("span",{className:o,children:[i.scheduled," "]}),!0===i.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",i.current,")"]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsx)("strong",{children:"Min. Price: "}),Object(Ka.jsxs)("span",{className:d,children:[r.scheduled," "]}),!0===r.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",r.current,")"]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsx)("strong",{children:"Decimal Points: "}),Object(Ka.jsxs)("span",{className:m,children:[s.scheduled," "]}),!0===s.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",s.current,")"]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Notes: "}),Object(Ka.jsxs)("span",{className:u,children:[c.scheduled," "]}),!0===c.hasChanged&&Object(Ka.jsxs)("i",{children:[Object(Ka.jsx)("br",{}),"(Current: ",c.current,")"]})]})]})}var fj=i.a.memo(jj);function hj(e){var t=e.dataState,n=e.countryField,a=void 0===n?"country":n,c=e.countryFieldID,r=void 0===c?"country_id":c,s=e.networkFieldID,u=void 0===s?"network_id":s,d=i.a.useState(new m.e),b=Object(o.a)(d,2),j=b[0],f=b[1],h=Object(l.d)((function(e){return{country:e.country,network:e.network}})),p=h.country,g=h.network,O=i.a.useMemo((function(){return null==t.filter?[]:(null==t.filter.filters?[]:t.filter.filters).reduce((function(e,t){return t.field!==a||e.push.apply(e,Object(x.a)("country_id"===r?t.value:t.value.reduce((function(e,t){var n=p.find((function(e){return e.get(r)===t}));return null!=n&&e.push(n.get("country_id")),e}),[]))),e}),[])}),[t,p,a,r]),v=lb({namespace:p,fieldID:r,fieldName:"country_name"});return i.a.useEffect((function(){var e=g.reduce((function(e,t){return O.length>0&&!1===O.includes(t.get("country_id"))?e:e.add(new m.b({id:t.get(u),name:t.get("network_name")}))}),new m.e);e.equals(j)||f(e)}),[g,j,O,u]),{availableCountries:v,availableNetworks:i.a.useMemo((function(){return j.toJS()}),[j])}}function pj(){var e=Object(d.j)().templateID,t=b(),n=Object(d.h)(),a=Object(l.c)(),c=i.a.useState(),r=Object(o.a)(c,2),s=r[0],u=r[1],j=i.a.useState(!0),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState([]),O=Object(o.a)(g,2),v=O[0],y=O[1],E=i.a.useContext(Tm),I=E.setTitle,D=E.setContentTitle,T=E.setBreadcrumbs,M=i.a.useState({}),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState([]),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState([]),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState([]),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(!1),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useMemo((function(){return t.has("API:TEMPLATE_PRICE_MANAGEMENT:WRITE")}),[t]),Z=i.a.useState(new m.b),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=Q||W.length>0||te.size>0,ie=oj(s),ce=i.a.useState({skip:0,take:20,sort:[{dir:"desc",field:"value"}]}),re=Object(o.a)(ce,2),se=re[0],le=re[1],oe=i.a.useState({skip:0,take:20}),ue=Object(o.a)(oe,2),de=ue[0],me=ue[1],be=Object(l.d)((function(e){return{network:e.network,country:e.country,template:e.template,trafficStatuses:e.trafficStatuses}})),je=be.network,fe=be.country,he=be.template,pe=be.trafficStatuses;i.a.useEffect((function(){var t=he.getIn([e,"name"]);return null==t?(I("Pricing Template Modification"),D("Pricing Template Modification")):(I("".concat(t," Pricing Template Modification")),D("".concat(t," Pricing Template Modification"))),T([{name:"Pricing Manager"},{link:"/pricing-manager/templates/",name:"Templates"},{name:t},{name:"Prices"}]),function(){I(null),T([])}}),[he,e,I,D,T]);var ge=i.a.useCallback((function(e){a(Ui(e))}),[a]);i.a.useEffect((function(){return p(!0),a(zo(e)).then((function(){p(!1)})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){a(Bo())}}),[a,e,ge]),i.a.useEffect((function(){p(!0),Promise.all([a(go()),a(Wo(e))]).then((function(){p(!1)})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[a,ge,e]),i.a.useEffect((function(){var e={scheduleFor:{flexSize:6,minDate:new Date,elementType:"dateTimePicker",elementConfig:{placeholder:"Schedule For"},value:null,validation:{required:!0},valid:!0,validationMessage:""}};u(e)}),[fe]);var Oe=i.a.useCallback((function(e){le(e.dataState)}),[]),ve=i.a.useCallback((function(e){me(e.dataState)}),[]),xe=i.a.useCallback((function(e){e.scheduleFor.value<e.scheduleFor.minDate||(u(e),X(!0))}),[]);i.a.useEffect((function(){var e=new m.e(H.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(pe.values()).reduce((function(e,t){return!1===t.get("charge_on_status")||e.push(new m.b({id:t.get("code"),name:t.get("description")})),e}),[]));e.equals(t)||B(t.toJS())}),[pe,H]),i.a.useEffect((function(){U(Object(x.a)(pe.values()).reduce((function(e,t){return!1===t.get("charge_on_status_default")||e.push({id:t.get("code"),name:t.get("description")}),e}),[]))}),[pe]),i.a.useEffect((function(){K(W.reduce((function(e,t){if(null!=R[t])return e;var n=Object(x.a)(e);return n.splice(n.indexOf(t),1),n}),W))}),[R,W]);var Ce=i.a.useCallback((function(e){!0!==W.includes(e)&&K([].concat(Object(x.a)(W),[e]))}),[W]),_e=uj(he.getIn([e,"currency_id"])),ye=i.a.useCallback((function(e){var t=null==e.type.value?null:e.type.value.id;switch(e.charge_on_status_enabled.elementConfig.disabled=0===H.length&&0===F.length,e.charge_on_status.selected=!1===(!1===e.charge_on_status_enabled.value||!0===e.charge_on_status_enabled.elementConfig.disabled),e.charge_on_status.validation.required=!0===e.charge_on_status.selected,t){case Qb.FIXED.id:ri(e.value),ci(e.minPrice),ci(e.decimalPoints),e.minPrice.elementConfig.format=null,e.value.elementConfig.format=_e;break;case Qb.COST_MARGIN.id:ri(e.value),ri(e.minPrice),ri(e.decimalPoints),e.value.elementConfig.format=_e,e.minPrice.elementConfig.format=_e;break;case Qb.PERCENTAGE_MARGIN.id:ri(e.value),ri(e.minPrice),ri(e.decimalPoints),e.minPrice.elementConfig.format=_e,e.value.elementConfig.format={style:"percent"};break;default:ci(e.value),ci(e.minPrice),ci(e.decimalPoints),e.charge_on_status.selected=!1,ci(e.charge_on_status_enabled,{defaultValue:!1}),e.value.elementConfig.format=null,e.minPrice.elementConfig.format=null}}),[_e,H,F]),Se=i.a.useCallback((function(e){return function(t){var n=Object.assign({},R);ye(t),n[e]=t,A(n),Ce(e)}}),[R,Ce,ye]),ke=i.a.useCallback((function(t){if(!1!==$&&null==R[t.get("network_id")]){var n=te.get(t.get("network_id")),a={value:{elementType:"numeric",elementConfig:{min:0,step:.01,placeholder:"Value"},value:null,validation:{minValue:0,required:!1,isNumeric:!0},valid:!0,validationMessage:""},charge_on_status:{elementType:"multi",clearButton:!0,elementConfig:{allowCustom:!1,placeholder:"Charge on Status"},valid:!0,value:[],data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},charge_on_status_enabled:{elementType:"checkbox",elementConfig:{placeholder:""},value:!1,validation:{required:!1},valid:!0,validationMessage:""},type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Type"},valid:!0,value:null,data:Object.keys(Qb).map((function(e){return{id:Qb[e].id,name:Qb[e].name}})),textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},minPrice:{elementType:"numeric",elementConfig:{min:0,step:.01,placeholder:"Min. Price"},value:null,validation:{minValue:0,required:!1,isNumeric:!0},valid:!0,validationMessage:""},decimalPoints:{elementType:"numeric",elementConfig:{min:0,placeholder:"Decimal Points"},value:null,validation:{minValue:0,required:!1,isNumeric:!0},valid:!0,validationMessage:""},notes:{elementType:"textarea",elementConfig:{placeholder:"Notes"},value:"",validation:{required:!1,maxLength:1e3},valid:!0,validationMessage:""}},i=[n&&n.type,t.get("type")].find((function(e){return null!=e}));if(a.value.value=vj(null!=n?n.value:t.get("value"),i),a.charge_on_status_enabled.value=null!=t.get("charge_on_status_enabled")&&t.get("charge_on_status_enabled"),a.charge_on_status.value=null==t.get("charge_on_status")?Object(x.a)(F):Object(x.a)(new window.Set([].concat(Object(x.a)(F.map((function(e){return e.id}))),Object(x.a)(t.get("charge_on_status"))))).map((function(e){return{id:pe.getIn([e,"code"]),name:pe.getIn([e,"description"])}})),a.charge_on_status.data=H,a.notes.value=null!=n?n.notes:null==t.get("notes")?"":t.get("notes"),a.minPrice.value=null!=n?n.min_price:t.get("min_price"),a.decimalPoints.value=null!=n?n.dp_rounding:t.get("dp_rounding"),null!=i){var c=Qb[i];null!=c&&(a.type.value={id:c.id,name:c.name})}a.type.data=Object.keys(Qb).reduce((function(t,n){return n===Qb.DELETED.id||!1===(null!=e)&&n===Qb.TEMPLATE.id||t.push({id:Qb[n].id,name:Qb[n].name}),t}),[]),ye(a);var r=Object.assign({},R);r[t.get("network_id")]=a,A(r)}}),[e,pe,F,H,ye,$,te,R]),we=i.a.useCallback((function(e){ne(te.set(e.get("network_id"),{networkID:e.get("network_id"),type:"DELETED",value:null,notes:null,min_price:null,dp_rounding:null,charge_on_status:[],charge_on_status_enabled:null}))}),[te]),Ee=i.a.useCallback((function(e){if(null!=R[e]){var t=Object.assign({},R);delete t[e],A(t)}}),[R]),Ie=i.a.useCallback((function(){ne(new m.b)}),[]),De=i.a.useCallback((function(e){ne(te.delete(e))}),[te]),Te=i.a.useCallback((function(t){var n=Qa(R[t]),a=n.invalidMessages,i=n.controls,c=Object.assign({},R,Object(C.a)({},t,i));if(a.length>0)return ge({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}),void A(c);var r=Oj(i.type),s=Oj(i.value),l={type:r,notes:Oj(i.notes),min_price:Oj(i.minPrice),dp_rounding:Oj(i.decimalPoints),value:"PERCENTAGE_MARGIN"===r?100*s:s,charge_on_status:Oj(i.charge_on_status),charge_on_status_enabled:Oj(i.charge_on_status_enabled)},o=Object.keys(l).some((function(n){return l[n]!==he.getIn([e,"prices",t,n])}));ne(!1===o?te.delete(t):te.set(t,l)),delete c[t],A(c)}),[he,ge,e,te,R]),Me=i.a.useCallback((function(e){ke(e.dataItem.originalRecord)}),[ke]),Ne=i.a.useCallback((function(e){var t=Object(x.a)(v),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),y(t)}),[v]),Re=Kb(),Ae=rj(),Pe=i.a.useCallback((function(){if(0!==te.size){var t,i,c=ie(),r=c.invalidMessages,s=c.controls;if(u(s),r.length>0)ge({message:Object(Ka.jsx)(Mm,{messageList:r}),severity:"error",action:{label:"Dismiss"}});else p(!0),a((t=e,i={schedule_date:s.scheduleFor.value.getTime(),template_changes:te.reduce((function(e,t,n){return e.push({type:t.type,value:t.value,notes:t.notes,network_id:n,min_price:t.min_price,dp_rounding:t.dp_rounding,charge_on_status:!0===t.charge_on_status_enabled?t.charge_on_status.map((function(e){return e.id})):null,country_id:je.getIn([n,"country_id"]),charge_on_status_enabled:t.charge_on_status_enabled}),e}),[])},function(){return Fo.post("".concat(t,"/schedule-template-network-pricings"),i).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){ge({severity:"success",message:"Prices Successfully Edited"}),n.push("/pricing-manager/templates/")})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}}),p(!1)}))}else ge({message:"No prices where changed",severity:"error",action:{label:"Dismiss"}})}),[n,je,a,ge,e,te,ie]),Le=hj({dataState:se,countryFieldID:"country_name",networkFieldID:"network_name"}),Fe=Le.availableNetworks,Ue=Le.availableCountries,qe=hj({dataState:de,countryFieldID:"country_name",networkFieldID:"network_name"}),Ge=qe.availableNetworks,He=qe.availableCountries,Be=sb({variant:"MultiSelect",props:{data:Ue}}),Ve=sb({variant:"Input",props:{min:0,label:"MCC"}}),ze=sb({variant:"MultiSelect",props:{data:Fe}}),We=sb({variant:"Input",props:{min:0,label:"MNC"}}),Ke=sb({variant:"MultiSelect",props:{data:He}}),Je=sb({variant:"MultiSelect",props:{data:Ge}}),Ye=sb({variant:"Input"}),Qe=sb({variant:"Numeric"}),Xe=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(Qb).map((function(e){return{id:e,name:Qb[e].name}}),[])}),[])}}),$e=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return pe.reduce((function(e,t){return e.push({id:t.get("code"),name:t.get("description")}),e}),[])}),[pe])}}),Ze=i.a.useMemo((function(){var e=[{field:"country",title:"Country",filterCell:Be},{field:"mcc",title:"MCC",filterCell:Ve},{field:"network",title:"Network",filterCell:ze},{field:"mnc",title:"MNC",filterCell:We},{field:"cost",title:"Current Price",view:"costDOM",filterCell:Qe},{field:"profit",title:"Profit",view:"profitDOM",filterCell:Qe},{field:"type",title:"Type",width:"200px",view:"typeDOM",filterCell:Xe},{field:"charge_on_status",title:"Charge on Delivery",view:"charge_on_status_DOM",width:"250px",sortable:!1,filterCell:$e},{field:"value",title:"Value",width:"200px",view:"valueDOM",filterCell:Ye},{field:"minPrice",title:"Min. Price",width:"200px",view:"minPriceDOM",filterCell:Qe},{field:"decimalPoints",title:"Decimal Points",width:"200px",view:"decimalPointsDOM",filterCell:Qe},{field:"notes",title:"Notes",width:"300px",view:"notesDOM",filterCell:Ye},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:Ye}];return!0===$&&e.push({field:"actions",width:"100px",locked:!0,sortable:!1,filterable:!1}),e}),[Ve,We,Ye,Xe,Qe,ze,Be,$,$e]),et=i.a.useMemo((function(){return Object(x.a)(je.values()).reduce((function(t,n){var a=n.get("network_id"),c=new m.b(Object.assign({network_id:a},new m.b(he.getIn([e,"prices",a])).toJS())),r=R[a],s=null!=r,l=Se(a),o=n.get("network_name"),u=fe.getIn([n.get("country_id"),"country_name"]),d=te.get(a),b=[d&&d.type,c.get("type")].find((function(e){return null!=e})),j=null==d?c.get("notes"):d.notes,f=null==d?c.get("charge_on_status_enabled"):d.charge_on_status_enabled,h=null==d?c.get("charge_on_status"):!1===f?[]:d.charge_on_status.map((function(e){return e.id})),p=null==d?c.get("min_price"):d.min_price,g=null==d?c.get("dp_rounding"):d.dp_rounding,O=b===Qb.PERCENTAGE_MARGIN.id?{style:"percent"}:_e,v=vj(null==d?c.get("value"):d.value,b,c.get("type")),x=Object(aj.f)(v,O),C=ii({type:b,min_price:p,cost:c.get("cost"),value:v,dp_rounding:null==g?_e.minimumFractionDigits:g},Qb);return t.push({id:a,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:a})}),networkID:a,country:u,network:o,originalRecord:c,type:gj(b),value:gj(x),notes:gj(j),minPrice:gj(p),countryID:n.get("country_id"),decimalPoints:gj(g),mcc:n.getIn(["mccmnc",0,"mcc"]),mnc:n.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),profitDOM:gj(C,"N/A"),profit:null==C?-1/0:C,costDOM:gj(c.get("cost"),"N/A"),cost:null==c.get("cost")?-1/0:c.get("cost"),charge_on_status:h,charge_on_status_DOM:!1===s?null==h||0===h.length?"-":Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:1,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{disabled:!0,variant:"Checkbox",value:f})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:h.map((function(e,t){var n=pe.getIn([e,"description"]);return Object(Ka.jsx)(wd,{children:n},t)}))})]})}):Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:1,children:[Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(Bb,{checkedChangedHandler:function(e,t){Ae(e,t,r,l)},formElement:{id:"charge_on_status_enabled",config:r.charge_on_status_enabled}},"charge_on_status_enabled")}),Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){Re(e,t,r,l)},formElement:{id:"charge_on_status",config:r.charge_on_status}},"charge_on_status")}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:null==h||0===h.length?"-":h.map((function(e,t){var n=pe.getIn([e,"description"]);return Object(Ka.jsx)(wd,{children:n},t)}))})]})}),typeDOM:!1===s?null==b||""===b.length?"-":Qb[b].name:Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){Re(e,t,r,l)},formElement:{id:"type",config:r.type}},"type"),notesDOM:!1===s?Object(Ka.jsx)(pm,{length:40,content:gj(j)}):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Re(e,t,r,l)},formElement:{id:"notes",config:r.notes}},"notes"),valueDOM:!1===s?gj(x):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Re(e,t,r,l)},formElement:{id:"value",config:r.value}},"value"),minPriceDOM:!1===s?gj(Object(aj.f)(p,_e)):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Re(e,t,r,l)},formElement:{id:"minPrice",config:r.minPrice}},"minPrice"),decimalPointsDOM:!1===s?gj(g):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Re(e,t,r,l)},formElement:{id:"decimalPoints",config:r.decimalPoints}},"decimalPoints"),actions:!1===s?Object(Ka.jsxs)(i.a.Fragment,{children:[!0===$&&Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Change ".concat(o," Price"),"aria-label":"Change ".concat(o," Price"),onClick:function(){return ke(c)}}),!1===te.has(a)&&null!=c.get("type")&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Delete ".concat(o," Price"),"aria-label":"Delete ".concat(o," Price"),onClick:function(){return we(c)}}),te.has(a)&&Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",title:"Revert ".concat(o," Price Changes"),"aria-label":"Revert ".concat(o," Price Changes"),onClick:function(){return De(a)}})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Submit ".concat(o," Price Changes"),"aria-label":"Submit ".concat(o," Price Changes"),onClick:function(){return Te(a)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"close",title:"Cancel ".concat(o," Price Modifications"),"aria-label":"Cancel ".concat(o," Price Modifications"),onClick:function(){return Ee(a)}})]})}),t}),[])}),[je,fe,he,e,_e,pe,we,Te,ke,te,$,R,Ae,Re,De,Ee,Se]),tt=i.a.useMemo((function(){return[{field:"expand",width:"65px",sortable:!1,filterable:!1},{field:"country",title:"Country",filterCell:Ke},{field:"network",title:"Network",filterCell:Je},{field:"charge_on_status",title:"Charge on Delivery",view:"charge_on_status_DOM",width:"250px",sortable:!1,filterCell:$e},{field:"changes",title:"Changes",filterCell:Qe},{field:"actions",width:"100px",locked:!0,sortable:!1,filterable:!1}]}),[Qe,Je,Ke,$e]),nt=i.a.useMemo((function(){return te.reduce((function(t,n,a){var i=new m.b(Object.assign({network_id:a},new m.b(he.getIn([e,"prices",a])).toJS())),c=je.getIn([a,"network_name"]);if(null==c)return t;var r=fe.getIn([je.getIn([a,"country_id"]),"country_name"]);if(null==r)return t;var s=v.includes(a),l=i.get("charge_on_status"),o=[{old:i.get("type"),new:n.type},{old:i.get("value"),new:n.value},{old:i.get("notes"),new:n.notes},{old:i.get("min_price"),new:n.min_price},{old:i.get("dp_rounding"),new:n.dp_rounding},{old:i.get("charge_on_status_enabled"),new:n.charge_on_status_enabled},{old:i.get("charge_on_status"),new:n.charge_on_status}].reduce((function(e,t){return t.old!==t.new?e+1:e}),0);return t.push({changes:o,networkID:a,expanded:s,country:r,network:c,countryID:je.getIn([a,"country_id"]),charge_on_status:l,charge_on_status_DOM:n.charge_on_status_enabled?n.charge_on_status.map((function(e,t){return Object(Ka.jsx)(wd,{children:e.name},t)})):"-",expand:Object(Ka.jsx)(k.a,{look:"flat",icon:!0===s?"minus":"add",title:"View ".concat(c," Price Changes"),"aria-label":"View ".concat(c," Price Changes"),onClick:function(){return Ne(a)}}),type:n.type,value:n.value,notes:n.notes,minPrice:n.min_price,decimalPoints:n.dp_rounding,oldType:i.get("type"),oldValue:i.get("value"),oldNotes:i.get("notes"),oldMinPrice:i.get("min_price"),currency:he.getIn([e,"currency_id"]),oldDecimalPoints:i.get("dp_rounding"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",title:"Revert ".concat(c," Price Changes"),"aria-label":"Revert ".concat(c," Price Changes"),onClick:function(){return De(a)}})}),t}),[])}),[fe,je,he,e,v,te,De,Ne]);return!0===h?Object(Ka.jsx)(Wm,{height:"630px",className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:ae}),Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[te.size>0&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Highlight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Uncommitted Changes"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:s,onControlsChange:xe}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"492px"},skip:de.skip,take:de.take,sort:de.sort,filter:de.filter,data:nt,columns:tt,onDataStateChange:ve,detail:fj})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Ie,disabled:0===te.size,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:function(){return Pe()},children:"Save"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Edit Pricing"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"492px"},skip:se.skip,take:se.take,sort:se.sort,onRowClick:Me,filter:se.filter,data:et,columns:Ze,onDataStateChange:Oe})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return n.push("/pricing-manager/templates/")},children:"Back"})})]})})]})})})]})}function gj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return null==e||0===String(e).length?t:e}function Oj(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}function vj(e,t){return null==e?null:e/(t===Qb.PERCENTAGE_MARGIN.id?100:1)}var xj=i.a.memo(pj);function Cj(){var e=Object(d.h)(),t=Object(l.c)(),n=i.a.useState(),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useState(!0),u=Object(o.a)(s,2),m=u[0],b=u[1],j=i.a.useContext(Tm),f=j.setTitle,h=j.setContentTitle,p=j.setBreadcrumbs,g=oj(c),O=Object(l.d)((function(e){return{route:e.route,currency:e.currency}})),v=O.route,x=O.currency;i.a.useEffect((function(){return f("Pricing Template Creation"),h("Pricing Template Creation"),p([{name:"Pricing Manager"},{link:"/pricing-manager/templates/",name:"Templates"},{name:"Creation"}]),function(){f(null),p([])}}),[f,h,p]);var C=i.a.useCallback((function(e){t(Ui(e))}),[t]);i.a.useEffect((function(){return b(!0),t(Fr()).then((function(){b(!1)})).catch((function(e){C({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return t(Lr())}}),[t,C]),i.a.useEffect((function(){var e={name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},route:{flexSize:6,elementType:"combo",clearButton:!0,elementConfig:{allowCustom:!1,placeholder:"Route"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},currency:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.currency.data=x.reduce((function(e,t){return e.push({id:t.get("currency"),name:t.get("currency")}),e}),[]),e.route.data=v.reduce((function(e,t){return e.push({id:t.get("id"),name:t.get("name")}),e}),[]),r(e)}),[x,v]);var _=i.a.useCallback((function(e){r(e)}),[]),y=i.a.useCallback((function(){var n=g(),a=n.invalidMessages,i=n.controls;if(r(i),a.length>0)C({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}});else{b(!0);var c={name:_j(i.name),route_id:_j(i.route),currency_id:_j(i.currency)};t(function(e){return function(){return Fo.post("",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(c)).then((function(){C({severity:"success",message:"Template Successfully Created"}),e.push("/pricing-manager/templates/")})).catch((function(e){C({severity:"error",message:e.message,action:{label:"Dismiss"}}),b(!1)}))}}),[e,t,C,g]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Details"})}),Object(Ka.jsx)(w.c,{children:!0===m?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:c,onControlsChange:_})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return e.push("/pricing-manager/templates/")},children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:function(){return y()},disabled:!0===m,children:"Save"})]})]})})})}function _j(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var yj=i.a.memo(Cj),Sj={skip:0,take:20};function kj(){var e=Object(d.j)(),t=e.scheduleID,n=e.templateID,a=Object(d.h)(),c=Object(l.c)(),r=i.a.useState(!0),s=Object(o.a)(r,2),u=s[0],b=s[1],j=i.a.useContext(Tm),f=j.setTitle,h=j.setBreadcrumbs,p=i.a.useState(Sj),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useCallback((function(e){c(Ui(e))}),[c]),y=Object(l.d)((function(e){return{network:e.network,country:e.country,template:e.template,trafficStatuses:e.trafficStatuses,templatePriceSchedule:e.templatePriceSchedule}})),E=y.network,I=y.country,D=y.template,T=y.trafficStatuses,M=y.templatePriceSchedule;i.a.useEffect((function(){var e=D.getIn([n,"name"]);if(null!=e)return f("".concat(e," Changes")),h([{name:"Pricing Manager"},{link:"/pricing-manager/templates/",name:"Templates"},{name:e},{name:"Changes"}]),function(){f(null),h([])}}),[D,n,f,h]);var N=i.a.useCallback((function(){c(Bo()),c(Xo())}),[c]),R=i.a.useCallback((function(){return N(),Promise.all([c(go()),c(zo(n)),c(Wo(n)),c(Zo(n,t))])}),[c,N,n,t]),A=i.a.useCallback((function(){return b(!0),R().then((function(){b(!1)})).catch((function(e){C({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[R,C]);i.a.useEffect((function(){return A(),function(){return N()}}),[N,A]);var P=i.a.useCallback((function(){v(Sj)}),[]),L=i.a.useCallback((function(e){v(e.dataState)}),[]),F=dj(D.getIn([n,"currency_id"])),U=hj({dataState:O,countryFieldID:"country_name",networkFieldID:"network_name"}),q=U.availableNetworks,G=sb({variant:"MultiSelect",props:{data:U.availableCountries}}),H=sb({variant:"Input",props:{min:0,label:"MCC"}}),B=sb({variant:"MultiSelect",props:{data:q}}),V=sb({variant:"Input",props:{min:0,label:"MNC"}}),z=sb({variant:"Input"}),W=sb({variant:"Numeric"}),K=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(Qb).map((function(e){return{id:e,name:Qb[e].name}}),[])}),[])}}),J=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return T.reduce((function(e,t){return e.push({id:t.get("code"),name:t.get("description")}),e}),[])}),[T])}}),Y=i.a.useMemo((function(){return[{field:"country",title:"Country",filterCell:G},{field:"mcc",title:"MCC",filterCell:H},{field:"network",title:"Network",filterCell:B},{field:"mnc",title:"MNC",filterCell:V},{field:"charge_on_status",title:"Charge on Delivery",view:"charge_on_status_DOM",width:"250px",sortable:!1,filterCell:J},{field:"type",title:"Type",width:"200px",view:"typeDOM",filterCell:K},{field:"value",title:"Value",width:"200px",view:"valueDOM",filterCell:z},{field:"minPrice",title:"Min. Price",width:"200px",view:"minPriceDOM",filterCell:W},{field:"decimalPoints",title:"Decimal Points",width:"200px",view:"decimalPointsDOM",filterCell:W},{field:"notes",title:"Notes",width:"300px",view:"notesDOM",filterCell:z},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:z}]}),[H,V,z,K,W,B,G,J]),Q=i.a.useMemo((function(){return D.getIn([n,"name"])}),[D,n]),X=i.a.useMemo((function(){return Object(Ka.jsx)(Nd,{utc:M.getIn([t,"schedule_date"])})}),[t,M]),$=i.a.useMemo((function(){var e=M.getIn([t,"prices"]);return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var a=new m.b(D.getIn([n,"prices",t.get("network_id")])),i=t.get("charge_on_status"),c=F({type:a.get("type"),value:a.get("value"),notes:a.get("notes"),minPrice:a.get("min_price"),decimalPoints:a.get("dp_rounding")},{type:t.get("type"),value:t.get("value"),notes:t.get("notes"),minPrice:t.get("min_price"),decimalPoints:t.get("dp_rounding")}),r=c.type,s=c.value,l=c.notes,o=c.minPrice,u=c.decimalPoints,d=!1===r.hasChanged?null:"DifferenceColorHighlight",b=!1===s.hasChanged?null:"DifferenceColorHighlight",j=!1===o.hasChanged?null:"DifferenceColorHighlight",f=!1===u.hasChanged?null:"DifferenceColorHighlight",h=!1===l.hasChanged?null:"DifferenceColorHighlight",p=E.getIn([t.get("network_id"),"country_id"]),g=t.get("network_id"),O=E.get(g);return e.push({countryID:p,networkID:g,id:g,value:s.scheduled,notes:l.scheduled,type:t.get("type"),decimalPoints:u.scheduled,minPrice:t.get("min_price"),network:E.getIn([g,"network_name"]),country:I.getIn([p,"country_name"]),mcc:O.getIn(["mccmnc",0,"mcc"]),mnc:O.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:g})}),charge_on_status:i,charge_on_status_DOM:t.get("charge_on_status_enabled")?i.map((function(e,t){var n=T.getIn([e,"description"]);return Object(Ka.jsx)(wd,{children:n},t)})):"-",typeDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:d,children:[r.scheduled," "]}),!0===r.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",r.current,")"]})]}),valueDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:b,children:[s.scheduled," "]}),!0===s.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",s.current,")"]})]}),minPriceDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:j,children:[o.scheduled," "]}),!0===o.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",o.current,")"]})]}),decimalPointsDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:f,children:[u.scheduled," "]}),!0===u.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",u.current,")"]})]}),notesDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("span",{className:h,children:Object(Ka.jsx)(pm,{length:40,content:l.scheduled})}),!0===l.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",Object(Ka.jsx)(pm,{length:40,content:l.current}),")"]})]})}),e}),[])}),[I,E,D,t,n,T,F,M]);return!0===u?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsxs)(w.f,{children:[M.getIn([t,"status"])," Changes"]})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:["Changes on ",Object(Ka.jsx)("strong",{children:Q})," scheduled for"," ",X]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"411px"},skip:O.skip,take:O.take,sort:O.sort,filter:O.filter,data:$,columns:Y,onDataStateChange:L})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return a.push("/pricing-manager/templates/")},children:"Back"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:A,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:P,children:"Clear Filters and Sorting"})]})]})})})}var wj=i.a.memo(kj);function Ej(){var e="/pricing-manager/templates",t=b();return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsxs)(d.e,{children:[!0===t.has("FRONTEND:PRICING-MANAGER-TEMPLATE-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"".concat(e,"/new"),children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(yj,{})})}),Object(Ka.jsx)(d.c,{path:"".concat(e,"/:templateID/changes/:scheduleID"),children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(wj,{})})}),Object(Ka.jsx)(d.c,{path:"".concat(e,"/:templateID"),children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(xj,{})})}),Object(Ka.jsx)(d.c,{path:e,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(nj,{})})})]})})}var Ij=i.a.memo(Ej);function Dj(){var e="/pricing-manager",t=b(),n=i.a.useMemo((function(){return[{url:e,key:"clients.price-plans",title:"Price Plans",path:e,component:Object(Ka.jsx)(Hb,{}),visible:t.has("FRONTEND:PRICING-MANAGER-CLIENT-PRICE-PLANS-PAGE-ACCESS")},{key:"clients.templates",title:"Templates",path:"".concat(e,"/templates/*"),url:"".concat(e,"/templates/"),component:Object(Ka.jsx)(Ij,{}),visible:t.has("FRONTEND:PRICING-MANAGER-TEMPLATES-PAGE-ACCESS")}]}),[e,t]);return Object(Ka.jsx)(Rb,{tabs:n})}var Tj=i.a.memo(Dj);function Mj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Object(l.d)((function(e){return{countries:e.country}})),a=n.countries,c=i.a.useMemo((function(){return null==t?null:t.dropdownValues}),[t]);return i.a.useMemo((function(){return e.reduce((function(e,t){var n=!1===t.editable;switch(t.field_type){case"multilinestring":e[t.field_id]={elementType:"textarea",elementConfig:{readOnly:n,placeholder:t.field_name},value:"",validation:{required:t.required},valid:!0,validationMessage:""};break;case"unsignedinteger":e[t.field_id]={elementType:"numeric",elementConfig:{min:0,readOnly:n,placeholder:t.field_name},value:null,validation:{minValue:0,isNumeric:!0,required:t.required},valid:!0,validationMessage:""};break;case"integer":e[t.field_id]={elementType:"numeric",elementConfig:{readOnly:n,placeholder:t.field_name},value:null,validation:{isNumeric:!0,required:t.required},valid:!0,validationMessage:""};break;case"country":e[t.field_id]={elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,readOnly:n,placeholder:t.field_name},valid:!0,value:null,data:ai(Object(x.a)(a.values()).map((function(e){return{id:e.get("country_id"),name:e.get("country_name")}})),{includeSpecialCountries:!1}),textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:t.required}};break;case"boolean":e[t.field_id]={elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,readOnly:n,placeholder:t.field_name},valid:!0,value:null,data:[{id:"true",name:"Yes"},{id:"false",name:"No"}],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:t.required}};break;case"email":e[t.field_id]={elementType:"input",elementConfig:{placeholder:t.field_name},value:"",validation:{isEmail:!0,readOnly:n,required:t.required},valid:!0,validationMessage:""};break;case"url":e[t.field_id]={elementType:"input",elementConfig:{placeholder:t.field_name},value:"",validation:{isURL:!0,readOnly:n,required:t.required},valid:!0,validationMessage:""};break;case"dropdown":var i=c&&c.get(t.field_id);e[t.field_id]={elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,readOnly:n,placeholder:t.field_name},valid:!0,value:null,data:i&&i.map((function(e){return{id:e.id,name:e.name}})),textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:t.required}};break;default:e[t.field_id]={elementType:"input",elementConfig:{readOnly:n,placeholder:t.field_name},value:"",validation:{required:t.required},valid:!0,validationMessage:""}}return e}),{})}),[e,a,c])}function Nj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new m.b,n=arguments.length>2?arguments[2]:void 0,a=Object(l.d)((function(e){return e.country})),c=i.a.useMemo((function(){return null==n?null:n.dropdownValues}),[n]);return i.a.useMemo((function(){return e.reduce((function(e,n){switch(n.field_type){case"country":var i=a.get(t.get(n.field_id));null!=i&&(e[n.field_id]={id:i.get("country_id"),name:i.get("country_name")});break;case"unsignedinteger":var r=t.get(n.field_id);e[n.field_id]=null==r||""===r?null:Number(r);break;case"integer":var s=t.get(n.field_id);e[n.field_id]=null==s||""===s?null:Number(s);break;case"boolean":switch(t.get(n.field_id)){case"true":e[n.field_id]={id:"true",name:"Yes"};break;case"false":e[n.field_id]={id:"false",name:"No"};break;default:e[n.field_id]=null}break;case"dropdown":var l=c&&c.get(n.field_id);e[n.field_id]=l&&l.find((function(e){return e.id===t.get(n.field_id)}));break;default:e[n.field_id]=t.get(n.field_id)}return e}),{})}),[e,a,t,c])}var Rj={yes:{id:"yes",name:"Yes"},no:{id:"no",name:"No"}},Aj={true:{id:!0,name:"Enable"},false:{id:!1,name:"Disable"}},Pj={gsm7:{id:"gsm7",name:"GSM7"},latin1:{id:"latin1",name:"Latin1"},utf8:{id:"utf8",name:"UTF8"}},Lj={nochange:{id:"nochange",name:"No Change"},hexdec:{id:"hexdec",name:"HexDec"},dechex:{id:"dechex",name:"DecHex"}},Fj={transmitter:{id:"transmitter",name:"Transmitter"},receiver:{id:"receiver",name:"Receiver"},transmitter_receiver:{id:"transmitter_receiver",name:"Transmitter Receiver"},transceiver:{id:"transceiver",name:"Transceiver"}},Uj=[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}],qj={daily:{id:"daily",name:"Daily"},weekly:{id:"weekly",name:"Weekly"},monthly:{id:"monthly",name:"Monthly"}},Gj=Object.keys(Rj).map((function(e){return Rj[e]})),Hj=Object.keys(Aj).map((function(e){return Aj[e]})),Bj=Object.keys(Lj).map((function(e){return Lj[e]})),Vj=Object.keys(Fj).map((function(e){return Fj[e]})),zj=Object.keys(Pj).map((function(e){return Pj[e]}));function Wj(){return{link_id:{selected:!1,elementType:"input",elementConfig:{placeholder:"Link ID"},validation:{},value:"",valid:!0,validationMessage:""},link_name:{elementType:"input",elementConfig:{placeholder:"Link Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},host:{elementType:"input",elementConfig:{placeholder:"Host"},value:"",validation:{required:!0,isDomain:!0},valid:!0,validationMessage:""},port:{elementType:"numeric",elementConfig:{max:2147483647,min:0,format:"#",placeholder:"Port"},value:2775,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},password:{elementType:"input",elementConfig:{placeholder:"Password"},value:"",validation:{required:!0},valid:!0,validationMessage:""},system_id:{elementType:"input",elementConfig:{placeholder:"System ID"},value:"",validation:{required:!0},valid:!0,validationMessage:""},system_type:{elementType:"input",elementConfig:{placeholder:"System Type"},value:"",validation:{required:!1},valid:!0,validationMessage:""},connection_type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!0,placeholder:"Connection Type"},valid:!0,value:null,data:Vj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},is_ssl:{flexSize:6,elementType:"checkbox",elementConfig:{placeholder:"SSL"},value:!1,validation:{required:!0},valid:!0,validationMessage:""},default_alphabet:{elementType:"combo",elementConfig:{placeholder:"Default Alphabet"},data:zj,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""},site_id:{elementType:"input",elementConfig:{placeholder:"Site ID",readOnly:!0},value:"",validation:{required:!0},valid:!0,validationMessage:""}}}function Kj(e){var t=e.supplierID,n=b(),a=Object(d.h)(),c=Object(l.c)(),r=i.a.useState(),s=Object(o.a)(r,2),u=s[0],j=s[1],f=i.a.useState(),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(!1),v=Object(o.a)(O,2),C=v[0],_=v[1],y=i.a.useState(),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(!1),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(!1),P=Object(o.a)(A,2),L=P[0],F=P[1],U=oj(u),q=oj(p),G=i.a.useMemo((function(){return n.has("API:SUPPLIER_DETAILS:WRITE")}),[n]),H=i.a.useCallback((function(e){c(Ui(e))}),[c]),B=i.a.useCallback((function(){var e=!L;F(e),!0===e&&D(Object.keys(u).reduce((function(e,t){return e[t]=Object.assign({},u[t]),e}),{}))}),[u,L]),V=Object(l.d)((function(e){var n=e.supplier;return new m.b(n.get(t))})),z=Object(l.d)((function(e){return e.field["supplier-fields"]||[]})),W=Object(l.d)((function(e){return e.subsidiaries})),K=Object(l.d)((function(e){return e.salesRegions})),J=lb({namespace:W,fieldID:"id",fieldName:"subsidiary_name"}),Y=lb({namespace:K,fieldID:"id",fieldName:"region_name"}),Q=i.a.useMemo((function(){return{dropdownValues:(new m.b).set("Subsidiary",J).set("SalesRegion",Y)}}),[J,Y]),X=Mj(z,Q),$=Nj(z,V.get("supplier_fields"),Q),Z=i.a.useMemo((function(){return!0===N}),[N]);i.a.useEffect((function(){return R(!0),Promise.all([c(xi("supplier-fields")),c(ld()),c(bd())]).then((function(){R(!1)})).catch((function(e){H({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){c(vi("supplier-fields")),c(sd()),c(md())}}),[c,H,t]),i.a.useEffect((function(){if(!0!==Z){var e=Object.assign({},X),t={name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""}};t.name.value=V.get("supplier_name"),["supplier_name"].forEach((function(t){null!=e[t]&&(e[t].value=$[t])})),z.forEach((function(t){var n=t.field_id;null!=e[n]&&(e[n].value=null==$[n]?"":$[n])})),j(e),g(t)}}),[Z,z,$,V,X,W,K]);var ee=i.a.useCallback((function(e){_(!0),j(e)}),[]),te=i.a.useCallback((function(e){_(!0),g(e)}),[]),ne=i.a.useCallback((function(){j(I),B()}),[B,I]),ae=i.a.useCallback((function(){var e=U(),n=e.invalidMessages,a=e.controls,i=q(),r=i.invalidMessages,s=i.controls;j(a),g(s);var l=[].concat(Object(x.a)(n),Object(x.a)(r));if(l.length>0)H({message:Object(Ka.jsx)(Mm,{messageList:l}),severity:"error",action:{label:"Dismiss"}});else{R(!0);var o,u,d=z.map((function(e){return{field_id:e.field_id,value:Jj(a[e.field_id])}}));c((o=t,u={supplier_fields:d,supplier_name:s.name.value},function(){return Dc.patch("/".concat(o),u).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){return H({severity:"success",message:"Supplier Successfully Edited"}),F(!1),c(xl(t))})).catch((function(e){H({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){_(!1),R(!1)}))}}),[U,q,t,c,H,z]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:C}),Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",style:{minHeight:"593px"},children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Supplier Details"})}),Object(Ka.jsx)(w.c,{children:!0===Z?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:p,isEdit:L,onControlsChange:te}),Object(Ka.jsx)(lj,{controls:u,isEdit:L,onControlsChange:ee})]})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:!1===L?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return a.push("/suppliers")},children:"Go Back"}),!0===G&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:B,children:"Edit"})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:ne,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ae,disabled:!0===Z,children:"Save"})]})})]})]})}function Jj(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var Yj=i.a.memo(Kj),Qj={skip:0,take:20};function Xj(e){var t=e.supplierID,n=b(),a=Object(l.c)(),c=i.a.useState(),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState(!0),j=Object(o.a)(d,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),O=g[0],v=g[1],y=i.a.useState([]),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState({}),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState([]),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(!1),q=Object(o.a)(U,2),G=q[0],H=q[1],B=!0===L.length>0||!0===G,V=i.a.useState(!1),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(Qj),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=Kb(),Z=i.a.useMemo((function(){return n.has("API:SUPPLIER_DETAILS:WRITE")}),[n]),ee=i.a.useCallback((function(e){a(Ui(e))}),[a]),te=Object(l.d)((function(e){var n=e.supplier,a=e.supplierContact,i=n.getIn([t,"contacts"]);return(null==i?[]:i.toJS()).reduce((function(e,t){var n=a.get(t);return null==n?e:e.set(t,n)}),new m.b)})),ne=Object(l.d)((function(e){return e.supplierContactType})),ae=i.a.useCallback((function(){var e=!O;if(v(e),!0===e){var t=Object.assign({},{name:{elementType:"input",elementConfig:{placeholder:"Full Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},email:{elementType:"input",elementConfig:{placeholder:"Email Address"},value:"",validation:{required:!0,isEmail:!0},valid:!0,validationMessage:""},contactType:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Contact Type"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}});t.contactType.data=$j(ne),u(t)}}),[ne,O]),ie=i.a.useCallback((function(){a({type:nt}),a(Di)}),[a]),ce=i.a.useCallback((function(){return ie(),Promise.all([a(Cl(t)),a(Ti())])}),[a,ie,t]),re=i.a.useCallback((function(){return h(!0),ce().then((function(){h(!1)})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[ce,ee]);i.a.useEffect((function(){return re(),function(){return ie()}}),[ie,re]);var se=i.a.useCallback((function(){X(Qj)}),[]),le=i.a.useCallback((function(e){X(e.dataState)}),[]),oe=i.a.useCallback((function(e){u(e),H(!0)}),[]);i.a.useEffect((function(){F(L.reduce((function(e,t){if(null!=N[t])return e;var n=Object(x.a)(e);return n.splice(n.indexOf(t),1),n}),L))}),[N,L]);var ue=i.a.useCallback((function(e){!0!==L.includes(e)&&F([].concat(Object(x.a)(L),[e]))}),[L]),de=i.a.useCallback((function(e){return function(t){var n=Object.assign({},N);n[e]=t,R(n),ue(e)}}),[N,ue]),me=i.a.useCallback((function(){ae()}),[ae]),be=i.a.useCallback((function(e){if(null==N[e.contact_id]){var t={name:{elementType:"input",elementConfig:{placeholder:"Full Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},email:{elementType:"input",elementConfig:{placeholder:"Email Address"},value:"",validation:{required:!0,isEmail:!0},valid:!0,validationMessage:""},contactType:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Contact Type"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};t.name.value=e.contact_name,t.email.value=e.contact_email,t.contactType.value=null!=e.contact_type_id&&{id:e.contact_type_id,name:ne.get(e.contact_type_id).get("contact_type_name")},t.contactType.data=$j(ne);var n=Object.assign({},N);n[e.contact_id]=t,R(n)}}),[N,ne]),je=i.a.useCallback((function(e){var n=N[e],i=Object.keys(n).reduce((function(e,t){var n=e.controls[t],a=ei(n.value,n.validation);return""!==a?(n.valid=!1,n.validationMessage=n.elementConfig.placeholder+a,e.invalidMessages.push(n.validationMessage)):(n.valid=!0,n.validationMessage=""),e}),{invalidMessages:[],controls:Object.assign({},n)}),c=i.invalidMessages,r=i.controls,s=Object.assign({},N,Object(C.a)({},e,r));if(c.length>0)return ee({message:Object(Ka.jsx)(Mm,{messageList:c}),severity:"error",action:{label:"Dismiss"}}),void R(s);h(!0),Promise.all([a(Nl(t,e)),a(El(t,{contact_name:Zj(r.name),contact_email:Zj(r.email),contact_type_id:Zj(r.contactType)}))]).then((function(){ee({severity:"success",message:"Supplier Contact Successfully Edited"}),delete s[e]})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return a(Cl(t))})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){h(!1),R(s)}))}),[N,t,a,ee]),fe=i.a.useCallback((function(e){if(null!=N[e]){var t=Object.assign({},N);delete t[e],R(t)}}),[N]),he=i.a.useCallback((function(e){D([e]),K(!0)}),[]),pe=i.a.useCallback((function(){h(!0),a(Nl(t,I[0])).then((function(){ee({severity:"success",message:"Supplier Contact Successfully Deleted"})})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return ce()})).then((function(){h(!1),D([]),K(!1)}))}),[a,ce,t,ee,I]),ge=i.a.useCallback((function(){D([]),K(!1)}),[]),Oe=i.a.useCallback((function(e){!0===Z&&be(e.dataItem.originalRecord)}),[be,Z]),ve=sb({variant:"Input"}),xe=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return ne.reduce((function(e,t){return e.push({id:t.get("contact_type_id"),name:t.get("contact_type_name")}),e}),[])}),[ne])}}),Ce=i.a.useMemo((function(){var e=[{field:"name",title:"Name",width:"200px",view:"nameDOM",filterCell:ve},{field:"email",title:"Email",width:"250px",view:"emailDOM",filterCell:ve},{field:"contactType",title:"Contact Type",width:"200px",view:"contactTypeDOM",filterCell:xe},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:ve}];return!0===Z&&e.push({field:"actions",width:"100px",locked:!0,sortable:!1,filterable:!1}),e}),[ve,Z,xe]),_e=i.a.useMemo((function(){return Object(x.a)(te.values()).map((function(e){var t=e.toJS(),n=N[t.contact_id],a=null!=n,c=de(t.contact_id);return{id:t.contact_id,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:t.contact_id})}),originalRecord:t,name:t.contact_name,email:t.contact_email,contactType:t.contact_type_id,nameDOM:!1===a?t.contact_name:Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){$(e,t,n,c)},formElement:{id:"name",config:n.name}},"name"),emailDOM:!1===a?t.contact_email:Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){$(e,t,n,c)},formElement:{id:"email",config:n.email}},"email"),contactTypeDOM:!1===a?ne.getIn([t.contact_type_id,"contact_type_name"]):Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){$(e,t,n,c)},formElement:{id:"contactType",config:n.contactType}},"contactType"),actions:!1===a?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(t.contact_name," Contact"),"aria-label":"Edit ".concat(t.contact_name," Contact"),onClick:function(){return be(t)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"delete",title:"Disable ".concat(t.contact_name," Contact"),"aria-label":"Disable ".concat(t.contact_name," Contact"),onClick:function(){return he(t.contact_id)}})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel Client Contact Modifications","aria-label":"Cancel Client Contact Modifications",onClick:function(){return fe(t.contact_id)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Submit Client Contact Modifications","aria-label":"Submit Client Contact Modifications",onClick:function(){return je(t.contact_id)}})]})}}))}),[te,je,be,he,N,ne,fe,$,de]),ye=i.a.useCallback((function(){var e=Object.keys(s).reduce((function(e,t){var n=e.controls[t],a=ei(n.value,n.validation);return""!==a?(n.valid=!1,n.validationMessage=n.elementConfig.placeholder+a,e.invalidMessages.push(n.validationMessage)):(n.valid=!0,n.validationMessage=""),e}),{invalidMessages:[],controls:Object.assign({},s)}),n=e.invalidMessages,i=e.controls;u(i),n.length>0?ee({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}}):(h(!0),a(El(t,{contact_name:Zj(i.name),contact_email:Zj(i.email),contact_type_id:Zj(i.contactType)})).then((function(){ee({severity:"success",message:"Supplier Contact Successfully Added"});var e=Object.assign({},i);return Object.keys(e).forEach((function(e){i[e].value=""})),ae(),a(Cl(t))})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){h(!1),H(!1)})))}),[s,t,a,ee,ae]),Se=i.a.useMemo((function(){return I.map((function(e){return Object(Ka.jsxs)("li",{children:[te.getIn([e,"contact_name"]),"(ID: ",e,")"]},e)}))}),[te,I]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(Yb,{show:B}),Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Supplier Contacts"})}),Object(Ka.jsx)(w.c,{children:!0===f?Object(Ka.jsx)(Wm,{className:"loader",height:!1===O?"400px":"648px"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===Z&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:!1===O?Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:ae,children:"Add Contact"})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Add Contact"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:s,onControlsChange:oe})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:me,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ye,children:"Save"})]})]}),Object(Ka.jsx)("hr",{})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:Q.skip,take:Q.take,sort:Q.sort,filter:Q.filter,data:_e,onRowClick:Oe,columns:Ce,onDataStateChange:le})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:re,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:se,children:"Clear Filters and Sorting"})]})]}),!0===W&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ge,children:["Are you sure you want to delete the following Supplier Contacts?",Object(Ka.jsx)("ul",{children:Se}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:pe,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ge,children:"Cancel"})]})]})]})}function $j(e){return Object(x.a)(e.values()).map((function(e){return{id:e.get("contact_type_id"),name:e.get("contact_type_name")}}))}function Zj(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var ef=i.a.memo(Xj);function tf(e){var t=e.supplierID,n=i.a.useContext(Tm),a=n.setTitle,c=n.setContentTitle,r=n.setBreadcrumbs,s=Object(l.d)((function(e){return e.supplier.getIn([t,"supplier_name"])}));return i.a.useEffect((function(){return null==s?(a("Information"),c("Information")):(a("".concat(s,"'s Information")),c("".concat(s,"'s Information"))),r([{link:"/suppliers",name:"Suppliers"},{name:s},{name:"Information"}]),function(){a(null),r([])}}),[s,c,a,r]),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(Yj,{supplierID:t})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(ef,{supplierID:t})})]})}var nf=i.a.memo(tf),af="past",cf="future";function rf(e){var t=e.variant,n=e.networkID,a=e.supplierID,c=e.scheduleID,r=e.scheduledDate,s=e.currencyFormat,u=e.price,d=e.onCancelled,m=b(),j=Object(l.c)(),f=bm(d),h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(!1),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useState(!1),S=Object(o.a)(y,2),w=S[0],E=S[1];i.a.useEffect((function(){!1!==g&&f()}),[f,g]);var I=i.a.useCallback((function(e){j(Ui(e))}),[j]),D=i.a.useMemo((function(){return m.has("API:SUPPLIER_RATE:WRITE")}),[m]),T=i.a.useMemo((function(){var e=["SupplierNetworkRate"];return e.push(t===af?"SupplierNetworkRate--PastRate":t===cf?"SupplierNetworkRate--FutureRate":"SupplierNetworkRate--CurrentRate"),!0===g&&e.push("SupplierNetworkRate--Cancelled"),e.join(" ")}),[t,g]),M=i.a.useCallback((function(){_(!0),j(Gl(a,c,n)).then((function(){O(!0)})).catch((function(e){I({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){_(!1)}))}),[I,j,n,a,c]),N=i.a.useCallback((function(){window.open("/suppliers/".concat(a,"/rates/schedule/").concat(c))}),[a,c]),R=i.a.useCallback((function(){E(!0)}),[]),A=i.a.useCallback((function(){E(!1)}),[]),P=i.a.useCallback((function(){A(),M()}),[M,A]),L=i.a.useMemo((function(){return null!=u?Object(aj.f)(u,s):Object(Ka.jsx)("span",{className:"Text--Error",children:"No Rate"})}),[u,s]);return Object(Ka.jsxs)("article",{className:T,children:[Object(Ka.jsxs)("header",{className:"SupplierNetworkRate__Header",children:[Object(Ka.jsx)("span",{className:"SupplierNetworkRate__HeaderDate",children:Object(Ka.jsx)(Nd,{utc:r,includeTimezone:!1})}),Object(Ka.jsx)("span",{className:"SupplierNetworkRate__HeaderTimezone",children:Object(Ka.jsx)(Td,{})})]}),Object(Ka.jsx)("div",{className:"SupplierNetworkRate__Body",children:!0===C?Object(Ka.jsxs)("center",{children:[Object(Ka.jsx)("i",{className:"fas fa-spin fa-spinner fa-2x"}),Object(Ka.jsx)("br",{}),Object(Ka.jsx)("strong",{children:"Cancelling Schedule"})]}):!0===w?Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("center",{children:"Are you sure you want to cancel the schedule?"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:P,children:"Yes"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:A,children:"No"})]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("span",{className:"SupplierNetworkRate__Price",children:L}),!1===g&&t===cf&&!0===D&&Object(Ka.jsx)(k.a,{look:"flat",onClick:R,children:"Cancel"}),!0===g&&Object(Ka.jsx)("strong",{children:"Cancelled"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:N,children:"View Schedule"})]})})]})}var sf=i.a.memo(rf);function lf(e){var t=e.info,n=e.supplierID,a=e.connectionID,c=e.currencyFormat,r=e.onClose,s=null==t?{}:t,u=s.networkID,d=s.currentScheduleID,b=Object(l.c)(),j=i.a.useState(0),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useRef(null),O=i.a.useState(!0),v=Object(o.a)(O,2),C=v[0],y=v[1],S=i.a.useState(null),w=Object(o.a)(S,2),E=w[0],I=w[1],D=i.a.useState(!1),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useCallback((function(){"function"===typeof r&&r(M)}),[r,M]),A=i.a.useCallback((function(){N(!0)}),[]),P=i.a.useReducer((function(e,t){switch(t.type){case"ADD":return t.data.reduce((function(e,t){return e.set(t.get("schedule_id"),t)}),e);default:return e}}),new m.b),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useMemo((function(){return null===E||E>F.size}),[F,E]),G=i.a.useCallback((function(e){b(Ui(e))}),[b]);i.a.useEffect((function(){if(null!=a&&null!=u)return y(!0),b(Kc(a,u,{page:h,size:50,sort:{date:"desc"}})).then((function(e){I(e.total_records)})).catch((function(e){R(),G({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){y(!1)})),function(){b(function(e,t){return{data:{connectionID:e,networkID:t},type:Ve}}())}}),[h,R,b,u,G,a]);var H=Object(l.d)((function(e){return{network:e.network,rates:e.supplierConnection.getIn([a,"history",u])}})),B=H.rates,V=H.network;i.a.useEffect((function(){null!=B&&U({type:"ADD",data:B})}),[B,U]);var z=i.a.useMemo((function(){return V.getIn([u,"network_name"])}),[V,u]),W=i.a.useMemo((function(){var e=!1;return Object(x.a)(F.values()).sort((function(e,t){return e.get("date")>t.get("date")?-1:e.get("date")<t.get("date")?1:0})).map((function(t){var a=d===t.get("schedule_id");return!0===a&&(e=!0),Object(Ka.jsx)(sf,{networkID:u,supplierID:n,price:t.get("price"),onCancelled:A,currencyFormat:c,scheduledDate:t.get("date"),scheduleID:t.get("schedule_id"),variant:!0===a?"current":!0===e?"past":"future"},t.get("schedule_id"))}))}),[F,u,n,c,A,d]),K=i.a.useCallback((function(e){if(!1!==q&&!0!==C){var t=e.target.scrollTop;e.target.offsetHeight+t+100>e.target.scrollHeight&&p(h+1)}}),[h,C,q]);return i.a.useEffect((function(){var e=g.current;if(null!=e)return e.addEventListener("scroll",K),function(){e.removeEventListener("scroll",K)}}),[K,g]),Object(Ka.jsxs)(Ub.a,{title:"".concat(z,"'s Rates History"),onClose:R,children:[!0===C&&0===F.size?Object(Ka.jsx)(Wm,{className:"loader",height:"172px"}):Object(Ka.jsxs)(_.a,{p:1,display:"flex",flexWrap:"wrap",width:"1094px",height:"500px",maxWidth:"100%",alignItems:"center",justifyContent:"center",ref:g,className:"SupplierNetworkRatesDialogConent",style:{overflowX:"hidden",overflowY:"auto"},children:[W,!1===q&&Object(Ka.jsx)(_.a,{m:2,height:"176px",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",children:Object(Ka.jsx)("strong",{children:"No More Prices"})}),!0===C&&F.size>0&&Object(Ka.jsxs)(_.a,{m:2,height:"176px",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",children:[Object(Ka.jsx)("i",{className:"fas fa-spin fa-spinner fa-2x"}),Object(Ka.jsx)("br",{}),Object(Ka.jsx)("strong",{children:"Loading More Prices"})]})]}),Object(Ka.jsx)(Ub.b,{children:Object(Ka.jsx)(k.a,{onClick:R,children:"Close"})})]})}var of=i.a.memo(lf);function uf(e){var t=e.currencyFormat,n=e.isLoading,a=void 0!==n&&n,c=e.prices,r=void 0===c?new m.b:c,s=e.onSubmit,u=bm(e.onCancel),d=i.a.useState(new Date),b=Object(o.a)(d,2),j=b[0],f=b[1],h=i.a.useState([]),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useMemo((function(){return{min:new Date,required:!0}}),[]),x=Nm(i.a.useMemo((function(){return[{label:"Scheduled Date",value:j,setErrors:O,validations:v}]}),[j,O,v])),C=Object(l.d)((function(e){return{network:e.network,country:e.country}})),_=C.network,y=C.country,w=i.a.useCallback((function(){"function"===typeof s&&s(j,x())}),[j,s,x]),E=i.a.useCallback((function(e){return null===e?Object(Ka.jsx)("strong",{className:"Text--Error",children:"No Rate"}):Object(aj.f)(e,t)}),[t]),I=i.a.useMemo((function(){return r.reduce((function(e,t,n){var a=_.get(n);return null==n||e.push(Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:y.getIn([a.get("country_id"),"country_name"])}),Object(Ka.jsx)("td",{children:_.getIn([n,"network_name"])}),Object(Ka.jsx)("td",{children:a.getIn(["mccmnc",0,"mcc"])}),Object(Ka.jsx)("td",{children:a.getIn(["mccmnc",0,"mnc"])}),Object(Ka.jsx)("td",{children:E(t.get("old"))}),Object(Ka.jsx)("td",{children:E(t.get("new"))})]},n)),e}),[])}),[r,y,_,E]);return Object(Ka.jsxs)(Ub.a,{title:"Change Network Rates",onClose:u,children:[!0===a?Object(Ka.jsx)("center",{children:"Saving Rates. Please wait."}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{min:new Date,variant:"DateTime",label:"Scheduled Date",value:j,onChange:f,errors:g,validations:v,onErrorsChange:O})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("hr",{})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,style:{maxHeight:"240px",overflow:"auto"},children:Object(Ka.jsxs)("table",{width:"100%",children:[Object(Ka.jsx)("thead",{children:Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("th",{children:"Country"}),Object(Ka.jsx)("th",{children:"Network"}),Object(Ka.jsx)("th",{children:"MCC"}),Object(Ka.jsx)("th",{children:"MNC"}),Object(Ka.jsx)("th",{children:"Current Rate"}),Object(Ka.jsx)("th",{children:"New Rate"})]})}),Object(Ka.jsx)("tbody",{children:I})]})})]}),!1===a&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:w,children:"Submit"}),Object(Ka.jsx)(k.a,{onClick:u,children:"Cancel"})]})]})}var df=i.a.memo(uf);function mf(e){var t=e.value,n=e.label,a=e.onSubmit,c=e.elementProps,r=void 0===c?{}:c,s=e.isEditMode,l=void 0!==s&&s,o=e.isCancelable,u=void 0!==o&&o,d=e.onChange,m=e.onFormatValue,b=e.onEditModeChange,j=i.a.useMemo((function(){return Object(Rd.a)()}),[]),f=bm(d),h=bm(b),p=i.a.useMemo((function(){return"function"===typeof a}),[a]),g=i.a.useCallback((function(e){return"function"!==typeof m?e:m(e)}),[m]),O=i.a.useMemo((function(){return g(t)}),[t,g]),x=i.a.useMemo((function(){var e=["ResponsiveGridEditableCell"];return"function"===typeof b&&e.push("ResponsiveGridEditableCell--Clickable"),e.join(" ")}),[b]);return!1===l?Object(Ka.jsx)("div",{className:x,onClick:h,children:O}):Object(Ka.jsxs)(_.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)("label",{htmlFor:j,style:{display:"none"},children:n}),Object(Ka.jsx)(fm,Object(v.a)(Object(v.a)({},r),{},{id:j,value:t,onChange:f})),!0===p&&Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Submit ".concat(n),"aria-label":"Submit ".concat(n),onClick:a}),!0===u&&Object(Ka.jsx)(k.a,{look:"flat",icon:"close",title:"Cancel ".concat(n),"aria-label":"Cancel ".concat(n),onClick:h})]})}var bf=i.a.memo(mf),jf={skip:0,take:20,sort:[{dir:"desc",field:"price"}]},ff="No Scheduled Changes";function hf(e){var t=e.supplierID,n=Object(d.j)().connectionID,a=b(),c=Object(d.h)(),r=Object(l.c)(),s=i.a.useState(!1),u=Object(o.a)(s,2),j=u[0],f=u[1],h=i.a.useState(!0),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(!1),C=Object(o.a)(v,2),y=C[0],E=C[1],I=i.a.useState(!1),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useState(new m.b),R=Object(o.a)(N,2),A=R[0],P=R[1],L=i.a.useState(null),F=Object(o.a)(L,2),U=F[0],q=F[1],G=i.a.useState(jf),H=Object(o.a)(G,2),B=H[0],V=H[1],z=i.a.useState(new m.b),W=Object(o.a)(z,2),K=W[0],J=W[1],Y=i.a.useState(!1),Q=Object(o.a)(Y,2),X=Q[0],$=Q[1],Z=i.a.useState(),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1],se=i.a.useMemo((function(){return a.has("API:SUPPLIER_RATE:WRITE")}),[a]),le=i.a.useContext(Tm),oe=le.setTitle,ue=le.setContentTitle,de=le.setBreadcrumbs,me=Object(l.d)((function(e){return{country:e.country,network:e.network,currency:e.currency,supplier:e.supplier,supplierConnection:e.supplierConnection}})),be=me.country,je=me.network,fe=me.currency,he=me.supplier,pe=me.supplierConnection;i.a.useEffect((function(){var e=pe.getIn([n,"connection_name"]);null!=e&&q(e)}),[n,pe]);var ge=i.a.useCallback((function(e){r(Ui(e))}),[r]);i.a.useEffect((function(){return null==U?(oe("Connection Rates"),ue("Connection Rates")):(oe("".concat(U,"'s Rates Changes")),ue("".concat(U,"'s Rates Changes"))),de([{link:"/suppliers",name:"Suppliers"},{name:he.getIn([t,"supplier_name"])},{link:"/suppliers/".concat(t,"/rates"),name:"Rate Manager"},{name:U},{name:"Rates"}]),function(){oe(null),de([]),ue(null)}}),[he,oe,t,n,U,de,ue,pe]);var Oe=i.a.useCallback((function(){c.push("/suppliers/".concat(t,"/rates/"))}),[c,t]),ve=i.a.useCallback((function(){r(qc(n))}),[r,n]),xe=i.a.useMemo((function(){var e=ni(B);return[{to:"country_id",from:"country"},{to:"network_id",from:"network"}].forEach((function(t){null!=e[t.from]&&(e[t.to]=e[t.from],delete e[t.from])})),e}),[B]),Ce=i.a.useCallback((function(){return ve(),r(Wc(n,xe))}),[r,xe,n,ve]),_e=kb({name:"Rates",request:i.a.useCallback((function(){return Ce()}),[Ce]),getData:i.a.useCallback((function(e,t){var a=e.supplierConnection.getIn([n,"prices"]);return new m.b({totalRecords:t.total_records,data:null==a?new m.b:a})}),[n])}),ye=_e.data,Se=_e.update,ke=i.a.useCallback((function(){return M(!0),Se().catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return M(!1)}))}),[ge,Se]);i.a.useEffect((function(){return O(!0),Promise.all([Se(),r(Vc(n))]).then((function(){O(!1)})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){ve(),r(Ac())}}),[Se,r,ge,ve,n]);var we=i.a.useCallback((function(e){V(e.dataState)}),[]),Ee=i.a.useCallback((function(){V(jf)}),[]),Ie=i.a.useCallback((function(){$(!1)}),[]),De=i.a.useCallback((function(e){ne(null),!1!==e&&(O(!0),Se().catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){O(!1)})))}),[ge,Se]),Te=i.a.useCallback((function(e){return!0===A.has(e)?A.getIn([e,"value"]):K.has(e)?K.getIn([e,"new"]):ye.getIn(["data",e,"price"])}),[ye,A,K]),Me=i.a.useCallback((function(e){return K.has(e)?K.getIn([e,"new"]):ye.getIn(["data",e,"price"])}),[ye,K]),Ne=i.a.useCallback((function(){re(null)}),[]),Re=i.a.useCallback((function(){O(!0),re(null),r(Gl(t,pe.getIn([n,"prices",ce,"next_price_change","schedule_id"]),ce)).then((function(){ge({severity:"success",message:"Scheduled Change Successfully Cancelled"})})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return Se()})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){O(!1)}))}),[Se,r,ge,t,n,pe,ce]),Ae=i.a.useMemo((function(){return pe.getIn([n,"connection_currency"])}),[n,pe]),Pe=i.a.useMemo((function(){if(null==Ae)return null;var e=fe.getIn([Ae,"settings"]);return null==e?null:e.decimal_places}),[fe,Ae]),Le=i.a.useMemo((function(){return{style:"currency",currencyDisplay:"code",currency:Ae,minimumFractionDigits:Pe}}),[Ae,Pe]),Fe=i.a.useCallback((function(){$(!0)}),[]),Ue=i.a.useCallback((function(e,t){t.length>0?ge({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}}):(f(!0),r(function(e,t){return function(){return Rc.post("/".concat(e,"/prices/schedules"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(n,{scheduled_date:e.getTime(),prices:K.reduce((function(e,t,n){return e.push({network_id:n,price:t.get("new")}),e}),[])})).then((function(){E(!1),J(new m.b),$(!1),ge({severity:"success",message:"New Rates Successfully Scheduled"})})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return f(!1),O(!0),Se()})).catch((function(e){ge({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){O(!1)})))}),[r,ge,Se,n,K]),qe=i.a.useCallback((function(e,t){var n=ye.get("data").getIn([e,"price"]);J(n===t?K.delete(e):K.set(e,new m.b({new:t,old:n})))}),[ye,K]),Ge=i.a.useCallback((function(e){!1!==se&&(!0!==A.has(e)?P(A.set(e,new m.b({errors:[],value:Te(e)}))):P(A.delete(e)))}),[A,Te,se]),He=i.a.useCallback((function(e,t){!1!==A.has(e)&&P(A.setIn([e,"value"],t))}),[A]),Be=i.a.useCallback((function(e){J(K.delete(e))}),[K]),Ve=i.a.useCallback((function(e){E(!0),qe(e,null)}),[qe]),ze=i.a.useCallback((function(e){return null==e?Object(Ka.jsx)("strong",{className:"Text--Error",children:"No Rate"}):Object(aj.f)(e,Le)}),[Le]),We=i.a.useCallback((function(){E(!0)}),[]),Ke=i.a.useMemo((function(){return{min:0,onDirtyChange:We,autofocus:!0,variant:"Numeric",format:Le,validations:{min:0}}}),[We,Le]),Je=i.a.useCallback((function(e){if(!1!==A.has(e)){var t=je.getIn([e,"network_name"]),n=A.getIn([e,"value"]),a=Xa([{value:n,label:"Change ".concat(t,"'s Rate"),validations:Ke.validations}]);if(a.length>0)return ge({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}),void P(A.setIn([e,"errors"],a));P(A.delete(e)),qe(e,n)}}),[je,ge,A,qe,Ke]),Ye=hj({dataState:B}),Qe=Ye.availableNetworks,Xe=sb({variant:"MultiSelect",props:{label:"Country",data:Ye.availableCountries}}),$e=sb({variant:"MultiSelect",props:{label:"Network",data:Qe}}),Ze=sb({variant:"Input",props:{min:0,label:"MCC"}}),et=sb({variant:"Input",props:{min:0,label:"MNC"}}),tt=sb({variant:"Numeric",props:{min:0,label:"Rate",format:Le}}),nt=i.a.useMemo((function(){return Object(x.a)(ye.get("data").values()).reduce((function(e,t){var n=t.get("network_id"),a=je.get(n);if(null==a)return e;var i=a.get("network_name"),c=t.get("next_price_change"),r=Te(n);return e.push({id:n,network:i,price:Me(n),mcc:a.getIn(["mccmnc",0,"mcc"]),mnc:a.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),actions:Object(Ka.jsx)(k.a,{look:"flat",title:"View ".concat(i,"'s Rate History"),"aria-label":"View ".concat(i,"'s Rate History"),icon:"calendar",onClick:function(){ne({networkID:n,currentScheduleID:t.get("schedule_id")})}}),price_dom:Object(Ka.jsxs)(_.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(_.a,{flex:"1",children:Object(Ka.jsx)(bf,{value:r,isCancelable:!0,label:"Change ".concat(i,"'s Rate"),elementProps:Object.assign({errors:A.getIn([n,"errors"])},Ke),onFormatValue:ze,isEditMode:A.has(n),onEditModeChange:function(){return Ge(n)},onSubmit:function(){return Je(n)},onChange:function(e){return He(n,e)}})}),!0===se&&!1===A.has(n)&&(K.has(n)?Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",onClick:function(){return Be(n)},title:"Revert ".concat(i," Rate"),"aria-label":"Revert ".concat(i," Rate")}):null!=r&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",onClick:function(){return Ve(n)},title:"Remove ".concat(i," Rate"),"aria-label":"Remove ".concat(i," Rate")}))]}),country:be.getIn([a.get("country_id"),"country_name"]),nextScheduledChange:null==c?Object(Ka.jsx)("span",{className:"Text--Faded",children:ff}):Object(Ka.jsxs)(_.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)("span",{children:ze(c.get("price"))})," ","@ ",Object(Ka.jsx)(Nd,{utc:c.get("scheduled_date")})]}),!0===se&&Object(Ka.jsx)(k.a,{onClick:function(){re(n)},children:"Cancel"})]})}),e}),[])}),[ye,be,je,A,Ge,He,K,Te,Me,Ve,Be,Ke,ze,Je,se]),at=i.a.useMemo((function(){return!1===nt.every((function(e){return e.nextScheduledChange===ff}))}),[nt]),it=i.a.useMemo((function(){return[{field:"country",title:"Country",filterCell:Xe},{field:"mcc",title:"MCC",filterCell:Ze},{field:"network",title:"Network",filterCell:$e},{field:"mnc",title:"MNC",filterCell:et},{field:"price",title:"Rate",width:"200px",view:"price_dom",filterCell:tt},{field:"nextScheduledChange",title:"Next Scheduled Change",width:!0===at?"450px":"200px",sortable:!1,filterable:!1},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[Ze,et,tt,$e,Xe,at]),ct=i.a.useMemo((function(){var e=je.getIn([ce,"network_name"]);if(null!=e)return{network_name:e,scheduled_date:pe.getIn([n,"prices",ce,"next_price_change","scheduled_date"])}}),[je,n,pe,ce]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:y}),Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Rates"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!1===K.isEmpty()&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:Fe,children:"Save Rates"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:g,style:{height:"400px"},skip:B.skip,take:B.take,sort:B.sort,filter:B.filter,data:nt,columns:it,total:ye.get("totalRecords"),onDataStateChange:we})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Oe,children:"Back"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ke,disabled:!0===T,children:!0===T?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Ee,children:"Clear Filters and Sorting"})]})]}),null!=ct&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:Ne,children:["Are you sure you want to cancel the changes scheduled on"," ",Object(Ka.jsx)("strong",{children:Object(Ka.jsx)(Nd,{utc:ct.scheduled_date})})," ","for ",Object(Ka.jsx)("strong",{children:ct.network_name}),"?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:Re,children:"Delete"}),Object(Ka.jsx)(k.a,{onClick:Ne,children:"Cancel"})]})]}),!0===X&&Object(Ka.jsx)(df,{isLoading:j,onSubmit:Ue,prices:K,currencyFormat:Le,onCancel:Ie}),null!=te&&Object(Ka.jsx)(of,{supplierID:t,connectionID:n,currencyFormat:Le,info:te,onClose:De})]})}var pf=i.a.memo(hf),gf=n(210),Of=n.n(gf),vf={EXACT:{id:"EXACT",name:"Exact"},CONTAINS:{id:"CONTAINS",name:"Contains"},STARTS_WITH:{id:"STARTS_WITH",name:"Starts With"},ENDS_WITH:{id:"ENDS_WITH",name:"Ends With"}},xf={CSV:{id:"CSV",name:"CSV"},EXCEL:{id:"EXCEL",name:"Excel"}},Cf={CELL:{id:"CELL",name:"Cell"},COLUMN:{id:"COLUMN",name:"Column"}},_f={SINGLE:{id:"SINGLE",name:"Single Column"},MULTIPLE:{id:"MULTIPLE",name:"Separate Columns"}},yf={COMMA:{id:",",name:"Comma (i.e ',')"},SEMICOLON:{id:";",name:"Semicolon (i.e ';')"},SPACE:{id:" ",name:"Space (i.e ' ')"},TAB:{id:"\t",name:"Tab (i.e '\t')"},PIPE:{id:"|",name:"Pipe (i.e '|')"}},Sf={COMMA:{id:",",name:"Comma (i.e ',')"},PERIOD:{id:".",name:"Period (i.e '.')"}},kf={no:{id:"no",name:"Continue"},yes:{id:"yes",name:"Stop"}},wf={no:{id:"no",name:"Partial"},yes:{id:"yes",name:"Full"}},Ef={PLUS:{id:"+",name:"Plus (i.e '+')"},COMMA:{id:",",name:"Comma (i.e ',')"},SPACE:{id:" ",name:"Space (i.e ' ')"},PIPE:{id:"|",name:"Pipe (i.e '|')"}},If=/(^$|^\d+$)/,Df=/(^$|^\d+,\d+$)/,Tf=/(^$|^[a-zA-Z]+$)/,Mf=/(^$|^[a-zA-Z]+[0-9]+)$/,Nf=/(^[a-zA-Z]+)([0-9]+)$/,Rf=[".csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];function Af(e,t){return t.map((function(t){var n=t.type,a=t.value;if(null!=a&&""!==a){var i=e===xf.CSV.id,c=!0===i?Mf:Df,r=!0===i?Tf:If;if(n===Cf.COLUMN.id){if(!1===r.test(a))return;return Of.a[i?"excelColToInt":"intToExcelCol"](a)}if(n===Cf.CELL.id){if(!1===c.test(a))return;var s=null,l=null;if(!0===i){var o=a.match(Nf);if(null==o)return;s=o[2],l=Of.a.excelColToInt(o[1])}else{var u=a.split(",");s=u[1],l=Of.a.intToExcelCol(u[0])}return[l,s].join(!0===i?",":"")}}}))}var Pf=function(e){var t=e.currency,n=e.isAuto,a=void 0===n||n,c=e.isFormDirty,r=void 0!==c&&c,s=e.onSubmit,u=e.isCurrencyParsingEnabled,d=e.isActivationDateParsingEnabled,m=e.onFormDirtyChange,b=e.onCurrencyParsingEnabledChange,j=e.onActivationDateParsingEnabledChange,f=e.file,h=e.onFileChange,p=e.subject,g=e.onSubjectChange,O=e.onNextStep,v=e.filename,C=e.onFilenameChange,y=e.senderEmail,w=e.onSenderEmailChange,E=e.mergePolicy,I=e.onMergePolicyChange,D=e.errorPolicy,T=e.onErrorPolicyChange,M=e.receiverEmail,N=e.onReceiverEmailChange,R=e.subjectOperator,A=e.onSubjectOperatorChange,P=e.filenameOperator,L=e.onFilenameOperatorChange,F=e.notificationEmail,U=e.onNotificationEmailChange,q=e.format,G=e.onFormatChange,H=e.csvDelimiter,B=e.onCSVDelimiterChange,V=e.dataRow,z=e.onDataRowChange,W=e.newRateColumn,K=e.onNewRateColumnChange,J=e.globalDefaultRateCell,Y=e.onGlobalDefaultRateCellChange,Q=e.mccColumn,X=e.onMCCColumnChange,$=e.mncColumn,Z=e.onMNCColumnChange,ee=e.mccmncFormat,te=e.onMCCMNCFormatChange,ne=e.mccmncDelimiter,ae=e.onMCCMNCDelimiterChange,ie=e.decimalSeparator,ce=e.onDecimalSeparatorChange,re=e.timezone,se=e.onTimezoneChange,le=e.timeformat,oe=e.onTimeformatChange,ue=e.sheetActivationDateCell,de=e.onSheetActivationDateCellChange,me=e.networkActivationDateColumn,be=e.onNetworkActivationDateColumnChange,je=e.currencyFormat,fe=e.onCurrencyFormatChange,he=e.currencyLocation,pe=e.onCurrencyLocationChange,ge=Object(l.c)(),Oe=i.a.useState(0),ve=Object(o.a)(Oe,2),xe=ve[0],Ce=ve[1],_e=i.a.useState(),ye=Object(o.a)(_e,2),Se=ye[0],ke=ye[1],we=i.a.useState(),Ee=Object(o.a)(we,2),Ie=Ee[0],De=Ee[1],Te=i.a.useState(null),Me=Object(o.a)(Te,2),Ne=Me[0],Re=Me[1],Ae=i.a.useState(!1),Pe=Object(o.a)(Ae,2),Le=Pe[0],Fe=Pe[1],Ue=i.a.useState(null),qe=Object(o.a)(Ue,2),Ge=qe[0],He=qe[1],Be=3===xe,Ve=0===xe;i.a.useEffect((function(){return function(){return window.clearTimeout(Ge)}}),[Ge]);var ze=Object(l.d)((function(e){return e.timezone.reduce((function(e,t){return e.push({id:t,name:t}),e}),[])})),We=i.a.useMemo((function(){return null!=Se&&null!=Ie}),[Se,Ie]),Ke=i.a.useMemo((function(){return Q}),[Q]),Je=i.a.useMemo((function(){return null!=q&&q.id===xf.CSV.id}),[q]),Ye=i.a.useMemo((function(){return!0===Je?"<COL>,<ROW>":"<COL><ROW>"}),[Je]),Qe=i.a.useMemo((function(){return null!=ee&&ee.id===_f.SINGLE.id}),[ee]),Xe=i.a.useMemo((function(){return!0===Je?If:Tf}),[Je]),$e=i.a.useMemo((function(){return!0===Je?Df:Mf}),[Je]),Ze=i.a.useState([]),et=Object(o.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState([]),it=Object(o.a)(at,2),ct=it[0],rt=it[1],st=i.a.useState([]),lt=Object(o.a)(st,2),ot=lt[0],ut=lt[1],dt=i.a.useState([]),mt=Object(o.a)(dt,2),bt=mt[0],jt=mt[1],ft=i.a.useState([]),ht=Object(o.a)(ft,2),pt=ht[0],gt=ht[1],Ot=i.a.useState([]),vt=Object(o.a)(Ot,2),xt=vt[0],Ct=vt[1],_t=i.a.useState([]),yt=Object(o.a)(_t,2),St=yt[0],kt=yt[1],wt=i.a.useState([]),Et=Object(o.a)(wt,2),It=Et[0],Dt=Et[1],Tt=i.a.useState([]),Mt=Object(o.a)(Tt,2),Nt=Mt[0],Rt=Mt[1],At=i.a.useState([]),Pt=Object(o.a)(At,2),Lt=Pt[0],Ft=Pt[1],Ut=i.a.useState([]),qt=Object(o.a)(Ut,2),Gt=qt[0],Ht=qt[1],Bt=i.a.useState([]),Vt=Object(o.a)(Bt,2),zt=Vt[0],Wt=Vt[1],Kt=i.a.useState([]),Jt=Object(o.a)(Kt,2),Yt=Jt[0],Qt=Jt[1],Xt=i.a.useState([]),$t=Object(o.a)(Xt,2),Zt=$t[0],en=$t[1],tn=i.a.useState([]),nn=Object(o.a)(tn,2),an=nn[0],cn=nn[1],rn=i.a.useState([]),sn=Object(o.a)(rn,2),ln=sn[0],on=sn[1],un=i.a.useState([]),dn=Object(o.a)(un,2),mn=dn[0],bn=dn[1],jn=i.a.useState([]),fn=Object(o.a)(jn,2),hn=fn[0],pn=fn[1],gn=i.a.useState([]),On=Object(o.a)(gn,2),vn=On[0],xn=On[1],Cn=i.a.useState([]),_n=Object(o.a)(Cn,2),yn=_n[0],Sn=_n[1],kn=i.a.useState([]),wn=Object(o.a)(kn,2),En=wn[0],In=wn[1],Dn=i.a.useState([]),Tn=Object(o.a)(Dn,2),Mn=Tn[0],Nn=Tn[1],Rn=i.a.useState([]),An=Object(o.a)(Rn,2),Pn=An[0],Ln=An[1],Fn=i.a.useState([]),Un=Object(o.a)(Fn,2),qn=Un[0],Gn=Un[1],Hn=i.a.useState([]),Bn=Object(o.a)(Hn,2),Vn=Bn[0],zn=Bn[1],Wn=i.a.useState([]),Kn=Object(o.a)(Wn,2),Jn=Kn[0],Yn=Kn[1],Qn=i.a.useState([]),Xn=Object(o.a)(Qn,2),$n=Xn[0],Zn=Xn[1],ea=i.a.useMemo((function(){return{validFileTypes:Rf,required:!1===a}}),[a]),ta=i.a.useMemo((function(){return!1===a?{}:{required:!0,isEmail:!0}}),[a]),na=i.a.useMemo((function(){return!1===a?{}:{required:!0,isEmail:!0}}),[a]),aa=i.a.useMemo((function(){return{required:a}}),[a]),ia=i.a.useMemo((function(){return{required:a}}),[a]),ca=i.a.useMemo((function(){return{required:a}}),[a]),ra=i.a.useMemo((function(){return{required:a}}),[a]),sa=i.a.useMemo((function(){return{required:!0,isEmail:!0}}),[]),la=i.a.useMemo((function(){return{required:!0}}),[]),oa=i.a.useMemo((function(){return{required:!0}}),[]),ua=i.a.useMemo((function(){return{required:!0}}),[]),da=i.a.useMemo((function(){return{required:!0===Je}}),[Je]),ma=i.a.useMemo((function(){return{required:!0}}),[]),ba=i.a.useMemo((function(){return{required:!0,isNumeric:!0}}),[]),ja=i.a.useMemo((function(){return{required:!0,pattern:Xe}}),[Xe]),fa=i.a.useMemo((function(){return{pattern:$e}}),[$e]),ha=i.a.useMemo((function(){return{required:!0}}),[]),pa=i.a.useMemo((function(){return{}}),[]),ga=i.a.useMemo((function(){return{required:!1===Qe,pattern:Xe}}),[Qe,Xe]),Oa=i.a.useMemo((function(){return{required:!1===Qe,pattern:Xe}}),[Qe,Xe]),va=i.a.useMemo((function(){return{required:!0===Qe,pattern:Xe}}),[Qe,Xe]),xa=i.a.useMemo((function(){return{required:!0===d}}),[d]),Ca=i.a.useMemo((function(){return{required:!0===d}}),[d]),_a=i.a.useMemo((function(){return{required:!1,pattern:$e}}),[$e]),ya=i.a.useMemo((function(){return{required:!1,pattern:Xe}}),[Xe]),Sa=i.a.useMemo((function(){return{required:!0===u}}),[u]),ka=i.a.useMemo((function(){return{required:!0===u,pattern:null!=je&&je.id===Cf.CELL.id?$e:Xe}}),[$e,Xe,je,u]),wa=i.a.useCallback((function(e){ge(Ui(e))}),[ge]),Ea=bm(m),Ia=bm(h),Da=bm(g),Ta=bm(z),Ma=bm(C),Na=bm(se),Ra=bm(X),Aa=bm(Z),Pa=bm(w),La=bm(I),Fa=bm(T),Ua=bm(B),qa=bm(ce),Ga=bm(N),Ha=bm(K),Ba=bm(ae),Va=bm(A),za=bm(pe),Wa=bm(L),Ja=bm(U),Ya=bm(Y),Qa=bm(de),Xa=bm(be),$a=i.a.useCallback((function(e){return Fe(!0),ge((t={timeformat:e},function(){return Fi.get("/validations/time-format",{params:t}).then((function(e){return e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){!1!==e.valid?Re(Object(Ka.jsxs)("span",{children:["Current UTC Date: ",Object(Ka.jsx)("strong",{children:e.value})]})):Ln(["Invalid time format"])})).catch((function(e){wa({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return Fe(!1)}));var t}),[ge,wa]),Za=i.a.useCallback((function(e){"function"===typeof oe&&(oe(e),Re(null),""!==e&&(window.clearTimeout(Ge),He(window.setTimeout((function(){$a(e)}),2e3))))}),[oe,$a,Ge]),ei=i.a.useCallback((function(e){"function"===typeof te&&(te(e),Ba(null),Ra(Ke),Aa(Ke))}),[Ke,Ra,Aa,Ba,te]),ti=i.a.useCallback((function(e){Ra(e),Aa(e)}),[Ra,Aa]),ni=i.a.useCallback((function(e){if("function"===typeof G&&(G(e),Ua(null),null!=e)){var t=Af(e.id,[{type:Cf.COLUMN.id,value:Q},{type:Cf.COLUMN.id,value:$},{type:Cf.COLUMN.id,value:W},{type:null!=je&&je.id,value:he},{type:Cf.CELL.id,value:J},{type:Cf.CELL.id,value:ue},{type:Cf.COLUMN.id,value:me}]),n=Object(o.a)(t,7),a=n[0],i=void 0===a?"":a,c=n[1],r=void 0===c?"":c,s=n[2],l=void 0===s?"":s,u=n[3],d=void 0===u?"":u,m=n[4],b=void 0===m?"":m,j=n[5],f=void 0===j?"":j,h=n[6],p=void 0===h?"":h;Ra(i),Aa(r),Ha(l),za(d),Ya(b),Qa(f),Xa(p)}}),[Ua,je,G,W,Ha,J,Ya,Q,Ra,$,Aa,me,Xa,ue,Qa,he,za]),ai=i.a.useCallback((function(e){"function"===typeof fe&&(fe(e),za(""))}),[fe,za]),ii=i.a.useCallback((function(){"function"===typeof j&&(Na(null),Za(""),Qa(""),Xa(""),j(!d))}),[Na,Za,d,Qa,Xa,j]),ci=i.a.useCallback((function(){"function"===typeof b&&(ai(null),b(!u))}),[ai,u,b]),ri=i.a.useMemo((function(){return[vf,xf,Cf,kf,wf,yf,Sf,_f,Ef].map((function(e){return Object.keys(e).map((function(t){return e[t]}))}))}),[]),si=Object(o.a)(ri,9),li=si[0],oi=si[1],ui=si[2],di=si[3],mi=si[4],bi=si[5],ji=si[6],fi=si[7],hi=si[8],pi=Nm(i.a.useMemo((function(){return[{label:"Rate Sheet File",value:f,setErrors:nt,validations:ea},{label:"Subject",value:p,setErrors:rt,validations:aa},{label:"Filename",value:v,setErrors:ut,validations:ca},{label:"Sender E-mail",value:y,setErrors:Ct,validations:na},{label:"Merge Policy",value:E,setErrors:jt,validations:la},{label:"Error Policy",value:D,setErrors:gt,validations:oa},{label:"Receiver E-mail",value:M,setErrors:kt,validations:ta},{label:"Subject Operator",value:R,setErrors:Dt,validations:ia},{label:"Filename Operator",value:P,setErrors:Rt,validations:ra},{label:"Notification E-mail",value:F,setErrors:Ft,validations:sa},{label:"Format",value:q,setErrors:Ht,validations:ua},{label:"CSV Delimiter",value:H,setErrors:Wt,validations:da}]}),[f,nt,ea,p,rt,aa,v,ut,ca,y,Ct,na,E,jt,la,D,gt,oa,M,kt,ta,R,Dt,ia,P,Rt,ra,F,Ft,sa,q,Ht,ua,H,Wt,da])),gi=Nm(i.a.useMemo((function(){return[{label:"Data Row",value:V,setErrors:Qt,validations:ba},{label:"New Rate Column",value:W,setErrors:en,validations:ja},{label:"Global Default Rate Cell",value:J,setErrors:on,validations:fa},{label:"MCC Column",value:Q,setErrors:bn,validations:ga},{label:"MNC Column",value:$,setErrors:pn,validations:Oa},{label:"MCCMNC Column",value:Ke,setErrors:xn,validations:va},{label:"MCCMNC Format",value:ee,setErrors:Sn,validations:ha},{label:"MCCMNC Delimiter",value:ne,setErrors:In,validations:pa},{label:"Decimal Separator",value:ie,setErrors:cn,validations:ma}]}),[V,Qt,ba,W,en,ja,J,on,fa,Q,bn,ga,$,pn,Oa,Ke,xn,va,ee,Sn,ha,ne,In,pa,ie,cn,ma])),Oi=Nm(i.a.useMemo((function(){return[{label:"Timezone",value:re,setErrors:Nn,validations:xa},{label:"Timeformat",value:le,setErrors:Ln,validations:Ca},{label:"Sheet Activation Date Cell",value:ue,setErrors:Gn,validations:_a},{label:"Network Activation Date Column",value:me,setErrors:zn,validations:ya}]}),[re,Nn,xa,le,Ln,Ca,ue,Gn,_a,me,zn,ya])),vi=Nm(i.a.useMemo((function(){return[{label:"Currency Format",value:je,setErrors:Yn,validations:Sa},{label:"Currency Location",value:he,setErrors:Zn,validations:ka}]}),[je,Yn,Sa,he,Zn,ka])),xi=i.a.useCallback((function(){return"function"!==typeof O||!0===O([pi,gi,Oi,vi][xe]())}),[xe,O,gi,pi,vi,Oi]),Ci=i.a.useCallback((function(){"function"===typeof s&&s([].concat(Object(x.a)(pi()),Object(x.a)(gi()),Object(x.a)(Oi()),Object(x.a)(vi())))}),[s,gi,pi,vi,Oi]),_i=i.a.useCallback((function(){ke(null),De(null)}),[]),yi=i.a.useCallback((function(){Ce(xe-1)}),[xe]),Si=i.a.useCallback((function(){!0===xi()&&Ce(xe+1)}),[xe,xi]),ki=i.a.useCallback((function(){ke("Timeformat"),De(Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:["Configuration used to indicate the format of activation dates (for the examples the following date was used:"," ",Object(Ka.jsx)("strong",{children:"Saturday 3rd July 2021 09:05:02:123)"}),"."]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)("table",{children:Object(Ka.jsxs)("tbody",{children:[Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"y"})}),Object(Ka.jsx)("td",{children:"Year"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"2021"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"yy"})}),Object(Ka.jsx)("td",{children:"Year"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"21"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"M"})}),Object(Ka.jsx)("td",{children:"Month"}),Object(Ka.jsx)("td",{children:"7"})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"MM"})}),Object(Ka.jsx)("td",{children:"Month"}),Object(Ka.jsx)("td",{children:"07"})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"MMM"})}),Object(Ka.jsx)("td",{children:"Month"}),Object(Ka.jsx)("td",{children:"Jul"})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"MMMM"})}),Object(Ka.jsx)("td",{children:"Month"}),Object(Ka.jsx)("td",{children:"July"})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"d"})}),Object(Ka.jsx)("td",{children:"Day"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"3"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"dd"})}),Object(Ka.jsx)("td",{children:"Day"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"03"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"E"})}),Object(Ka.jsx)("td",{children:"Day name"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"Sat"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"EEEE"})}),Object(Ka.jsx)("td",{children:"Day name"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"Saturday"})})]})]})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)("table",{children:Object(Ka.jsxs)("tbody",{children:[Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"a"})}),Object(Ka.jsx)("td",{children:"Am/pm marker"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"AM"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"H"})}),Object(Ka.jsx)("td",{children:"Hour (0-23)"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"9"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"HH"})}),Object(Ka.jsx)("td",{children:"Hour (0-23)"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"09"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"K"})}),Object(Ka.jsx)("td",{children:"Hour in am/pm (0-11)"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"9"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"KK"})}),Object(Ka.jsx)("td",{children:"Hour in am/pm (0-11)"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"09"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"m"})}),Object(Ka.jsx)("td",{children:"Minute"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"5"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"mm"})}),Object(Ka.jsx)("td",{children:"Minute"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"05"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"s"})}),Object(Ka.jsx)("td",{children:"Second"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"2"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"ss"})}),Object(Ka.jsx)("td",{children:"Second"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"02"})})]}),Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"S"})}),Object(Ka.jsx)("td",{children:"Millisecond"}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)("code",{children:"123"})})]})]})})})]})}))}),[]),wi=i.a.useCallback((function(){ke("Merge Policy"),De(Object(Ka.jsxs)(Ka.Fragment,{children:["Configuration used to indicate how to merge the new prices with the prices that already exists in the system.",Object(Ka.jsxs)("ul",{children:[Object(Ka.jsx)("li",{children:"Full - Clear any configured prices & replace them with the new ones"}),Object(Ka.jsx)("li",{children:"Partial - Only update the prices of the networks listed."})]})]}))}),[]),Ei=i.a.useCallback((function(){ke("Error Policy"),De(Object(Ka.jsxs)(Ka.Fragment,{children:["Configuration used to indicate how the system should react when an error occurrs while parsing the Rate Sheets.",Object(Ka.jsxs)("ul",{children:[Object(Ka.jsx)("li",{children:"Stop - The system will stop the parsing process."}),Object(Ka.jsx)("li",{children:"Continue - The system will log the error and continue."})]})]}))}),[]),Ii=i.a.useCallback((function(){ke("MCCMNC Format"),De(Object(Ka.jsxs)(Ka.Fragment,{children:["Configuration used to indicate how MCCMNCs are stored.",Object(Ka.jsxs)("ul",{children:[Object(Ka.jsx)("li",{children:"Single Column - Should be chosen for when MCCMNCs are stored in the same column. When this option is chosen, you will also be given the option to specify a delimiter."}),Object(Ka.jsx)("li",{children:"Multiple Column - Should be chosen for when MCCMNCs are stored in different columns."})]})]}))}),[]),Di=i.a.useCallback((function(){ke("Currency Format"),De(Object(Ka.jsxs)(Ka.Fragment,{children:["Configuration used to indicate how the currency is stored.",Object(Ka.jsxs)("ul",{children:[Object(Ka.jsx)("li",{children:"Cell"}),Object(Ka.jsx)("li",{children:"Column"})]})]}))}),[]),Ti=i.a.useMemo((function(){switch(xe){case 0:return"Basic Details";case 1:return"Rate Parsing Rules";case 2:return"Activation Date Parsing Rules";case 3:return"Currency Parsing Rules";default:return null}}),[xe]),Mi=i.a.useMemo((function(){return Object(Ka.jsxs)(Ka.Fragment,{children:[!0===a&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Receiver E-mail",value:M,errors:St,onChange:Ga,onDirtyChange:Ea,validations:ta,onErrorsChange:kt})},"receiver-email"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Sender E-mail",value:y,errors:xt,onChange:Pa,onDirtyChange:Ea,validations:na,onErrorsChange:Ct})},"sender-email"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:8,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Subject",value:p,errors:ct,onChange:Da,validations:aa,onDirtyChange:Ea,onErrorsChange:rt})},"subject"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:4,children:Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,data:li,label:"Subject Operator",value:R,errors:It,onDirtyChange:Ea,onChange:Va,validations:ia,onErrorsChange:Dt})},"subject-operator"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:8,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Filename",value:v,errors:ot,onChange:Ma,onDirtyChange:Ea,validations:ca,onErrorsChange:ut})},"filename"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:4,children:Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,data:li,label:"Filename Operator",value:P,errors:Nt,onDirtyChange:Ea,onChange:Wa,validations:ra,onErrorsChange:Rt})},"filename-operator")]}),!1===a&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"File",label:"Choose Rate Sheet File",value:f,errors:tt,onChange:Ia,accept:Rf,validations:ea,onErrorsChange:nt,onDirtyChange:Ea})},"file"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Notification E-mail",value:F,errors:Lt,onDirtyChange:Ea,onChange:Ja,validations:sa,onErrorsChange:Ft})},"notification-email"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",disabled:!0,label:"Currency",value:t})},"currency"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",children:[Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,label:"Merge Policy",value:E,data:mi,errors:bt,onChange:La,onDirtyChange:Ea,validations:la,onErrorsChange:jt}),Object(Ka.jsx)(k.a,{icon:"info",look:"flat",onClick:wi})]})},"merge-policy"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",children:[Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,label:"Error Policy",value:D,data:di,errors:pt,onChange:Fa,onDirtyChange:Ea,validations:oa,onErrorsChange:gt}),Object(Ka.jsx)(k.a,{icon:"info",look:"flat",onClick:Ei})]})},"error-policy"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,label:"Format",value:q,errors:Gt,data:oi,onChange:ni,validations:ua,onErrorsChange:Ht,onDirtyChange:Ea})},"format"),!0===Je&&Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",allowCustom:!0,clearButton:!1,label:"CSV Delimiter",value:H,data:bi,errors:zt,onChange:Ua,onDirtyChange:Ea,validations:da,onErrorsChange:Wt})},"csv-delimiter")]})}),[a,t,f,tt,Ia,ea,nt,D,pt,di,oa,v,ot,P,Nt,ra,ca,E,bt,mi,la,F,Lt,sa,Fa,Ma,Wa,Ea,La,Ja,Ga,Pa,Da,Va,li,M,St,ta,y,xt,na,Ei,wi,p,ct,R,It,ia,aa,H,zt,bi,da,oi,q,Gt,ua,Je,Ua,ni]),Ni=i.a.useMemo((function(){return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Data Row",value:V,errors:Yt,onChange:Ta,validations:ba,onDirtyChange:Ea,onErrorsChange:Qt})},"data-row"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"New Rate Column",value:W,errors:Zt,onChange:Ha,onDirtyChange:Ea,validations:ja,onErrorsChange:en})},"new-rate-column"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Global Default Rate Cell",placeholder:Ye,value:J,errors:ln,onDirtyChange:Ea,onChange:Ya,validations:fa,onErrorsChange:on})},"global-default-rate-column"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",children:[Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,label:"MCCMNC Format",value:ee,data:fi,errors:yn,onChange:ei,onDirtyChange:Ea,validations:ha,onErrorsChange:Sn}),Object(Ka.jsx)(k.a,{icon:"info",look:"flat",onClick:Ii})]})},"mccmnc-format"),!0===Qe?Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,allowCustom:!0,label:"MCCMNC Delimiter",value:ne,data:hi,errors:En,onDirtyChange:Ea,onChange:Ba,validations:pa,onErrorsChange:In})},"mccmnc-delimiter"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"MCCMNC Column",value:Ke,errors:vn,onChange:ti,onDirtyChange:Ea,validations:va,onErrorsChange:xn})},"mccmnc-column")]}):null!=ee&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"MCC Column",value:Q,errors:mn,onChange:Ra,onDirtyChange:Ea,validations:ga,onErrorsChange:bn})},"mcc-column"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"MNC Column",value:$,errors:hn,onChange:Aa,onDirtyChange:Ea,validations:Oa,onErrorsChange:pn})},"mnc-column")]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,label:"Decimal Separator",value:ie,data:ji,errors:an,onChange:qa,onDirtyChange:Ea,validations:ma,onErrorsChange:cn})},"decimal-separator")]})}),[V,Yt,ba,J,ln,fa,Ya,W,Zt,Ye,ja,Ta,Ea,Ha,Qe,Q,mn,ga,Ke,vn,va,ne,En,hi,pa,ee,yn,fi,ha,$,hn,Oa,Ra,ti,Ba,ei,Aa,Ii,ie,ji,an,qa,ma,cn]),Ri=i.a.useMemo((function(){return Object(Ka.jsx)(Ka.Fragment,{children:!1===d?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(_.a,{display:"flex",justify:"center",flexDirection:"column",children:[Object(Ka.jsx)("p",{align:"center",children:"By default rates will be processed immediately. However, you can configure the import process to parse activation dates from within the specified rate sheet."}),Object(Ka.jsx)(k.a,{onClick:ii,"aria-label":"Enable Activation Date Parsing",children:"Opt In"})]})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",label:"Timezone",value:re,errors:Mn,data:ze,onChange:Na,onDirtyChange:Ea,validations:xa,onErrorsChange:Nn})},"timezone"),Object(Ka.jsxs)(S.a,{item:!0,xs:12,lg:6,children:[Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",children:[Object(Ka.jsx)(fm,{variant:"Input",label:"Timeformat",value:le,errors:Pn,onChange:Za,onDirtyChange:Ea,validations:Ca,onErrorsChange:Ln}),!0===Le&&Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin",title:"Waiting for time format validation","aria-label":"Waiting for Time Format validation"}),Object(Ka.jsx)(k.a,{icon:"info",look:"flat",onClick:ki})]}),null!=Ne&&Object(Ka.jsx)(_.a,{mt:1,children:Ne})]},"timeformat"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Sheet Activation Date Cell",placeholder:Ye,value:ue,onDirtyChange:Ea,errors:qn,onChange:Qa,validations:_a,onErrorsChange:Gn})},"sheet-activation-date-cell"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Network Activation Date Column",onDirtyChange:Ea,value:me,errors:Vn,onChange:Xa,validations:ya,onErrorsChange:zn})},"network-activation-date-cell"),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{style:{width:"100%"},onClick:ii,"aria-label":"Disable Activation Date Parsing",children:"Opt Out"})})]})})}),[Ye,Ne,Le,ze,d,me,Vn,ya,Ea,Xa,Qa,Za,Na,ue,qn,_a,ki,le,Pn,Ca,re,Mn,xa,ii]),Ai=i.a.useMemo((function(){return Object(Ka.jsx)(Ka.Fragment,{children:!1===u?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(_.a,{display:"flex",justify:"center",flexDirection:"column",children:[Object(Ka.jsx)("p",{align:"center",children:"You can configure the import process to parse the currency from within the rate sheet to validate it against the supplier connection's currency."}),Object(Ka.jsx)(k.a,{onClick:ci,"aria-label":"Enable Currency Parsing",children:"Opt In"})]})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"baseline",children:[Object(Ka.jsx)(fm,{variant:"Combobox",clearButton:!1,label:"Currency Format",value:je,data:ui,errors:Jn,onDirtyChange:Ea,onChange:ai,validations:Sa,onErrorsChange:Yn}),Object(Ka.jsx)(k.a,{icon:"info",look:"flat",onClick:Di})]})},"currency-format"),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Currency Location",placeholder:null!=je&&je.id===Cf.CELL.id?Ye:null,value:he,errors:$n,onDirtyChange:Ea,onChange:za,validations:ka,onErrorsChange:Zn})},"currency-location"),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{style:{width:"100%"},onClick:ci,"aria-label":"Disable Currency Parsing",children:"Opt Out"})})]})})}),[je,Jn,Sa,he,$n,ka,u,ai,za,Ea,Di,ci,ui,Ye]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:r}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("hr",{}),Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:yi,icon:"arrow-chevron-left",title:"Previous Import Settings Page Step","aria-label":"Previous Import Settings Page Step",disabled:Ve}),Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{className:"SectionHeader",children:Object(Ka.jsx)("center",{children:Ti})}),Object(Ka.jsxs)("center",{children:["Step ",xe+1," of 4"]})]}),Object(Ka.jsx)(k.a,{primary:!0,onClick:Si,icon:"arrow-chevron-right",title:"Next Import Settings Page Step","aria-label":"Next Import Settings Page Step",disabled:Be})]}),Object(Ka.jsx)("hr",{})]}),0===xe?Mi:1===xe?Ni:2===xe?Ri:Ai,Be&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("hr",{})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:Ci,style:{width:"100%"},children:"Submit"})})]})})]}),!0===We&&Object(Ka.jsxs)(Ub.a,{title:Se,onClose:_i,width:"500px",children:[Ie,Object(Ka.jsx)(Ub.b,{children:Object(Ka.jsx)(k.a,{onClick:_i,children:"Close"})})]})]})};function Lf(e,t){var n=t[e];return null==n?null:{id:n.id,name:n.name}}function Ff(e){return""===e?null:e}function Uf(e){return null==e?"":e}function qf(e){return null==e?null:null!=e.id?e.id:e.name}var Gf=function(e){var t=e.currency,n=e.connectionID,a=e.onClose,c=Object(l.c)(),r=bm(a),s=i.a.useState(!0),u=Object(o.a)(s,2),d=u[0],m=u[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useCallback((function(e){c(Ui(e))}),[c]);i.a.useEffect((function(){return m(!0),c(zc(n)).catch((function(e){p({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){m(!1)})),function(){return c(Pc(n))}}),[c,p,n]);var g=Object(l.d)((function(e){return e.supplierConnection.getIn([n,"import_settings"])})),O=i.a.useState(!1),v=Object(o.a)(O,2),x=v[0],C=v[1],_=i.a.useState(!1),y=Object(o.a)(_,2),S=y[0],k=y[1],w=i.a.useState(""),E=Object(o.a)(w,2),I=E[0],D=E[1],T=i.a.useState(""),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(""),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(""),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useState(),$=Object(o.a)(X,2),Z=$[0],ee=$[1],te=i.a.useState(),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=i.a.useState(""),re=Object(o.a)(ce,2),se=re[0],le=re[1],oe=i.a.useState(),ue=Object(o.a)(oe,2),de=ue[0],me=ue[1],be=i.a.useState(),je=Object(o.a)(be,2),fe=je[0],he=je[1],pe=i.a.useState(""),ge=Object(o.a)(pe,2),Oe=ge[0],ve=ge[1],xe=i.a.useState(""),Ce=Object(o.a)(xe,2),_e=Ce[0],ye=Ce[1],Se=i.a.useState(""),ke=Object(o.a)(Se,2),we=ke[0],Ee=ke[1],Ie=i.a.useState(),De=Object(o.a)(Ie,2),Te=De[0],Me=De[1],Ne=i.a.useState(""),Re=Object(o.a)(Ne,2),Ae=Re[0],Pe=Re[1],Le=i.a.useState(""),Fe=Object(o.a)(Le,2),Ue=Fe[0],qe=Fe[1],Ge=i.a.useState(),He=Object(o.a)(Ge,2),Be=He[0],Ve=He[1],ze=i.a.useState(),We=Object(o.a)(ze,2),Ke=We[0],Je=We[1],Ye=i.a.useState(null),Qe=Object(o.a)(Ye,2),Xe=Qe[0],$e=Qe[1],Ze=i.a.useState(""),et=Object(o.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(""),it=Object(o.a)(at,2),ct=it[0],rt=it[1],st=i.a.useState(""),lt=Object(o.a)(st,2),ot=lt[0],ut=lt[1],dt=i.a.useState(),mt=Object(o.a)(dt,2),bt=mt[0],jt=mt[1],ft=i.a.useState(""),ht=Object(o.a)(ft,2),pt=ht[0],gt=ht[1],Ot=i.a.useCallback((function(e){return!(e.length>0)||(p({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}),!1)}),[p]),vt=i.a.useCallback((function(){D(""),ve(""),R(""),me(null),Pe(""),qe(""),nt(""),$e(null),W(""),he(""),Me(null),F(null),H(null),Q(""),ye(""),Ve(null),Je(""),jt(null),gt(""),ee(null),le(""),ie(null),Ee(""),rt(""),k(!1),ut(""),C(!1)}),[]);i.a.useEffect((function(){if(null!=g){D(Uf(g.get("subject"))),R(Uf(g.get("filename"))),ve(Uf(g.get("data_location"))),nt(Uf(g.get("time_format"))),W(Uf(g.get("sender_email"))),Q(Uf(g.get("receiver_email"))),le(Uf(null==g.get("notification_email")?"":g.get("notification_email").first())),me(Lf(g.get("file_format"),xf)),Ve(Lf(g.get("mccmnc_format"),_f)),ee(Lf(g.get("subject_operator"),vf)),jt(Lf(g.get("currency_format"),Cf)),ie(Lf(g.get("filename_operator"),vf)),F(Lf(g.get("rate_replace_prices"),wf)),H(Lf(g.get("rate_fail_on_errors"),kf)),he({id:null,name:g.get("csv_delimiter")});var e=Object.keys(Sf).find((function(e){return Sf[e].id===g.get("decimal_separator")}));if(Me(null==Sf[e]?null:Sf[e]),Je({id:null,name:g.get("mccmnc_delimiter")}),null!=g.get("time_zone")&&$e({id:g.get("time_zone"),name:g.get("time_zone")}),k(!0===["currency_format","currency_location"].some((function(e){return null!=g.get(e)}))),C(!0===["time_zone","time_format","sheet_activation_date_location","network_activation_date_location"].some((function(e){return null!=g.get(e)}))),g.get("file_format")===xf.CSV.id)Pe(g.get("mcc_location")),qe(g.get("mnc_location")),ye(g.get("new_rate_location")),gt(Uf(g.get("currency_location"))),Ee(Uf(g.get("global_default_rate_location"))),rt(Uf(g.get("sheet_activation_date_location"))),ut(Uf(g.get("network_activation_date_location")));else{var t=Af(xf.EXCEL.id,[{type:Cf.COLUMN.id,value:g.get("mcc_location")},{type:Cf.COLUMN.id,value:g.get("mnc_location")},{type:Cf.COLUMN.id,value:g.get("new_rate_location")},{type:g.get("currency_format"),value:g.get("currency_location")},{type:Cf.CELL.id,value:g.get("global_default_rate_location")},{type:Cf.CELL.id,value:g.get("sheet_activation_date_location")},{type:Cf.COLUMN.id,value:g.get("network_activation_date_location")}]),n=Object(o.a)(t,7),a=n[0],i=void 0===a?"":a,c=n[1],r=void 0===c?"":c,s=n[2],l=void 0===s?"":s,u=n[3],d=void 0===u?"":u,m=n[4],b=void 0===m?"":m,j=n[5],f=void 0===j?"":j,h=n[6],p=void 0===h?"":h;Pe(i),qe(r),ye(l),gt(d),Ee(b),rt(f),ut(p)}}else vt()}),[g,vt]);var xt=i.a.useCallback((function(e){if(e.length>0)p({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}});else{m(!0);var t={subject:I,filename:N,sender_email:z,receiver_email:Y,notification_email:[se],rate_fail_on_errors:qf(G),rate_replace_prices:qf(L),subject_operator:qf(Z),filename_operator:qf(ae),file_format:qf(de),csv_delimiter:qf(fe),data_location:Oe,new_rate_location:_e,global_default_rate_location:Ff(we),decimal_separator:qf(Te),mcc_location:Ae,mnc_location:Ue,mccmnc_format:qf(Be),mccmnc_delimiter:qf(Ke),time_zone:qf(Xe),time_format:Ff(tt),sheet_activation_date_location:Ff(ct),network_activation_date_location:Ff(ot),currency_format:qf(bt),currency_location:Ff(pt)};if(de.id===xf.EXCEL.id){var a=Af(xf.CSV.id,[{type:Cf.COLUMN.id,value:t.mcc_location},{type:Cf.COLUMN.id,value:t.mnc_location},{type:Cf.COLUMN.id,value:t.new_rate_location},{type:null!=bt&&bt.id,value:t.currency_location},{type:Cf.CELL.id,value:t.global_default_rate_location},{type:Cf.CELL.id,value:t.sheet_activation_date_location},{type:Cf.COLUMN.id,value:t.network_activation_date_location}]),i=Object(o.a)(a,7),s=i[0],l=i[1],u=i[2],d=i[3],b=i[4],j=i[5],f=i[6];t.mcc_location=s,t.mnc_location=l,t.new_rate_location=u,t.currency_location=d,t.global_default_rate_location=b,t.sheet_activation_date_location=j,t.network_activation_date_location=f}["mcc_location","mnc_location","data_location","new_rate_location","network_activation_date_location"].forEach((function(e){null!=t[e]&&(t[e]=Number(t[e]))})),c(function(e,t){return function(){return Rc.patch("/".concat(e,"/prices/import"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(n,t)).then((function(){r(),p({severity:"success",message:"Import Settings Successfully Updated"})})).catch((function(e){console.error(e),p({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return m(!1)}))}}),[r,c,p,n,I,N,z,Y,Z,ae,se,G,L,de,fe,Oe,_e,we,Te,Ae,Ue,Be,Ke,Xe,tt,ct,ot,bt,pt]);return!0===d?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(Pf,{onSubmit:xt,currency:t,onNextStep:Ot,isFormDirty:f,onFormDirtyChange:h,isCurrencyParsingEnabled:S,isActivationDateParsingEnabled:x,onCurrencyParsingEnabledChange:k,onActivationDateParsingEnabledChange:C,subject:I,onSubjectChange:D,filename:N,onFilenameChange:R,senderEmail:z,onSenderEmailChange:W,mergePolicy:L,onMergePolicyChange:F,errorPolicy:G,onErrorPolicyChange:H,receiverEmail:Y,onReceiverEmailChange:Q,subjectOperator:Z,onSubjectOperatorChange:ee,filenameOperator:ae,onFilenameOperatorChange:ie,notificationEmail:se,onNotificationEmailChange:le,format:de,onFormatChange:me,csvDelimiter:fe,onCSVDelimiterChange:he,dataRow:Oe,onDataRowChange:ve,newRateColumn:_e,onNewRateColumnChange:ye,globalDefaultRateCell:we,onGlobalDefaultRateCellChange:Ee,decimalSeparator:Te,onDecimalSeparatorChange:Me,mccColumn:Ae,onMCCColumnChange:Pe,mncColumn:Ue,onMNCColumnChange:qe,mccmncFormat:Be,onMCCMNCFormatChange:Ve,mccmncDelimiter:Ke,onMCCMNCDelimiterChange:Je,timezone:Xe,onTimezoneChange:$e,timeformat:tt,onTimeformatChange:nt,sheetActivationDateCell:ct,onSheetActivationDateCellChange:rt,networkActivationDateColumn:ot,onNetworkActivationDateColumnChange:ut,currencyFormat:bt,onCurrencyFormatChange:jt,currencyLocation:pt,onCurrencyLocationChange:gt})};function Hf(e,t){var n=t[e];return null==n?null:{id:n.id,name:n.name}}function Bf(e){return""===e?null:e}function Vf(e){return null==e?"":e}function zf(e){return null==e?null:null!=e.id?e.id:e.name}var Wf=function(e){var t=e.currency,n=e.connectionID,a=e.onClose,c=Object(l.c)(),r=bm(a),s=i.a.useState(!0),u=Object(o.a)(s,2),d=u[0],m=u[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useCallback((function(e){c(Ui(e))}),[c]);i.a.useEffect((function(){return m(!0),c(zc(n)).catch((function(e){p({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){m(!1)})),function(){return c(Pc(n))}}),[c,p,n]);var g=Object(l.d)((function(e){return e.supplierConnection.getIn([n,"import_settings"])})),O=i.a.useState(!1),v=Object(o.a)(O,2),x=v[0],C=v[1],_=i.a.useState(!1),y=Object(o.a)(_,2),S=y[0],k=y[1],w=i.a.useState(),E=Object(o.a)(w,2),I=E[0],D=E[1],T=i.a.useState(),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(""),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useState(""),$=Object(o.a)(X,2),Z=$[0],ee=$[1],te=i.a.useState(""),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=i.a.useState(""),re=Object(o.a)(ce,2),se=re[0],le=re[1],oe=i.a.useState(),ue=Object(o.a)(oe,2),de=ue[0],me=ue[1],be=i.a.useState(""),je=Object(o.a)(be,2),fe=je[0],he=je[1],pe=i.a.useState(""),ge=Object(o.a)(pe,2),Oe=ge[0],ve=ge[1],xe=i.a.useState(),Ce=Object(o.a)(xe,2),_e=Ce[0],ye=Ce[1],Se=i.a.useState(),ke=Object(o.a)(Se,2),we=ke[0],Ee=ke[1],Ie=i.a.useState(null),De=Object(o.a)(Ie,2),Te=De[0],Me=De[1],Ne=i.a.useState(""),Re=Object(o.a)(Ne,2),Ae=Re[0],Pe=Re[1],Le=i.a.useState(""),Fe=Object(o.a)(Le,2),Ue=Fe[0],qe=Fe[1],Ge=i.a.useState(""),He=Object(o.a)(Ge,2),Be=He[0],Ve=He[1],ze=i.a.useState(),We=Object(o.a)(ze,2),Ke=We[0],Je=We[1],Ye=i.a.useState(""),Qe=Object(o.a)(Ye,2),Xe=Qe[0],$e=Qe[1],Ze=i.a.useCallback((function(e){return!(e.length>0)||(p({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}),!1)}),[p]),et=i.a.useCallback((function(){D(null),ee(""),W(null),he(""),ve(""),Pe(""),Me(null),Q(""),me(null),R(null),F(null),ie(""),ye(null),Ee(""),Je(null),$e(""),H(""),le(""),qe(""),k(!1),Ve(""),C(!1)}),[]);i.a.useEffect((function(){if(null!=g){ee(Vf(g.get("data_location"))),Pe(Vf(g.get("time_format"))),H(Vf(null==g.get("notification_email")?"":g.get("notification_email").first())),W(Hf(g.get("file_format"),xf)),ye(Hf(g.get("mccmnc_format"),_f)),Je(Hf(g.get("currency_format"),Cf)),R(Hf(g.get("rate_replace_prices"),wf)),F(Hf(g.get("rate_fail_on_errors"),kf)),Q({id:null,name:g.get("csv_delimiter")});var e=Object.keys(Sf).find((function(e){return Sf[e].id===g.get("decimal_separator")}));if(me(null==Sf[e]?null:Sf[e]),Ee({id:null,name:g.get("mccmnc_delimiter")}),null!=g.get("time_zone")&&Me({id:g.get("time_zone"),name:g.get("time_zone")}),k(!0===["currency_format","currency_location"].some((function(e){return null!=g.get(e)}))),C(!0===["time_zone","time_format","sheet_activation_date_location","network_activation_date_location"].some((function(e){return null!=g.get(e)}))),g.get("file_format")===xf.CSV.id)he(g.get("mcc_location")),ve(g.get("mnc_location")),ie(g.get("new_rate_location")),$e(Vf(g.get("currency_location"))),le(Vf(g.get("global_default_rate_location"))),qe(Vf(g.get("sheet_activation_date_location"))),Ve(Vf(g.get("network_activation_date_location")));else{var t=Af(xf.EXCEL.id,[{type:Cf.COLUMN.id,value:g.get("mcc_location")},{type:Cf.COLUMN.id,value:g.get("mnc_location")},{type:Cf.COLUMN.id,value:g.get("new_rate_location")},{type:g.get("currency_format"),value:g.get("currency_location")},{type:Cf.CELL.id,value:g.get("global_default_rate_location")},{type:Cf.CELL.id,value:g.get("sheet_activation_date_location")},{type:Cf.COLUMN.id,value:g.get("network_activation_date_location")}]),n=Object(o.a)(t,7),a=n[0],i=void 0===a?"":a,c=n[1],r=void 0===c?"":c,s=n[2],l=void 0===s?"":s,u=n[3],d=void 0===u?"":u,m=n[4],b=void 0===m?"":m,j=n[5],f=void 0===j?"":j,h=n[6],p=void 0===h?"":h;he(i),ve(r),ie(l),$e(d),le(b),qe(f),Ve(p)}}else et()}),[g,et]);var tt=i.a.useCallback((function(e){if(e.length>0)p({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}});else{m(!0);var t={data:I[0],notification_email:G,rate_fail_on_errors:zf(L),rate_replace_prices:zf(N),file_format:zf(z),csv_delimiter:zf(Y),data_location:Z,new_rate_location:ae,global_default_rate_location:Bf(se),decimal_separator:zf(de),mcc_location:fe,mnc_location:Oe,mccmnc_format:zf(_e),mccmnc_delimiter:zf(we),time_zone:zf(Te),time_format:Bf(Ae),sheet_activation_date_location:Bf(Ue),network_activation_date_location:Bf(Be),currency_format:zf(Ke),currency_location:Bf(Xe)};if(z.id===xf.EXCEL.id){var a=Af(xf.CSV.id,[{type:Cf.COLUMN.id,value:t.mcc_location},{type:Cf.COLUMN.id,value:t.mnc_location},{type:Cf.COLUMN.id,value:t.new_rate_location},{type:null!=Ke&&Ke.id,value:t.currency_location},{type:Cf.CELL.id,value:t.global_default_rate_location},{type:Cf.CELL.id,value:t.sheet_activation_date_location},{type:Cf.COLUMN.id,value:t.network_activation_date_location}]),i=Object(o.a)(a,7),s=i[0],l=i[1],u=i[2],d=i[3],b=i[4],j=i[5],f=i[6];t.mcc_location=s,t.mnc_location=l,t.new_rate_location=u,t.currency_location=d,t.global_default_rate_location=b,t.sheet_activation_date_location=j,t.network_activation_date_location=f}c(function(e,t){return function(){var n=["data","time_zone","time_format","file_format","mcc_location","mnc_location","mccmnc_format","csv_delimiter","decimal_separator","data_location","currency_format","mccmnc_delimiter","new_rate_location","currency_location","notification_email","rate_fail_on_errors","rate_replace_prices","global_default_rate_location","sheet_activation_date_location","network_activation_date_location"].reduce((function(e,n){return null==t[n]||e.append(n,t[n]),e}),new FormData);return Rc.post("/".concat(e,"/prices/schedules"),n,{headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(n,t)).then((function(){r(),p({severity:"success",message:"Import Settings Successfully Updated"})})).catch((function(e){console.error(e),p({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return m(!1)}))}}),[r,c,p,n,I,L,N,G,z,Y,Z,ae,se,fe,Oe,_e,we,de,Te,Ae,Ue,Be,Ke,Xe]);return!0===d?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(Pf,{isAuto:!1,onSubmit:tt,currency:t,onNextStep:Ze,isFormDirty:f,onFormDirtyChange:h,isCurrencyParsingEnabled:S,isActivationDateParsingEnabled:x,onCurrencyParsingEnabledChange:k,onActivationDateParsingEnabledChange:C,file:I,onFileChange:D,mergePolicy:N,onMergePolicyChange:R,errorPolicy:L,onErrorPolicyChange:F,notificationEmail:G,onNotificationEmailChange:H,format:z,onFormatChange:W,csvDelimiter:Y,onCSVDelimiterChange:Q,dataRow:Z,onDataRowChange:ee,newRateColumn:ae,onNewRateColumnChange:ie,globalDefaultRateCell:se,onGlobalDefaultRateCellChange:le,decimalSeparator:de,onDecimalSeparatorChange:me,mccColumn:fe,onMCCColumnChange:he,mncColumn:Oe,onMNCColumnChange:ve,mccmncFormat:_e,onMCCMNCFormatChange:ye,mccmncDelimiter:we,onMCCMNCDelimiterChange:Ee,timezone:Te,onTimezoneChange:Me,timeformat:Ae,onTimeformatChange:Pe,sheetActivationDateCell:Ue,onSheetActivationDateCellChange:qe,networkActivationDateColumn:Be,onNetworkActivationDateColumnChange:Ve,currencyFormat:Ke,onCurrencyFormatChange:Je,currencyLocation:Xe,onCurrencyLocationChange:$e})};var Kf=function(e){var t=e.supplierID,n=e.connectionID,a=e.onClose,c=b(),r=bm(a),s=i.a.useState(0),u=Object(o.a)(s,2),d=u[0],m=u[1],j=i.a.useMemo((function(){return["API:SUPPLIER_AUTOMATED_RATESHEET:READ","API:SUPPLIER_AUTOMATED_RATESHEET:WRITE"].some((function(e){return c.includes(e)}))}),[c]),f=i.a.useCallback((function(e){m(e.selected)}),[]),h=Object(l.d)((function(e){return e.supplierConnection.getIn([n,"connection_currency"])})),p=i.a.useMemo((function(){return Object(Ka.jsx)(Wf,{onClose:r,currency:h,supplierID:t,connectionID:n})}),[r,h,t,n]);return Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)("span",{children:"Rate Sheet Import Settings"}),Object(Ka.jsx)(k.a,{icon:"close",onClick:r})]})})}),Object(Ka.jsx)(w.c,{children:!0===j?Object(Ka.jsxs)(w.i,{selected:d,onSelect:f,animation:!1,children:[Object(Ka.jsx)(w.j,{title:"Manual",children:p}),Object(Ka.jsx)(w.j,{title:"Automatic",children:Object(Ka.jsx)(Gf,{onClose:r,currency:h,connectionID:n})})]}):p})]})},Jf={skip:0,take:20};function Yf(e){var t=e.supplierID,n=e.onOpenConnectionImportSettings,a=b(),c=Object(d.h)(),r=Object(l.c)(),s=i.a.useState(!0),u=Object(o.a)(s,2),m=u[0],j=u[1],f=bm(n),h=i.a.useMemo((function(){return a.has("API:SUPPLIER_RATE:WRITE")}),[a]),p=i.a.useReducer((function(e,t){var n=t.type,a=t.data;switch(n){case"ADD":return Object(x.a)(new Set([a.connectionID].concat(Object(x.a)(e))));case"REMOVE":var i=e.indexOf(a.connectionID);if(-1===i)return e;var c=Object(x.a)(e);return c.splice(i,1),c;default:return e}}),[]),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(Jf),_=Object(o.a)(C,2),y=_[0],S=_[1],E=i.a.useCallback((function(e){r(Ui(e))}),[r]),I=i.a.useCallback((function(){r(Ac())}),[r]),D=i.a.useCallback((function(){return I(),r(yl(t))}),[r,I,t]),T=i.a.useCallback((function(){return j(!0),D().then((function(){j(!1)})).catch((function(e){E({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[D,E]);i.a.useEffect((function(){return T(),function(){return I()}}),[I,T,r,t]);var M=i.a.useCallback((function(){S(Jf)}),[]),N=i.a.useCallback((function(e){S(e.dataState)}),[]),R=Object(l.d)((function(e){return{country:e.country,network:e.network,currency:e.currency,supplier:e.supplier,supplierConnection:e.supplierConnection}})),A=R.country,P=R.network,L=R.currency,F=R.supplier,U=R.supplierConnection,q=i.a.useCallback((function(e,t){v({type:"ADD",data:{connectionID:e}}),r(Wc(e,{page:0,size:1e6})).then((function(n){var a='"'+["Country","Network","MCC","MNC","Rate"].join('","')+'"',i=n.data.reduce((function(e,t){if(null!=e[t.network_id])return e;var n=P.get(t.network_id);if(null==n)return c;var a=A.get(n.get("country_id"));if(null==a)return c;var i=n.get("mccmnc").reduce((function(e,t){var n=e[t.get("mcc")];return null==n&&(n=e[t.get("mcc")]=[]),n.push(t.get("mnc")),e}),{});return e[t.network_id]=Object.keys(i).map((function(e){var c=i[e];return'"'+[a.get("country_name"),n.get("network_name"),e,c.join(", "),t.price].join('","')+'"'})).join("\n"),e}),{}),c=Object.keys(i).reduce((function(e,t){return e.push(i[t]),e}),[]).sort().join("\n"),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent([a,c].join("\n"))),r.setAttribute("download","".concat(t,"-").concat(e,".csv")),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),E({severity:"success",message:"Rates for '".concat(t,"' Generated")})})).catch((function(){E({severity:"error",message:"An error occured while downloading the Rates for '".concat(t,"'"),action:{label:"Dismiss"}})})).then((function(){v({type:"REMOVE",data:{connectionID:e}}),r(qc(e))}))}),[r,E,P,A]),G=sb({variant:"Input"}),H=sb({variant:"MultiSelect",props:{data:lb({fieldID:"currency",fieldName:"currency",namespace:L})}}),B=i.a.useMemo((function(){return[{field:"connection",title:"Connection",filterCell:G},{field:"currency",title:"Currency",filterCell:H},{field:"actions",width:"150px",locked:!0,sortable:!1,filterable:!1}]}),[G,H]),V=i.a.useMemo((function(){var e=F.getIn([t,"connections"]);return(null==e?[]:e.toJS()).reduce((function(e,n){var a=U.get(n);return null==a||e.push({connection:a.get("connection_name"),currency:a.get("connection_currency"),actions:O.includes(n)?Object(Ka.jsx)(Wm,{}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"download",title:"Export ".concat(a.get("connection_name")," Connection Prices"),"aria-label":"Export ".concat(a.get("connection_name")," Connection Prices"),onClick:function(){q(n,a.get("connection_name"))}}),!0===h&&Object(Ka.jsx)(k.a,{look:"flat",icon:"upload",title:"Import ".concat(a.get("connection_name")," Connection Prices"),"aria-label":"Import ".concat(a.get("connection_name")," Connection Prices"),onClick:function(){f(a.get("connection_id"))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(a.get("connection_name")," Connection Prices"),"aria-label":"Edit ".concat(a.get("connection_name")," Connection Prices"),onClick:function(){c.push("/suppliers/".concat(t,"/rates/connection/").concat(n))}})]})}),e}),[])}),[c,F,q,t,O,U,h,f]);return Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Connection Rates"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:m,frontendFiltering:!0,frontendPagination:!0,style:{minHeight:"400px",maxHeight:"700px"},skip:y.skip,take:y.take,sort:y.sort,filter:y.filter,data:V,columns:B,onDataStateChange:N})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:T,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:M,children:"Clear Filters and Sorting"})]})]})}var Qf=i.a.memo(Yf),Xf={AUTO_FILE_SCHEDULE:{id:"AUTO_FILE_SCHEDULE",name:"Auto File Schedule"},MANUAL_FILE_SCHEDULE:{id:"MANUAL_FILE_SCHEDULE",name:"Manual File Schedule"},INDIVIDUAL_NETWORK_SCHEDULE:{id:"INDIVIDUAL_NETWORK_SCHEDULE",name:"Individual Network Schedule"}},$f={pending:{id:"pending",name:"Pending"},success:{id:"success",name:"Success"},failed:{id:"failed",name:"Failed"},processing:{id:"processing",name:"Processing"},cancelled:{id:"cancelled",name:"Cancelled"}},Zf={skip:0,take:20,sort:[{dir:"desc",field:"created_date"}]};function eh(e){var t=e.supplierID,n=b(),a=Object(d.h)(),c=Object(l.c)(),r=i.a.useState(!1),s=Object(o.a)(r,2),u=s[0],j=s[1],f=i.a.useState(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(!1),v=Object(o.a)(O,2),C=v[0],_=v[1],y=i.a.useState(),S=Object(o.a)(y,2),E=S[0],I=S[1],D=i.a.useState(Zf),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useState(!1),A=Object(o.a)(R,2),P=A[0],L=A[1],F=i.a.useMemo((function(){return n.has("API:SUPPLIER_RATE:WRITE")}),[n]),U=Object(l.d)((function(e){return{supplierRateSchedule:e.supplierRateSchedule}})).supplierRateSchedule,q=i.a.useCallback((function(e){c(Ui(e))}),[c]),G=i.a.useCallback((function(){c(Fl())}),[c]),H=i.a.useCallback((function(){return G(),c(function(e,t){return function(n){return Dc.get("/".concat(e,"/rate-schedules"),{params:t}).then((function(e){return n(Rl.apply(void 0,Object(x.a)(e.data.data))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,ni(M)))}),[c,G,t,M]),B=kb({frequency:1e4,intervalPolicy:"update",name:"Rates Scheduled Changes Status",request:i.a.useCallback((function(){return H()}),[H]),getData:i.a.useCallback((function(e,t){var n=e.supplierRateSchedule;return new m.b({totalRecords:t.total_records,data:n.reduce((function(e,t){return e.add(new m.b({type:t.get("type"),info:t.get("info"),status:t.get("status"),schedule_id:t.get("schedule_id"),created_date:t.get("created_date"),scheduled_date:t.get("scheduled_date"),connection_name:t.get("connection_name")}))}),new m.e)})}),[])}),V=B.data,z=B.update;i.a.useEffect((function(){!0!==P&&L(Object(x.a)(V.get("data").values()).some((function(e){return e.get("status").has($f.pending.id)})))}),[P,V]);var W=i.a.useCallback((function(){return _(!0),z().catch((function(e){q({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return _(!1)}))}),[q,z]);i.a.useEffect((function(){return j(!0),z().catch((function(e){q({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){j(!1)})),function(){return G()}}),[q,G,z]);var K=i.a.useCallback((function(e){N(e.dataState)}),[]),J=i.a.useCallback((function(){N(Zf)}),[]),Y=i.a.useCallback((function(){g(!p)}),[p]),Q=i.a.useCallback((function(){I(null)}),[]),X=i.a.useCallback((function(){j(!0),I(null),c(function(e,t){return function(){return Dc.delete("/".concat(e,"/rate-schedules/").concat(t)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,E)).then((function(){q({severity:"success",message:"Scheduled Change Successfully Cancelled"})})).catch((function(e){q({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return z()})).catch((function(e){q({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){j(!1)}))}),[c,q,t,z,E]),$=sb({variant:"Input",props:{label:"Schedule ID"}}),Z=sb({variant:"Input",props:{label:"Connection"}}),ee=sb({variant:"Date",props:{label:"Created Date"}}),te=sb({variant:"MultiSelect",props:{label:"Type",data:i.a.useMemo((function(){return Object.keys(Xf).map((function(e){return{id:e,name:Xf[e].name}}),[])}),[])}}),ne=i.a.useMemo((function(){return V.get("data").reduce((function(e,n){var i=Xf[n.get("type")];return e.push({type:null==i?null:i.name,created_date:n.get("created_date"),connection_name:n.get("connection_name"),schedule_id:Object(Ka.jsx)(Id,{value:n.get("schedule_id")}),created_date_dom:Object(Ka.jsx)(Nd,{utc:n.get("created_date")}),info:n.get("info")&&(0===n.get("info").size?Object(Ka.jsx)("span",{className:"Text--Faded",children:"No additional information."}):1===n.get("info").size?n.get("info").first():"Multiple Details"),scheduled_date:0===n.get("scheduled_date").size?Object(Ka.jsx)("span",{className:"Text--Faded",children:"No dates available."}):n.get("scheduled_date").size>1?"Different Scheduled Dates":Object(Ka.jsx)(Nd,{utc:n.get("scheduled_date").first()}),status:n.get("status").isEmpty()?Object(Ka.jsx)("span",{className:"Text--Faded",children:"No status available."}):n.get("status").reduce((function(e,t){var n=t.state,a=t.count,i=$f[n];return null==i||e.push(n===$f.success.id?Object(Ka.jsxs)(wd,{children:[Object(Ka.jsx)("i",{className:"fas fa-check"})," ",Object(Ka.jsxs)("span",{children:[i.name,": ",a]})]},n):n===$f.failed.id?Object(Ka.jsxs)(wd,{variant:"error",children:[Object(Ka.jsx)("i",{className:"fas fa-exclamation-triangle"})," ",Object(Ka.jsxs)("span",{children:[i.name,": ",a]})]},n):n===$f.cancelled.id?Object(Ka.jsxs)(wd,{variant:"warning",children:[Object(Ka.jsx)("i",{className:"fas fa-ban"})," ",Object(Ka.jsxs)("span",{children:[i.name,": ",a]})]},n):n===$f.pending.id?Object(Ka.jsxs)(wd,{variant:"info",children:[Object(Ka.jsx)("i",{className:"fas fa-calendar-alt"})," ",Object(Ka.jsxs)("span",{children:[i.name,": ",a]})]},n):n===$f.processing.id?Object(Ka.jsxs)(wd,{variant:"info",children:[Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",Object(Ka.jsxs)("span",{children:[i.name,": ",a]})]},n):null),e}),[]),actions:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View ".concat(n.get("connection_name")," Changes"),"aria-label":"View ".concat(n.get("connection_name")," Changes"),onClick:function(){a.push("/suppliers/".concat(t,"/rates/schedule/").concat(n.get("schedule_id")))}}),!0===F&&n.get("status").some((function(e){return e.state===$f.pending.id}))&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel ".concat(n.get("connection_name")," Changes"),"aria-label":"Cancel ".concat(n.get("connection_name")," Changes"),onClick:function(){return I(n.get("schedule_id"))}})]})}),e}),[])}),[V,a,t,F]),ae=i.a.useMemo((function(){var e=[{field:"connection_name",title:"Connection",filterCell:Z},{field:"type",title:"Type",filterCell:te},{field:"status",title:"Status",width:"280px",sortable:!1,filterable:!1},{field:"info",title:"Additional Information",width:"300px",sortable:!1,filterable:!1},{field:"created_date",title:"Created Date",width:"230px",view:"created_date_dom",filterCell:ee},{field:"scheduled_date",title:"Scheduled Date",width:"230px",sortable:!1,filterable:!1},{field:"schedule_id",title:"ID",filterCell:$,sortable:!1,width:"250px"}];return ne.length>0&&e.push({field:"actions",width:"110px",locked:!0,sortable:!1,filterable:!1}),e}),[ne,te,$,ee,Z]),ie=i.a.useMemo((function(){var e=[];return!0===P&&e.push("Card--Highlight"),e.join(" ")}),[P]),ce=i.a.useMemo((function(){return null==E?null:U.get(E)}),[E,U]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Wb,{expanded:p,className:ie,title:"Scheduled Changes",onToggleExpanded:Y,children:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:u,style:{minHeight:"400px",maxHeight:"700px"},skip:M.skip,take:M.take,sort:M.sort,filter:M.filter,data:ne,columns:ae,total:V.get("totalRecords"),onDataStateChange:K})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:W,disabled:!0===C,children:!0===C?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:J,children:"Clear Filters and Sorting"})]})]})}),null!=ce&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:Q,children:["Are you sure you want to cancel the changes scheduled for"," ",Object(Ka.jsx)("strong",{children:ce.get("connection_name")}),"?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:X,children:"Delete"}),Object(Ka.jsx)(k.a,{onClick:Q,children:"Cancel"})]})]})]})}var th=i.a.memo(eh);function nh(e){var t=e.supplierID,n=i.a.useState(null),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useContext(Tm),u=s.setTitle,d=s.setContentTitle,m=s.setBreadcrumbs,b=null!==c,j=Object(l.d)((function(e){return{supplier:e.supplier}})).supplier;i.a.useEffect((function(){var e=j.getIn([t,"supplier_name"]);return null==e?(u("Rate Manager"),d("Rate Manager")):(u("".concat(e,"'s Rate Manager")),d("".concat(e,"'s Rate Manager"))),m([{link:"/suppliers",name:"Suppliers"},{name:e},{name:"Rate Manager"}]),function(){u(null),m([]),d(null)}}),[j,t,u,d,m]);var f=i.a.useCallback((function(e){r(e)}),[]),h=i.a.useCallback((function(){r(null)}),[]);return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(th,{supplierID:t})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===b?6:12,children:Object(Ka.jsx)(Qf,{supplierID:t,onOpenConnectionImportSettings:f})}),!0===b&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(Kf,{supplierID:t,connectionID:c,onClose:h})})]})})]})}var ah=i.a.memo(nh);function ih(e){var t=e.isOpen,n=e.currencyFormat,a=e.isLoading,c=void 0!==a&&a,r=e.prices,s=void 0===r?new m.b:r,o=e.onSubmit,u=bm(e.onCancel),d=bm(o),b=Object(l.d)((function(e){return{network:e.network,country:e.country}})),j=b.network,f=b.country,h=i.a.useCallback((function(e){return null===e?Object(Ka.jsx)("strong",{className:"Text--Error",children:"No Rate"}):Object(aj.f)(e,n)}),[n]),p=i.a.useMemo((function(){return s.reduce((function(e,t,n){var a=j.get(n);return null==n||e.push(Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("td",{children:f.getIn([a.get("country_id"),"country_name"])}),Object(Ka.jsx)("td",{children:j.getIn([n,"network_name"])}),Object(Ka.jsx)("td",{children:a.getIn(["mccmnc",0,"mcc"])}),Object(Ka.jsx)("td",{children:a.getIn(["mccmnc",0,"mnc"])}),Object(Ka.jsx)("td",{children:h(t.getIn(["newPrice","old"]))}),Object(Ka.jsx)("td",{children:h(t.getIn(["newPrice","new"]))}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)(Nd,{utc:t.getIn(["scheduledDate","old"])})}),Object(Ka.jsx)("td",{children:Object(Ka.jsx)(Nd,{utc:t.getIn(["scheduledDate","new"])})})]},n)),e}),[])}),[s,f,j,h]);return!0===t&&Object(Ka.jsxs)(Ub.a,{title:"Schedule Changes Updates",onClose:u,children:[!0===c?Object(Ka.jsx)("p",{children:"Saving Rates. Please wait."}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,style:{maxHeight:"240px",overflow:"auto"},children:Object(Ka.jsxs)("table",{width:"100%",children:[Object(Ka.jsx)("thead",{children:Object(Ka.jsxs)("tr",{children:[Object(Ka.jsx)("th",{children:"Country"}),Object(Ka.jsx)("th",{children:"Network"}),Object(Ka.jsx)("th",{children:"MCC"}),Object(Ka.jsx)("th",{children:"MNC"}),Object(Ka.jsx)("th",{children:"Old New Rate"}),Object(Ka.jsx)("th",{children:"New New Rate"}),Object(Ka.jsx)("th",{children:"Old Scheduled Date"}),Object(Ka.jsx)("th",{children:"New Scheduled Date"})]})}),Object(Ka.jsx)("tbody",{children:p})]})})}),!1===c&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:d,children:"Submit"}),Object(Ka.jsx)(k.a,{onClick:u,children:"Cancel"})]})]})}var ch=i.a.memo(ih),rh={pending:{id:"pending",name:"Pending"},success:{id:"success",name:"Success"},failed:{id:"failed",name:"Failed"},processing:{id:"processing",name:"Processing"},cancelled:{id:"cancelled",name:"Cancelled"}},sh={skip:0,take:20,sort:[{dir:"desc",field:"scheduled_date"}]};function lh(e){var t=e.supplierID,n=Object(d.j)().scheduleID,a=b(),c=Object(d.h)(),r=Object(l.c)(),s=i.a.useState(!1),u=Object(o.a)(s,2),j=u[0],f=u[1],h=i.a.useState(!0),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(0),C=Object(o.a)(v,2),_=C[0],y=C[1],E=i.a.useState(!1),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState(),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState(null),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState(sh),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(null),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useState(!1),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useState(new m.b),ae=Object(o.a)(ne,2),ie=ae[0],ce=ae[1],re=i.a.useState(new m.b),se=Object(o.a)(re,2),le=se[0],oe=se[1],ue=i.a.useMemo((function(){return a.has("API:SUPPLIER_RATE:WRITE")}),[a]),de=i.a.useContext(Tm),me=de.setTitle,be=de.setContentTitle,je=de.setBreadcrumbs,fe=Object(l.d)((function(e){return{country:e.country,network:e.network,currency:e.currency,supplier:e.supplier,supplierRateSchedule:e.supplierRateSchedule}})),he=fe.country,pe=fe.network,ge=fe.currency,Oe=fe.supplier,ve=fe.supplierRateSchedule;i.a.useEffect((function(){var e=ve.getIn([n,"connection_name"]);null!=e&&B(e)}),[n,ve]),i.a.useEffect((function(){var e=ve.getIn([n,"connection_currency"]);null!=e&&X(e)}),[n,ve]),i.a.useEffect((function(){return null==H?(me("Connection Rates Changes"),be("Connection Rates Changes")):(me("".concat(H,"'s Rates Changes")),be("".concat(H,"'s Rates Changes"))),je([{link:"/suppliers",name:"Suppliers"},{name:Oe.getIn([t,"supplier_name"])},{link:"/suppliers/".concat(t,"/rates"),name:"Rate Manager"},{name:H},{name:"Scheduled Rates"}]),function(){me(null),je([]),be(null)}}),[Oe,me,t,n,H,je,be,ve]);var xe=i.a.useMemo((function(){return(1===_?["cancelled","failed","success"]:["pending","processing"]).reduce((function(e,t){return e[t]=rh[t],e}),{})}),[_]),Ce=i.a.useMemo((function(){var e=Object.keys(xe),t=ni(W);return[{to:"country_id",from:"country"},{to:"network_id",from:"network"}].forEach((function(e){null!=t[e.from]&&(t[e.to]=t[e.from],delete t[e.from])})),null!=t.status&&(t.status=t.status.split(",").filter((function(t){return e.includes(t)})).join(",")),null!=t.status&&""!==t.status||(t.status=Object.keys(xe).join(",")),t}),[W,xe]),_e=i.a.useCallback((function(e){r(Ui(e))}),[r]),ye=i.a.useCallback((function(){c.push("/suppliers/".concat(t,"/rates/"))}),[c,t]),Se=i.a.useCallback((function(){r(Fl()),r(function(e){return{data:{id:e},type:$e}}(n))}),[r,n]),ke=i.a.useCallback((function(){return Se(),Promise.all([r(ql(t,n,Ce)),r(Ul(t,n))]).then((function(e){return Object(o.a)(e,1)[0]}))}),[r,Ce,n,Se,t]),we=kb({name:"Rates Scheduled Changes Status",request:i.a.useCallback((function(){return ke()}),[ke]),getData:i.a.useCallback((function(e,t){var a=e.supplierRateSchedule.getIn([n,"prices"]);return new m.b({totalRecords:t.total_records,data:null==a?new m.b:a})}),[n])}),Ee=we.data,Ie=we.update,De=i.a.useCallback((function(){return A(!0),Ie().catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return A(!1)}))}),[_e,Ie]);i.a.useEffect((function(){return O(!0),Ie().catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){O(!1)})),function(){return Se()}}),[_e,Se,Ie]);var Te=i.a.useCallback((function(e){y(e.selected)}),[]),Me=i.a.useCallback((function(e){K(e.dataState)}),[]),Ne=i.a.useCallback((function(){K(sh)}),[]),Re=i.a.useCallback((function(){te(!1)}),[]),Ae=i.a.useCallback((function(){U(null)}),[]),Pe=i.a.useCallback((function(){te(!0)}),[]),Le=i.a.useCallback((function(){f(!0),r(function(e,t,n){return function(){return Dc.patch("/".concat(e,"/rate-schedules/").concat(t,"/prices"),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n,{data:le.reduce((function(e,t,n){return e.push({network_id:n,price:t.getIn(["newPrice","new"]),scheduled_date:t.getIn(["scheduledDate","new"])}),e}),[])})).then((function(){T(!1),te(!1),oe(new m.b),_e({severity:"success",message:"Schedule Changes Successfully Updated"})})).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return f(!1),O(!0),Ie()})).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){O(!1)}))}),[Ie,r,_e,n,t,le]),Fe=i.a.useCallback((function(){O(!0),U(null),r(Gl(t,n,F)).then((function(){_e({severity:"success",message:"Scheduled Change Successfully Cancelled"})})).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return Ie()})).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){O(!1)}))}),[r,_e,t,n,Ie,F]),Ue=i.a.useMemo((function(){if(null==Q)return null;var e=ge.getIn([Q,"settings"]);return null==e?null:e.decimal_places}),[ge,Q]),qe=i.a.useMemo((function(){return{style:"currency",currencyDisplay:"code",currency:Q,minimumFractionDigits:Ue}}),[Q,Ue]),Ge=hj({dataState:W}),He=Ge.availableNetworks,Be=sb({variant:"MultiSelect",props:{label:"Country",data:Ge.availableCountries}}),Ve=sb({variant:"MultiSelect",props:{label:"Network",data:He}}),ze=sb({variant:"MultiSelect",props:{label:"Status",data:i.a.useMemo((function(){return Object.keys(xe).map((function(e){return{id:e,name:rh[e].name}}),[])}),[xe])}}),We=sb({variant:"Input",props:{min:0,label:"MCC"}}),Ke=sb({variant:"Input",props:{min:0,label:"MNC"}}),Je=sb({variant:"Numeric",props:{min:0,label:"Current Rate",format:qe}}),Ye=sb({variant:"Numeric",props:{min:0,label:"New Rate",format:qe}}),Qe=sb({variant:"Date",props:{label:"Scheduled Date"}}),Xe=i.a.useCallback((function(){T(!0)}),[]),Ze=i.a.useCallback((function(e){return!0===ie.has(e)?ie.getIn([e,"newPrice","value"]):le.has(e)?le.getIn([e,"newPrice","new"]):Ee.getIn(["data",e,"new_price"])}),[Ee,ie,le]),et=i.a.useCallback((function(e){return!0===ie.has(e)?ie.getIn([e,"scheduledDate","value"]):le.has(e)?new window.Date(le.getIn([e,"scheduledDate","new"])):new window.Date(Ee.getIn(["data",e,"scheduled_date"]))}),[Ee,ie,le]),tt=i.a.useCallback((function(e){return null==e?Object(Ka.jsx)("strong",{className:"Text--Error",children:"No Rate"}):Object(aj.f)(e,qe)}),[qe]),nt=i.a.useCallback((function(e){return Object(Ka.jsx)(Nd,{utc:e})}),[]),at=i.a.useMemo((function(){return{min:0,onDirtyChange:Xe,autofocus:!0,variant:"Numeric",placeholder:"No Rate",format:qe,validations:{min:0}}}),[Xe,qe]),it=i.a.useMemo((function(){return{onDirtyChange:Xe,variant:"DateTime",validations:{min:new window.Date,required:!0}}}),[Xe]),ct=i.a.useCallback((function(e){ce(ie.delete(e))}),[ie]),rt=i.a.useCallback((function(e){!1!==ue&&(!0!==ie.has(e)?ce(ie.set(e,new m.b({newPrice:new m.b({errors:[],value:Ze(e)}),scheduledDate:new m.b({errors:[],value:et(e)})}))):ce(ie.delete(e)))}),[ie,Ze,et,ue]),st=i.a.useCallback((function(e){oe(le.delete(e))}),[le]),lt=i.a.useCallback((function(e,t){!1!==ie.has(e)&&ce(ie.setIn([e,"newPrice","value"],t))}),[ie]),ot=i.a.useCallback((function(e,t){!1!==ie.has(e)&&ce(ie.setIn([e,"scheduledDate","value"],t))}),[ie]),ut=i.a.useCallback((function(e,t){var n=t.newPrice,a=t.scheduledDate,i=Ee.get("data").getIn([e,"new_price"]),c=Ee.get("data").getIn([e,"scheduled_date"]);oe(!1===(n!==i||a!==c)?le.delete(e):le.set(e,new m.b({newPrice:new m.b({new:n,old:i}),scheduledDate:new m.b({new:a,old:c})})))}),[Ee,le]),dt=i.a.useCallback((function(e){if(!1!==ie.has(e)){var t=pe.getIn([e,"network_name"]),n=ie.getIn([e,"newPrice"]),a=ie.getIn([e,"scheduledDate"]),i=Xa([{value:n.get("value"),label:"Change ".concat(t,"'s Rate"),validations:at.validations}]),c=Xa([{value:a.get("value"),label:"Change ".concat(t,"'s Scheduled Date"),validations:it.validations}]),r=[].concat(Object(x.a)(i),Object(x.a)(c));if(r.length>0)return _e({message:Object(Ka.jsx)(Mm,{messageList:r}),severity:"error",action:{label:"Dismiss"}}),void ce(ie.setIn([e,"scheduledDate"],c).setIn([e,"newPrice"],i));ce(ie.delete(e)),ut(e,{newPrice:n.get("value"),scheduledDate:a.get("value").getTime()})}}),[pe,_e,ut,ie,at,it]),mt=i.a.useMemo((function(){return Object(x.a)(Ee.get("data").values()).reduce((function(e,t){var n=t.get("network_id"),a=pe.get(n);if(null==a)return e;var i=Ze(n),c=a.get("network_name"),r=et(n),s=rh[t.get("status")],l=!0===ue&&t.get("status")===rh.pending.id;return e.push({id:n,network:c,new_price:t.get("new_price"),current_price:t.get("current_price"),scheduled_date:t.get("scheduled_date"),mcc:a.getIn(["mccmnc",0,"mcc"]),mnc:a.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),current_price_dom:tt(t.get("current_price")),status:null==s?null:s.id===rh.success.id?Object(Ka.jsxs)(wd,{children:[Object(Ka.jsx)("i",{className:"fas fa-check"})," ",s.name]}):s.id===rh.failed.id?Object(Ka.jsxs)(wd,{variant:"error",children:[Object(Ka.jsx)("i",{className:"fas fa-exclamation-triangle"})," ",s.name]}):s.id===rh.cancelled.id?Object(Ka.jsxs)(wd,{variant:"warning",children:[Object(Ka.jsx)("i",{className:"fas fa-ban"})," ",s.name]}):s.id===rh.pending.id?Object(Ka.jsxs)(wd,{variant:"info",children:[Object(Ka.jsx)("i",{className:"fas fa-calendar-alt"})," ",s.name]}):s.id===rh.processing.id?Object(Ka.jsxs)(wd,{variant:"info",children:[Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",s.name]}):null,info:null==t.get("info")?Object(Ka.jsx)("span",{className:"Text--Faded",children:"No additional information."}):t.get("info"),country:he.getIn([a.get("country_id"),"country_name"]),new_price_dom:!1===l?tt(t.get("new_price")):Object(Ka.jsx)(bf,{value:i,label:"Change ".concat(c,"'s Rate"),elementProps:Object.assign({errors:ie.getIn([n,"newPrice","errors"])},at),isEditMode:ie.has(n),onFormatValue:tt,onChange:function(e){return lt(n,e)}}),scheduled_date_dom:!1===l?Object(Ka.jsx)(Nd,{utc:t.get("scheduled_date")}):Object(Ka.jsx)(bf,{value:r,label:"Change ".concat(c,"'s Scheduled Date"),elementProps:Object.assign({errors:ie.getIn([n,"scheduledDate","errors"])},it),isEditMode:ie.has(n),onFormatValue:nt,onChange:function(e){return ot(n,e)}}),actions:!1===l?null:Object(Ka.jsx)(Ka.Fragment,{children:!1===ie.has(n)?Object(Ka.jsxs)(Ka.Fragment,{children:[!0===le.has(n)&&Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",title:"Revert ".concat(c," Changes"),"aria-label":"Revert ".concat(c," Changes"),onClick:function(){return st(n)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(c,"'s Changes"),"aria-label":"Edit ".concat(c,"'s Changes"),onClick:function(){return rt(n)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel ".concat(c,"'s Changes"),"aria-label":"Cancel ".concat(c,"'s Changes"),onClick:function(){return U(n)}})]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Save ".concat(c,"'s Changes"),"aria-label":"Save ".concat(c,"'s Changes"),onClick:function(){return dt(n)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"close",title:"Cancel ".concat(c,"'s Changes"),"aria-label":"Cancel ".concat(c,"'s Changes"),onClick:function(){return ct(n)}})]})})}),e}),[])}),[Ee,he,pe,lt,et,Ze,rt,at,ie,st,ot,dt,ct,le,ue,it,nt,tt]),bt=i.a.useMemo((function(){if(!1!==mt.some((function(e){return null!=e.actions})))return le.size>0?"140px":"100px"}),[mt,le]),jt=i.a.useMemo((function(){var e=[{field:"country",title:"Country",filterCell:Be},{field:"mcc",title:"MCC",filterCell:We},{field:"network",title:"Network",filterCell:Ve},{field:"mnc",title:"MNC",filterCell:Ke},{field:"status",title:"Status",width:"200px",filterCell:ze},{field:"info",title:"Additional Information",width:"300px",sortable:!1,filterable:!1},{field:"current_price",title:"Current Rate",width:"200px",view:"current_price_dom",filterCell:Je},{field:"new_price",title:"New Rate",width:"200px",view:"new_price_dom",filterCell:Ye},{field:"scheduled_date",title:"Scheduled Date",width:"250px",view:"scheduled_date_dom",filterCell:Qe}];return null!=bt&&e.push({field:"actions",width:bt,locked:!0,sortable:!1,filterable:!1}),e}),[We,Ke,bt,Ve,Ye,ze,Be,Je,Qe]),ft=i.a.useMemo((function(){var e=pe.getIn([F,"network_name"]);if(null!=e)return{network_name:e,scheduled_date:ve.getIn([n,"prices",F,"scheduled_date"])}}),[pe,n,F,ve]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:D}),Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Scheduled Changes"})}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)(w.i,{animation:!1,selected:_,onSelect:Te,className:"TabStrip--NoButtomGutter",children:[Object(Ka.jsx)(w.j,{title:"Scheduled"}),Object(Ka.jsx)(w.j,{title:"History"})]}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!1===le.isEmpty()&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{className:"PrimaryButton",onClick:Pe,children:"Save Changes"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:g,style:{minHeight:"400px",maxHeight:"700px"},skip:W.skip,take:W.take,sort:W.sort,filter:W.filter,data:mt,columns:jt,total:Ee.get("totalRecords"),onDataStateChange:Me})})]})]}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:ye,children:"Back"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:De,disabled:!0===R,children:!0===R?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Ne,children:"Clear Filters and Sorting"})]})]}),null!=ft&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:Ae,children:["Are you sure you want to cancel the changes scheduled on"," ",Object(Ka.jsx)("strong",{children:Object(Ka.jsx)(Nd,{utc:ft.scheduled_date})})," ","for ",Object(Ka.jsx)("strong",{children:ft.network_name}),"?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:Fe,children:"Delete"}),Object(Ka.jsx)(k.a,{onClick:Ae,children:"Cancel"})]})]}),Object(Ka.jsx)(ch,{isLoading:j,isOpen:ee,currencyFormat:qe,onSubmit:Le,prices:le,onCancel:Re})]})}var oh=i.a.memo(lh);function uh(e){var t=e.supplierID,n=i.a.useMemo((function(){return"/suppliers/".concat(t,"/rates")}),[t]);return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:"".concat(n,"/schedule/:scheduleID"),children:Object(Ka.jsx)(oh,{supplierID:t})}),Object(Ka.jsx)(d.c,{path:"".concat(n,"/connection/:connectionID"),children:Object(Ka.jsx)(pf,{supplierID:t})}),Object(Ka.jsx)(d.c,{path:n,children:Object(Ka.jsx)(ah,{supplierID:t})})]})}var dh=i.a.memo(uh);var mh=function(e){var t=e.variant,n=void 0===t?"info":t,a=i.a.useMemo((function(){var e=["Notification"];switch(n){case"success":e.push("Notification--Success");break;case"warning":e.push("Notification--Warning");break;case"error":e.push("Notification--Error");break;default:e.push("Notification--Info")}return e.join(" ")}),[n]);return Object(Ka.jsx)("div",{className:a,children:e.children})},bh={skip:0,take:20,sort:[{dir:"desc",field:"modified"}]};function jh(e){var t=e.supplierID,n=b(),a=Object(l.c)(),c=i.a.useState(null),r=Object(o.a)(c,2),u=r[0],d=r[1],j=i.a.useState(0),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(null),O=Object(o.a)(g,2),v=O[0],C=O[1],y=i.a.useState(null),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(new m.b),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(bh),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(!0),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(new m.b),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useMemo((function(){return Object(Rd.a)()}),[]),J=i.a.useState(!1),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useState(!0),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useMemo((function(){return n.has("API:VIRTUAL_NUMBER:WRITE")}),[n]),ae=i.a.useMemo((function(){return null!=u&&!0===v&&String(u).length<=15}),[u,v]),ie=i.a.useCallback((function(e){a(Ui(e))}),[a]),ce=i.a.useContext(Tm),re=ce.setTitle,se=ce.setContentTitle,le=ce.setBreadcrumbs,oe=i.a.useCallback((function(e){p(e.selected)}),[]),ue=i.a.useCallback((function(e){F(e.dataState)}),[]),de=Object(l.d)((function(e){return{supplierConnection:e.supplierConnection}})).supplierConnection,me=Object(l.d)((function(e){return e.supplier.getIn([t,"supplier_name"])}));i.a.useEffect((function(){return null==me?(re("2 Way Virtual Numbers"),se("2 Way Virtual Numbers")):(re("".concat(me,"'s 2 Way Virtual Numbers")),se("".concat(me,"'s 2 Way Virtual Numbers"))),le([{link:"/suppliers",name:"Suppliers"},{name:me},{name:"2 Way Virtual Numbers"}]),function(){re(null),le([]),se(null)}}),[me,re,t,se,le]),i.a.useEffect((function(){return te(!0),a(yl(t)).then((function(){te(!1)})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return a(Ac())}}),[a,ie,t]),i.a.useEffect((function(){if(C(null),!(null==u||String(u).length>15))if(null==Object(x.a)(z.values()).find((function(e){return e.get("msisdn")===String(u)}))){if(null==Object(x.a)(N.values()).find((function(e){return e.get("msisdn")===u}))){var e=window.setTimeout((function(){X(!0),a(function(e){return function(){return wi.get("",{params:{msisdn:e}}).then((function(e){return 0===e.data.virtual_numbers.length})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(u)).then((function(e){C(e)})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return X(!1)}))}),1e3);return function(){return window.clearTimeout(e)}}C(!1)}else C(!0)}),[a,ie,u,N,z]);var be=i.a.useCallback((function(){R(new m.b),W(new m.b)}),[]),je=i.a.useCallback((function(){a({type:it})}),[a]),fe=i.a.useMemo((function(){var e=ni(L);return delete e.sort.modified,e}),[L]),he=i.a.useCallback((function(){return je(),a(_l(t,fe))}),[a,t,je,fe]),pe=kb({intervalPolicy:"update",name:"Supplier Virtual Numbers",request:i.a.useCallback((function(){return he()}),[he]),getData:i.a.useCallback((function(e,n){var a=e.supplierVirtualNumber,i=e.supplier;if(null==n)return new m.b({totalRecords:0,data:new m.e});var c=i.getIn([t,"virtual-numbers"]);return new m.b({totalRecords:n.total_records,data:(null==c?[]:c).reduce((function(e,t){return e.set(t,new m.b({id:t,msisdn:a.getIn([t,"msisdn"]),client:a.getIn([t,"client"]),clientConnection:a.getIn([t,"client_connection"])}))}),new m.b)})}),[t])}),ge=pe.data,Oe=pe.update;i.a.useEffect((function(){H(!0),Oe().catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){H(!1)}))}),[Oe,ie]);var ve=i.a.useCallback((function(){d(null);var e=Object(x.a)(z.values()).find((function(e){return e.get("msisdn")===String(u)}));if(null==e){var t="unpersisted-".concat(Object(Rd.a)());R(N.set(t,new m.b({id:t,msisdn:u})))}else W(z.delete(e.get("id")))}),[N,z,u]),xe=i.a.useCallback((function(e){W(z.delete(e))}),[z]),Ce=i.a.useCallback((function(e){N.has(e)?R(N.delete(e)):null!=ge.getIn(["data",e]).get("client")?D(e):W(z.set(e,ge.getIn(["data",e])))}),[N,z,ge]),_e=i.a.useCallback((function(e,t){var n=t.dataItem,a={className:!0===n.added?"".concat(e.props.className," ResponsiveGridRow--Info"):!0===n.removed?"".concat(e.props.className," ResponsiveGridRow--Error"):e.props.className};return i.a.cloneElement(e,a,e.props.children)}),[]),ye=i.a.useCallback((function(){D(null)}),[]),Se=i.a.useCallback((function(){W(z.set(I,ge.getIn(["data",I]))),D(null)}),[z,I,ge]),ke=sb({variant:"Input",props:{label:"MSISDN"}}),we=i.a.useMemo((function(){var e=[{field:"msisdn",title:"MSISDN",width:"325px",filterCell:ke},{field:"client_connection",title:"Client Connection",width:"325px",sortable:!1,filterable:!1}];return!0===ne&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[ke,ne]),Ee=i.a.useMemo((function(){return Object(x.a)(N.concat(z).concat(ge.get("data")).values()).reduce((function(e,t){var n=t.get("id"),a=t.get("client"),i=t.get("clientConnection"),c=null!=a&&null!=i;return e.push({id:n,added:N.has(n),removed:z.has(n),modified:N.has(n)||z.has(n),msisdn:t.get("msisdn"),client_connection:!1===c?Object(Ka.jsx)("span",{className:"Text--Faded",children:"Not In Use."}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(s.b,{to:"/clients/".concat(a.get("id"),"/connections/smpp/").concat(i.get("id")),children:i.get("name")})," in ",Object(Ka.jsx)(s.b,{to:"/clients/".concat(a.get("id")),children:a.get("name")})]}),actions:!0===z.has(n)?Object(Ka.jsx)(k.a,{icon:"add",look:"flat",onClick:function(){return xe(n)},title:"Include ".concat(t.get("msisdn")),"aria-label":"Include ".concat(t.get("msisdn"))}):Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",onClick:function(){return Ce(n)},title:"Remove ".concat(t.get("msisdn")),"aria-label":"Remove ".concat(t.get("msisdn"))})}),e}),[])}),[xe,N,Ce,z,ge]),Ie=i.a.useCallback((function(){var e,n,i=[];N.size>0&&i.push(a((e=t,n={virtual_numbers:Object(x.a)(N.values()).map((function(e){return String(e.get("msisdn"))}))},function(){return Dc.post("/".concat(e,"/virtual-numbers"),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){R(new m.b)}))),z.size>0&&i.push(a(function(e,t){return function(){return Dc.delete("/".concat(e,"/virtual-numbers/").concat(t)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,Object(x.a)(z.values()).map((function(e){return e.get("id")})).join(","))).then((function(){W(new m.b)}))),H(!0),Promise.all(i).then((function(){ie({severity:"success",message:"Supplier Virtual Numbers MSISDN Successfully Updated"})})).catch((function(e){console.error(e),ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){Oe()})).catch((function(e){console.error(e),ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){H(!1)}))}),[a,ie,t,N,z,Oe]),De=i.a.useMemo((function(){if(null!=I){var e=ge.getIn(["data",I]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("p",{children:["The MSISDN ",Object(Ka.jsx)("strong",{children:e.get("msisdn")})," you are trying to delete is being used by"," ",Object(Ka.jsx)("strong",{children:e.getIn(["client","name"])})," in"," ",Object(Ka.jsx)("strong",{children:e.getIn(["clientConnection","name"])}),"."," ","By deleting it, you will also be unlinking it from the Client"," ","Connection that it is being used in."]}),Object(Ka.jsx)("p",{children:"Are you sure you want to proceed?"})]})}}),[I,ge]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[0===de.size&&!1===ee&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(mh,{variant:"error",children:"Please create an SMPP Connection"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(S.a,{container:!0,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Virtual Numbers"})}),Object(Ka.jsx)(w.c,{children:!0===ne?Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsxs)(w.i,{selected:h,onSelect:oe,animation:!1,children:[Object(Ka.jsx)(w.j,{title:"Manual",children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)(fm,{variant:"Numeric",format:"#",label:"MSISDN",value:u,onChange:d,disabled:!0===G}),!0===Q&&Object(Ka.jsx)(_.a,{ml:2,children:Object(Ka.jsx)("i",{title:"Checking MSISDN Uniquenes","aria-label":"Checking MSISDN Uniquenes",className:"fas fa-spinner fa-spin fa-lg"})}),null!=v&&Object(Ka.jsx)(_.a,{ml:2,children:!0===v?Object(Ka.jsx)("i",{title:"MSISDN is unique","aria-label":"MSISDN is unique",className:"fas fa-check Text--Success fa-lg"}):Object(Ka.jsx)("i",{title:"MSISDN is not unique","aria-label":"MSISDN is not unique",className:"fas fa-times Text--Error fa-lg"})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",disabled:!1===ae,style:{width:"100%"},primary:!0,onClick:function(){return ve()},children:"Add"})})]})}),Object(Ka.jsx)(w.j,{title:"Upload",disabled:!0})]})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:8,"aria-labelledby":K,children:[Object(Ka.jsx)("h3",{className:"SectionHeader sr-only",id:K,children:"Included MSISDNs"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,rowRender:_e,isLoading:G,style:{height:"400px"},skip:L.skip,take:L.take,sort:L.sort,filter:L.filter,total:ge.get("totalRecords"),data:Ee,columns:we,onDataStateChange:ue})]})]}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,rowRender:_e,isLoading:G,style:{height:"400px"},skip:L.skip,take:L.take,sort:L.sort,filter:L.filter,total:ge.get("totalRecords"),data:Ee,columns:we,onDataStateChange:ue})})})}),!0===ne&&Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:be,children:"Clear"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ie,children:"Save"})]})]})})})})]}),null!=I&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ye,width:"500px",children:[De,Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Se,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ye,children:"Cancel"})]})]})]})}var fh=i.a.memo(jh);function hh(e){var t=e.supplierID,n=i.a.useContext(Tm),a=n.setTitle,c=n.setContentTitle,r=n.setBreadcrumbs,s=b(),u=Object(d.h)(),j=Object(l.c)(),f=i.a.useState(!0),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useMemo((function(){return Object(Rd.a)()}),[]),v=i.a.useMemo((function(){return Object(Rd.a)()}),[]),C=i.a.useMemo((function(){return Object(Rd.a)()}),[]),y=i.a.useMemo((function(){return s.has("API:SUPPLIER_CONNECTION:WRITE")}),[s]),E=i.a.useCallback((function(e){j(Ui(e))}),[j]),I=Object(l.d)((function(e){var n=e.supplier,a=e.supplierConnection,i=new m.b(n.get(t)).get("connections");return(null==i?[]:i.toJS()).reduce((function(e,t){var n=a.get(t);return null!=n&&e.push(n.toJS()),e}),[])})),D=Object(l.d)((function(e){return e.supplierSiteCategory})),T=Object(l.d)((function(e){return e.supplier.getIn([t,"supplier_name"])})),M=Object(l.d)((function(e){return e.httpProvider}));i.a.useEffect((function(){return null==T?(a("Connections"),c("Connections")):(a("".concat(T,"'s Connections")),c("".concat(T,"'s Connections"))),r([{link:"/suppliers",name:"Suppliers"},{name:T},{link:"/suppliers/".concat(t,"/connections/"),name:"Connections"}]),function(){a(null),r([])}}),[T,a,t,c,r]),i.a.useEffect((function(){return g(!0),Promise.all([j(Od()),j(yl(t)),j(Pi())]).then((function(){g(!1)})).catch((function(e){E({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){j(pd()),j(Ac()),j(Ai())}}),[j,E,t]);var N=i.a.useMemo((function(){return I.reduce((function(e,t){switch(t.connection_type){case"smpp":e.smppConnections.push(t);break;case"ss7":e.ss7Connections.push(t);break;case"http":e.httpConnections.push(t)}return e}),{smppConnections:[],ss7Connections:[],httpConnections:[]})}),[I]),R=N.smppConnections,A=N.ss7Connections,P=N.httpConnections,L=i.a.useMemo((function(){return Object(x.a)(D.values()).map((function(e){return Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{className:"k-icon k-i-circle"})," ",e.get("site_name")," "]},e.get("site_id"))}))}),[D]),F=i.a.useMemo((function(){return 0===R.length?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h2",{className:"EmptySmppConnectionCard",children:"No SMPP Connections Available"})}):R.map((function(e){return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(w.a,{className:"SmppConnectionCard",children:Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)("h2",{children:[e.connection_name,Object(Ka.jsx)(k.a,{className:"ConnectionCardDetailsButton",onClick:function(){return u.push("/suppliers/".concat(t,"/connections/").concat(e.connection_type,"/").concat(e.connection_id))},children:"Details"})]}),Object(Ka.jsx)("h4",{children:L})]})})},e.connection_id)}))}),[u,L,R,t]),U=i.a.useMemo((function(){return 0===A.length?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h2",{className:"EmptySs7ConnectionCard",children:"No SS7 Connections Available"})}):A.map((function(e){return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(w.a,{className:"SS7ConnectionCard",children:Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)("h2",{children:[e.connection_name,Object(Ka.jsx)(k.a,{disabled:!0,className:"ConnectionCardDetailsButton",onClick:function(){return u.push("/suppliers/".concat(t,"/connections/").concat(e.connection_type,"/").concat(e.connection_id))},children:"Details"})]}),Object(Ka.jsx)("h4",{children:L})]})})},e.connection_id)}))}),[u,L,A,t]),q=i.a.useMemo((function(){return 0===P.length?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h2",{className:"EmptyRestConnectionCard",children:"No HTTP API / REST Connections Available"})}):P.map((function(e){return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(w.a,{className:"RestConnectionCard",children:Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)("h2",{children:[e.connection_name,Object(Ka.jsx)(k.a,{className:"ConnectionCardDetailsButton",onClick:function(){return u.push("/suppliers/".concat(t,"/connections/").concat(e.connection_type,"/").concat(e.connection_id))},children:"Details"})]}),Object(Ka.jsx)("h4",{children:L})]})})},e.connection_id)}))}),[u,L,P,t]);return!0===p?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.g,{children:[Object(Ka.jsx)(w.h,{expanded:!0,title:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{className:"SmppColor",id:v,children:"SMPP"}),!0===y&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat","aria-label":"Add SMPP Connection",onClick:function(e){e.stopPropagation(),u.push("/suppliers/".concat(t,"/connections/smpp"))},children:"Add Connection"})]}),children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,style:{padding:"20px"},"aria-labelledby":v,children:F})}),Object(Ka.jsx)(w.h,{expanded:!0,title:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{className:"SS7Color",id:O,children:"SS7"}),!0===y&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat","aria-label":"Add SS7 Connection",disabled:!0,onClick:function(e){e.stopPropagation(),u.push("/suppliers/".concat(t,"/connections/ss7"))},children:"Add Connection"})]}),children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,style:{padding:"20px"},"aria-labelledby":O,children:U})}),Object(Ka.jsx)(w.h,{expanded:!0,title:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{className:"RestColor",id:C,children:"HTTP API / REST"}),!0===y&&Object(Ka.jsx)(k.a,{disabled:0===M.size,icon:"add",look:"flat","aria-label":"Add HTTP API / REST Connection",onClick:function(e){e.stopPropagation(),u.push("/suppliers/".concat(t,"/connections/http"))},children:"Add Connection"})]}),children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,style:{padding:"20px"},"aria-labelledby":C,children:q})})]})})})}var ph=i.a.memo(hh);function gh(e){var t=e.siteID,n=e.onLinkEdit,a=Object(l.d)((function(e){return e.supplierConnectionLink})),c=i.a.useCallback((function(e){"function"===typeof n&&n(e)}),[n]),r=i.a.useMemo((function(){return Object(x.a)(a.values()).reduce((function(e,n){return n.get("site_id")!==t||e.push(Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(w.a,{children:Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)("strong",{children:n.get("link_name")}),Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(n.get("link_name")," Connection Link"),"aria-label":"Edit ".concat(n.get("link_name")," Connection Link"),onClick:function(){return c(n.get("link_id"))}})]})})})},n.get("link_id"))),e}),[])}),[t,c,a]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:r.length>0?r:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:"No Links Configured"})})})}var Oh=i.a.memo(gh);function vh(e){var t=e.supplierID,n=e.onLinkAdd,a=e.onLinkEdit,c=b(),r=Object(l.c)(),s=i.a.useState(!0),u=Object(o.a)(s,2),d=u[0],m=u[1],j=i.a.useMemo((function(){return c.has("API:SUPPLIER_CONNECTION:WRITE")}),[c]),f=i.a.useCallback((function(e){r(Ui(e))}),[r]),h=Object(l.d)((function(e){return e.supplierSiteCategory})),p=i.a.useCallback((function(e){"function"===typeof a&&a(e)}),[a]),g=i.a.useCallback((function(e,t){"function"===typeof n&&n(e,t)}),[n]);i.a.useEffect((function(){return m(!0),r(Pi()).catch((function(e){f({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return m(!1)})),function(){return r(Ai())}}),[r,f,t]);var O=i.a.useMemo((function(){return Object(x.a)(h.values()).map((function(e){var n=e.get("site_id");return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"aria-labelledby":n,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsx)("span",{id:n,children:e.get("site_name")})})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Oh,{onLinkEdit:p,supplierID:t,siteID:e.get("site_id")})}),!0===j&&Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:function(){return g(e.get("site_name"),e.get("site_id"))},children:"Add Connection Link"})})]})},n)}))}),[g,p,t,j,h]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:!0===d?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"loader"})}):O})}var xh=i.a.memo(vh);function Ch(e){var t=e.supplierID,n=e.connectionID,a=e.connectionType,c=i.a.useContext(Tm),r=c.setTitle,s=c.setContentTitle,u=c.setBreadcrumbs,j=b(),f=Object(d.h)(),h=Object(l.c)(),p=i.a.useState(),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(null),_=Object(o.a)(C,2),y=_[0],E=_[1],I=i.a.useState(null),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useState(null),R=Object(o.a)(N,2),A=R[0],P=R[1],L=i.a.useState(!1),F=Object(o.a)(L,2),U=F[0],q=F[1],G=i.a.useState(!1),H=Object(o.a)(G,2),B=H[0],V=H[1],z=i.a.useState(),W=Object(o.a)(z,2),K=W[0],J=W[1],Y=i.a.useState(),Q=Object(o.a)(Y,2),X=Q[0],$=Q[1],Z=i.a.useState(),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(!0),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1],se=i.a.useState(),le=Object(o.a)(se,2),oe=le[0],ue=le[1],de=i.a.useState(),me=Object(o.a)(de,2),be=me[0],je=me[1],fe=i.a.useState(!1),he=Object(o.a)(fe,2),pe=he[0],ge=he[1],Oe=null!=A,ve=null!=y,xe=!0===U||!0===B,Ce=i.a.useMemo((function(){return[Object(Rd.a)(),Object(Rd.a)()]}),[]),_e=Object(o.a)(Ce,2),ye=_e[0],Se=_e[1],ke=oj(K),we=oj(X),Ee=oj(oe),Ie=oj(be),De=i.a.useMemo((function(){return j.has("API:SUPPLIER_CONNECTION:WRITE")}),[j]),Te=i.a.useCallback((function(e){h(Ui(e))}),[h]),Me=i.a.useCallback((function(e){q(!0),ue(e)}),[]),Ne=i.a.useCallback((function(e){q(!0),je(e)}),[]),Re=i.a.useCallback((function(e){q(!0),J(e)}),[]),Ae=i.a.useCallback((function(e){q(!0),$(e)}),[]),Pe=Object(l.d)((function(e){return{currency:e.currency,supplierConnectionLink:e.supplierConnectionLink}})),Le=Pe.currency,Fe=Pe.supplierConnectionLink,Ue=i.a.useCallback((function(e){E(e),P(null),window.setTimeout((function(){window.location.hash="#",window.location.hash="#".concat(Se)}),100)}),[Se]),qe=i.a.useCallback((function(e,t){P(e),M(t),E(null),window.setTimeout((function(){window.location.hash="#",window.location.hash="#".concat(ye)}),100)}),[ye]);i.a.useEffect((function(){return re(!0),Promise.all([h(Sl(t,n,a)),h(Gc(t,a,n))]).then((function(){re(!1)})).catch((function(e){Te({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){h(Ac()),h(Hl())}}),[h,Te,t,n,a]);var Ge=Object(l.d)((function(e){var t=e.supplierConnection;return new m.b(t.get(n))})),He=i.a.useCallback((function(){var e="";"smpp"===a&&((e={connection_name:{elementType:"input",elementConfig:{placeholder:"Connection Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},connection_currency:{elementType:"combo",clearButton:!1,elementConfig:{disabled:!0,allowCustom:!1,placeholder:"Connection Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},support_virtual_number:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Virtual Numbers"},valid:!0,value:null,data:Hj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}}).connection_name.value=Ge.get("connection_name"),e.connection_currency.value={id:Ge.get("connection_currency"),name:Ge.get("connection_currency")},e.connection_currency.data=Object(x.a)(Le.values()).map((function(e){return{id:e.get("currency"),name:e.get("currency")}})),e.support_virtual_number.value={id:Ge.get("support_virtual_number"),name:!1===Ge.get("support_virtual_number")?"Disable":"Enable"}),v(e)}),[Ge,a,Le]);i.a.useEffect((function(){He();var e=Object.assign(Wj()),t=Object.assign({addr_ton:{elementType:"numeric",elementConfig:{max:7,min:0,placeholder:"Adddress TON"},value:1,validation:{minValue:0,maxValue:7,required:!0,isNumeric:!0},valid:!0,validationMessage:""},addr_npi:{elementType:"numeric",elementConfig:{max:15,min:0,placeholder:"Address NPI"},value:1,validation:{minValue:0,maxValue:15,required:!0,isNumeric:!0},valid:!0,validationMessage:""},enquirelink_period:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Enquire Link Period"},value:6e4,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},enquirelink_timeout:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Enquire Link Timeout"},value:6e4,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},window_size:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Window Size"},value:10,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},registered_delivery:{elementType:"numeric",elementConfig:{max:255,min:0,placeholder:"Registered Delivery"},value:1,validation:{minValue:0,maxValue:255,required:!0,isNumeric:!0},valid:!0,validationMessage:""},bind_count:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Bind Count"},value:1,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},mps:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"MPS"},value:0,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},msg_id_type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!0,placeholder:"Message Type"},valid:!0,value:null,data:Bj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},note:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{required:!1,maxLength:1e3},style:{height:"50px"},valid:!0,validationMessage:""},active:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!0,placeholder:"Active"},validation:{required:!0},valid:!0,value:null,data:Gj,textField:"name",dataItemKey:"id",validationMessage:""}});null==te&&(e.site_id.value=null==T?"":T,e.connection_type.value={id:"transceiver",name:"Transceiver"},e.default_alphabet.value={id:"gsm7",name:"GSM7"},t.active.value={id:"yes",name:"Yes"},t.msg_id_type.value={id:"nochange",name:"No Change"},J(e),$(t))}),[He,T,te]),i.a.useEffect((function(){var e={link_id:{elementType:"input",elementConfig:{placeholder:"Link ID",readOnly:!0},value:"",validation:{required:!1},valid:!0,validationMessage:""},link_name:{elementType:"input",elementConfig:{placeholder:"Link Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},host:{elementType:"input",elementConfig:{placeholder:"Host"},value:"",validation:{required:!0,isDomain:!0},valid:!0,validationMessage:""},port:{elementType:"numeric",elementConfig:{max:2147483647,min:0,format:"#",placeholder:"Port"},value:0,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},password:{elementType:"input",elementConfig:{placeholder:"Password"},value:"",validation:{required:!0},valid:!0,validationMessage:""},system_id:{elementType:"input",elementConfig:{placeholder:"System ID"},value:"",validation:{required:!0},valid:!0,validationMessage:""},system_type:{elementType:"input",elementConfig:{placeholder:"System Type"},value:"",validation:{required:!1},valid:!0,validationMessage:""},connection_type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!0,placeholder:"Connection Type"},valid:!0,value:null,data:Vj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},is_ssl:{elementType:"checkbox",elementConfig:{placeholder:"SSL"},value:!1,validation:{required:!0},valid:!0,validationMessage:""},default_alphabet:{elementType:"combo",elementConfig:{placeholder:"Default Alphabet"},data:zj,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""},site_id:{elementType:"input",elementConfig:{placeholder:"Site ID",readOnly:!0},value:"",validation:{required:!0},valid:!0,validationMessage:""}},t={addr_ton:{elementType:"numeric",elementConfig:{max:7,min:0,placeholder:"Address TON"},value:0,validation:{minValue:0,maxValue:7,required:!0,isNumeric:!0},valid:!0,validationMessage:""},addr_npi:{elementType:"numeric",elementConfig:{min:0,max:15,placeholder:"Address NPI"},value:0,validation:{required:!0,isNumeric:!0},valid:!0,validationMessage:""},enquirelink_period:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Enquire Link Period"},value:0,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},enquirelink_timeout:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Enquire Link Timeout"},value:0,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},window_size:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Window Size"},value:0,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},registered_delivery:{elementType:"numeric",elementConfig:{max:255,min:0,placeholder:"Registered Delivery"},value:0,validation:{minValue:0,maxValue:255,required:!0,isNumeric:!0},valid:!0,validationMessage:""},bind_count:{elementType:"numeric",elementConfig:{max:2147483647,min:0,placeholder:"Bind Count"},value:0,validation:{minValue:0,maxValue:2147483647,required:!0,isNumeric:!0},valid:!0,validationMessage:""},mps:{elementType:"numeric",elementConfig:{min:0,placeholder:"MPS"},value:0,validation:{required:!0,isNumeric:!0},valid:!0,validationMessage:""},msg_id_type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!0,placeholder:"Message Type"},valid:!0,value:null,data:Bj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},note:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{required:!1,maxLength:1e3},style:{height:"50px"},valid:!0,validationMessage:""},active:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!0,placeholder:"Active"},valid:!0,value:null,data:Gj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.link_id.elementConfig.disabled=!1===De,e.link_id.value=Fe.getIn([y,"link_id"]),e.link_name.elementConfig.disabled=!1===De,e.link_name.value=Fe.getIn([y,"link_name"]),e.host.elementConfig.disabled=!1===De,e.host.value=Fe.getIn([y,"host"]),e.port.elementConfig.disabled=!1===De,e.port.value=Fe.getIn([y,"port"]),e.password.elementConfig.disabled=!1===De,e.password.value=Fe.getIn([y,"password"]),e.system_id.elementConfig.disabled=!1===De,e.system_id.value=Fe.getIn([y,"system_id"]),e.system_type.elementConfig.disabled=!1===De,e.system_type.value=Fe.getIn([y,"system_type"]),e.connection_type.elementConfig.disabled=!1===De,e.connection_type.value={id:Fe.getIn([y,"connection_type"]),name:"transmitter"===Fe.getIn([y,"connection_type"])?"Transmitter":"receiver"===Fe.getIn([y,"connection_type"])?"Receiver":"transceiver"===Fe.getIn([y,"connection_type"])?"Transceiver":"transmitter_receiver"===Fe.getIn([y,"connection_type"])?"Transmitter Receiver":""},e.is_ssl.elementConfig.disabled=!1===De,e.is_ssl.value="no"!==Fe.getIn([y,"is_ssl"]),e.default_alphabet.elementConfig.disabled=!1===De,e.default_alphabet.value={id:Fe.getIn([y,"default_alphabet"]),name:"gsm7"===Fe.getIn([y,"default_alphabet"])?"GSM7":"latin1"===Fe.getIn([y,"default_alphabet"])?"Latin1":"utf8"===Fe.getIn([y,"default_alphabet"])?"UTF8":""},e.site_id.elementConfig.disabled=!1===De,e.site_id.value=Fe.getIn([y,"site_id"]),t.addr_ton.elementConfig.disabled=!1===De,t.addr_ton.value=Fe.getIn([y,"optional_settings","addr_ton"]),t.addr_npi.elementConfig.disabled=!1===De,t.addr_npi.value=Fe.getIn([y,"optional_settings","addr_npi"]),t.enquirelink_period.elementConfig.disabled=!1===De,t.enquirelink_period.value=Fe.getIn([y,"optional_settings","enquirelink_period"]),t.enquirelink_timeout.elementConfig.disabled=!1===De,t.enquirelink_timeout.value=Fe.getIn([y,"optional_settings","enquirelink_timeout"]),t.window_size.elementConfig.disabled=!1===De,t.window_size.value=Fe.getIn([y,"optional_settings","window_size"]),t.registered_delivery.elementConfig.disabled=!1===De,t.registered_delivery.value=Fe.getIn([y,"optional_settings","registered_delivery"]),t.bind_count.elementConfig.disabled=!1===De,t.bind_count.value=Fe.getIn([y,"optional_settings","bind_count"]),t.mps.elementConfig.disabled=!1===De,t.mps.value=Fe.getIn([y,"optional_settings","mps"]),t.msg_id_type.elementConfig.disabled=!1===De,t.msg_id_type.value={id:Fe.getIn([y,"optional_settings","msg_id_type"]),name:"nochange"===Fe.getIn([y,"optional_settings","msg_id_type"])?"No Change":"hexdec"===Fe.getIn([y,"optional_settings","msg_id_type"])?"HexDec":"dechex"===Fe.getIn([y,"optional_settings","msg_id_type"])?"DecHex":""},t.note.elementConfig.disabled=!1===De,t.note.value=Fe.getIn([y,"note"]),t.active.elementConfig.disabled=!1===De,t.active.value={id:Fe.getIn([y,"active"]),name:"yes"===Fe.getIn([y,"active"])?"Yes":"no"===Fe.getIn([y,"active"])?"No":""},ue(e),je(t)}),[y,Fe,De]);var Be=i.a.useCallback((function(e){V(!0),v(e)}),[]),Ve=i.a.useCallback((function(){ge(!pe),He()}),[He,pe]),ze=i.a.useCallback((function(){E(null)}),[E]),We=i.a.useCallback((function(){P(null)}),[P]),Ke=Object(l.d)((function(e){return e.supplier.getIn([t,"supplier_name"])}));i.a.useEffect((function(){var e=Ge.get("connection_name");return null==e||null==Ke?(r("Connection Modification"),s("Connection Modification")):(r("".concat(Ke,"'s ").concat(e," Connection Modification")),s("".concat(Ke,"'s ").concat(e," Connection Modification"))),u([{link:"/suppliers",name:"Suppliers"},{name:Ke},{link:"/suppliers/".concat(t,"/connections/"),name:"Connections"},{name:a.toUpperCase()},{name:e}]),function(){r(null),u([])}}),[r,Ge,t,s,Ke,a,u]);var Je=i.a.useCallback((function(){var e=Object.assign(Wj());e.site_id.value=T;var i=ke(),c=i.controls,r=i.invalidMessages,s=we(),l=s.controls,o=s.invalidMessages;J(c),$(l);var u=[].concat(Object(x.a)(r),Object(x.a)(o));if(u.length>0)Te({message:Object(Ka.jsx)(Mm,{messageList:u}),severity:"error",action:{label:"Dismiss"}});else{var d={link_id:c.link_id.value,link_name:c.link_name.value,host:c.host.value,port:c.port.value,password:c.password.value,system_id:c.system_id.value,system_type:c.system_type.value,connection_type:c.connection_type.value.id,is_ssl:!1===c.is_ssl.value?"no":"yes",default_alphabet:c.default_alphabet.value.id,site_id:c.site_id.value,optional_settings:{addr_ton:l.addr_ton.value,addr_npi:l.addr_npi.value,enquirelink_period:l.enquirelink_period.value,enquirelink_timeout:l.enquirelink_timeout.value,window_size:l.window_size.value,registered_delivery:l.registered_delivery.value,bind_count:l.bind_count.value,mps:l.mps.value,msg_id_type:l.msg_id_type.value.id},note:l.note.value,active:l.active.value.id};re(!0),ne(d),h(Jc(t,d,a,n)).then((function(){return Te({severity:"success",message:"Supplier Connection Link Successfully Created"}),P(null),q(!1),ne(null),J(e),h(Gc(t,a,n))})).catch((function(e){J(c),$(l),Te({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){re(!1)}))}}),[h,Te,ke,we,t,a,n,T]),Ye=i.a.useCallback((function(){var e=Object.keys(O).reduce((function(e,t){var n=e.controls[t],a=ei(n.value,n.validation);return""!==a?(n.valid=!1,n.validationMessage=n.elementConfig.placeholder+a,e.invalidMessages.push(n.validationMessage)):(n.valid=!0,n.validationMessage=""),e}),{invalidMessages:[],controls:Object.assign({},O)}),i=e.invalidMessages,c=e.controls;if(v(c),i.length>0)Te({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{re(!0);var r="smpp"===a?{connection_name:c.connection_name.value,connection_currency:c.connection_currency.value.id,support_virtual_number:c.support_virtual_number.value.id}:{};h(Tl(t,r,a,n)).then((function(){return Te({severity:"success",message:"Supplier Connection Successfully Edited"}),h(Sl(t,n,a))})).catch((function(e){Te({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){re(!1),ge(!1),V(!1)}))}}),[h,Te,O,t,a,n]),Qe=i.a.useCallback((function(){var e=Ee(),i=e.controls,c=e.invalidMessages,r=Ie(),s=r.controls,l=r.invalidMessages;ue(i),je(s);var o=[].concat(Object(x.a)(c),Object(x.a)(l));if(o.length>0)Te({message:Object(Ka.jsx)(Mm,{messageList:o}),severity:"error",action:{label:"Dismiss"}});else{var u={link_id:i.link_id.value,link_name:i.link_name.value,host:i.host.value,port:i.port.value,password:i.password.value,system_id:i.system_id.value,system_type:i.system_type.value,connection_type:i.connection_type.value.id,is_ssl:!1===i.is_ssl.value?"no":"yes",default_alphabet:i.default_alphabet.value.id,site_id:i.site_id.value,optional_settings:{addr_ton:s.addr_ton.value,addr_npi:s.addr_npi.value,enquirelink_period:s.enquirelink_period.value,enquirelink_timeout:s.enquirelink_timeout.value,window_size:s.window_size.value,registered_delivery:s.registered_delivery.value,bind_count:s.bind_count.value,mps:s.mps.value,msg_id_type:s.msg_id_type.value.id},note:s.note.value,active:s.active.value.id};re(!0),h(Yc(t,u,a,n,y)).then((function(){return Te({severity:"success",message:"Supplier Connection Link Successfully Edited"}),E(null),h(Gc(t,a,n))})).catch((function(e){Te({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){re(!1),q(!1)}))}}),[h,Te,Ee,Ie,t,a,n,y]);return!0===ce?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:xe}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"smpp"===a?"TogglePanel SmppConnectionEditAddCard":"http"===a?"TogglePanel RestConnectionEditAddCard":"web"===a?"TogglePanel WebConnectionEditAddCard":"",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsxs)(w.f,{children:[a.toUpperCase()," Connection Details"]})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{isEdit:pe,controls:O,onControlsChange:Be})})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:!1===pe?Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return f.push("/suppliers/".concat(t,"/connections/"))},children:"Go Back"}),!0===De&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ve,children:"Edit"})]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Ve,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ye,children:"Save"})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Sites"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(xh,{supplierID:t,onLinkEdit:Ue,onLinkAdd:qe})})]})}),!0===ve&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("hr",{}),Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsx)("span",{id:Se,children:"Connection Link Details"})})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:oe,onControlsChange:Me})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:be,onControlsChange:Ne})})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:ze,children:"Cancel"}),!0===De&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Qe,children:"Save"})]})]})]}),!0===Oe&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("hr",{}),Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsxs)("span",{id:ye,children:[A," Link Creation"]})})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:K,onControlsChange:Re})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:X,onControlsChange:Ae})})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:We,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Je,children:"Save"})]})]})]})]})]})}var _h=i.a.memo(Ch);function yh(e){var t=e.linkID,n=e.isLoading,a=void 0!==n&&n,c=e.onSubmit,r=e.onCancel,s=b(),u=Object(l.c)(),d=i.a.useMemo((function(){return Object(Rd.a)()}),[]),j=bm(r),f=i.a.useState(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(),v=Object(o.a)(O,2),C=v[0],_=v[1],y=oj(C),E=i.a.useState(""),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(""),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState(null),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState([]),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState([]),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useMemo((function(){return{required:!0}}),[]),Y=i.a.useMemo((function(){return{required:!0}}),[]),Q=i.a.useState(new m.e),X=Object(o.a)(Q,2),$=X[0],Z=X[1],ee=i.a.useState(!1),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],ie=i.a.useMemo((function(){return $.toJS()}),[$]),ce=i.a.useMemo((function(){return null!=t?t:Object(Rd.a)()}),[t]),re=i.a.useMemo((function(){return null==F?null:F.id}),[F]),se=Nm(i.a.useMemo((function(){return[{label:"Link Name",value:D,setErrors:B,validations:J},{label:"HTTP Provider",value:F,setErrors:K,validations:Y}]}),[D,B,J,F,K,Y])),le=i.a.useMemo((function(){return s.has("API:SUPPLIER_CONNECTION:WRITE")}),[s]),oe=i.a.useCallback((function(e){u(Ui(e))}),[u]),ue=Object(l.d)((function(e){var n=e.httpProvider,a=e.supplierConnectionLink;return{httpProvider:n,link:null==t?null:a.get(t)}})),de=ue.link,me=ue.httpProvider,be=i.a.useMemo((function(){var e=me.getIn([re,"fields"]);return null==e?[]:e.toJS()}),[me,re]),je=i.a.useMemo((function(){if(null!=de&&de.get("provider_id")===re)return de.get("provider_fields")}),[de,re]),fe=Mj(be),he=Nj(be,je);i.a.useEffect((function(){if(null!=re)return ae(!0),u(vd(re)).catch((function(e){console.error(e),oe({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){ae(!1)})),function(){return u({type:ba,data:{id:re}})}}),[u,oe,re]),i.a.useEffect((function(){var e=me.reduce((function(e,t){return e.add(new m.b({id:t.get("id"),name:t.get("name")}))}),new m.e);!0!==e.equals($)&&Z(e)}),[me,$]),i.a.useEffect((function(){T(null==de?"":de.get("link_name")),A(null==de?"":de.get("note")),U(null==de?null:ie.find((function(e){return e.id===de.get("provider_id")})))}),[de,ie]),i.a.useEffect((function(){var e=Object.assign({},fe);be.forEach((function(t){var n=t.field_id;null!=e[n]&&(e[n].flexSize=6,e[n].value=he[n])})),_(e)}),[he,be,fe]),i.a.useEffect((function(){g(!1)}),[t]),i.a.useLayoutEffect((function(){window.location.hash="#".concat(ce)}),[ce]);var pe=i.a.useCallback((function(){g(!0)}),[]),ge=i.a.useCallback((function(e){g(!0),_(e)}),[]),Oe=i.a.useCallback((function(){if("function"===typeof c){var e=se(),t=y(),n=t.controls,a=t.invalidMessages;_(n),e.push.apply(e,Object(x.a)(a)),c({name:D,note:R,providerID:null==F?null:F.id,fields:be.map((function(e){var t,a=e.field_id;return{field_id:a,value:(t=n[a],String("combo"!==t.elementType?t.value:t.value&&t.value.id))}}))},e)}}),[D,R,F,se,c,be,y]);return!0===a?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:p}),Object(Ka.jsx)("span",{id:ce}),Object(Ka.jsx)("div",{"aria-labelledby":d,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsx)("span",{id:d,children:"Connection Link Details"})})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:!0===le?Object(Ka.jsx)(fm,{variant:"Input",label:"Link Name",value:D,onChange:T,errors:H,onDirtyChange:pe,validations:J,onErrorsChange:B}):Object(Ka.jsx)(cj,{label:"Link Name",value:D})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:!0===le?Object(Ka.jsx)(fm,{variant:"Combobox",label:"HTTP Provider",value:F,onChange:U,errors:W,data:ie,onDirtyChange:pe,validations:Y,onErrorsChange:K}):Object(Ka.jsx)(cj,{label:"HTTP Provider",value:null==F?"":F.name})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:!0===le?Object(Ka.jsx)(fm,{variant:"TextArea",label:"Note",value:R,onChange:A,onDirtyChange:pe}):Object(Ka.jsx)(cj,{label:"Note",value:R})})]})}),null!=re&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:!0===ne?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"loader"})}):Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Provider Settings"}),Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:C,isEdit:le,onControlsChange:ge})})]})})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:j,children:"Cancel"}),!0===le&&null!=re&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Oe,children:"Save"})]})]})})]})}var Sh=i.a.memo(yh),kh="http";function wh(e){var t=e.supplierID,n=e.connectionID,a=Object(l.c)(),c=i.a.useState(!0),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState(!1),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useState(null),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useCallback((function(e){a(Ui(e))}),[a]),v=Object(l.d)((function(e){return{supplierConnectionLink:e.supplierConnectionLink}})).supplierConnectionLink,x=i.a.useCallback((function(){a(pd()),a(Hl())}),[a]),C=i.a.useCallback((function(){return x(),Promise.all([a(Od()),a(Gc(t,kh,n))])}),[a,x,t,n]);i.a.useEffect((function(){return u(!0),C().catch((function(e){O({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return u(!1)})),function(){return x()}}),[a,O,x,C]);var _=i.a.useCallback((function(e,t){g({siteID:t})}),[]),y=i.a.useCallback((function(e){g({linkID:e})}),[]),S=i.a.useCallback((function(){g(null)}),[]),k=i.a.useCallback((function(e,i){if(i.length>0)O({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{j(!0);var c=p.linkID,r=p.siteID,s={note:e.note,link_name:e.name,provider_id:e.providerID,provider_fields:e.fields,site_id:null!=r?r:v.getIn([c,"site_id"])};a(null==c?Jc(t,s,kh,n):Yc(t,s,kh,n,c)).then((function(){return O({severity:"success",message:null==r?"HTTP / REST API Connection Link Successfully Updated":"HTTP / REST API Connection Link Successfully Created"}),u(!0),j(!1),C()})).then((function(){g(null)})).catch((function(e){O({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return u(!1)}))}}),[a,O,t,n,C,p,v]);return!0===s?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Sites"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(xh,{onLinkAdd:_,onLinkEdit:y,supplierID:t})})]}),null!=p&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("hr",{}),Object(Ka.jsx)(Sh,{onSubmit:k,onCancel:S,isLoading:b,linkID:p.linkID})]})]})}var Eh=i.a.memo(wh),Ih="http";function Dh(e){var t=e.supplierID,n=e.connectionID,a=b(),c=Object(d.h)(),r=Object(l.c)(),s=i.a.useMemo((function(){return Object(Rd.a)()}),[]),u=i.a.useState(!1),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(!1),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useState(""),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState([]),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState([]),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useMemo((function(){return{required:!0}}),[]),V=i.a.useMemo((function(){return{required:!0}}),[]),z=i.a.useCallback((function(e){r(Ui(e))}),[r]),W=i.a.useMemo((function(){return a.has("API:SUPPLIER_CONNECTION:WRITE")}),[a]),K=Object(l.d)((function(e){return{currencies:e.currency,connection:e.supplierConnection.get(n)}})),J=K.currencies,Y=K.connection,Q=Nm(i.a.useMemo((function(){return[{label:"Connection Name",value:I,setErrors:F,validations:B},{label:"Connection Currency",value:N,setErrors:H,validations:V}]}),[I,F,B,N,H,V])),X=i.a.useMemo((function(){return J.reduce((function(e,t){return e.push({id:t.get("currency"),name:t.get("currency")}),e}),[])}),[J]),$=i.a.useCallback((function(){D(null==Y?"":Y.get("connection_name")),R(null==Y?null:X.find((function(e){return e.id===Y.get("connection_currency")})))}),[Y,X]);i.a.useEffect((function(){!0!==g&&($(),_(!1))}),[$,g]);var Z=i.a.useCallback((function(){return r(Ac())}),[r]),ee=i.a.useCallback((function(){return Z(),r(Sl(t,n,Ih))}),[r,t,n,Z]);i.a.useEffect((function(){return f(!0),ee().catch((function(e){z({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return f(!1)})),function(){return Z()}}),[z,Z,ee]);var te=i.a.useCallback((function(){O(!g)}),[g]),ne=i.a.useMemo((function(){return null==Y?null:Y.get("connection_name")}),[Y]),ae=i.a.useMemo((function(){return null==Y?null:Y.get("connection_currency")}),[Y]),ie=i.a.useCallback((function(){var e=Q();e.length>0?z({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):(f(!0),r(Tl(t,{connection_name:I,connection_currency:N.id},Ih,n)).then((function(){return O(!1),z({severity:"success",message:"HTTP / REST API Connection Successfully Updated"}),ee()})).catch((function(e){z({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return f(!1)})))}),[I,N,r,z,t,n,Q,ee]),ce=i.a.useCallback((function(){_(!0)}),[]);return!0===j?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:C}),Object(Ka.jsx)("div",{"aria-labelledby":s,children:Object(Ka.jsxs)(w.a,{className:"RestConnectionEditAddCard",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsx)("span",{id:s,children:"HTTP / REST API Connection Details"})})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:!0===g?Object(Ka.jsx)(fm,{variant:"Input",label:"Connection Name",value:I,onChange:D,errors:L,onDirtyChange:ce,validations:B,onErrorsChange:F}):Object(Ka.jsx)(cj,{label:"Connection Name",value:ne})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:!0===g?Object(Ka.jsx)(fm,{variant:"Combobox",label:"Connection Currency",value:N,onChange:R,errors:G,data:X,onDirtyChange:ce,validations:V,onErrorsChange:H}):Object(Ka.jsx)(cj,{label:"Connection Currency",value:ae})})]})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:!1===g?Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return c.push("/suppliers/".concat(t,"/connections/"))},children:"Go Back"}),!0===W&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:te,children:"Edit"})]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:te,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ie,children:"Save"})]})})]})})]})}var Th=i.a.memo(Dh);function Mh(e){var t=e.supplierID,n=e.connectionID,a=i.a.useContext(Tm),c=a.setTitle,r=a.setBreadcrumbs,s=a.setContentTitle,o=Object(l.d)((function(e){return{supplier:e.supplier,supplierConnection:e.supplierConnection}})),u=o.supplier,d=o.supplierConnection;return i.a.useEffect((function(){var e=u.getIn([t,"supplier_name"]),a=d.getIn([n,"connection_name"]);return null==a||null==e?(c("Connection Modification"),s("Connection Modification")):(c("".concat(e,"'s ").concat(a," Connection Modification")),s("".concat(e,"'s ").concat(a," Connection Modification"))),r([{link:"/suppliers",name:"Suppliers"},{name:e},{link:"/suppliers/".concat(t,"/connections/"),name:"Connections"},{name:"http".toUpperCase()},{name:a}]),function(){c(null),r([])}}),[c,u,t,n,r,s,d]),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Th,{supplierID:t,connectionID:n})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Eh,{supplierID:t,connectionID:n})})]})}var Nh=i.a.memo(Mh);function Rh(e){var t=e.supplierID,n=Object(d.j)(),a=n.connectionID,c=n.connectionType,r=i.a.useMemo((function(){return"http"===c?Nh:_h}),[c]);return Object(Ka.jsx)(r,{supplierID:t,connectionID:a,connectionType:c})}var Ah=i.a.memo(Rh);function Ph(e){var t=e.supplierID,n=Object(d.j)().connectionType,a=Object(d.h)(),c=Object(l.c)(),r=i.a.useState(),s=Object(o.a)(r,2),u=s[0],m=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),O=g[0],v=g[1],C=oj(u),_=i.a.useCallback((function(e){c(Ui(e))}),[c]),y=Object(l.d)((function(e){return e.currency}));i.a.useEffect((function(){var e=Object.assign("smpp"===n?{connection_name:{elementType:"input",elementConfig:{placeholder:"Connection Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},connection_currency:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Connection Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},support_virtual_number:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Virtual Numbers"},valid:!0,value:null,data:Hj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}}:"http"===n?{connection_name:{elementType:"input",elementConfig:{placeholder:"Connection Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},connection_currency:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Connection Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}}:"");e.connection_currency.data=Object(x.a)(y.values()).map((function(e){return{id:e.get("currency"),name:e.get("currency")}})),m(e)}),[n,y]);var E=i.a.useCallback((function(e){v(!0),m(e)}),[]),I=i.a.useCallback((function(){var e=C(),i=e.invalidMessages,r=e.controls;if(m(r),i.length>0)_({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{h(!0);var s="smpp"===n?{connection_name:r.connection_name.value,connection_currency:r.connection_currency.value.id,support_virtual_number:r.support_virtual_number.value.id}:"http"===n?{connection_name:r.connection_name.value,connection_currency:r.connection_currency.value.id}:{};c(function(e,t,n){return function(){return Dc.post("/".concat(e,"/connections/").concat(n),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,s,n)).then((function(){return _({severity:"success",message:"Supplier Connection Successfully Added"}),c(yl(t))})).then((function(){v(!1),a.push("/suppliers/".concat(t,"/connections/"))})).catch((function(e){_({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){h(!1)}))}}),[c,a,C,_,t,n]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:O}),Object(Ka.jsxs)(w.a,{className:"smpp"===n?"TogglePanel SmppConnectionEditAddCard":"http"===n?"TogglePanel RestConnectionEditAddCard":"web"===n?"TogglePanel WebConnectionEditAddCard":"",children:[Object(Ka.jsx)(w.d,{children:"http"===n?Object(Ka.jsx)(w.f,{children:"Add HTTP API / REST Connection"}):Object(Ka.jsxs)(w.f,{children:["Add ",n.toUpperCase()," Connection"]})}),Object(Ka.jsx)(w.c,{children:!0===f?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:u,onControlsChange:E})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return a.push("/suppliers/".concat(t,"/connections/"))},children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:I,disabled:!0===f,children:"Save"})]})]})]})}var Lh=i.a.memo(Ph);function Fh(e){var t=e.supplierID,n=i.a.useMemo((function(){return"/suppliers/".concat(t,"/connections")}),[t]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:n,exact:!0,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(ph,{supplierID:t})})}),Object(Ka.jsxs)(d.c,{path:"".concat(n,"/:connectionType"),exact:!0,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(ph,{supplierID:t})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(Lh,{supplierID:t})})]}),Object(Ka.jsx)(d.c,{path:"".concat(n,"/:connectionType/:connectionID"),children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(Ah,{supplierID:t})})})]})})}var Uh=i.a.memo(Fh);function qh(e){var t=e.supplierID,n=Object(d.j)().commitmentID,a=i.a.useContext(Tm),c=a.setTitle,r=a.setContentTitle,s=a.setBreadcrumbs,u=b(),m=Object(d.h)(),j=Object(l.c)(),f=i.a.useState(),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(),v=Object(o.a)(O,2),C=v[0],_=v[1],y=i.a.useState(),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(!0),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(0),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(!1),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useState([]),$=Object(o.a)(X,2),Z=$[0],ee=$[1],te=i.a.useState([]),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=oj(p),re=oj(C),se=oj(I),le=oj(z),oe=oj(Y),ue="new"===n,de=i.a.useMemo((function(){return u.has("API:SUPPLIER_COMMITMENT:WRITE")}),[u]),me=Object(l.d)((function(e){return{country:e.country,network:e.network,supplier:e.supplier,currency:e.currency,supplierConnection:e.supplierConnection,supplierCommitment:e.supplierCommitment.get(n)}})),be=me.country,je=me.network,fe=me.supplier,he=me.currency,pe=me.supplierConnection,ge=me.supplierCommitment,Oe=i.a.useMemo((function(){return Object(x.a)(je.values()).reduce((function(e,t){if(null==t.get("country_id"))return e;if(Z.includes(t.get("network_id")))return e;var n=e[t.get("country_id")]||[];return n.push(t.toJS()),e[t.get("country_id")]=n,e}),{})}),[je,Z]),ve=i.a.useState({skip:0,take:20}),xe=Object(o.a)(ve,2),Ce=xe[0],_e=xe[1],ye=i.a.useState({skip:0,take:20}),Se=Object(o.a)(ye,2),ke=Se[0],we=Se[1],Ee=i.a.useState({skip:0,take:20}),Ie=Object(o.a)(Ee,2),De=Ie[0],Te=Ie[1],Me=i.a.useCallback((function(e){j(Ui(e))}),[j]),Ne=i.a.useCallback((function(e){F(e.selected)}),[]);i.a.useEffect((function(){var e=[j(yl(t))];return!1===ue&&e.push(j(function(e,t){return function(n){return Dc.get("".concat(e,"/commitments/").concat(t)).then((function(a){n(Zc(a.data)),n(hl(e,t))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n))),Promise.all(e).then((function(){if(!0!==ue)return Promise.all([j(kl(t,n)),j(wl(t,n))])})).then((function(){R(!1)})).catch((function(e){Me({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){j(Ac()),j($c())}}),[j,Me,ue,t,n]),i.a.useEffect((function(){null!=ge&&(null!=ge.get("networks")&&ee(ge.get("networks").toJS()),null!=ge.get("connections")&&ie(ge.get("connections").toJS()))}),[ge]),i.a.useEffect((function(){var e={name:{flexSize:12,elementType:"input",elementConfig:{placeholder:"Commitment Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""}},t={volume:{flexSize:12,elementType:"numeric",elementConfig:{min:0,placeholder:"Volume"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""}},n={currency:{elementType:"combo",clearButton:!0,elementConfig:{allowCustom:!1,placeholder:"Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},cost:{elementType:"numeric",elementConfig:{min:0,placeholder:"Cost"},value:null,validation:{isNumeric:!0,minValue:0,required:!0},valid:!0,validationMessage:""}};if(n.currency.data=Object(x.a)(he.values()).map((function(e){return{id:e.get("currency"),name:e.get("currency")}})),null!=ge&&(e.name.elementConfig.disabled=!1===de,t.volume.elementConfig.disabled=!1===de,n.cost.elementConfig.disabled=!1===de,n.currency.elementConfig.disabled=!1===de,e.name.value=ge.get("commitment_name"),t.volume.value=ge.get("commitment_volume"),n.cost.value=ge.get("commitment_cost"),null!=ge.get("commitment_currency")&&(F(1),n.currency.value={id:ge.get("commitment_currency"),name:ge.get("commitment_currency")})),null!=n.currency.value){var a=he.getIn([n.currency.value.id,"settings"]);n.cost.elementConfig.format={style:"currency",currencyDisplay:"code",currency:n.currency.value.id,minimumFractionDigits:null!=a&&a.decimal_places}}g(e),_(t),D(n)}),[he,ge,de]),i.a.useEffect((function(){var e={period:{flexSize:12,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Period"},valid:!0,value:null,data:Object.keys(qj).map((function(e){return qj[e]})),textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};if(e.period.value=e.period.data[0],null!=ge&&null!=ge.get("commitment_period")&&(e.period.value={id:ge.get("commitment_period"),name:qj[ge.get("commitment_period")].name}),Object.assign(e,Gh(e.period.value.id)),null!=ge){e.period.elementConfig.disabled=!1===de,e.time.elementConfig.disabled=!1===de;var t=new Date(ge.get("commitment_date"));switch(e.period.value.id){case qj.daily.id:e.time.value=t;break;case qj.weekly.id:e.time.value=t,e.dayOfWeek.value=Uj[t.getDay()];break;case qj.monthly.id:e.time.value=t,e.day.value={id:t.getDate(),name:String(t.getDate())}}}W(e)}),[ge,de]);var Re=i.a.useCallback((function(){var e={country:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Country"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},network:{selected:!1,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Network"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.country.data=ai(Object.keys(Oe).reduce((function(e,t){var n=be.get(t);return null==n||e.push({id:t,name:n.get("country_name")}),e}),[])),e.country.value="",e.network.value="",e.network.selected=!1,Q(e)}),[be,Oe]);i.a.useEffect((function(){Re()}),[Re]),i.a.useEffect((function(){if(null!=C){var e=0===L;_(["volume"].reduce((function(t,n){if(t[n].validation.required===e)return t;var a=Object.assign({},t);return a[n].validation.required=e,!1===e&&(a[n].value=null),a}),C))}}),[L,C]),i.a.useEffect((function(){if(null!=I){var e=1===L;D(["cost","currency"].reduce((function(t,n){if(t[n].validation.required===e)return t;var a=Object.assign({},t);return a[n].validation.required=e,!1===e&&(a[n].value=null),a}),I))}}),[L,I]);var Ae=Object(l.d)((function(e){return e.supplier.getIn([t,"supplier_name"])})),Pe=Object(l.d)((function(e){return e.supplierCommitment.getIn([n,"commitment_name"])}));i.a.useEffect((function(){return!0===ue?(c("Commitment Creation"),r("Commitment Creation")):null==Ae||null==Pe?(c("Commitment Modification"),r("Commitment Modification")):(c("".concat(Ae,"'s ").concat(Pe," Commitment Modification")),r("".concat(Ae,"'s ").concat(Pe," Commitment Modification"))),s([{link:"/suppliers",name:"Suppliers"},{name:Ae},{link:"/suppliers/".concat(t,"/commitments/"),name:"Commitments"},{name:!0===ue?null:Pe}]),function(){c(null),s([])}}),[ue,c,t,Ae,r,Pe,s]);var Le=i.a.useCallback((function(e){_e(e.dataState)}),[]),Fe=i.a.useCallback((function(e){we(e.dataState)}),[]),Ue=i.a.useCallback((function(e){Te(e.dataState)}),[]),qe=i.a.useCallback((function(e){H(!0),g(e)}),[]),Ge=i.a.useCallback((function(e){H(!0),D(e)}),[]),He=i.a.useCallback((function(e){H(!0),_(e)}),[]),Be=i.a.useCallback((function(e){W(e)}),[]),Ve=i.a.useCallback((function(e){Q(e)}),[]),ze=Kb(I,Ge),We=Kb(z,Be),Ke=Kb(Y,Ve),Je=i.a.useCallback((function(e,t){if(ze(e,t),"currency"===t){var n=Object.assign({},I);if(null!=e.value&&null!=e.value.id){var a=he.getIn([n.currency.value.id,"settings"]);n.cost.elementConfig.format={style:"currency",currencyDisplay:"code",currency:n.currency.value.id,minimumFractionDigits:null!=a&&a.decimal_places}}D(n)}}),[I,he,ze]),Ye=i.a.useCallback((function(e,t){if(We(e,t),"period"===t){var n=Object.assign({},z);delete n.day,delete n.time,delete n.dayOfWeek,Object.assign(n,Gh(null!=e.value&&null!=e.value.id?e.value.id:qj.daily.id)),W(n)}}),[z,We]),Qe=i.a.useCallback((function(e,t){if(Ke(e,t),"country"===t){var n=Object.assign({},Y);Object.assign(n.network,{value:"",selected:null!=n.country.value,data:null==n.country.value?[]:[{id:"all",name:"All"}].concat(Object(x.a)(Oe[n.country.value.id].map((function(e){return{id:e.network_id,name:e.network_name}}))))}),Q(n)}}),[Y,Oe,Ke]),Xe=i.a.useCallback((function(e){H(!0);var t=Object(x.a)(ae);t.push(e),ie(Object(x.a)(new Set(t)))}),[ae]),$e=i.a.useCallback((function(e){var t=Object(x.a)(ae),n=t.indexOf(e);-1!==n&&(H(!0),t.splice(n,1),ie(t))}),[ae]),Ze=i.a.useCallback((function(){var e=oe(),t=e.invalidMessages,n=e.controls;if(t.length>0)return Me({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}}),void Q(n);var a=Object(x.a)(Z);"all"===n.network.value.id?a.push.apply(a,Object(x.a)(Oe[n.country.value.id].map((function(e){return e.network_id})))):a.push(n.network.value.id),ee(Object(x.a)(new Set(a))),H(!0),Re()}),[Me,Oe,Z,Re,oe]),et=i.a.useCallback((function(e){var t=Object(x.a)(Z),n=t.indexOf(e);-1!==n&&(H(!0),t.splice(n,1),ee(t))}),[Z]),tt=i.a.useCallback((function(){var e=ce(),a=e.controls,i=e.invalidMessages,c=re(),r=c.controls,s=c.invalidMessages,l=se(),o=l.controls,u=l.invalidMessages,d=le(),b=d.controls,f=d.invalidMessages;g(a),_(r),D(o),W(b);var h=[].concat(Object(x.a)(i),Object(x.a)(s),Object(x.a)(u),Object(x.a)(f));if(h.length>0)Me({message:Object(Ka.jsx)(Mm,{messageList:h}),severity:"error",action:{label:"Dismiss"}});else{R(!0);var p,O,v=null,C=new Date(2020,6,15,12,0);if(b.period.value.id===qj.daily.id?(C.setHours(b.time.value.getHours()),C.setMinutes(b.time.value.getMinutes())):b.period.value.id===qj.weekly.id?(C.setDate(C.getDate()+(b.dayOfWeek.value.id-C.getDay())),C.setHours(b.time.value.getHours()),C.setMinutes(b.time.value.getMinutes())):b.period.value.id===qj.monthly.id&&(C.setDate(b.day.value.id),C.setHours(b.time.value.getHours()),C.setMinutes(b.time.value.getMinutes())),!0===ue)v=j((p=t,O={commitment_date:C.getTime(),commitment_name:Hh(a.name),commitment_cost:Hh(o.cost),commitment_currency:Hh(o.currency),commitment_volume:Hh(r.volume),commitment_period:Hh(b.period)},function(){return Dc.post("/".concat(p,"/commitments"),O).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){var n=[];return Z.length>0&&n.push(j(Dl(t,e.data.commitment_id,Z))),ae.length>0&&n.push(j(Il(t,e.data.commitment_id,ae))),Promise.all(n)}));else{var y=ge.get("networks").toJS(),S=ge.get("connections").toJS(),k=Object(x.a)(new Set([].concat(Object(x.a)(S),Object(x.a)(ae)))).reduce((function(e,t){var n=ae.includes(t),a=S.includes(t);return!0===a&&!1===n&&e.removedConnections.push(t),!1===a&&!0===n&&e.newConnections.push(t),e}),{newConnections:[],removedConnections:[]}),w=k.newConnections,E=k.removedConnections,I=Object(x.a)(new Set([].concat(Object(x.a)(y),Object(x.a)(Z)))).reduce((function(e,t){var n=Z.includes(t),a=y.includes(t);return!0===a&&!1===n&&e.removedNetworks.push(t),!1===a&&!0===n&&e.newNetworks.push(t),e}),{newNetworks:[],removedNetworks:[]}),T=I.newNetworks,M=I.removedNetworks,N=[j(Ml(t,n,{commitment_date:C.getTime(),commitment_name:Hh(a.name),commitment_cost:Hh(o.cost),commitment_currency:Hh(o.currency),commitment_volume:Hh(r.volume),commitment_period:Hh(b.period)}))];M.length>0&&N.push(j(function(e,t,n){return function(){return Dc.delete("/".concat(e,"/commitments/").concat(t,"/networks/").concat(n)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n,M.join(",")))),E.length>0&&N.push(j(function(e,t,n){return function(){return Dc.delete("/".concat(e,"/commitments/").concat(t,"/connections/").concat(n)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n,E.join(",")))),T.length>0&&j(Dl(t,n,T)),w.length>0&&j(Il(t,n,w)),v=Promise.all(N)}v.then((function(){Me({severity:"success",message:!0===ue?"Supplier Commitment Successfully Added":"Supplier Commitment Successfully Edited"}),m.push("/suppliers/".concat(t,"/commitments/"))})).catch((function(e){Me({severity:"error",message:e.message,action:{label:"Dismiss"}}),R(!1),H(!1)}))}}),[ue,m,j,Me,t,n,Z,ge,ae,ce,se,re,le]),nt=sb({variant:"Input"}),at=hj({dataState:De,countryFieldID:"country_name",networkFieldID:"network_name"}),it=at.availableNetworks,ct=sb({variant:"MultiSelect",props:{data:at.availableCountries}}),rt=sb({variant:"MultiSelect",props:{data:it}}),st=sb({variant:"Input",props:{min:0,label:"MCC"}}),lt=sb({variant:"Input",props:{min:0,label:"MNC"}}),ot=i.a.useMemo((function(){var e=[{field:"name",title:"Name",width:"490px",filterCell:nt}];return!0===de&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[nt,de]),ut=i.a.useMemo((function(){var e=[{field:"country",title:"Country",width:"340px",filterCell:ct},{field:"mcc",title:"MCC",filterCell:st},{field:"network",title:"Network",width:"340px",filterCell:rt},{field:"mnc",title:"MNC",filterCell:lt}];return!0===de&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[st,lt,ct,rt,de]),dt=i.a.useMemo((function(){var e=fe.getIn([t,"connections"]);return(null==e?[]:e.toJS()).reduce((function(e,t){if(ae.includes(t))return e;var n=pe.get(t);return null==n||e.push({name:n.get("connection_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"add",title:"Add ".concat(n.get("connection_name")," Connection"),"aria-label":"Add ".concat(n.get("connection_name")," Connection"),onClick:function(){return Xe(t)}})}),e}),[])}),[fe,t,Xe,pe,ae]),mt=i.a.useMemo((function(){return ae.reduce((function(e,t){var n=pe.get(t);return null==n||e.push({name:n.get("connection_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",title:"Remove ".concat(n.get("connection_name")," Connection"),"aria-label":"Remove ".concat(n.get("connection_name")," Connection"),onClick:function(){return $e(t)}})}),e}),[])}),[$e,pe,ae]),bt=i.a.useMemo((function(){return Z.reduce((function(e,t){var n=je.get(t);return null==n||e.push({networkID:t,countryID:n.get("country_id"),network:n.get("network_name"),mcc:n.getIn(["mccmnc",0,"mcc"]),mnc:n.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),country:be.getIn([n.get("country_id"),"country_name"]),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",title:"Remove ".concat(n.get("network_name")," Network"),"aria-label":"Remove ".concat(n.get("network_name")," Network"),onClick:function(){return et(t)}})}),e}),[])}),[je,be,et,Z]);return!0===N?Object(Ka.jsx)(Wm,{height:"630px",className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:G}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Commitment Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:p,onControlsChange:qe}),Object(Ka.jsx)(lj,{controls:z,onDropdownChange:Ye,onControlsChange:Be})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsxs)(w.i,{animation:!1,selected:L,onSelect:Ne,children:[Object(Ka.jsx)(w.j,{title:"Volume",children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:C,onControlsChange:He})})}),Object(Ka.jsx)(w.j,{title:"Cost",children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:I,onDropdownChange:Je,onControlsChange:Ge})})})})})]})})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Outbound Connections"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===de&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:6,children:[Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Available Connections"}),Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:Ce.skip,take:Ce.take,sort:Ce.sort,filter:Ce.filter,columns:ot,data:dt,onDataStateChange:Le})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:!0===de?6:12,children:[!0===de&&Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Included Connections"}),Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:ke.skip,take:ke.take,sort:ke.sort,filter:ke.filter,columns:ot,data:mt,onDataStateChange:Fe})]})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("hr",{})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Networks"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:5,children:[!0===de&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:Y,onDropdownChange:Qe,onControlsChange:Ve}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",style:{width:"100%"},primary:!0,onClick:Ze,disabled:!0===N,children:"Add"})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===de?8:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:De.skip,take:De.take,sort:De.sort,filter:De.filter,columns:ut,data:bt,onDataStateChange:Ue})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return m.push("/suppliers/".concat(t,"/commitments/"))},children:"Back"}),!0===de&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:tt,children:"Save"})]})]})})]})]})}function Gh(e){switch(e){case qj.daily.id:return function(){var e=new Date;return{time:{flexSize:12,elementType:"timePicker",elementConfig:{placeholder:"Time"},value:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0),validation:{required:!0},validationMessage:"",valid:!0}}}();case qj.weekly.id:return function(){var e=new Date;return{time:{flexSize:6,elementType:"timePicker",elementConfig:{placeholder:"Time"},value:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0),validation:{required:!0},validationMessage:"",valid:!0},dayOfWeek:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Day of Week"},valid:!0,value:Uj[0],data:Uj,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}}}();case qj.monthly.id:return function(){var e=new Date,t=new Array(31).fill(null).map((function(e,t){return{id:t+1,name:String(t+1)}}));return{time:{flexSize:6,elementType:"timePicker",elementConfig:{placeholder:"Time"},value:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0),validation:{required:!0},validationMessage:"",valid:!0},day:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Day of Month"},valid:!0,value:t[0],data:t,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}}}();default:return{}}}function Hh(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var Bh=i.a.memo(qh),Vh=Uj.map((function(e){return e.name})),zh={skip:0,take:20};function Wh(e){var t=e.supplierID,n=i.a.useContext(Tm),a=n.setTitle,c=n.setContentTitle,r=n.setBreadcrumbs,s=b(),u=Object(d.h)(),m=Object(l.c)(),j=i.a.useState(!0),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState([]),O=Object(o.a)(g,2),v=O[0],C=O[1],y=i.a.useState(!1),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useMemo((function(){return s.has("FRONTEND:CLIENT-SUPPLIER-COMMITMENT-PAGE-ACCESS")}),[s]),M=i.a.useMemo((function(){return!0===T&&s.has("API:SUPPLIER_COMMITMENT:WRITE")}),[s,T]),N=i.a.useCallback((function(e){m(Ui(e))}),[m]),R=i.a.useState(zh),A=Object(o.a)(R,2),P=A[0],L=A[1],F=i.a.useCallback((function(){m($c())}),[m]),U=i.a.useCallback((function(){return F(),m((e=t,function(t){return Dc.get("/".concat(e,"/commitments")).then((function(n){return t(Zc.apply(void 0,Object(x.a)(n.data.commitments))),t(hl.apply(void 0,[e].concat(Object(x.a)(n.data.commitments.map((function(e){return e.commitment_id})))))),{total:n.data.commitments.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}));var e}),[m,F,t]),q=i.a.useCallback((function(){return p(!0),U().then((function(){p(!1)})).catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[U,N]);i.a.useEffect((function(){return q(),function(){return F()}}),[F,q]);var G=i.a.useCallback((function(){L(zh)}),[]),H=i.a.useCallback((function(e){L(e.dataState)}),[]),B=Object(l.d)((function(e){return{currency:e.currency,supplier:e.supplier,supplierCommitment:e.supplierCommitment}})),V=B.currency,z=B.supplier,W=B.supplierCommitment,K=Object(l.d)((function(e){return e.supplier.getIn([t,"supplier_name"])}));i.a.useEffect((function(){return null==K?(a("Commitments"),c("Commitments")):(a("".concat(K,"'s Commitments")),c("".concat(K,"'s Commitments"))),r([{link:"/suppliers",name:"Suppliers"},{name:K},{name:"Commitments"}]),function(){a(null),r([])}}),[K,a,c,t,r]);var J=i.a.useCallback((function(e){C([e]),D(!0)}),[]),Y=i.a.useCallback((function(){var e,n;p(!0),m((e=t,n=v[0],function(){return Dc.delete("/".concat(e,"/commitments/").concat(n)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){N({severity:"success",message:"Supplier Commitment Successfully Deleted"})})).catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return U()})).then((function(){p(!1),C([]),D(!1)}))}),[m,U,t,N,v]),Q=i.a.useCallback((function(){C([]),D(!1)}),[]),X=sb({variant:"Input",props:{label:"Name"}}),$=sb({variant:"Input",props:{label:"ID"}}),Z=sb({variant:"Input",props:{label:"Period"}}),ee=sb({variant:"Numeric",props:{label:"Volume"}}),te=sb({variant:"Numeric",props:{label:"Cost"}}),ne=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:X},{field:"volume",title:"Volume",filterCell:ee},{field:"cost",title:"Cost",width:"200px",view:"costDOM",filterCell:te},{field:"period",title:"Period",filterCell:Z},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:$},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[X,$,Z,te,ee]),ae=i.a.useMemo((function(){var e=z.getIn([t,"commitments"]);return(null==e?[]:e.toJS()).reduce((function(e,n){var a=W.get(n);if(null==a)return e;var c=new Date(a.get("commitment_date")),r=[String(c.getHours()).padStart(2,"0"),String(c.getMinutes()).padStart(2,"0")].join(":"),s=V.getIn([a.get("commitment_currency"),"settings"]),l=null!=s&&s.decimal_places;return e.push({id:a.get("commitment_id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:a.get("commitment_id")})}),name:a.get("commitment_name"),volume:null==a.get("commitment_volume")?"-":a.get("commitment_volume"),deleted:1===a.get("deleted"),cost:a.get("commitment_cost"),costDOM:null==a.get("commitment_cost")?"-":Object(aj.f)(a.get("commitment_cost"),{style:"currency",currencyDisplay:"code",minimumFractionDigits:l,currency:a.get("commitment_currency")}),period:"daily"===a.get("commitment_period")?"Daily @ ".concat(r):"weekly"===a.get("commitment_period")?"Every ".concat(Vh[c.getDay()]," @ ").concat(r):"Every ".concat(c.getDate()," of the Month @ ").concat(r),deletedDOM:Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)("input",{disabled:!0,type:"checkbox",className:"k-checkbox",defaultChecked:a.get("deleted")}),Object(Ka.jsx)("label",{className:"k-checkbox-label"})]}),actions:1!==a.get("deleted")&&Object(Ka.jsxs)(i.a.Fragment,{children:[!0===T&&Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(a.get("commitment_name")," Commitment"),"aria-label":"Edit ".concat(a.get("commitment_name")," Commitment"),onClick:function(){u.push("/suppliers/".concat(t,"/commitments/").concat(a.get("commitment_id")))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable ".concat(a.get("commitment_name")," Commitment"),"aria-label":"Disable ".concat(a.get("commitment_name")," Commitment"),style:{display:"none"},onClick:function(){J(a.get("commitment_id"))}})]})}),e}),[])}),[u,V,z,t,J,W,T]),ie=i.a.useMemo((function(){return v.map((function(e){return Object(Ka.jsxs)("li",{children:[W.getIn([e,"commitment_name"]),"(ID: ",e,")"]},e)}))}),[W,v]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Commitments"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===M&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:2,lg:2,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){u.push("/suppliers/".concat(t,"/commitments/new"))},children:"Add Commitment"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:h,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:P.skip,take:P.take,sort:P.sort,filter:P.filter,data:ae,columns:ne,onDataStateChange:H})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:q,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:G,children:"Clear Filters and Sorting"})]})]})})}),!0===I&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:Q,children:["Are you sure you want to delete the following Commitments?",Object(Ka.jsx)("ul",{children:ie}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Y,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Q,children:"Cancel"})]})]})]})}var Kh=i.a.memo(Wh);function Jh(e){var t=e.supplierID,n=b(),a=i.a.useMemo((function(){return"/suppliers/".concat(t,"/commitments")}),[t]);return Object(Ka.jsxs)(d.e,{children:[!0===n.has("FRONTEND:CLIENT-SUPPLIER-COMMITMENT-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"".concat(a,"/:commitmentID"),children:Object(Ka.jsx)(Bh,{supplierID:t})}),Object(Ka.jsx)(d.c,{path:a,children:Object(Ka.jsx)(Kh,{supplierID:t})})]})}var Yh=i.a.memo(Jh);function Qh(){var e=Object(d.j)().id,t=b(),n=Object(l.c)(),a=i.a.useCallback((function(e){n(Ui(e))}),[n]);i.a.useEffect((function(){return n(xl(e)).catch((function(e){a({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return n(ml())}}),[e,n,a]);var c=i.a.useMemo((function(){return"/suppliers/".concat(e)}),[e]),r=i.a.useMemo((function(){return[{url:c,key:"suppliers.info",title:"Info",path:c,component:Object(Ka.jsx)(nf,{supplierID:e})},{title:"Rate Manager",url:"".concat(c,"/rates/"),path:"".concat(c,"/rates/*"),key:"suppliers.rates",component:Object(Ka.jsx)(dh,{supplierID:e}),visible:t.has("FRONTEND:CLIENT-SUPPLIER-RATES-PAGE-ACCESS")},{key:"supplier.connections",title:"Connections",url:"".concat(c,"/connections/"),path:"".concat(c,"/connections/*"),component:Object(Ka.jsx)(Uh,{supplierID:e}),visible:t.has("FRONTEND:CLIENT-SUPPLIER-CONNECTIONS-PAGE-ACCESS")},{key:"supplier.commitments",title:"Commitments",url:"".concat(c,"/commitments/"),path:"".concat(c,"/commitments/*"),component:Object(Ka.jsx)(Yh,{supplierID:e}),visible:t.has("FRONTEND:CLIENT-SUPPLIER-COMMITMENTS-PAGE-ACCESS")},{key:"supplier.virtual-numbers",title:"2 Way Virtual Numbers",url:"".concat(c,"/virtual-numbers/"),path:"".concat(c,"/virtual-numbers/*"),component:Object(Ka.jsx)(fh,{supplierID:e}),visible:t.has("FRONTEND:SUPPLIER-VIRTUAL-NUMBERS-PAGE-ACCESS")}]}),[e,c,t]);return Object(Ka.jsx)(Rb,{tabs:r})}var Xh=i.a.memo(Qh);function $h(e){var t=e.onCancel,n=e.onSuccess,a=Object(l.c)(),c=i.a.useState(),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState(!1),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useState(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],O=oj(s),v=i.a.useCallback((function(e){a(Ui(e))}),[a]),x=Object(l.d)((function(e){return e.field["supplier-fields"]})),C=Object(l.d)((function(e){return e.subsidiaries})),_=Object(l.d)((function(e){return e.salesRegions})),y=lb({namespace:C,fieldID:"id",fieldName:"subsidiary_name"}),E=lb({namespace:_,fieldID:"id",fieldName:"region_name"}),I=i.a.useMemo((function(){return{dropdownValues:(new Map).set("Subsidiary",y).set("SalesRegion",E)}}),[y,E]),D=Mj(x,I),T=i.a.useMemo((function(){return!0===p}),[p]);i.a.useEffect((function(){return g(!0),Promise.all([a(xi("supplier-fields")),a(ld()),a(bd())]).then((function(){g(!1)})).catch((function(e){v({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){a(vi("supplier-fields")),a(sd()),a(md())}}),[a,v]),i.a.useEffect((function(){if(!0!==T){var e=Object.assign({name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""}},D);u(e)}}),[T,D]);var M=i.a.useCallback((function(e){j(!0),u(e)}),[]),N=i.a.useCallback((function(){"function"===typeof t&&t()}),[t]),R=i.a.useCallback((function(){var e=O(),t=e.invalidMessages,i=e.controls;if(u(i),t.length>0)v({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}});else{g(!0);var c,r=x.map((function(e){return{field_id:e.field_id,value:Zh(i[e.field_id])}}));a((c={supplier_fields:r,supplier_name:Zh(i.name)},function(){return Dc.post("",c).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){v({severity:"success",message:"Supplier Successfully Added"}),"function"===typeof n&&n()})).catch((function(e){v({severity:"error",message:e.message,action:{label:"Dismiss"}}),j(!1),g(!1)}))}}),[O,a,v,x,n]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:b}),Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Add Supplier"})}),Object(Ka.jsx)(w.c,{children:!0===T?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Supplier Details"})}),Object(Ka.jsx)(lj,{controls:s,onControlsChange:M})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:N,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:R,disabled:!0===T,children:"Save"})]})]})]})}function Zh(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var ep=i.a.memo($h),tp={skip:0,take:20};function np(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(tp),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useContext(Tm),C=v.setTitle,y=v.setBreadcrumbs,E=v.setContentTitle,I=i.a.useMemo((function(){return e.has("API:SUPPLIER_DETAILS:WRITE")}),[e]),D=i.a.useCallback((function(e){n(Ui(e))}),[n]);i.a.useEffect((function(){return C("Suppliers"),E("Suppliers"),y([{name:"Suppliers"}]),function(){C(null),y([]),E(null)}}),[C,y,E]);var T=Object(l.d)((function(e){return{supplier:e.supplier}})).supplier,M=i.a.useCallback((function(){n(ml())}),[n]),N=i.a.useCallback((function(){return M(),n(vl({not_name:"BLOCKED Traffic"}))}),[M,n]),R=i.a.useCallback((function(){return s(!0),N().then((function(){s(!1)})).catch((function(e){D({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[N,D]);i.a.useEffect((function(){return R(),function(){return M()}}),[M,R]);var A=i.a.useCallback((function(){f(tp)}),[]),P=i.a.useCallback((function(e){f(e.dataState)}),[]),L=i.a.useCallback((function(){O(!g)}),[g]),F=i.a.useCallback((function(){O(!1)}),[]),U=i.a.useCallback((function(){return R().then((function(){return O(!1)}))}),[R]),q=sb({variant:"Input",props:{label:"Name"}}),G=sb({variant:"Input",props:{label:"ID"}}),H=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:q},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:G},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"75px"}]}),[q,G]),B=i.a.useMemo((function(){return Object(x.a)(T.values()).map((function(e){return{id:e.get("supplier_id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:e.get("supplier_id")})}),name:e.get("supplier_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("supplier_name")," Details"),"aria-label":"Edit ".concat(e.get("supplier_name")," Details"),onClick:function(){return t.push("/suppliers/".concat(e.get("supplier_id")))}})}}))}),[T,t]);return Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===g?6:12,children:Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===I&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:L,children:"Add Supplier"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{data:B,resizable:!0,groupable:!1,filterable:!0,isLoading:r,columns:H,frontendFiltering:!0,frontendPagination:!0,style:{height:"564px"},skip:j.skip,take:j.take,sort:j.sort,total:B.length,filter:j.filter,onDataStateChange:P})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:R,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:A,children:"Clear Filters and Sorting"})]})]})}),!0===g&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(ep,{onCancel:F,onSuccess:U})})]})}var ap,ip,cp=i.a.memo(np),rp=n(112),sp=n.n(rp),lp=n(403),op=Oa.a.create({paramsSerializer:Da,crossdomain:!0,baseURL:"".concat(p).concat("/cubejs-token")});(ap=op.interceptors.request).use.apply(ap,Object(x.a)(fi())),(ip=op.interceptors.response).use.apply(ip,Object(x.a)(hi(op)));var up=op,dp=n(89),mp=(n(836),function(e){Object(Vm.a)(n,e);var t=Object(zm.a)(n);function n(){return Object(Hm.a)(this,n),t.apply(this,arguments)}return Object(Bm.a)(n,[{key:"labelContent",value:function(e){return"object"===typeof e.dataItem&&null!==e.dataItem?e.category:e.dataItem}},{key:"parseChartData",value:function(e,t){var n=this,a=t.pivotConfig?e.series(t.pivotConfig):e.series(),i=!!t.isTimeCategory&&t.isTimeCategory,c=[],r=[],s=t.removeText?t.removeText:"";a.length>0&&(c=Object(x.a)(new Set(a[0].series.map((function(e){return i?function(e){var t=function(e){return("0"+e).slice(-2)},n=new Date(e),a=t(n.getMonth()+1),i=t(n.getDate()),c=t(n.getHours()),r=t(n.getMinutes());return"".concat(a,"-").concat(i," ").concat(c,":").concat(r)}(e.category+"Z"):(t=e.category,n=s,Object(Wa.a)(t.replace(n,"")));var t,n})))),r=a.map((function(e){var a=e.series.map((function(e){return e.value}));return{name:e.title.replace("Stats ",""),data:a,seriesType:n.props.chartType,showLabels:t.showLabels,stack:!!t.stack&&t.stack}})));var l=Object(v.a)({},t.chartTemplate);return l=Ja(l,{categories:c,series:r})}},{key:"render",value:function(){var e=this,t=this.props.resultSet,n=this.props.props,a=this.parseChartData(t,n);return Object(Ka.jsxs)(dp.a,{pannable:{lock:"y"},zoomable:{mousewheel:{lock:"y"},selection:{lock:"y"}},style:{height:"550px"},transitions:!1,seriesColors:n.colours,ref:function(t){return e._chart=t},children:[Object(Ka.jsx)(dp.d,{visible:a.chartOptions.legend.visible,position:a.chartOptions.legend.position,orientation:a.chartOptions.legend.orientation,align:a.chartOptions.legend.align}),Object(Ka.jsx)(dp.b,{children:Object(Ka.jsx)(dp.c,{categories:a.categories,labels:{color:"rgba(67, 66, 93, 0.8)",rotation:"auto"},majorGridLines:{visible:!1},crosshair:{visible:!0,tooltip:{visible:!0,format:"#.##"}},title:{text:n.categoryTitle}})}),Object(Ka.jsx)(dp.h,{children:Object(Ka.jsx)(dp.i,{labels:{color:"rgba(67, 66, 93, 0.8)"},majorGridLines:{visible:!1},title:{text:n.yAxisTitle}})}),Object(Ka.jsx)(dp.e,{children:a.series.map((function(t,a){return Object(Ka.jsx)(dp.f,{type:t.seriesType,data:t.data,name:t.name,tooltip:{visible:n.showTooltip},stack:!!t.stack&&t.stack,style:"line"===t.seriesType?"smooth":"normal",children:Object(Ka.jsx)(dp.g,{visible:t.showLabels,color:"#000",background:"none",content:function(){return e.labelContent.apply(e,arguments)}})},a)}))})]})}}]),n}(a.Component)),bp=function(e){var t=e.resultSet,n=e.props;return Object(Ka.jsx)(mp,{resultSet:t,props:n,chartType:"line"})},jp=function(e){var t=e.resultSet,n=e.props;return Object(Ka.jsx)(mp,{resultSet:t,props:n,chartType:"area"})};function fp(e){var t=e.query,n=e.resultSet,a=e.pivotConfig,c=e.gridProps,r=void 0===c?{}:c,s=e.onChange,l=e.getGridColumnInfo,u=e.getGridCellContent,d=e.onResultSetChange,m=i.a.useState((function(){return{skip:0,take:20,sort:Object.keys(t.order).map((function(e){return{field:hp(e),dir:t.order[e]}}))}})),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useCallback((function(e){"function"===typeof s&&s(e)}),[s]),p=i.a.useCallback((function(e,t){return"function"!==typeof u?t:u(e,t)}),[u]),g=i.a.useCallback((function(e,t){return"function"===typeof l?l(e,t):{filterable:!1,field:e,title:t.shortTitle}}),[l]),O=i.a.useCallback((function(e){"function"===typeof d&&d(e)}),[d]);i.a.useEffect((function(){O(n)}),[n,O]);var x=i.a.useCallback((function(e){f(e.dataState),h(t)}),[t,h]),C=i.a.useMemo((function(){return null==n?[]:n.tablePivot(a).map((function(e){return Object.keys(e).reduce((function(t,n){return t[hp(n)]=p(hp(n),e[n]),t}),{})}))}),[n,a,p]),_=i.a.useMemo((function(){return null==n?[]:n.tableColumns(a).map((function(e){return g(hp(e.key),e)}))}),[n,a,g]);return Object(Ka.jsx)(Dm,Object(v.a)({resizable:!0,groupable:!1,frontendPagination:!0,style:{height:"500px"},skip:j.skip,take:j.take,sort:j.sort,filter:j.filter,data:C,columns:_,total:C.length,onDataStateChange:x},r))}function hp(e){return e.replace(/\./g,"@")}var pp=i.a.memo(fp),gp=function(e){var t=e.resultSet,n=e.props;return Object(Ka.jsx)(mp,{resultSet:t,props:n,chartType:"column"})},Op=function(e){Object(Vm.a)(n,e);var t=Object(zm.a)(n);function n(e){var a;return Object(Hm.a)(this,n),(a=t.call(this,e)).state={resultSet:e.resultSet},a}return Object(Bm.a)(n,[{key:"render",value:function(){var e=function(e,t){var n=e.tablePivot()[0];return n?(t.query.dimensions?n[t.query.dimensions[0]]+" ":"")+n[t.query.measures[0]]:"N/A"}(this.state.resultSet,this.props);return null===e||"null"===e?Object(Ka.jsx)("div",{className:"DataMessage",children:"N/A"}):Object(Ka.jsx)("span",{children:e})}}]),n}(a.Component),vp=null,xp=sp()((function(){return null!=vp?vp:vp=up.get("/").then((function(e){return e.data})).catch((function(e){return console.error(e)})).then((function(){vp=null}))}),{apiUrl:"/cubejs-api/v1"}),Cp=function(e){var t=e.resultSet,n=e.props;switch(n.renderItem){case"grid":return Object(Ka.jsx)(pp,Object(v.a)({resultSet:t},n));case"line":return Object(Ka.jsx)(bp,{resultSet:t,props:n});case"area":return Object(Ka.jsx)(jp,{resultSet:t,props:n});case"segment":return Object(Ka.jsx)(Op,Object(v.a)({resultSet:t},n));default:return Object(Ka.jsx)(gp,{resultSet:t,props:n})}},_p=function(e,t){return function(n){var a=n.resultSet,i=n.error;return null!=i?(console.error(i),Object(Ka.jsx)("div",{className:"DataMessage",children:"Statistics could not be accessed"})):null==a?Object(Ka.jsx)(Wm,{height:"550px",className:"segment"===t.renderItem?"smallLoader":"loader"}):Object(Ka.jsx)(e,{resultSet:a,props:t})}},yp=function(e){return Object(Ka.jsx)(lp.a,{query:e.query,cubejsApi:xp,render:_p(Cp,e)})},Sp=n(404),kp=n(405),wp=n(211),Ep=function(e){Object(Vm.a)(n,e);var t=Object(zm.a)(n);function n(e){var a;return Object(Hm.a)(this,n),(a=t.call(this,e)).previousContext=null,a.state={dashboard_queries:Sp},a}return Object(Bm.a)(n,[{key:"componentWillMount",value:function(){this.handleTimeDimensions()}},{key:"componentDidMount",value:function(){var e,t,n=this,a=window.setInterval((function(){n.handleTimeDimensions()}),3e5),i=Object.keys((e=this.props.currencies,t=function(e){return 1===e.settings.is_base},Object.keys(e).filter((function(n){return t(e[n])})).reduce((function(t,n){return Object.assign(t,Object(C.a)({},n,e[n]))}),{}))),c=i.length>0?i[0]:"";this.setState({refreshInterval:a,baseCurrency:c})}},{key:"componentDidUpdate",value:function(){JSON.stringify(this.previousContext)!==JSON.stringify(this.context)&&(this.context.setTitle("Dashboard"),this.context.setContentTitle("Dashboard"),this.context.setBreadcrumbs([{name:"Dashboard"}])),this.previousContext=this.context}},{key:"componentWillUnmount",value:function(){this.context.setTitle(null),this.context.setBreadcrumbs([]),this.context.setContentTitle(null),window.clearInterval(this.state.refreshInterval)}},{key:"handleTimeDimensions",value:function(){var e=new window.Date,t=ui(e);e.setHours(0,0,0,0);var n=ui(e);e.setHours(23,59,59,0);var a=ui(e);e.setDate(e.getDate()-1);var i=ui(e);e.setHours(0,0,0,0);var c=ui(e);e.setDate(1);var r=ui(e),s=this.state.dashboard_queries.map((function(e){if(e.from){var s=[];switch(e.from){case"today":s.push(n);break;case"yesterday":s.push(c);break;case"month":s.push(r);break;default:s.push(n)}switch(e.to){case"today":s.push(a);break;case"yesterday":s.push(i);break;case"now":s.push(t);break;default:s.push(a)}var l=JSON.parse(JSON.stringify(e));return l.query.timeDimensions[0].dateRange=s,l}return e}));this.setState({dashboard_queries:s})}},{key:"getCellValue",value:function(e,t){switch(e){case"Stats@sent":case"Stats@profit":case"Stats@others":case"Stats@pending":case"Stats@revenue":case"Stats@rejected":case"Stats@delivered":case"Stats@total_cost":case"Stats@undelivered":return null==t?0:t;default:return t}}},{key:"capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"getColumnInfo",value:function(e,t){switch(e){case"Stats@time@hour":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@hour",title:t.shortTitle};case"Stats@time@day":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@day",title:t.shortTitle};case"Stats@time@month":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@month",title:t.shortTitle};case"Stats@time@year":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@year",title:t.shortTitle};case"measures":return{filterable:!1,field:"measures",title:"Status",width:"fill"};case"value":return{filterable:!1,field:"value",title:"Messages",width:"fill"};case"Stats@revenue_in_base":return{filterable:!1,field:"Stats@revenue_in_base",title:"Revenue - "+this.state.baseCurrency,width:"fill"};default:return{filterable:!1,field:e,title:t.shortTitle,width:"fill"}}}},{key:"getCellContent",value:function(e,t){switch(e){case"Stats@time@hour":case"Stats@time@month":case"Stats@time@day":case"Stats@time@year":return Object(Ka.jsx)(Nd,{utc:new window.Date(this.getCellValue(e,t)+"Z").getTime()});case"measures":return this.capitalize(t.split(".")[1]);default:return this.getCellValue(e,t)}}},{key:"render",value:function(){var e=this,t=this.state.dashboard_queries.map((function(t,n){var a=t.height?t.height:"",i=t.height?"550px":"260px",c="segment"===t.renderItem?"SegmentCard "+t.background:"ChartCard "+t.background+" "+a,r="segment"===t.renderItem?3:t.size;switch(t.renderItem){case"segment":return Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:r,children:Object(Ka.jsx)(w.a,{className:c,children:Object(Ka.jsx)(w.d,{className:"k-hbox",style:{background:"transparent"},children:Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)(w.e,{children:Object(Ka.jsx)("h2",{children:t.title})}),Object(Ka.jsx)(w.f,{children:Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)("div",{className:"Value",style:{float:"left"},children:Object(Ka.jsx)(yp,Object(v.a)({colours:wp},t))}),Object(Ka.jsx)("br",{})]})})]})})})},n);case"grid":return Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:r,children:Object(Ka.jsxs)(w.a,{className:c,children:[Object(Ka.jsx)(w.d,{className:"k-hbox",style:{background:"transparent"},children:Object(Ka.jsx)("div",{children:Object(Ka.jsx)(w.e,{children:Object(Ka.jsx)("h2",{children:t.title})})})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(yp,Object(v.a)(Object(v.a)({},t),{},{colours:wp,getGridColumnInfo:function(){return e.getColumnInfo.apply(e,arguments)},getGridCellContent:function(){return e.getCellContent.apply(e,arguments)},gridProps:{pageable:!1,frontendPagination:!1,style:{height:i}}}))})]})},n);default:var s=Object(v.a)({},kp.chart);return Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:r,children:Object(Ka.jsxs)(w.a,{className:c,children:[Object(Ka.jsx)(w.d,{className:"k-hbox",style:{background:"transparent"},children:Object(Ka.jsx)("div",{children:Object(Ka.jsx)(w.e,{children:Object(Ka.jsx)("h2",{children:t.title})})})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(yp,Object(v.a)(Object(v.a)({},t),{},{colours:wp,chartTemplate:s}))})]})},n)}}));return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:t})})})}}]),n}(a.Component);Ep.contextType=Tm;var Ip=Object(d.k)(Object(l.b)((function(e){return{currencies:e.currency.toJS()}}))(Ep)),Dp={update:{id:"update",name:"UPDATE",variant:"info"},delete:{id:"delete",name:"DELETE",variant:"error"},create:{id:"create",name:"CREATE",variant:"success"}},Tp={pending:{value:0,id:"pending",name:"Pending",variant:"info",icon:"fas fa-calendar-alt"},success:{value:1,id:"success",name:"Success",variant:"default",icon:"fas fa-check"},failed:{value:2,id:"failed",name:"Failed",variant:"error",icon:"fas fa-exclamation-triangle"},cancelled:{value:3,id:"cancelled",name:"Cancelled",variant:"warning",icon:"fas fa-ban"},processing:{value:4,id:"processing",name:"Processing",variant:"info",icon:"fas fa-spinner fa-spin"}},Mp={skip:0,take:20,sort:[{dir:"asc",field:"status"},{dir:"desc",field:"creation_date"}]};function Np(e){var t=e.routeID,n=e.networkID,a=e.pagination,c=void 0!==a&&a,r=b(),s=Object(l.c)(),u=i.a.useState(!1),d=Object(o.a)(u,2),j=d[0],f=d[1],h=i.a.useState(0),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(!1),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useState(!1),S=Object(o.a)(y,2),E=S[0],I=S[1],D=i.a.useState(Mp),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useState(),A=Object(o.a)(R,2),P=A[0],L=A[1],F=i.a.useCallback((function(e){s(Ui(e))}),[s]),U=Object(l.d)((function(e){return{route:e.route,network:e.network,country:e.country,routeRuleSchedule:e.routeRuleSchedule}})),q=U.route,G=U.network,H=U.country,B=U.routeRuleSchedule,V=i.a.useCallback((function(){s(Yu())}),[s]),z=i.a.useMemo((function(){return(1===g?["cancelled","failed","success"]:["pending","processing"]).reduce((function(e,t){return e[t]=Tp[t],e}),{})}),[g]),W=i.a.useMemo((function(){var e=ni(M);if(null!=e.sort&&[{to:"country",from:"country_id"},{to:"network",from:"network_id"},{to:"route",from:"route_id"}].forEach((function(t){null!=e.sort[t.from]&&(e.sort[t.to]=e.sort[t.from],delete e.sort[t.from])})),null!=t){e.route_id=t;var a=Object.keys(z);null!=e.status&&(e.status=e.status.split(",").filter((function(e){return a.includes(e)})).join(",")),null!=e.status&&""!==e.status||(e.status=Object.keys(z).join(","))}return null!=n&&(e.network_id=n),null==t&&null==n&&(e.status=Tp.pending.id),e}),[M,t,n,z]),K=i.a.useCallback((function(){return V(),s($u(W))}),[s,W,V]),J=i.a.useMemo((function(){return r.has("API:ROUTE_MANAGEMENT:WRITE")}),[r]),Y=kb({frequency:1e4,intervalPolicy:"update",name:"Route Rule Scheduled Changes Changes",request:i.a.useCallback((function(){return K()}),[K]),getData:i.a.useCallback((function(e,t){var n=e.routeRuleSchedule;return new m.b({totalRecords:t.total_records,scheduledChanges:t.scheduled_changes,data:n.reduce((function(e,t){return e.add(new m.b({id:t.get("id"),type:t.get("type"),user:t.get("user"),route:t.get("route"),status:t.get("status"),action:t.get("action"),rule_id:t.get("rule_id"),conditions:t.get("conditions"),network_id:t.get("network_id"),creation_date:t.get("creation_date"),scheduled_date:t.get("scheduled_date"),additional_info:t.get("additional_info")}))}),new m.e)})}),[])}),Q=Y.data,X=Y.update,$=i.a.useCallback((function(){return I(!0),X().catch((function(e){F({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return I(!1)}))}),[F,X]);i.a.useEffect((function(){return f(!0),X().catch((function(e){F({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){f(!1)})),function(){return V()}}),[F,V,X]);var Z=i.a.useCallback((function(e){O(e.selected)}),[]),ee=i.a.useCallback((function(e){N(e.dataState)}),[]),te=i.a.useCallback((function(){N(Mp)}),[]),ne=i.a.useCallback((function(){_(!C)}),[C]),ae=i.a.useCallback((function(e){L(e)}),[]),ie=i.a.useCallback((function(){L(null)}),[]),ce=i.a.useCallback((function(){f(!0),L(null),s(ed(P)).then((function(){F({severity:"success",message:"Scheduled Change Successfully Cancelled"})})).catch((function(e){F({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return X()})).catch((function(e){F({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){f(!1)}))}),[s,F,X,P]),re=i.a.useCallback((function(e){var t=Object.assign({},W),n=t.page,a=t.size;return delete t.size,delete t.page,t.offset=n*a+e,Da(t)}),[W]),se=i.a.useMemo((function(){var e=Q.get("data").reduce((function(e,t){var n=t.get("action"),a=t.get("status"),i=t.get("id"),c=t.get("network_id"),r=G.get(c),s=Dp[n],l=Tp[a];return e.push({id:i,statusID:a,action:s.name,status:l.value,type:t.get("type"),idDOM:Object(Ka.jsx)(Id,{value:i}),conditions:t.get("conditions"),user:t.getIn(["user","name"]),route:t.getIn(["route","name"]),creation_date:t.get("creation_date"),scheduled_date:t.get("scheduled_date"),mcc:r.getIn(["mccmnc",0,"mcc"]),mnc:r.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),additional_info:null==t.get("additional_info")?Object(Ka.jsx)("span",{className:"Text--Faded",children:"No additional information."}):t.get("additional_info"),creationDateDOM:Object(Ka.jsx)(Nd,{utc:t.get("creation_date")}),scheduledDateDOM:Object(Ka.jsx)(Nd,{utc:t.get("scheduled_date")}),network:G.getIn([t.get("network_id"),"network_name"]),country:H.getIn([G.getIn([t.get("network_id"),"country_id"]),"country_name"]),statusDOM:Object(Ka.jsxs)(wd,{variant:l.variant,children:[Object(Ka.jsx)("i",{className:l.icon})," ",Object(Ka.jsx)("span",{children:l.name})]}),actionDOM:Object(Ka.jsx)(wd,{variant:s.variant,children:s.name})}),e}),[]);return Object($d.c)(e,M.sort).map((function(e,t){var n=!1===c?"/route-schedules/".concat(e.id):"/route-schedules?".concat(re(t));return e.actions=Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View ".concat(e.id," Changes"),"aria-label":"View ".concat(e.id," Changes"),onClick:function(){return window.open(n)}}),!0===J&&e.statusID===Tp.pending.id&&Object(Ka.jsx)(k.a,{icon:"cancel",onClick:function(){return ae(e.id)},title:"Cancel ".concat(e.id," Scheduled Change"),"aria-label":"Cancel ".concat(e.id," Scheduled Change")})]}),e}))}),[Q,H,G,M,c,ae,re,J]),le=hj({dataState:M,countryField:"country_id"}),oe=le.availableNetworks,ue=sb({variant:"MultiSelect",props:{label:"Country",data:le.availableCountries}}),de=sb({variant:"MultiSelect",props:{label:"Network",data:oe}}),me=sb({variant:"Input",props:{label:"Schedule ID"}}),be=sb({variant:"Input",props:{label:"Username"}}),je=sb({variant:"MultiSelect",props:{label:"Status",data:i.a.useMemo((function(){return Object.keys(z).map((function(e){return{id:e,name:Tp[e].name}}),[])}),[z])}}),fe=sb({variant:"MultiSelect",props:{label:"Actions",data:i.a.useMemo((function(){return Object.keys(Dp).map((function(e){return{id:e,name:Dp[e].name}}),[])}),[])}}),he=sb({variant:"MultiSelect",props:{label:"Routes",data:lb({fieldID:"id",fieldName:"name",namespace:q})}}),pe=sb({variant:"Date",props:{label:"Creation Date"}}),ge=sb({variant:"Date",props:{label:"Scheduled Date"}}),Oe=i.a.useMemo((function(){return{field:"id",title:"ID",view:"idDOM",width:"250px",sortable:!1,filterCell:me}}),[me]),ve=i.a.useMemo((function(){return{field:"route_id",title:"Route",view:"route",filterCell:he}}),[he]),xe=i.a.useMemo((function(){return{field:"country_id",title:"Country",view:"country",filterCell:ue}}),[ue]),Ce=i.a.useMemo((function(){return{field:"mcc",title:"MCC",width:"100px",sortable:!1,filterable:!1}}),[]),_e=i.a.useMemo((function(){return{field:"network_id",title:"Network",view:"network",filterCell:de}}),[de]),ye=i.a.useMemo((function(){return{field:"mnc",title:"MNC",width:"100px",sortable:!1,filterable:!1}}),[]),Se=i.a.useMemo((function(){return{field:"user",title:"User",filterCell:be}}),[be]),ke=i.a.useMemo((function(){return{field:"action",title:"Action",width:"200px",view:"actionDOM",filterCell:fe}}),[fe]),we=i.a.useMemo((function(){return{field:"conditions",title:"Conditions",sortable:!1,filterable:!1}}),[]),Ee=i.a.useMemo((function(){return{field:"type",title:"Type",width:"100px",sortable:!1,filterable:!1}}),[]),Ie=i.a.useMemo((function(){return{field:"creation_date",title:"Creation Date",width:"250px",view:"creationDateDOM",filterCell:pe}}),[pe]),De=i.a.useMemo((function(){return{field:"scheduled_date",title:"Scheduled Date",width:"250px",view:"scheduledDateDOM",filterCell:ge}}),[ge]),Te=i.a.useMemo((function(){return{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:je}}),[je]),Me=i.a.useMemo((function(){return{field:"additional_info",title:"Additional Info.",width:"300px",sortable:!1,filterable:!1}}),[]),Ne=i.a.useMemo((function(){return{field:"actions",width:!0===J?"100px":"60px",locked:!0,sortable:!1,filterable:!1}}),[J]),Re=i.a.useMemo((function(){var e=[];return null==t?e.push(ve,xe,Ce,_e,ye,Se,ke,we,Ee,Ie,De):null==n?e.push(xe,Ce,_e,ye,Se,Te,ke,Me,we,Ee,Ie,De):e.push(Se,Te,ke,Me,we,Ee,Ie,De),e.push(Oe),e.push(Ne),e}),[t,n,Oe,Ce,ye,Ee,Se,Me,ve,Te,ke,xe,_e,Ne,we,Ie,De]),Ae=i.a.useMemo((function(){var e=[];return Q.get("scheduledChanges")>0&&e.push("Card--Highlight"),e.join(" ")}),[Q]),Pe=i.a.useMemo((function(){if(null===P)return null;var e=B.get(P);return null==e?null:{scheduledDate:e.get("scheduled_date"),action:Dp[e.get("action")]}}),[P,B]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Wb,{expanded:C,className:Ae,title:null==t?"Scheduled Changes":"Scheduled Changes and History",onToggleExpanded:ne,children:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.c,{children:[null!=t&&Object(Ka.jsxs)(w.i,{animation:!1,selected:g,onSelect:Z,className:"TabStrip--NoButtomGutter",children:[Object(Ka.jsx)(w.j,{title:"Scheduled"}),Object(Ka.jsx)(w.j,{title:"History"})]}),Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:j,frontendSorting:!1,style:{minHeight:"400px",maxHeight:"700px"},skip:M.skip,take:M.take,sort:M.sort,filter:M.filter,data:se,columns:Re,total:Q.get("totalRecords"),onDataStateChange:ee})]}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:$,disabled:!0===E,children:!0===E?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:te,children:"Clear Filters and Sorting"})]})]})}),null!=Pe&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ie,children:["Are you sure you want to cancel the",Object(Ka.jsx)(wd,{variant:Pe.action.variant,children:Pe.action.name}),"changes scheduled on"," ",Object(Ka.jsx)("strong",{children:Object(Ka.jsx)(Nd,{utc:Pe.scheduledDate})})," ","?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:ce,children:"Delete"}),Object(Ka.jsx)(k.a,{onClick:ie,children:"Cancel"})]})]})]})}var Rp=i.a.memo(Np),Ap=9e18;function Pp(){var e=Object(d.j)().routeID,t=b(),n=Object(d.h)(),a=Object(l.c)(),c=i.a.useState(),r=Object(o.a)(c,2),s=r[0],u=r[1],m=i.a.useState([]),j=Object(o.a)(m,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(!0),y=Object(o.a)(C,2),E=y[0],I=y[1],D=i.a.useState(!0),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useState(!0),A=Object(o.a)(R,2),P=A[0],L=A[1],F=i.a.useState(null),U=Object(o.a)(F,2),q=U[0],G=U[1],H=i.a.useState([]),B=Object(o.a)(H,2),V=B[0],z=B[1],W=i.a.useState(!1),K=Object(o.a)(W,2),J=K[0],Y=K[1],Q=i.a.useState(null),X=Object(o.a)(Q,2),$=X[0],Z=X[1],ee=i.a.useState([]),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],ie=i.a.useContext(Tm),ce=ie.setTitle,re=ie.setBreadcrumbs,se=ie.setContentTitle,le=i.a.useState(!1),oe=Object(o.a)(le,2),ue=oe[0],de=oe[1],me=oj(s),be=i.a.useMemo((function(){return t.has("API:ROUTE_MANAGEMENT:WRITE")}),[t]),je=i.a.useState({skip:0,take:20,sort:[{dir:"desc",field:"summary"}]}),fe=Object(o.a)(je,2),he=fe[0],pe=fe[1],ge=Object(l.d)((function(e){return{route:e.route,country:e.country,network:e.network,mnpProvider:e.mnpProvider}})),Oe=ge.route,ve=ge.country,xe=ge.network,Ce=ge.mnpProvider;i.a.useEffect((function(){var t=Oe.getIn([e,"name"]);return null==t?(ce("Route Modification"),se("Route Modification")):(ce("".concat(t," Route Modification")),se("".concat(t," Route Modification"))),re([{link:"/routes",name:"Routes"},{name:t}]),function(){ce(null),re([]),se(null)}}),[Oe,e,ce,se,re]);var _e=i.a.useCallback((function(e){a(Ui(e))}),[a]);i.a.useEffect((function(){var t,n=a((function(e){return hr.get("").then((function(t){e(pr.apply(void 0,Object(x.a)(t.data.mnp_providers)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){L(!1)})),i=a(Ur(e)).then((function(){I(!1)})),c=a((t=e,function(e){return Cc.get("/".concat(t,"/country")).then((function(n){e(Xi.apply(void 0,Object(x.a)(n.data.data))),e(Ir(t,n.data.data.map((function(e){return{id:e.network_id,summary:e.summary}}))))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){N(!1)}));return Promise.all([i,n,c]).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){a(Lr()),a({type:Dt})}}),[a,_e,e]),i.a.useEffect((function(){var t,n;null!=q&&!0!==J&&(L(!0),a((t=e,n=q.id,function(e){return Cc.get("/".concat(t,"/country/").concat(n,"/mnp-provider")).then((function(a){var i=a.data.mnp_provider_connection_id;e(pr(Object.assign({},a.data,{id:i}))),e(Dr(t,n,i))})).catch((function(e){if(404!==e.response.status)throw new Error((e.response?e.response.data:e).message)}))})).then((function(){return L(!1)})).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})))}),[e,q,J,a,_e]),i.a.useEffect((function(){var t={name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},notes:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{required:!1,maxLength:1e3},valid:!0,validationMessage:""}};t.name.value=Oe.getIn([e,"name"]),t.notes.value=Oe.getIn([e,"description"]),t.name.elementConfig.disabled=!1===be,t.notes.elementConfig.disabled=!1===be,u(t)}),[Oe,e,be]),i.a.useEffect((function(){z(ai(Object(x.a)(ve.values()).map((function(e){return{id:e.get("country_id"),name:e.get("country_name")}})),{includeSpecialCountries:!1}))}),[ve]),i.a.useEffect((function(){ae(Object(x.a)(Ce.values()).map((function(e){return{id:e.get("id"),name:e.get("name")}})))}),[Ce]),i.a.useEffect((function(){if(null!=q){var t=q.id,n=Oe.getIn([e,"countries",t,"mnp_provider"]);Z(ne.find((function(e){return e.id===n})))}}),[Oe,ve,e,Ce,q,ne]);var ye=i.a.useCallback((function(e){pe(e.dataState)}),[]),Se=i.a.useCallback((function(e){v(!0),u(e)}),[]),ke=i.a.useCallback((function(){de(!ue)}),[ue]),we=i.a.useCallback((function(){Y(!0)}),[]),Ee=i.a.useCallback((function(){Y(!1)}),[]),Ie=i.a.useCallback((function(){var t,i,c=me(),r=c.invalidMessages,s=c.controls;(u(s),r.length>0)?_e({message:Object(Ka.jsx)(Mm,{messageList:r}),severity:"error",action:{label:"Dismiss"}}):(I(!0),a((t=e,i={name:Lp(s.name),description:Lp(s.notes)},function(){return Cc.put("/".concat(t),i).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){_e({severity:"success",message:"Route Successfully Edited"}),v(!1)})).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){I(!1),n.push("/routes")})))}),[a,_e,n,e,me]),De=i.a.useCallback((function(){L(!0);var t,n,i=null==$;a(!0===i?(t=e,n=q.id,function(){return Cc.delete("/".concat(t,"/country/").concat(n,"/mnp-provider")).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}):function(e,t,n){return function(){return Cc.put("/".concat(e,"/country/").concat(t,"/mnp-provider"),JSON.stringify(n)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(e,q.id,$.id)).then((function(){!0===i&&a(function(e){return{data:{id:e},type:_t}}(e)),_e({severity:"success",message:!1===i?"Route MNP Provider Successfully Edited":"Route MNP Provider Successfully Removed"})})).catch((function(e){_e({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){L(!1)}))}),[e,a,_e,q,$]),Te=hj({dataState:he,countryFieldID:"country_name",networkFieldID:"network_name"}),Me=Te.availableNetworks,Ne=Te.availableCountries,Re=sb({variant:"Input"}),Ae=sb({variant:"MultiSelect",props:{data:Ne}}),Pe=sb({variant:"MultiSelect",props:{data:Me}}),Le=sb({variant:"Input",props:{min:0,label:"MCC"}}),Fe=sb({variant:"Input",props:{min:0,label:"MNC"}}),Ue=i.a.useMemo((function(){return[{field:"country",title:"Country",filterCell:Ae},{field:"mcc",title:"MCC",filterCell:Le},{field:"network",title:"Network",filterCell:Pe},{field:"mnc",title:"MNC",filterCell:Fe},{field:"summary",title:"Summary",filterCell:Re},{field:"id",title:"ID",view:"routeDOM",width:"150px",filterCell:Re},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[Le,Fe,Ae,Pe,Re]),qe=i.a.useMemo((function(){if(null!=q){var t=Oe.getIn([e,"countries",q.id,"mnp_provider"]);return(null===$||void 0===$?void 0:$.id)===t}}),[Oe,e,q,$]);return i.a.useEffect((function(){var t=Oe.getIn([e,"networks"]);h((null==t?[]:Object(x.a)(t.values())).reduce((function(t,a){var i=a.get("id"),c=xe.get(i);if(null==c)return t;var r=ve.get(c.get("country_id"));return null==r||t.push({id:i,routeDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:i})}),summary:a.get("summary"),networkID:i,network:c.get("network_name"),countryID:c.get("country_id"),country:r.get("country_name"),mcc:c.getIn(["mccmnc",0,"mcc"]),mnc:c.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit Rule","aria-label":"Edit Rule",onClick:function(){return n.push("/routes/".concat(e,"/countries/").concat(r.get("country_id"),"/operators/").concat(i))}})}),t}),[]).sort((function(e,t){return"DEFAULT"===t.name?1:"DEFAULT"===e.name?-1:"NON-ASSIGNED-NUMBERS"===t.name?1:"NON-ASSIGNED-NUMBERS"===e.name?-1:e.name>t.name?1:e.name<t.name?-1:0})))}),[Oe,e,ve,n,xe,q,J]),Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:O}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Rp,{routeID:e})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Route Details"})}),Object(Ka.jsx)(w.c,{children:!0===E?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:s,onControlsChange:Se})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return n.push("/routes")},children:"Cancel"}),!0===be&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ie,disabled:!0===E,children:"Save"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:8,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===be&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wb,{title:"MNP Configuration",expanded:ue,onToggleExpanded:ke,children:Object(Ka.jsx)(w.c,{children:!0===P?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"smallLoader"})}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,alignItems:"flex-end",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:null==q?12:!0===be?4:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",label:"Country",value:q,onChange:G,data:V,opened:J,onOpen:we,onClose:Ee})}),null!=q&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===be?4:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",label:"MNP Provider",value:$,onChange:Z,data:ne})}),!0===be&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(k.a,{primary:!0,disabled:qe,onClick:De,children:"Change MNP Lookup"})})]})]})})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Operator Configuration"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:M,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:he.skip,take:he.take,sort:he.sort,filter:he.filter,columns:Ue,data:f,onDataStateChange:ye})})]})})]})})]})})]})]})}function Lp(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var Fp=i.a.memo(Pp),Up={skip:0,take:20};function qp(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(!0),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(!1),C=Object(o.a)(v,2),y=C[0],E=C[1],I=i.a.useState([]),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useContext(Tm),R=N.setTitle,A=N.setBreadcrumbs,P=N.setContentTitle,L=oj(r),F=i.a.useMemo((function(){return e.has("API:ROUTE_MANAGEMENT:WRITE")}),[e]),U=i.a.useState(!1),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(Up),V=Object(o.a)(B,2),z=V[0],W=V[1];i.a.useEffect((function(){return R("Routes"),P("Routes"),A([{name:"Routes"}]),function(){R(null),A([]),P(null)}}),[R,P,A]);var K=i.a.useCallback((function(e){n(Ui(e))}),[n]),J=Object(l.d)((function(e){return{route:e.route}})).route;i.a.useEffect((function(){if(!1!==y){var e=Object.assign({name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},notes:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{required:!1,maxLength:1e3},valid:!0,validationMessage:""}});s(e)}}),[y]);var Y=i.a.useCallback((function(){n(Lr())}),[n]),Q=i.a.useCallback((function(){return Y(),n(Fr())}),[n,Y]),X=i.a.useCallback((function(){return f(!0),Q().then((function(){f(!1)})).catch((function(e){K({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[Q,K]);i.a.useEffect((function(){return X(),function(){return Y()}}),[Y,X]);var $=i.a.useCallback((function(){W(Up)}),[]),Z=i.a.useCallback((function(e){W(e.dataState)}),[]),ee=i.a.useCallback((function(e){O(!0),s(e)}),[]),te=i.a.useCallback((function(e){M([e]),H(!0)}),[]),ne=i.a.useCallback((function(){var e;f(!0),n((e=T[0],function(){return Cc.delete("/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){K({severity:"success",message:"Route Successfully Deleted"})})).catch((function(e){K({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return Q()})).then((function(){f(!1),M([]),H(!1)}))}),[n,Q,K,T]),ae=i.a.useCallback((function(){M([]),H(!1)}),[]),ie=i.a.useCallback((function(){E(!0)}),[]),ce=i.a.useCallback((function(){E(!1)}),[]),re=i.a.useCallback((function(){var e,t=L(),a=t.invalidMessages,i=t.controls;(s(i),a.length>0)?K({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}):(f(!0),n((e={name:Gp(i.name),description:Gp(i.notes)},function(){return Cc.post("",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){return K({severity:"success",message:"Route Successfully Added"}),O(!1),Q()})).catch((function(e){K({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){f(!1),E(!1)})))}),[n,K,Q,L]),se=sb({variant:"Input",props:{label:"Name"}}),le=sb({variant:"Input",props:{label:"ID"}}),oe=sb({variant:"Input",props:{label:"Description"}}),ue=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:se},{field:"description",view:"descriptionDOM",title:"Description",width:"300px",filterCell:oe},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:le},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[oe,se,le]),de=i.a.useMemo((function(){return Object(x.a)(J.values()).map((function(e){var n=""===e.get("description")?"-":e.get("description");return{id:e.get("id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:e.get("id")})}),name:e.get("name"),deleted:1===e.get("deleted"),description:e.get("description"),descriptionDOM:null==n?"-":n.length>40?Object(Ka.jsx)(Sd.a,{anchorElement:"target",children:Object(Ka.jsx)("span",{title:n,children:n.substring(0,40)+" ..."})}):n,deletedDOM:Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)("input",{disabled:!0,type:"checkbox",className:"k-checkbox",defaultChecked:e.get("deleted")}),Object(Ka.jsx)("label",{className:"k-checkbox-label"})]}),actions:1!==e.get("deleted")&&Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("name")," Route"),"aria-label":"Edit ".concat(e.get("name")," Route"),onClick:function(){return t.push("/routes/".concat(e.get("id")))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable ".concat(e.get("name")," Route"),"aria-label":"Disable ".concat(e.get("name")," Route"),style:{display:"none"},onClick:function(){te(e.get("id"))}})]})}}))}),[J,t,te]),me=i.a.useMemo((function(){return T.map((function(e){return Object(Ka.jsxs)("li",{children:[J.getIn([e,"name"]),"(ID: ",e,")"]},e)}))}),[J,T]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(Yb,{show:g}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===y?6:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===F&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,style:{height:"35px"},onClick:function(){return ie()},children:"Add Route"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:j,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:z.skip,take:z.take,sort:z.sort,filter:z.filter,data:de,columns:ue,onDataStateChange:Z})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:X,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:$,children:"Clear Filters and Sorting"})]})]})}),!0===y&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Add Route"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:r,onControlsChange:ee})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:ce,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:re,disabled:!0===j,children:"Save"})]})]})})]}),!0===G&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ae,children:["Are you sure you want to delete the following Routes?",Object(Ka.jsx)("ul",{children:me}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ne,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ae,children:"Cancel"})]})]})]})}function Gp(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var Hp=i.a.memo(qp);function Bp(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setBreadcrumbs,a=e.setContentTitle;return i.a.useEffect((function(){return t("Routes"),a("Routes"),n([{name:"Routes"}]),function(){t(null),n([]),a(null)}}),[t,a,n]),Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Rp,{})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Hp,{})})]})})}var Vp=i.a.memo(Bp),zp=n(866);function Wp(e){var t=e.onCancel,n=e.onSubmit,a=bm(t),c=i.a.useState(new Date),r=Object(o.a)(c,2),s=r[0],l=r[1],u=i.a.useState([]),d=Object(o.a)(u,2),m=d[0],b=d[1],j=i.a.useMemo((function(){return{min:new Date,required:!0}}),[]),f=Nm(i.a.useMemo((function(){return[{label:"Scheduled Date",value:s,setErrors:b,validations:j}]}),[s,b,j])),h=i.a.useCallback((function(){"function"===typeof n&&n(s,f())}),[s,n,f]);return Object(Ka.jsxs)(Ub.a,{width:"460px",onClose:a,title:"Schedule Change",style:{top:"-100px"},children:[Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{min:new Date,variant:"DateTime",label:"Scheduled Date",value:s,onChange:l,errors:m,validations:j,onErrorsChange:b})})}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:h,children:"Submit"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:a,children:"Cancel"})]})]})}var Kp=i.a.memo(Wp),Jp={QOS:".0",CATEGORY:".1",COMMITMENT:".2",TIME_BASED:".3"};function Yp(){var e=Object(d.j)(),t=e.ruleID,n=e.routeID,a=e.countryID,c=e.operatorID,r=b(),s=Object(d.h)(),u=Object(l.c)(),j=i.a.useState(!0),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(),O=Object(o.a)(g,2),v=O[0],C=O[1],y=i.a.useState({}),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(!1),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(new m.b),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useContext(Tm),$=X.setTitle,Z=X.setBreadcrumbs,ee=X.setContentTitle,te=i.a.useState(!1),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=i.a.useMemo((function(){return{min:0,required:!0}}),[]),re=!0===N||Y.size>0,se=i.a.useState(),le=Object(o.a)(se,2),oe=le[0],ue=le[1],de=i.a.useState(null),me=Object(o.a)(de,2),be=me[0],je=me[1],fe=oj(v),he=oj(L),pe=oj(G),ge=oj(z),Oe=oj(oe),ve=i.a.useState(!1),xe=Object(o.a)(ve,2),Ce=xe[0],_e=xe[1],ye=i.a.useState(!1),Se=Object(o.a)(ye,2),ke=Se[0],we=Se[1],Ee=i.a.useState(!1),Ie=Object(o.a)(Ee,2),De=Ie[0],Te=Ie[1],Me=i.a.useState(!1),Ne=Object(o.a)(Me,2),Re=Ne[0],Ae=Ne[1],Pe=i.a.useState(null),Le=Object(o.a)(Pe,2),Fe=Le[0],Ue=Le[1],qe=i.a.useState(new m.b),Ge=Object(o.a)(qe,2),He=Ge[0],Be=Ge[1],Ve=i.a.useState([]),ze=Object(o.a)(Ve,2),We=ze[0],Ke=ze[1],Je=i.a.useState([]),Ye=Object(o.a)(Je,2),Qe=Ye[0],Xe=Ye[1],$e=i.a.useState([]),Ze=Object(o.a)($e,2),et=Ze[0],tt=Ze[1],nt=i.a.useState({skip:0,take:20}),at=Object(o.a)(nt,2),it=at[0],ct=at[1],rt=i.a.useState({skip:0,take:20}),st=Object(o.a)(rt,2),lt=st[0],ot=st[1],ut=i.a.useMemo((function(){return r.has("API:ROUTE_MANAGEMENT:WRITE")}),[r]),dt=i.a.useMemo((function(){return r.has("API:LCR:WRITE")}),[r]),mt=i.a.useMemo((function(){return r.has("API:QOS:WRITE")}),[r]),bt=i.a.useMemo((function(){return r.has("API:CATEGORY:WRITE")}),[r]),jt=i.a.useMemo((function(){return r.has("API:ROUTE_TIMEBASED_CONDITION:WRITE")}),[r]),ft=i.a.useMemo((function(){return r.has("API:SUPPLIER_COMMITMENT:WRITE")}),[r]),ht=!0===["new","default"].includes(t),pt=i.a.useState(!0===ht?[]:Object.keys(Jp).map((function(e){return Jp[e]}))),gt=Object(o.a)(pt,2),Ot=gt[0],vt=gt[1],xt=Object(l.d)((function(e){var n=e.lcr,a=e.qos,i=e.route,c=e.network,r=e.country,s=e.routeRule;return{lcr:n,qos:a,route:i,network:c,country:r,categorisation:e.categorisation,supplierConnection:e.supplierConnection,supplierCommitment:e.supplierCommitment,routeRuleConnection:e.routeRuleConnection,routeRuleQOSCondition:e.routeRuleQOSCondition,routeRuleCategoryCondition:e.routeRuleCategoryCondition,routeRuleTimeBasedCondition:e.routeRuleTimeBasedCondition,routeRuleCommitmentCondition:e.routeRuleCommitmentCondition,routeRule:s.get(t)}})),Ct=xt.lcr,_t=xt.qos,yt=xt.route,St=xt.network,kt=xt.country,wt=xt.routeRule,Et=xt.categorisation,It=xt.supplierConnection,Dt=xt.supplierCommitment,Tt=xt.routeRuleConnection,Mt=xt.routeRuleQOSCondition,Nt=xt.routeRuleCategoryCondition,Rt=xt.routeRuleTimeBasedCondition,At=xt.routeRuleCommitmentCondition,Pt=i.a.useMemo((function(){return"default"===t||null!=wt&&wt.get("priority")===Ap}),[t,wt]);i.a.useEffect((function(){var e=yt.getIn([n,"name"]),t=kt.getIn([a,"country_name"]),i=St.getIn([c,"network_name"]);return!0===ht?($("Route Rule Creation"),ee("Route Rule Creation")):null==e?($("Route Rule Modification"),ee("Route Rule Modification")):($("".concat(e," Route Rule Modification")),ee("".concat(e," Route Rule Modification"))),Z([{link:"/routes",name:"Routes"},{link:"/routes/".concat(n),name:e},{name:t},{name:i},{link:"/routes/".concat(n,"/countries/").concat(a,"/operators/").concat(c),name:"Rules"},{name:ht?"Creation":"Modification"}]),function(){$(null),Z([]),ee(null)}}),[ht,yt,St,kt,n,$,a,c,Pt,Z,ee]);var Lt=i.a.useCallback((function(e){u(Ui(e))}),[u]);i.a.useEffect((function(){var e=[];return!1===ht&&(!0===mt&&e.push(u(Vr(n,a,c,t))),!0===bt&&e.push(u(Gr(n,a,c,t))),!0===ft&&e.push(u(Hr(n,a,c,t))),!0===jt&&e.push(u(Br(n,a,c,t))),e.push(Promise.all([u(qr(n,a,c,t))]).then((function(e){var i=Object(o.a)(e,1)[0];return u("LCR"===i.type&&!0===dt?zr(n,a,c,t):Wr(n,a,c,t))})))),e.push(u(Ur(n)),u(Bc())),!0===mt&&e.push(u(oo())),!0===bt&&e.push(u($l())),!0===dt&&e.push(u(sr())),!0===ft&&e.push(u(er())),Promise.all(e).then((function(){p(!1)})).catch((function(e){Lt({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){u(nr()),u(lo()),u(Lr()),u(br()),u(Jl()),u(Ac()),u($c()),u(gr()),u(vr()),u(Cr()),u(yr()),u(kr())}}),[ht,t,Lt,n,u,a,c,mt,bt,dt,ft,jt]);var Ft=i.a.useMemo((function(){return _t.reduce((function(e,t){return null!=Fe&&Fe.qos_id===t.get("id")||e.push(t.toJS()),e}),[])}),[_t,Fe]),Ut=i.a.useMemo((function(){return Et.reduce((function(e,t){return!1===We.includes(t.get("id"))&&e.push(t.toJS()),e}),[])}),[Et,We]),qt=i.a.useMemo((function(){return Dt.reduce((function(e,t){return!1===et.includes(t.get("commitment_id"))&&e.push(t.toJS()),e}),[])}),[Dt,et]),Gt=i.a.useCallback((function(){if(null==wt)return{};var e=wt.get("category_conditions");return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=Nt.get(t);return null==n||(e[n.get("category_id")]=t),e}),{})}),[wt,Nt]),Ht=i.a.useCallback((function(){if(null==wt)return{};var e=wt.get("commitment_conditions");return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=At.get(t);return null==n||(e[n.get("commitment_id")]=t),e}),{})}),[wt,At]);i.a.useEffect((function(){if(!1!==Ce){var e={qos:{flexSize:4,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Quality of Service"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},connection:{flexSize:4,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Connection"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.qos.data=Object(x.a)(_t.values()).map((function(e){return{id:e.get("id"),name:e.get("name")}}),[]),e.connection.data=Object(x.a)(It.values()).filter((function(e){return"blocked"!==e.get("connection_type")})).map((function(e){return{id:e.get("connection_id"),name:e.get("connection_name")}}),[]),C(e)}}),[_t,It,Ce]),i.a.useEffect((function(){if(!1!==ke){var e={category:{flexSize:4,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Category"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.category.data=Ut.map((function(e){return{id:e.id,name:e.name}})),F(e)}}),[Et,Ut,ke]),i.a.useEffect((function(){if(!1!==De){var e={commitment:{flexSize:4,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Commitment"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.commitment.data=qt.map((function(e){return{id:e.commitment_id,name:e.commitment_name}})),W(e)}}),[qt,De]),i.a.useEffect((function(){!1!==Re&&H({timeFrom:{flexSize:4,elementType:"timePicker",elementConfig:{placeholder:"From"},value:null,validation:{required:!0},validationMessage:"",valid:!0},timeTo:{flexSize:4,elementType:"timePicker",elementConfig:{placeholder:"To"},value:null,validation:{required:!0},validationMessage:"",valid:!0}})}),[Re]),i.a.useEffect((function(){if("LCR"===be){var e={lcr:{flexSize:4,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"LCR"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}},t=Object(x.a)(Ct.values()).reduce((function(e,t){var n={id:t.get("id"),name:t.get("name")};return e.data.push(n),null!=wt&&t.get("id")===wt.get("lcr")&&(e.value=n),e}),{data:[],value:null}),n=t.data,a=t.value;e.lcr.data=n,e.lcr.value=a,ue(e)}}),[Ct,wt,be]),i.a.useEffect((function(){if(null!=wt){var e=wt.get("connections");Be((null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=Tt.get(t);return null==n||null==It.get(n.get("connection_id"))?e:e.set(n.get("connection_id"),{ratio:n.get("ratio")})}),new m.b))}else Be(new m.b)}),[wt,It,Tt]),i.a.useEffect((function(){if(null!=wt){var e=null==wt.get("qos_conditions")?[]:wt.get("qos_conditions").toJS();if(e.length>1)Lt({severity:"error",message:"Invalid Rule Configuration: Contact the System Administrator",action:{label:"Dismiss"}});else{var t=Mt.get(e[0]);null!=t&&Ue({qos_id:t.get("qos_id"),id:t.get("condition_qos_id"),connection_id:t.get("connection_id")})}}else Ue(null)}),[Lt,wt,Mt]),i.a.useEffect((function(){var e=[];if(null!=wt){var t=wt.get("category_conditions");(null==t?[]:Object(x.a)(t.values())).reduce((function(e,t){var n=Nt.getIn([t,"category_id"]);return null==Et.get(n)||e.push(n),e}),e)}Ke(e)}),[wt,Et,Nt]),i.a.useEffect((function(){var e=[];if(null!=wt){var t=wt.get("commitment_conditions");(null==t?[]:Object(x.a)(t.values())).reduce((function(e,t){var n=At.getIn([t,"commitment_id"]);return null==Dt.get(n)||e.push(n),e}),e)}tt(e)}),[wt,Dt,At]),i.a.useEffect((function(){var e=[];if(null!=wt){var t=wt.get("time_based_conditions");(null==t?[]:Object(x.a)(t.values())).reduce((function(e,t){var n=Rt.getIn([t,"to_hours"]),a=Rt.getIn([t,"to_minutes"]),i=Rt.getIn([t,"from_hours"]),c=Rt.getIn([t,"from_minutes"]),r=li(n,a),s=li(i,c);return e.push({id:t,to_hours:r.hours,to_minutes:r.minutes,from_hours:s.hours,from_minutes:s.minutes}),e}),e)}Xe(e)}),[wt,Rt]),i.a.useEffect((function(){null!=wt&&je(wt.get("type"))}),[wt]);var Bt=i.a.useCallback((function(e){R(!0),C(e)}),[]),Vt=i.a.useCallback((function(e){R(!0),F(e)}),[]),zt=i.a.useCallback((function(e){null!=e.timeTo.value&&e.timeFrom.value>e.timeTo.value||(R(!0),H(e))}),[]),Wt=i.a.useCallback((function(e){W(e),R(!0)}),[]),Kt=i.a.useCallback((function(e){ue(e),R(!0)}),[]),Jt=i.a.useCallback((function(e){!0===Ot.includes(Jp.QOS)&&e.stopPropagation(),_e(!Ce)}),[Ot,Ce]),Yt=i.a.useCallback((function(e){!0===Ot.includes(Jp.CATEGORY)&&e.stopPropagation(),we(!ke)}),[Ot,ke]),Qt=i.a.useCallback((function(e){!0===Ot.includes(Jp.COMMITMENT)&&e.stopPropagation(),Te(!De)}),[Ot,De]),Xt=i.a.useCallback((function(e){!0===Ot.includes(Jp.TIME_BASED)&&e.stopPropagation(),Ae(!Re)}),[Ot,Re]),$t=i.a.useCallback((function(){var e=fe(),t=e.invalidMessages,n=e.controls;C(n),t.length>0?Lt({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}}):(Ue({qos_id:n.qos.value.id,connection_id:n.connection.value.id}),_e(!1))}),[Lt,fe]),Zt=i.a.useCallback((function(){var e=he(),t=e.invalidMessages,n=e.controls;if(F(n),t.length>0)Lt({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}});else{var a=Object(x.a)(We);a.push(n.category.value.id),Ke(Object(x.a)(new Set(a))),we(!1)}}),[Lt,We,he]),en=i.a.useCallback((function(){var e=ge(),t=e.invalidMessages,n=e.controls;if(W(n),t.length>0)Lt({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}});else{var a=Object(x.a)(et);a.push(n.commitment.value.id),tt(Object(x.a)(new Set(a))),Te(!1)}}),[Lt,et,ge]),tn=i.a.useCallback((function(){var e=pe(),t=e.invalidMessages,n=e.controls;if(H(n),t.length>0)Lt({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}});else{var a=Object(x.a)(Qe);a.push({to_hours:n.timeTo.value.getHours(),to_minutes:n.timeTo.value.getMinutes(),from_hours:n.timeFrom.value.getHours(),from_minutes:n.timeFrom.value.getMinutes()}),Xe(a),Ae(!1)}}),[Lt,Qe,pe]),nn=i.a.useCallback((function(e){ct(e.dataState)}),[]),an=i.a.useCallback((function(e){ot(e.dataState)}),[]),cn=i.a.useCallback((function(){Ue(null),R(!0)}),[]),rn=i.a.useCallback((function(e){var t=Object(x.a)(We),n=t.indexOf(e);-1!==n&&(t.splice(n,1),Ke(t),R(!0))}),[We]),sn=i.a.useCallback((function(e){var t=Object(x.a)(et),n=t.indexOf(e);-1!==n&&(t.splice(n,1),tt(t),R(!0))}),[et]),ln=i.a.useCallback((function(e){var t=Object(x.a)(Qe);t.splice(e,1),Xe(t),R(!0)}),[Qe]),on=i.a.useCallback((function(e){var t=Object(x.a)(Ot),n=t.indexOf(e.target.props.uniquePrivateKey);-1===n?t.push(e.target.props.uniquePrivateKey):t.splice(n,1),vt(t)}),[Ot]),un=i.a.useCallback((function(e){!1!==ut&&(R(!0),je(e.target.value))}),[ut]),dn=i.a.useCallback((function(e){if(!1!==ut){var t=e.id,n=e.ratio;if(null==I[t]){var a=Object.assign({},I);a[t]={errors:[],value:!0===Y.has(t)?Y.get(t):n},D(a)}}}),[I,Y,ut]),mn=i.a.useCallback((function(e){var t=e.dataItem;He.size<2||dn({id:t.id,ratio:t.currentRatio})}),[dn,He]),bn=i.a.useCallback((function(e,t){if(null!=I[e]){var n=Object.assign({},I);I[e].value=t,D(n)}}),[I]),jn=i.a.useCallback((function(e){if(null!=I[e]){var t=Object.assign({},I);delete t[e],D(t)}}),[I]),fn=i.a.useCallback((function(e){!1!==Y.has(e)&&Q(Y.delete(e))}),[Y]),hn=i.a.useCallback((function(e,t){var n=I[e];if(null!=n){var a=Object.assign({},I);if(n.value===t)return delete a[e],D(a),void Q(Y.delete(e));var i=Xa([{label:"Ratios",value:n.value,validations:ce}]);i.length>0?(a[e].errors=i,Lt({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}})):(delete a[e],Q(Y.set(e,n.value))),D(a)}}),[Lt,Y,I,ce]),pn=i.a.useCallback((function(){var e=null==wt?null:wt.get("lcr"),t=function(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}(oe.lcr);return t===e?null:t}),[wt,oe]),gn=i.a.useCallback((function(){var e=null==wt||!1===wt.has("connections")?[]:wt.get("connections").toJS();return Object(x.a)(new Set([].concat(Object(x.a)(e),Object(x.a)(He.keys())))).reduce((function(t,n){var a=He.has(n),i=e.includes(n);if(!0===i&&!1===a&&t.push({action:Dp.delete.id,connection_id:n}),!1===i&&!0===a&&t.push({action:Dp.create.id,connection_id:n,ratio:!1===Y.has(n)?1:Y.get(n)}),!0===i&&!0===a){var c=Y.has(n)?Y.get(n):He.getIn([n,"ratio"]);c!==Tt.getIn([n,"ratio"])&&t.push({ratio:c,action:Dp.update.id,connection_id:n})}return t}),[])}),[wt,Y,He,Tt]),On=i.a.useCallback((function(){var e=null==wt||!1===wt.has("qos_conditions")?null:wt.get("qos_conditions").first();if(null==Fe&&null!=e)return[{action:Dp.delete.id,qos_condition_id:e}];if(null!=Fe&&null==e)return[{action:Dp.create.id,qos_id:Fe.qos_id,connection_id:Fe.connection_id}];if(null!=Fe&&null!=e){var t=Mt.get(e),n=t.get("qos_id")!==Fe.qos_id,a=t.get("connection_id")!==Fe.connection_id;if(!0===n||!0===a)return[{action:Dp.update.id,qos_id:Fe.qos_id,qos_condition_id:e,connection_id:Fe.connection_id}]}return[]}),[wt,Fe,Mt]),vn=i.a.useCallback((function(){var e=Gt(),t=Object.keys(e);return Object(x.a)(new Set([].concat(Object(x.a)(t),Object(x.a)(We)))).reduce((function(n,a){var i=We.includes(a),c=t.includes(a);return!0===c&&!1===i&&n.push({action:Dp.delete.id,category_condition_id:e[a]}),!1===c&&!0===i&&n.push({action:Dp.create.id,category_id:a}),n}),[])}),[We,Gt]),xn=i.a.useCallback((function(){var e=Ht(),t=Object.keys(e);return Object(x.a)(new Set([].concat(Object(x.a)(t),Object(x.a)(et)))).reduce((function(n,a){var i=et.includes(a),c=t.includes(a);return!0===c&&!1===i&&n.push({action:Dp.delete.id,commitment_condition_id:e[a]}),!1===c&&!0===i&&n.push({action:Dp.create.id,commitment_id:a}),n}),[])}),[et,Ht]),Cn=i.a.useCallback((function(){var e=null==wt||!1===wt.has("time_based_conditions")?[]:Object(x.a)(wt.get("time_based_conditions").values()),t=[],n=Qe.reduce((function(e,n){if(null!=n.id)return e.push(n.id),e;var a=si(n.to_hours,n.to_minutes),i=si(n.from_hours,n.from_minutes);return t.push({action:Dp.create.id,to_hours:a.hours,to_minutes:a.minutes,from_hours:i.hours,from_minutes:i.minutes}),e}),[]);return e.reduce((function(e,t){return!1===n.includes(t)&&e.push({action:Dp.delete.id,timebased_condition_id:t}),e}),t)}),[wt,Qe]),_n=i.a.useCallback((function(e,i){if(i.length>0)Lt({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{p(!0),ie(!1);var r={conditions:{},scheduled_for:e.getTime(),action:!0===ht?Dp.create.id:Dp.update.id};if(!0===mt&&(r.conditions.quality_of_service=On()),!0===bt&&(r.conditions.categories=vn()),!0===ft&&(r.conditions.commitments=xn()),!0===jt&&(r.conditions.timebased=Cn()),!1===ht&&(r.rule_id=t),!0===ht&&!0===Pt&&(r.priority=Ap),"LCR"===be&&!0===dt){var l=pn();null!=l&&(r.type="LCR",r.lcr={lcr_id:l,action:Dp.update.id})}"LOADSHARE"===be&&(r.connections=gn(),r.connections.length>0&&(r.type="LOADSHARE")),u(function(e,t,n,a){return function(){return Cc.post("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/schedules"),a).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(n,a,c,r)).then((function(){R(!1),Q(new m.b),Lt({severity:"success",message:!0===ht?"Route Rule Successfully Scheduled For Creation":"Route Rule Successfully Scheduled For Modification"}),s.push("/routes/".concat(n,"/countries/").concat(a,"/operators/").concat(c))})).catch((function(e){Lt({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return p(!1)}))}}),[ht,t,n,s,u,a,Lt,c,On,pn,Pt,vn,gn,xn,be,dt,mt,Cn,bt,jt,ft]),yn=i.a.useCallback((function(){ie(!1)}),[]),Sn=i.a.useCallback((function(){var e=[];null==be&&e.push("Please choose a Supplier Connection type");var t=null;if("LCR"===be){var n=Oe();t=n.controls,e.push.apply(e,Object(x.a)(n.invalidMessages)),ue(t)}else 0===He.size&&e.push("Please include an available connection");!1===Pt&&null==Fe&&0===We.length&&0===Qe.length&&0===et.length&&e.push("Please add a condition"),e.length>0?Lt({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):ie(!0)}),[Lt,Pt,He,Fe,be,We,Qe,et,Oe]),kn=i.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Be(He.set(e,{ratio:t}))}),[He]),wn=i.a.useCallback((function(e){Be(He.delete(e))}),[He]),En=sb({variant:"Input"}),In=sb({variant:"Numeric",props:{min:0}}),Dn=i.a.useMemo((function(){var e=[{field:"name",title:"Name",width:"490px",filterCell:En}];return!0===ut&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[En,ut]),Tn=i.a.useMemo((function(){var e=He.size>1,t=[{field:"name",title:"Name",width:!0===e?!0===ut?"300px":"570px":"490px",filterCell:En}];return!0===e&&t.push({field:"ratio",title:"Ratio",view:"ratioDOM",width:!0===ut?"250px":"570px",filterCell:In}),!0===ut&&t.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),t}),[En,He,In,ut]),Mn=i.a.useMemo((function(){return Object(x.a)(It.values()).reduce((function(e,t){var n=t.get("connection_id");return He.has(n)||e.push({id:n,name:t.get("connection_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"add",title:"Add ".concat(t.get("connection_name")," Connection"),"aria-label":"Add ".concat(t.get("connection_name")," Connection"),onClick:function(){return kn(n)}})}),e}),[])}),[kn,It,He]),Nn=i.a.useMemo((function(){return He.reduce((function(e,t,n){var a=It.get(n);if(null==a)return e;var c=Y.has(n)?Y.get(n):t.ratio,r=I[n],s=null!=r;return e.push({ratio:c,id:n,currentRatio:c,name:a.get("connection_name"),ratioDOM:!1===s?Object(Ka.jsx)("div",{className:"ResponsiveGridEditableCell",onClick:function(){return dn({id:n,ratio:c})},children:c}):Object(Ka.jsx)(fm,{variant:"Numeric",min:0,autofocus:!0,value:r.value,errors:r.errors,validations:ce,onChange:function(e){return bn(n,e)}}),actions:!1===s?Object(Ka.jsxs)(Ka.Fragment,{children:[!0===Y.has(n)&&Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",title:"Revert Ratio","aria-label":"Revert Ratio",onClick:function(){return fn(n)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",title:"Remove ".concat(a.get("connection_name")," Connection"),"aria-label":"Remove ".concat(a.get("connection_name")," Connection"),onClick:function(){return wn(n)}})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Save Ratio","aria-label":"Save Ratio",onClick:function(){hn(n,t.ratio)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel Change","aria-label":"Cancel Change",onClick:function(){return jn(n)}})]})}),e}),[])}),[Y,wn,It,He,jn,dn,fn,hn,I,ce,bn]),Rn=i.a.useMemo((function(){return Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{children:"Quality of Service"}),!0===ut&&null==Fe&&Ft.length>0&&!1===Ce&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat",onClick:Jt,children:"Add Condition"})]})}),[Fe,Ft,ut,Ce,Jt]),An=i.a.useMemo((function(){return Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{children:"Categories"}),!0===ut&&Ut.length>0&&!1===ke&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat",onClick:Yt,children:"Add Condition"})]})}),[Ut,ut,ke,Yt]),Pn=i.a.useMemo((function(){return Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{children:"Commitments"}),!0===ut&&qt.length>0&&!1===De&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat",onClick:Qt,children:"Add Condition"})]})}),[qt,ut,De,Qt]),Ln=i.a.useMemo((function(){return Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{children:"Time-Based"}),!0===ut&&!1===Re&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat",onClick:Xt,children:"Add Condition"})]})}),[ut,Re,Xt]),Fn=i.a.useMemo((function(){if(null==Fe)return Object(Ka.jsx)("center",{children:"No Quality of Service Conditions Configured"});var e=_t.getIn([Fe.qos_id,"name"]),t=It.getIn([Fe.connection_id,"connection_name"]);return null!=e&&null!=t?Object(Ka.jsx)(zp.a,{size:"small",label:"".concat(e," using connection: ").concat(t),onDelete:!1===ut?null:cn}):void 0}),[_t,It,Fe,cn,ut]),Un=i.a.useMemo((function(){return 0===We.length?Object(Ka.jsx)("center",{children:"No Category Conditions Configured"}):We.reduce((function(e,t){var n=Et.getIn([t,"name"]);return null==n||e.push(Object(Ka.jsx)(zp.a,{size:"small",label:n,onDelete:!1===ut?null:function(){return rn(t)}},t)),e}),[])}),[Et,ut,rn,We]),qn=i.a.useMemo((function(){return 0===et.length?Object(Ka.jsx)("center",{children:"No Commitment Conditions Configured"}):et.reduce((function(e,t){var n=Dt.getIn([t,"commitment_name"]);return null==n||e.push(Object(Ka.jsx)(zp.a,{size:"small",component:"span",label:n,onDelete:!1===ut?null:function(){return sn(t)}},t)),e}),[])}),[Dt,ut,sn,et]),Gn=i.a.useMemo((function(){return 0===Qe.length?Object(Ka.jsx)("center",{children:"No Time Based Conditions Configured"}):Qe.map((function(e,t){var n=[String(e.from_hours).padStart(2,"0"),String(e.from_minutes).padStart(2,"0")].join(":"),a=[String(e.to_hours).padStart(2,"0"),String(e.to_minutes).padStart(2,"0")].join(":");return Object(Ka.jsx)(zp.a,{size:"small",component:"span",label:"".concat(n," - ").concat(a),onDelete:!1===ut?null:function(){return ln(t)}},t)}))}),[ut,ln,Qe]),Hn=i.a.useMemo((function(){return null==be?null:"LCR"===be?Object(Ka.jsx)(lj,{controls:oe,onControlsChange:Kt}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===ut&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:6,children:[Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Available Connections"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:it.skip,take:it.take,sort:it.sort,filter:it.filter,columns:Dn,data:Mn,onDataStateChange:nn})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:!0===ut?6:12,children:[!0===ut&&Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Included Connections"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,onRowClick:mn,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:lt.skip,take:lt.take,sort:lt.sort,filter:lt.filter,columns:Tn,data:Nn,onDataStateChange:an})]})]})}),[mn,be,ut,Nn,lt,Mn,it,oe,Tn,Dn,an,nn,Kt]);return!0===h?Object(Ka.jsx)(Wm,{height:"630px",className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:re}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[!1===Pt&&Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Conditions"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(w.g,{expanded:Ot,onSelect:on,children:[!0===mt&&Object(Ka.jsx)(w.h,{title:Rn,children:Object(Ka.jsx)(_.a,{p:2,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===Ce&&Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:v,onControlsChange:Bt}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[Object(Ka.jsx)(k.a,{style:{marginRight:"10px"},className:"CancelButton",onClick:Jt,children:"Cancel"}),Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:$t,disabled:!0===h,children:"Add"})]})]})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Fn})]})})}),!0===bt&&Object(Ka.jsx)(w.h,{title:An,children:Object(Ka.jsx)(_.a,{p:2,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===ke&&Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:L,onControlsChange:Vt}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:6,children:[Object(Ka.jsx)(k.a,{style:{marginRight:"10px"},className:"CancelButton",onClick:Yt,children:"Cancel"}),Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:Zt,disabled:!0===h,children:"Add"})]})]})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Un})]})})}),!0===ft&&Object(Ka.jsx)(w.h,{title:Pn,children:Object(Ka.jsx)(_.a,{p:2,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===De&&Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:z,onControlsChange:Wt}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:6,children:[Object(Ka.jsx)(k.a,{className:"CancelButton",onClick:Qt,style:{marginRight:"10px"},children:"Cancel"}),Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:en,disabled:!0===h,children:"Add"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("hr",{})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:qn})]})})}),!0===jt&&Object(Ka.jsx)(w.h,{title:Ln,children:Object(Ka.jsx)(_.a,{p:2,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===Re&&Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:G,onControlsChange:zt}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:4,children:[Object(Ka.jsx)(k.a,{className:"CancelButton",onClick:Xt,style:{marginRight:"10px"},children:"Cancel"}),Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:tn,disabled:!0===h,children:"Add"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("hr",{})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Gn})]})})})]})})]})})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Supplier Connection"})}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsx)(S.a,{container:!0,spacing:5,children:Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[!0===dt&&Object(Ka.jsxs)("label",{style:{marginRight:"10px"},children:[Object(Ka.jsx)("input",{type:"radio",value:"LCR",name:"supplierConnectionType",onChange:un,checked:"LCR"===be})," ","LCR"]}),Object(Ka.jsxs)("label",{children:[Object(Ka.jsx)("input",{type:"radio",value:"LOADSHARE",name:"supplierConnectionType",onChange:un,checked:"LOADSHARE"===be})," ","Connection List"]})]})}),Hn]})]}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return s.push("/routes/".concat(n,"/countries/").concat(a,"/operators/").concat(c))},children:"Cancel"}),!0===ut&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Sn,children:"Save"})]})]})]}),!0===ae&&Object(Ka.jsx)(Kp,{onSubmit:_n,onCancel:yn})]})}var Qp=i.a.memo(Yp);function Xp(e){var t=e.dataItem,n=b(),a=Object(l.c)(),c=i.a.useState(!0),r=Object(o.a)(c,2),s=r[0],u=r[1],d=t.type,m=t.routeID,j=t.countryID,f=t.operatorID,h=t.id,p=i.a.useCallback((function(e){a(Ui(e))}),[a]),g=i.a.useMemo((function(){return n.has("API:QOS:READ")}),[n]),O=i.a.useMemo((function(){return n.has("API:CATEGORY:READ")}),[n]),v=i.a.useMemo((function(){return n.has("API:ROUTE_TIMEBASED_CONDITION:READ")}),[n]),C=i.a.useMemo((function(){return n.has("API:SUPPLIER_COMMITMENT:READ")}),[n]),_=Object(l.d)((function(e){var t=e.qos,n=e.lcr,a=e.routeRule;return{qos:t,lcr:n,categorisation:e.categorisation,supplierCommitment:e.supplierCommitment,supplierConnection:e.supplierConnection,routeRuleConnection:e.routeRuleConnection,routeRuleQOSCondition:e.routeRuleQOSCondition,routeRuleCategoryCondition:e.routeRuleCategoryCondition,routeRuleTimeBasedCondition:e.routeRuleTimeBasedCondition,routeRuleCommitmentCondition:e.routeRuleCommitmentCondition,routeRule:a.get(h)}})),y=_.qos,k=_.lcr,w=_.routeRule,E=_.categorisation,I=_.supplierCommitment,D=_.supplierConnection,T=_.routeRuleConnection,M=_.routeRuleQOSCondition,N=_.routeRuleCategoryCondition,R=_.routeRuleTimeBasedCondition,A=_.routeRuleCommitmentCondition;i.a.useEffect((function(){var e=[];!0===g&&e.push(a(Vr(m,j,f,h))),!0===O&&e.push(a(Gr(m,j,f,h))),!0===C&&e.push(a(Hr(m,j,f,h))),!0===v&&e.push(a(Br(m,j,f,h))),"LCR"===d&&e.push(a(zr(m,j,f,h))),Promise.all(e).then((function(e){var t,n=0,i=[];if(g){var c=e[n];if(c.qos_conditions.length>1)return;null!=c.qos_conditions[0]&&i.push(a((t=c.qos_conditions[0].qos_id,function(e){return io.get("/".concat(t)).then((function(t){e(co(t.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))),n++}if(O){var r=e[n];null!=r.category_conditions&&r.category_conditions.forEach((function(e){i.push(a(Zl(e.category_id)))})),n++}C&&(e[n].commitment_conditions.forEach((function(e){i.push(a(function(e){return function(t){return Xc.get("/".concat(e)).then((function(e){t(Zc(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(e.commitment_id)))})),n++);return Promise.all(i)})).then((function(){u(!1)})).catch((function(e){p({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[a,p,d,m,j,f,h,v,O,C,g]);var P=i.a.useMemo((function(){var e=w.get("category_conditions");return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=E.get(N.getIn([t,"category_id"]));return null==n||e.push(Object(Ka.jsx)(zp.a,{size:"small",label:n.get("name")},t)),e}),[])}),[w,E,N]),L=i.a.useMemo((function(){var e=w.get("commitment_conditions");return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=I.get(A.getIn([t,"commitment_id"]));return null==n||e.push(Object(Ka.jsx)(zp.a,{size:"small",label:n.get("commitment_name")},t)),e}),[])}),[w,I,A]),F=i.a.useMemo((function(){var e=null==w.get("qos_conditions")?[]:w.get("qos_conditions").toJS();if(!(e.length>1)){var t=y.get(M.getIn([e[0],"qos_id"]));return null==t?null:Object(Ka.jsx)(zp.a,{size:"small",label:t.get("name")},t.get("id"))}p({severity:"error",message:"Invalid Rule Configuration: Contact the System Administrator",action:{label:"Dismiss"}})}),[p,w,y,M]),U=i.a.useMemo((function(){var e=w.get("time_based_conditions");return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=R.get(t);if(null==n)return e;var a=li(n.get("from_hours"),n.get("from_minutes")),i=[String(a.hours).padStart(2,"0"),String(a.minutes).padStart(2,"0")].join(":"),c=li(n.get("to_hours"),n.get("to_minutes")),r=[String(c.hours).padStart(2,"0"),String(c.minutes).padStart(2,"0")].join(":");return e.push(Object(Ka.jsx)(zp.a,{size:"small",label:"".concat(i," - ").concat(r)},t)),e}),[])}),[w,R]),q=i.a.useMemo((function(){if("LCR"===d){var e=k.getIn([w.get("lcr"),"name"]);return Object(Ka.jsx)(zp.a,{size:"small",label:e})}var t=w.get("connections");return(null==t?[]:Object(x.a)(t.values())).reduce((function(e,t){var n=D.get(T.getIn([t,"connection_id"]));return null==n||e.push(Object(Ka.jsx)(zp.a,{size:"small",label:n.get("connection_name")},t)),e}),[])}),[k,d,w,T,D]);return!0===s?Object(Ka.jsx)(Wm,{height:"150px",className:"loader"}):Object(Ka.jsx)("div",{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[P.length>0&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("span",{children:"Categories:"})," ",P]}),L.length>0&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("span",{children:"Commitments:"})," ",L]}),null!=F&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("span",{children:"QoS:"})," ",F]}),U.length>0&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("span",{children:"Time Based:"})," ",U]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("span",{children:"Supplier Connections:"})," ",q]})]})})}var $p=i.a.memo(Xp),Zp={skip:0,take:20,sort:[{dir:"desc",field:"scheduled_date"}]};function eg(e){var t=e.ruleID,n=e.routeID,a=e.countryID,c=e.networkID,r=e.onClose,s=b(),u=Object(l.c)(),d=bm(r),j=i.a.useState(!1),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),O=Object(o.a)(g,2),v=O[0],C=O[1],y=i.a.useState(Zp),S=Object(o.a)(y,2),w=S[0],E=S[1],I=i.a.useState([]),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useCallback((function(e){u(Ui(e))}),[u]),R=i.a.useCallback((function(){u(function(e){return{data:{ruleID:e},type:Rt}}(t))}),[t,u]),A=i.a.useCallback((function(){return R(),u(Kr(n,a,c,t,ni(w)))}),[t,n,u,w,a,c,R]),P=i.a.useMemo((function(){return s.has("API:ROUTE_MANAGEMENT:WRITE")}),[s]),L=kb({intervalPolicy:"update",name:"Route Rule Changes",request:i.a.useCallback((function(){return A()}),[A]),getData:i.a.useCallback((function(e,n){var a=e.routeRule;return new m.b({totalRecords:n.total_records,data:a.getIn([t,"history"]).reduce((function(e,t){return e.add(new m.b({action:t.get("action"),status:t.get("status"),conditions:t.get("conditions"),schedule_id:t.get("schedule_id"),scheduled_date:t.get("scheduled_date")}))}),new m.e)})}),[t])}),F=L.data,U=L.update,q=i.a.useCallback((function(){return C(!0),U().catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return C(!1)}))}),[N,U]);i.a.useEffect((function(){return p(!0),U().catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){p(!1)})),function(){return R()}}),[N,R,U]);var G=i.a.useCallback((function(e){E(e.dataState)}),[]),H=i.a.useCallback((function(){E(Zp)}),[]),B=i.a.useCallback((function(e){M([].concat(Object(x.a)(T),[e]))}),[T]),V=i.a.useCallback((function(e){var t=Object(x.a)(T),n=t.indexOf(e);-1!==n&&(t.splice(n,1),M(t))}),[T]),z=i.a.useCallback((function(e){p(!0),u(ed(e)).then((function(){V(e),N({severity:"success",message:"Scheduled Change Successfully Cancelled"})})).catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return U()})).catch((function(e){N({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){p(!1)}))}),[U,u,N,V]),W=sb({variant:"Input",props:{label:"Schedule ID"}}),K=sb({variant:"Date",props:{label:"Scheduled Date"}}),J=sb({variant:"MultiSelect",props:{label:"Statuses",data:i.a.useMemo((function(){return Object.keys(Tp).map((function(e){return{id:e,name:Tp[e].name}}),[])}),[])}}),Y=sb({variant:"MultiSelect",props:{label:"Actions",data:i.a.useMemo((function(){return Object.keys(Dp).map((function(e){return{id:e,name:Dp[e].name}}),[])}),[])}}),Q=i.a.useMemo((function(){return F.get("data").reduce((function(e,t){var n=t.get("status"),a=t.get("action"),i=t.get("schedule_id"),c=Dp[a],r=Tp[n],s=T.includes(i);return e.push({schedule_id:i,conditions:t.get("conditions"),scheduleIDDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:i})}),scheduled_date:t.get("scheduled_date"),status:null!=r&&r.name,action:null!=c&&c.name,actionDOM:null!=c&&Object(Ka.jsxs)(wd,{variant:c.variant,children:[Object(Ka.jsx)("i",{className:c.icon})," ",Object(Ka.jsx)("span",{children:c.name})]}),statusDOM:null!=r&&Object(Ka.jsxs)(wd,{variant:r.variant,children:[Object(Ka.jsx)("i",{className:r.icon})," ",Object(Ka.jsx)("span",{children:r.name})]}),scheduledDateDom:!1===s?Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)(Nd,{utc:t.get("scheduled_date")}),"pending"===n&&!0===P&&Object(Ka.jsx)(k.a,{title:"Cancel ".concat(i," Changes"),"aria-label":"Cancel ".concat(i," Changes"),onClick:function(){return B(i)},children:"Cancel"})]}):Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)(_.a,{flex:2,children:"Are you sure you?"}),Object(Ka.jsxs)(_.a,{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)(k.a,{onClick:function(){return z(i)},children:"Yes"}),Object(Ka.jsx)(k.a,{onClick:function(){return V(i)},children:"No"})]})]}),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View ".concat(i," Changes"),"aria-label":"View ".concat(i," Changes"),onClick:function(){return window.open("/route-schedules/".concat(i))}})}),e}),[])}),[F,P,z,B,V,T]),X=i.a.useMemo((function(){return Q.some((function(e){return e.status===Tp.pending.name}))}),[Q]),$=i.a.useMemo((function(){var e=[{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:J},{field:"action",title:"Action",width:"200px",view:"actionDOM",filterCell:Y},{field:"conditions",title:"Conditions",width:"300px",sortable:!1,filterable:!1},{field:"scheduled_date",title:"Scheduled Date",width:!0===X?"360px":"250px",view:"scheduledDateDom",filterCell:K},{field:"schedule_id",title:"ID",view:"scheduleIDDOM",width:"250px",sortable:!1,filterCell:W}];return Q.length>0&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[Q,W,X,Y,J,K]);return Object(Ka.jsxs)(Ub.a,{title:"Route Rule History",onClose:d,width:"1100px",children:[Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:h,style:{minHeight:"400px",maxHeight:"700px"},skip:w.skip,take:w.take,sort:w.sort,filter:w.filter,data:Q,columns:$,total:F.get("totalRecords"),onDataStateChange:G}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:q,disabled:!0===v,children:!0===v?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:H,children:"Clear Filters and Sorting"})]})]})}var tg=i.a.memo(eg);function ng(e){var t=e.ruleID,n=e.isLoading,a=void 0!==n&&n,c=e.onCancel,r=e.onSubmit,s=bm(c),u=i.a.useState(new Date),d=Object(o.a)(u,2),m=d[0],b=d[1],j=i.a.useState([]),f=Object(o.a)(j,2),h=f[0],p=f[1],g=Object(l.d)((function(e){return{routeRule:e.routeRule}})).routeRule,O=i.a.useMemo((function(){return null!=g.getIn([t,"next_scheduled_change"])}),[t,g]),v=i.a.useMemo((function(){return{min:new Date,required:!0}}),[]),x=Nm(i.a.useMemo((function(){return[{label:"Scheduled Date",value:m,setErrors:p,validations:v}]}),[m,p,v])),C=i.a.useCallback((function(){"function"===typeof r&&r(m,x())}),[m,r,x]);return Object(Ka.jsxs)(Ub.a,{width:"460px",onClose:s,title:"Schedule Deletion",style:{top:"-100px"},children:[!0===a?Object(Ka.jsx)("center",{children:"Scheduling Rule Deletion. Please wait."}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{min:new Date,variant:"DateTime",label:"Scheduled Date",value:m,onChange:b,errors:h,validations:v,onErrorsChange:p})}),!0===O&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Note:"})," The rule that you are going to delete has future scheduled changes. By deleting this rule you will also cancel these changes."]})]}),!1===a&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:C,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:s,children:"Cancel"})]})]})}var ag=i.a.memo(ng),ig={skip:0,take:1e6,sort:[{field:"priority",dir:"asc"}]},cg="No Scheduled Changes";function rg(e){var t=e.routeID,n=e.countryID,a=e.operatorID,c=b(),r=Object(d.h)(),s=Object(l.c)(),u=i.a.useState(!0),j=Object(o.a)(u,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState([]),y=Object(o.a)(C,2),E=y[0],I=y[1],D=i.a.useState(ig),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useState(),A=Object(o.a)(R,2),P=A[0],L=A[1],F=i.a.useState(),U=Object(o.a)(F,2),q=U[0],G=U[1],H=i.a.useState(),B=Object(o.a)(H,2),V=B[0],z=B[1],W=i.a.useMemo((function(){return c.has("API:ROUTE_MANAGEMENT:WRITE")}),[c]),K=i.a.useMemo((function(){return c.has("FRONTEND:ROUTE-RULE-PAGE-ACCESS")}),[c]),J=i.a.useMemo((function(){return c.has("API:ROUTE_MANAGEMENT:WRITE")&&c.has("FRONTEND:ROUTE-RULE-PAGE-ACCESS")}),[c]),Y=i.a.useMemo((function(){return c.has("API:LCR:READ")&&c.has("API:LCR:WRITE")}),[c]),Q=i.a.useMemo((function(){return c.has("API:QOS:WRITE")}),[c]),X=i.a.useMemo((function(){return c.has("API:CATEGORY:WRITE")}),[c]),$=i.a.useMemo((function(){return c.has("API:ROUTE_TIMEBASED_CONDITION:WRITE")}),[c]),Z=i.a.useMemo((function(){return c.has("API:SUPPLIER_COMMITMENT:WRITE")}),[c]),ee=i.a.useMemo((function(){if(!1===W)return!1;var e=ni(M),t=ni(ig);return JSON.stringify(e)===JSON.stringify(t)}),[M,W]),te=Object(l.d)((function(e){return{route:e.route,routeRule:e.routeRule}})),ne=te.route,ae=te.routeRule,ie=i.a.useCallback((function(e){s(Ui(e))}),[s]),ce=i.a.useCallback((function(){s(br()),s(Ac()),s(gr()),s(lo()),s(nr()),s(Jl()),s($c()),s(vr()),s(Cr()),s(yr()),s(kr())}),[s]),re=i.a.useCallback((function(){return ce(),s(function(e,t,n){return function(a){return Cc.get("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule")).then((function(t){return a(jr.apply(void 0,Object(x.a)(t.data["route-rules"]))),a(Tr.apply(void 0,[e,n].concat(Object(x.a)(t.data["route-rules"].map((function(e){return e.id})))))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n,a)).then((function(e){return Promise.all(e["route-rules"].reduce((function(e,i){return null==i.type||"LCR"===i.type||e.push(s(Wr(t,n,a,i.id))),e}),[]))}))}),[s,t,n,a,ce]),se=i.a.useCallback((function(){return h(!0),re().then((function(){h(!1)})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[re,ie]);i.a.useEffect((function(){return h(!0),re().then((function(){h(!1)})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return ce()}}),[ie,ce,re]);var le=i.a.useCallback((function(){N(ig)}),[]),oe=i.a.useCallback((function(e){N(e.dataState)}),[]),ue=i.a.useCallback((function(){z(null)}),[]),de=i.a.useCallback((function(){h(!0),z(null),s(ed(ae.getIn([V,"next_scheduled_change","schedule_id"]))).then((function(){ie({severity:"success",message:"Scheduled Change Successfully Cancelled"})})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return re()})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){h(!1)}))}),[s,ie,ae,re,V]),me=i.a.useCallback((function(e){var t=Object(x.a)(E),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),I(t)}),[E]),be=i.a.useCallback((function(e){L(e)}),[]),je=i.a.useCallback((function(e,i){i.length>0?ie({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}}):(v(!0),s(function(e,t,n,a,i){return function(){return Cc.post("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/schedules"),{rule_id:a,action:"delete",scheduled_for:i}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n,a,P,e.getTime())).then((function(){ie({severity:"success",message:"Route Rule Successfully Sceduled For Deletion"})})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return re()})).then((function(){v(!1),L(null)})))}),[t,s,n,a,ie,re,P]),fe=i.a.useCallback((function(){G(null)}),[]),he=i.a.useCallback((function(){L(null)}),[]),pe=i.a.useCallback((function(e,t){var n=!0!==t.dataItem.modified?{}:{className:"".concat(e.props.className," ResponsiveGridRow--Info")};return i.a.cloneElement(e,n,e.props.children)}),[]),ge=i.a.useReducer((function(e,t){switch(t.type){case"SET_DRAGGED_RECORD":return e.set("draggedRecordID",t.data.id);case"CLEAR_MODIFIED_PRIORITIES":return e.set("modifiedPriorities",new m.b);case"SUBMIT_DRAGGED_RECORD":return e.set("draggedRecordID",null).setIn(["modifiedPriorities",e.get("draggedRecordID")],t.data.priority);default:return e}}),new m.b({draggedRecordID:null,modifiedPriorities:new m.b})),Oe=Object(o.a)(ge,2),ve=Oe[0],xe=Oe[1],Ce=i.a.useMemo((function(){return ve.get("modifiedPriorities")}),[ve]),_e=i.a.useCallback((function(){xe({type:"CLEAR_MODIFIED_PRIORITIES"})}),[xe]),ye=i.a.useMemo((function(){var e=ne.getIn([t,"networks",a,"rules"]);return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=!0===Ce.has(t)?Ce.get(t):ae.getIn([t,"priority"]);return e.push({priority:n,id:t}),e}),[]).sort((function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0})).reduce((function(e,t){return e.set(t.id,t.priority)}),new m.c)}),[ne,t,ae,a,Ce]),Se=i.a.useCallback((function(e){var t=Object(x.a)(ye.keys()),n=t.indexOf(e),a=ye.get(e),i=0===n?0:ye.get(t[n-1]);return Math.round((a+i)/2)}),[ye]),ke=i.a.useCallback((function(e,t){xe({type:"SUBMIT_DRAGGED_RECORD",data:{priority:Se(t.id)}})}),[Se,xe]),we=i.a.useCallback((function(e,t){xe({type:"SET_DRAGGED_RECORD",data:{id:t.id}})}),[xe]),Ee=sb({variant:"Combobox",props:{data:i.a.useMemo((function(){return[{id:"Simple",name:"Simple"},{id:"Complex",name:"Complex"},{id:"LCR",name:"LCR"}]}),[])}}),Ie=sb({variant:"Input"}),De=i.a.useMemo((function(){var e=ne.getIn([t,"networks",a,"rules"]),c=(null==e?[]:Object(x.a)(e.values())).reduce((function(e,c){var s=ae.get(c);if(null==s)return e;var l=!1===s.has("summary")?"":s.get("summary"),o=E.includes(c),u=s.get("next_scheduled_change"),d=s.getIn(["next_scheduled_change","action"])===Dp.create.id,m=Ce.has(c),b=!0===m?Ce.get(c):s.get("priority"),j=b===Ap;!0===j&&(e.isDefaultRuleConfigured=!0);var f="LCR"!==s.get("type")||!1!==Y,h=(!0===l.includes("Qos:0")||!0===Q)&&((!0===l.includes("Category:0")||!0===X)&&((!0===l.includes("Commitment:0")||!0===Z)&&((!0===l.includes("Time-based:0")||!0===$)&&!0===f))),p=K&&f&&(h||j);return e.records.push({ruleID:c,priority:b,id:c,isDefaultRule:j,routeID:t,conditions:l,expanded:o,countryID:n,operatorID:a,type:s.get("type"),modified:m,reorder:!1===j,ruleIDDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:c})}),created:!1===d,connectionType:null==s.get("type")?"N/A":"LCR"===s.get("type")?"LCR":null!=s.get("connections")&&s.get("connections").size>1?"Complex":"Simple",nextScheduledChange:null==u?Object(Ka.jsx)("span",{className:"Text--Faded",children:cg}):Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)(wd,{variant:Dp[u.get("action")].variant,children:Dp[u.get("action")].name}),"@ ",Object(Ka.jsx)(Nd,{utc:u.get("scheduled_date")})]}),!0===W&&Object(Ka.jsx)(k.a,{onClick:function(){z(c)},children:"Cancel"})]}),expand:!0===d?null:Object(Ka.jsx)(k.a,{look:"flat",title:"More Info","aria-label":"More Info",disabled:!1===h&&!1===(!0===j&&!0===f),icon:!0===o?"minus":"add",onClick:function(){return me(c)}}),actions:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"calendar",title:"View Rule History","aria-label":"View Rule History",onClick:function(){return G(c)}}),Object(Ka.jsxs)(i.a.Fragment,{children:[!0===p&&Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit Route Rule","aria-label":"Edit Route Rule",onClick:function(){r.push("/routes/".concat(t,"/countries/").concat(n,"/operators/").concat(a,"/rule/").concat(c))}}),!0===W&&!1===m&&!1===d&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable Route Rule","aria-label":"Disable Route Rule",onClick:function(){be(s.get("id"))}})]})]})}),e}),{records:[],isDefaultRuleConfigured:!1}),s=c.records;return!1===c.isDefaultRuleConfigured&&s.push({id:"default",expanded:!1,ruleID:"default",connectionType:"N/A",conditions:"Default Rule",priority:Ap,priorityDOM:Ap,type:"N/A",routeID:t,countryID:n,operatorID:a,actions:Object(Ka.jsx)(i.a.Fragment,{children:!0===K&&Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Configure Default Rule","aria-label":"Configure Default Rule",onClick:function(){r.push("/routes/".concat(t,"/countries/").concat(n,"/operators/").concat(a,"/rule/default"))}})})}),s}),[ne,r,t,ae,n,a,be,E,Ce,K,Q,Y,W,me,X,$,Z]),Te=i.a.useMemo((function(){return!1===De.every((function(e){return e.nextScheduledChange===cg}))}),[De]),Me=i.a.useMemo((function(){return[{field:"expand",width:"65px",sortable:!1,filterable:!1},{field:"conditions",title:"Conditions",sortable:!1,filterable:!1},{field:"connectionType",title:"Connection Type",sortable:!1,width:"250px",filterCell:Ee},{field:"nextScheduledChange",title:"Next Scheduled Change",width:!0===Te?"450px":"200px",sortable:!1,filterable:!1},{field:"ruleID",title:"ID",view:"ruleIDDOM",width:"250px",filterCell:Ie},{field:"actions",width:"135px",locked:!0,sortable:!1,filterable:!1}]}),[Ie,Te,Ee]),Ne=i.a.useCallback((function(){h(!0),Promise.all(Ce.reduce((function(e,i,c){return e.push(s(function(e,t,n,a,i){return function(){return Cc.put("/".concat(e,"/country/").concat(t,"/network/").concat(n,"/rule/").concat(a,"/priority"),i).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n,a,c,{priority:i}))),e}),[])).then((function(){ie({severity:"success",message:"Priorities Successfully Updated"}),_e()})).catch((function(e){ie({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return re()})).then((function(){return h(!1)}))}),[t,s,ie,n,a,re,_e,Ce]),Re=i.a.useMemo((function(){var e=ae.getIn([V,"next_scheduled_change"]);return null==e?null:e.toJS()}),[ae,V]),Ae=i.a.useCallback((function(){return Object(Ka.jsx)("span",{title:"Drag and drop to set priority",children:"Set Priority"})}),[]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(Yb,{show:Ce.size>0}),Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[!0!==J||!0!==X&&!0!==Z&&!Q&&!0!==$?null:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,style:{marginRight:"10px"},onClick:function(){return r.push("/routes/".concat(t,"/countries/").concat(n,"/operators/").concat(a,"/rule/new"))},children:"Add Rule"}),Ce.size>0&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{icon:"save",primary:!0,onClick:Ne,style:{marginRight:"10px"},children:"Save Priorities"}),Object(Ka.jsx)(k.a,{icon:"undo",onClick:_e,children:"Reset Priorities"})]})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{data:De,pageable:!1,resizable:!0,filterable:!0,rowRender:pe,columns:Me,isLoading:f,skip:M.skip,take:M.take,sort:M.sort,frontendFiltering:!0,reorderable:ee,filter:M.filter,detail:$p,onReorderDrop:ke,onReorderStart:we,reorderableTitle:"Set Priority",onDataStateChange:oe,reorderableTooltip:"Drag and drop to set priority",style:{minHeight:"400px",maxHeight:"700px"},reorderableHeaderTooltip:Ae})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return r.push("/routes/".concat(t))},children:"Go Back"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:se,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:le,children:"Clear Filters and Sorting"})]})]}),null!=Re&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ue,children:["Are you sure you want to cancel the",Object(Ka.jsx)(wd,{variant:Dp[Re.action].variant,children:Dp[Re.action].name}),"changes scheduled on"," ",Object(Ka.jsx)("strong",{children:Object(Ka.jsx)(Nd,{utc:Re.scheduled_date})})," ","?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:de,children:"Cancel Schedule"}),Object(Ka.jsx)(k.a,{onClick:ue,children:"Close"})]})]}),null!=P&&Object(Ka.jsx)(ag,{isLoading:O,ruleID:P,onSubmit:je,onCancel:he}),null!=q&&Object(Ka.jsx)(tg,{routeID:t,countryID:n,networkID:a,ruleID:q,onClose:fe})]})}var sg=i.a.memo(rg);function lg(){var e=Object(d.j)(),t=e.routeID,n=e.countryID,a=e.operatorID,c=Object(l.c)(),r=i.a.useState(!0),s=Object(o.a)(r,2),u=s[0],m=s[1],b=i.a.useCallback((function(e){c(Ui(e))}),[c]),j=i.a.useContext(Tm),f=j.setTitle,h=j.setBreadcrumbs,p=j.setContentTitle,g=Object(l.d)((function(e){return{route:e.route,country:e.country,network:e.network}})),O=g.route,v=g.country,x=g.network;i.a.useEffect((function(){var e=O.getIn([t,"name"]),i=v.getIn([n,"country_name"]),c=x.getIn([a,"network_name"]);return null==e?(f("Route Rule"),p("Route Rules")):(f("".concat(e," Route Rules")),p("".concat(e," Route Rules"))),h([{link:"/routes",name:"Routes"},{link:"/routes/".concat(t),name:e},{name:i},{name:c},{name:"Rules"}]),function(){f(null),h([]),p(null)}}),[O,x,v,t,f,n,a,h,p]);var C=i.a.useCallback((function(){c(Lr())}),[c]),_=i.a.useCallback((function(){return C(),c(Ur(t))}),[c,t,C]);return i.a.useEffect((function(){return m(!0),_().then((function(){m(!1)})).catch((function(e){b({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return C()}}),[b,C,_]),!0===u?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Rp,{routeID:t,pagination:!0,networkID:a})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(sg,{routeID:t,countryID:n,operatorID:a})})]})}var og=i.a.memo(lg);function ug(){var e="/routes",t=b();return Object(Ka.jsxs)(d.e,{children:[!0===t.has("FRONTEND:ROUTE-RULE-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"".concat(e,"/:routeID/countries/:countryID/operators/:operatorID/rule/:ruleID"),children:Object(Ka.jsx)(Qp,{})}),Object(Ka.jsx)(d.c,{path:"".concat(e,"/:routeID/countries/:countryID/operators/:operatorID"),children:Object(Ka.jsx)(og,{})}),Object(Ka.jsx)(d.c,{path:"".concat(e,"/:routeID"),children:Object(Ka.jsx)(Fp,{})}),Object(Ka.jsx)(d.c,{path:e,children:Object(Ka.jsx)(Vp,{})})]})}var dg=i.a.memo(ug);function mg(e){var t=e.query,n=e.onClose,a=Object(l.c)(),c=i.a.useState(!1),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState(""),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useState([]),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useMemo((function(){return{required:!0}}),[]),v=Nm(i.a.useMemo((function(){return[{label:"Name",value:b,setErrors:g,validations:O}]}),[b,g,O])),x=i.a.useCallback((function(e){a(Ui(e))}),[a]);i.a.useEffect((function(){20===b.length&&x({message:"Maximum characters reached",severity:"error",action:{label:"Dismiss"}})}),[b,x]);var C=i.a.useCallback((function(){"function"===typeof n&&n()}),[n]),_=i.a.useCallback((function(){var e,n=v();n.length>0?x({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}}):(u(!0),a((e={saved_search_name:b,saved_search:{chart_type:"grid",chart_options:t}},function(){return ko.post("/sms/save",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){x({severity:"success",message:"Search Saved Successfully"}),C()})).catch((function(e){x({severity:"error",message:e.message,action:{label:"Dismiss"}}),u(!1)})))}),[t,C,a,x,b,v]);return Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Save Search"})}),Object(Ka.jsx)(w.c,{children:!0===s?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{label:"Name",variant:"Input",value:b,errors:p,validations:O,onChange:j,maxLength:20,onErrorsChange:g})})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:C,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:_,disabled:!0===s,children:"Save"})]})]})}var bg=i.a.memo(mg),jg={MONTHLY:{id:"MONTHLY",name:"Monthly"},WEEKLY:{id:"WEEKLY",name:"Weekly"},DAILY:{id:"DAILY",name:"Daily"}},fg=function(){for(var e=[],t=1;t<=31;t++)e.push({id:t,name:String(t)});return e}(),hg=[{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"},{id:7,name:"Sunday"}];function pg(e){var t=e.id,n=e.query,a=e.onClose,c=Object(l.c)(),r=i.a.useState(!1),s=Object(o.a)(r,2),u=s[0],d=s[1],m=i.a.useState(""),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(!1),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useState(!1),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(!1),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(null),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(null),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(!1),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(null),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useState([]),$=Object(o.a)(X,2),Z=$[0],ee=$[1],te=i.a.useState([]),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=i.a.useState([]),re=Object(o.a)(ce,2),se=re[0],le=re[1],oe=i.a.useState([]),ue=Object(o.a)(oe,2),de=ue[0],me=ue[1],be=i.a.useMemo((function(){return Object.keys(jg).map((function(e){return jg[e]}))}),[]),je=i.a.useMemo((function(){switch(Y&&Y.id){default:return[];case jg.MONTHLY.id:return fg;case jg.WEEKLY.id:return hg}}),[Y]),fe=i.a.useMemo((function(){return{required:!0}}),[]),he=i.a.useMemo((function(){return{required:je.length>0}}),[je]),pe=i.a.useMemo((function(){return{required:!0}}),[]),ge=i.a.useMemo((function(){return{required:!0}}),[]);i.a.useEffect((function(){!0!==g&&(W(!1),R(!1))}),[g]);var Oe=Nm(i.a.useMemo((function(){return[{label:"Name",value:j,setErrors:ee,validations:fe},{label:"Schedule Day",value:L,setErrors:ie,validations:he},{label:"Schedule Time",value:G,setErrors:le,validations:pe},{label:"Schedule Frequency",value:Y,setErrors:me,validations:ge}]}),[j,ee,fe,L,ie,he,G,le,pe,Y,me,ge])),ve=i.a.useCallback((function(e){c(Ui(e))}),[c]),xe=i.a.useCallback((function(e){var t=e.reason;if("function"===typeof a)return a({reason:void 0===t?"close":t})}),[a]),Ce=null==t,_e=Object(l.d)((function(e){return e.statisticsScheduledReport})),ye=i.a.useMemo((function(){return null!=n?n:_e.getIn([t,"search_details"])}),[t,n,_e]);i.a.useEffect((function(){null!=t&&(d(!0),c(function(e){return function(t){return ko.get("/sms/schedule/".concat(e)).then((function(e){return t(To(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t)).then((function(){d(!1)})).catch((function(e){ve({severity:"error",message:e.message,action:{label:"Dismiss"}})})))}),[c,ve,t]),i.a.useEffect((function(){if(null!=t){var e=_e.get(t);if(null!=e){f(e.get("report_name")),F(e.get("schedule_frequency")===jg.MONTHLY.id?fg[e.get("schedule_day")-1]:e.get("schedule_frequency")===jg.WEEKLY.id?hg[e.get("schedule_day")-1]:null),Q(jg[e.get("schedule_frequency")]),O(!0===e.get("send_email")),_(!0===e.get("generate_csv")),D(!0===e.get("generate_pdf")),R(!0===e.get("attach_export")),W(!0===e.get("render_report"));var n=e.get("schedule_time").split(":").map((function(e){return Number(e)})),a=Object(o.a)(n,2),i=a[0],c=a[1];H(oi(void 0,void 0,void 0,i,c))}}}),[t,_e]);var Se=i.a.useCallback((function(){var e=Oe();if(e.length>0)ve({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}});else if(!0===g&&!1===C&&!1===I||!1===g&&!1===C&&!1===I)ve({severity:"error",message:"Either Generate PDF or Generate CSV flag should be enabled",action:{label:"Dismiss"}});else{d(!0);var n={report_name:j,send_email:g,generate_csv:C,generate_pdf:I,attach_export:N,search_details:ye,render_report:z,schedule_frequency:Y.id,schedule_day:null==L?null:L.id,schedule_time:[String(G.getUTCHours()).padStart(2,"0"),String(G.getUTCMinutes()).padStart(2,"0")].join(":")};if(!0===Ce){var a=JSON.parse(JSON.stringify(ye));null!=a.timeDimensions[0].dateRange&&(a.timeDimensions[0].dateRange=["<DATEFROM>","<DATETO>"]),n.search_details={chart_type:"grid",chart_options:a}}c(!0===Ce?function(e){return function(){return ko.post("/sms/schedule",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(n):function(e,t){return function(){return ko.patch("/sms/schedule/".concat(e),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n)).then((function(){return ve({severity:"success",message:!0===Ce?"Scheduled Report Added Successfully":"Scheduled Report Edited Successfully"}),xe({reason:"submission"})})).catch((function(e){ve({severity:"error",message:e.message,action:{label:"Dismiss"}}),d(!1)}))}}),[t,Ce,ye,xe,c,C,I,N,g,ve,j,L,Oe,z,G,Y]);return Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Scheduled Report"})}),Object(Ka.jsx)(w.c,{children:!0===u?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Report Name",value:j,onChange:f,errors:Z,validations:fe,onErrorsChange:ee})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",label:"Schedule Frequency",value:Y,onChange:Q,data:be,errors:de,validations:ge,onErrorsChange:me})}),je.length>0&&Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(fm,{variant:"Combobox",label:"Schedule Day",value:L,onChange:F,data:je,errors:ae,validations:he,onErrorsChange:ie})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(fm,{variant:"Time",label:"Schedule Time",value:G,onChange:H,errors:se,validations:pe,onErrorsChange:le})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:6,md:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Generate CSV",value:C,onChange:_})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,md:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Generate PDF",value:I,onChange:D})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,md:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Send Email",value:g,onChange:O})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,md:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Attach Export",value:N,onChange:R,disabled:!1===g||!1===I&&!1===C})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,md:3,style:{display:"none"},children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Render Report",value:z,onChange:W,disabled:!1===g})})]})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:xe,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Se,disabled:!0===u,children:"Save"})]})]})}var gg=i.a.memo(pg);function Og(e){var t=e.query,n=e.onBack,a=Object(l.c)(),c=b(),r=i.a.useState(),s=Object(o.a)(r,2),u=s[0],d=s[1],m=i.a.useState(t),j=Object(o.a)(m,2),f=j[0],h=j[1],p=i.a.useState(0),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(),_=Object(o.a)(C,2),y=_[0],E=_[1],D=i.a.useState(),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useMemo((function(){return{fillMissingDates:!1}}),[]),A=i.a.useState(!1),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(!1),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState(""),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(!1),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=""===z,$=!0===L||!0===G||!0===Y,Z=i.a.useCallback((function(e){a(Ui(e))}),[a]),ee=i.a.useMemo((function(){return c.has("API:CUSTOMER_PORTAL:WRITE")||c.has("API:STATISTICS_REPORTING:WRITE")}),[c]),te=i.a.useMemo((function(){return v(null==u?0:u.backwardCompatibleData[0].length),null!=u&&u.tablePivot(R).length>0}),[u,R]);i.a.useEffect((function(){if(null!=f){var e=f.timeDimensions[0].dateRange,t=new window.Date(e[0]),n=new window.Date(e[1]);E(oi(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())),N(oi(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()))}}),[f]),i.a.useEffect((function(){!0===L&&(H(!1),Q(!1))}),[L]),i.a.useEffect((function(){!0===G&&(F(!1),Q(!1))}),[G]),i.a.useEffect((function(){!0===Y&&(F(!1),H(!1))}),[Y]);var ne=i.a.useCallback((function(){var e;Q(!0),a((e={chart_type:"grid",chart_options:f},function(){return ko.post("/sms/share",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){W(window.location.origin+"/statistics/search/shared/"+e.data)})).catch((function(e){Z({severity:"error",message:e.message,action:{label:"Dismiss"}}),Q(!1)}))}),[a,Z,f]),ae=i.a.useCallback((function(){F(!0)}),[]),ie=i.a.useCallback((function(){H(!0)}),[]),ce=i.a.useCallback((function(){F(!1)}),[]),re=i.a.useCallback((function(){H(!1)}),[]),se=i.a.useCallback((function(e,t){switch(e){case"Stats@sent":case"Stats@others":case"Stats@profit":case"Stats@expired":case"Stats@pending":case"Stats@revenue":case"Stats@charged":case"Stats@enroute":case"Stats@rejected":case"Stats@delivered":case"Stats@submitted":case"Stats@total_cost":case"Stats@not_charged":case"Stats@undelivered":case"Stats@sent_percent":case"Stats@others_percent":case"Stats@profit_in_base":case"Stats@expired_percent":case"Stats@fake_deliveries":case"Stats@pending_percent":case"Stats@enroute_percent":case"Stats@charged_percent":case"Stats@rejected_percent":case"Stats@delivered_percent":case"Stats@submitted_percent":case"Stats@not_charged_percent":case"Stats@undelivered_percent":return Number(t);default:return t}}),[]),le=i.a.useCallback((function(){if(null!=u){var e=u.tableColumns().reduce((function(e,t){return e.columns.push(t.key),e.columnsCSV.push(t.shortTitle),e}),{columns:[],columnsCSV:[]}),t=e.columns,n=e.columnsCSV,a=u.tablePivot().map((function(e){return t.map((function(t){var n=hp(t),a=null;switch(n){case"Stats@time@year":case"Stats@time@hour":case"Stats@time@month":case"Stats@time@day":var i=new window.Date(se(n,e[t])),c=oi(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());a=[[String(c.getDate()).padStart(2,"0"),String(c.getMonth()+1).padStart(2,"0"),c.getFullYear()].join("-"),[String(c.getHours()).padStart(2,"0"),String(c.getMinutes()).padStart(2,"0"),String(c.getSeconds()).padStart(2,"0")].join(":")].join(" ");break;default:var r=se(n,e[t]);a=null==r?null:String(r).includes(",")?'"'+r+'"':r}return a})).join(",")})),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent([n].concat(Object(x.a)(a)).join("\n"))),i.setAttribute("download","statistics.csv"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}),[u,se]),oe=i.a.useCallback((function(){"function"===typeof n&&n()}),[n]),ue=i.a.useCallback((function(){Q(!1)}),[]),de=i.a.useCallback((function(e,t){switch(e){case"Stats@time@hour":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@hour",title:t.shortTitle};case"Stats@time@day":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@day",title:t.shortTitle};case"Stats@time@month":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@month",title:t.shortTitle};case"Stats@time@year":return{width:"250px",filterable:!1,field:"Stats@time",view:"Stats@time@year",title:t.shortTitle};default:return{filterable:!1,field:e,title:t.shortTitle}}}),[]),me=i.a.useCallback((function(e,t){switch(e){case"Stats@time@hour":case"Stats@time@month":case"Stats@time@day":case"Stats@time@year":return Object(Ka.jsx)(Nd,{utc:new window.Date(se(e,t)+"Z").getTime()});default:return se(e,t)}}),[se]);return Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:!0===$&&(!0===L?Object(Ka.jsx)(bg,{query:f,onClose:ce}):!0===G?Object(Ka.jsx)(gg,{onClose:re,query:f}):!0===Y?Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Share Report"})}),Object(Ka.jsx)(w.c,{children:!0===X?Object(Ka.jsx)(Wm,{className:"smallLoader",height:"100px"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{label:"Search Link",variant:"Input",value:z,readOnly:!0,onChange:W})})})}),!1===X&&Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:ue,children:"Cancel"}),Object(Ka.jsx)(I.CopyToClipboard,{text:z,onCopy:function(){return Z({severity:"success",message:"Shared Report Link Copied"})},children:Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ue,children:"Copy to clipboard"})})]})]}):null)}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsxs)(w.d,{children:[Object(Ka.jsx)(w.f,{children:"Statistics Search Results"}),null!==y&&null!==M&&Object(Ka.jsxs)(w.e,{children:[Object(Ka.jsxs)("span",{style:{marginRight:"10px"},children:[Object(Ka.jsx)("strong",{children:"Total Records:"})," ",O.toLocaleString()]}),Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("strong",{children:"Time Period:"})," ",Object(Ka.jsx)(Nd,{utc:y})," -"," ",Object(Ka.jsx)(Nd,{utc:M})]})]})]}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)(k.a,{icon:"save",primary:!0,style:{marginRight:"1em"},onClick:ae,disabled:!0===L,children:"Save Search"}),Object(Ka.jsx)(k.a,{icon:"share",primary:!0,style:{marginRight:"1em"},onClick:ne,disabled:!0===Y,children:"Share Search"}),!0===ee&&Object(Ka.jsx)(k.a,{icon:"calendar",primary:!0,style:{marginRight:"1em"},onClick:ie,disabled:!0===G,children:"Schedule Report"}),Object(Ka.jsx)(k.a,{icon:"download",onClick:le,primary:!0,disabled:!1===te,children:"Download CSV"})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(yp,{query:f,renderItem:"grid",onChange:h,pivotConfig:R,onResultSetChange:d,getGridColumnInfo:de,getGridCellContent:me})})]})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:oe,children:"Go Back"})})]})})]})}var vg=i.a.memo(Og),xg=function(e){return Object(v.a)(Object(v.a)(Object(v.a)({},!1===e&&{client_name:{id:"Client.name",name:"Client Name"}}),{},{client_connection:{id:"ClientConnection.name",name:"Client Connection"}},!1===e&&{supplier_name:{id:"Supplier.name",name:"Supplier Name"},supplier_connection:{id:"SupplierConnection.name",name:"Supplier Connection"},supplier_connection_link:{id:"SupplierConnectionLink.name",name:"Supplier Connection Link"},route:{id:"Route.name",name:"Route"}}),{},{country:{id:"Country.name",name:"Country"},network:{id:"Network.name",name:"Network"}},!1===e&&{category:{id:"OAProfiledCategory.name",name:"Profiling Enabled"}})},Cg={years:{id:"year",name:"Years"},months:{id:"month",name:"Months"},days:{id:"day",name:"Days"},hours:{id:"hour",name:"Hours"}};function _g(e){var t=e.dimension,n=e.setValues,a=e.setOperator,c=e.availableOptions,r=e.savedSearchQuery;i.a.useEffect((function(){if(null!=r){var e=r.chart_options.filters.find((function(e){return e.dimension===t}));null!=e&&(n(c.filter((function(t){return e.values.includes(t.id)}))),a("notEquals"===e.operator))}}),[t,n,a,r,c])}function yg(){var e=Object(d.j)(),t=e.searchID,n=e.searchType,a=i.a.useContext(Tm),c=a.setTitle,r=a.setContentTitle,s=a.setBreadcrumbs,u=Object(l.c)(),b=O("customer-portal"),j=i.a.useState(!1),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),v=Object(o.a)(g,2),C=v[0],_=v[1],E=i.a.useState(!1),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState(!1),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState(!1),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState(!1),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(!1),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useState(!1),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useState(),ae=Object(o.a)(ne,2),ie=ae[0],ce=ae[1],re=i.a.useState(!1),se=Object(o.a)(re,2),le=se[0],oe=se[1],ue=i.a.useState(!1),de=Object(o.a)(ue,2),me=de[0],be=de[1],je=i.a.useState(!1),fe=Object(o.a)(je,2),he=fe[0],pe=fe[1],ge=i.a.useState(!1),Oe=Object(o.a)(ge,2),ve=Oe[0],xe=Oe[1],Ce=i.a.useState(!1),_e=Object(o.a)(Ce,2),ye=_e[0],Se=_e[1],ke=i.a.useState(!1),we=Object(o.a)(ke,2),Ee=we[0],Ie=we[1],De=i.a.useState("number"),Te=Object(o.a)(De,2),Me=Te[0],Ne=Te[1],Re=i.a.useState("full"),Ae=Object(o.a)(Re,2),Pe=Ae[0],Le=Ae[1],Fe=i.a.useState(!1),Ue=Object(o.a)(Fe,2),qe=Ue[0],Ge=Ue[1],He=i.a.useState(!1),Be=Object(o.a)(He,2),Ve=Be[0],ze=Be[1],We=i.a.useState(!1),Ke=Object(o.a)(We,2),Je=Ke[0],Ye=Ke[1],Qe=i.a.useState(!1),Xe=Object(o.a)(Qe,2),$e=Xe[0],Ze=Xe[1],et=i.a.useState(!1),tt=Object(o.a)(et,2),nt=tt[0],at=tt[1],it=i.a.useState(!1),ct=Object(o.a)(it,2),rt=ct[0],st=ct[1],lt=i.a.useState(!1),ot=Object(o.a)(lt,2),ut=ot[0],dt=ot[1],mt=i.a.useState(!1),bt=Object(o.a)(mt,2),jt=bt[0],ft=bt[1],ht=i.a.useState(!1),pt=Object(o.a)(ht,2),gt=pt[0],Ot=pt[1],vt=i.a.useState(!1),xt=Object(o.a)(vt,2),Ct=xt[0],_t=xt[1],yt=i.a.useState(!1),St=Object(o.a)(yt,2),kt=St[0],wt=St[1],Et=i.a.useState(!1),It=Object(o.a)(Et,2),Dt=It[0],Tt=It[1],Mt=i.a.useState(!1),Nt=Object(o.a)(Mt,2),Rt=Nt[0],At=Nt[1],Pt=i.a.useState(!1),Lt=Object(o.a)(Pt,2),Ft=Lt[0],Ut=Lt[1],qt=i.a.useState(!1),Gt=Object(o.a)(qt,2),Ht=Gt[0],Bt=Gt[1],Vt=i.a.useState(!1),zt=Object(o.a)(Vt,2),Wt=zt[0],Kt=zt[1],Jt=i.a.useState(!1),Yt=Object(o.a)(Jt,2),Qt=Yt[0],Xt=Yt[1],$t=i.a.useState(!1),Zt=Object(o.a)($t,2),en=Zt[0],tn=Zt[1],nn=i.a.useState(!1),an=Object(o.a)(nn,2),cn=an[0],rn=an[1],sn=i.a.useState(!1),ln=Object(o.a)(sn,2),un=ln[0],dn=ln[1],mn=i.a.useState(!1),bn=Object(o.a)(mn,2),jn=bn[0],fn=bn[1],hn=i.a.useState(!1),pn=Object(o.a)(hn,2),gn=pn[0],On=pn[1],vn=i.a.useState([]),xn=Object(o.a)(vn,2),Cn=xn[0],_n=xn[1],yn=i.a.useState((function(){var e=new Date;return e.setHours(e.getHours()-1),e})),Sn=Object(o.a)(yn,2),kn=Sn[0],wn=Sn[1],En=i.a.useMemo((function(){return{required:!0}}),[]),In=i.a.useState([]),Dn=Object(o.a)(In,2),Tn=Dn[0],Mn=Dn[1],Nn=i.a.useState(new Date),Rn=Object(o.a)(Nn,2),An=Rn[0],Pn=Rn[1],Ln=i.a.useMemo((function(){return{required:!0}}),[]),Fn=i.a.useState([]),Un=Object(o.a)(Fn,2),qn=Un[0],Gn=Un[1],Hn=i.a.useState((function(){var e=new Date;return e.setHours(e.getHours()-1),e})),Bn=Object(o.a)(Hn,2),Vn=Bn[0],zn=Bn[1],Wn=i.a.useMemo((function(){return{required:!0}}),[]),Kn=i.a.useState([]),Jn=Object(o.a)(Kn,2),Yn=Jn[0],Qn=Jn[1],Xn=i.a.useState(new Date),$n=Object(o.a)(Xn,2),Zn=$n[0],ea=$n[1],ta=i.a.useMemo((function(){return{required:!0}}),[]),na=i.a.useState([]),aa=Object(o.a)(na,2),ia=aa[0],ca=aa[1],ra=i.a.useState([]),sa=Object(o.a)(ra,2),la=sa[0],oa=sa[1],ua=i.a.useState([]),da=Object(o.a)(ua,2),ma=da[0],ba=da[1],ja=i.a.useState([]),fa=Object(o.a)(ja,2),ha=fa[0],pa=fa[1],ga=i.a.useState([]),Oa=Object(o.a)(ga,2),va=Oa[0],xa=Oa[1],Ca=i.a.useState([]),_a=Object(o.a)(Ca,2),ya=_a[0],Sa=_a[1],ka=i.a.useState([]),wa=Object(o.a)(ka,2),Ea=wa[0],Ia=wa[1],Da=i.a.useState([]),Ta=Object(o.a)(Da,2),Ma=Ta[0],Na=Ta[1],Ra=i.a.useState([]),Aa=Object(o.a)(Ra,2),Pa=Aa[0],La=Aa[1],Fa=i.a.useState([]),Ua=Object(o.a)(Fa,2),qa=Ua[0],Ga=Ua[1],Ha=i.a.useState([]),Ba=Object(o.a)(Ha,2),Va=Ba[0],za=Ba[1],Wa=i.a.useState([]),Ja=Object(o.a)(Wa,2),Ya=Ja[0],Qa=Ja[1],Xa=i.a.useState([]),$a=Object(o.a)(Xa,2),Za=$a[0],ei=$a[1],ti=i.a.useState([]),ni=Object(o.a)(ti,2),ai=ni[0],ii=ni[1],ci=i.a.useState([]),ri=Object(o.a)(ci,2),si=ri[0],li=ri[1],ui=i.a.useState([]),di=Object(o.a)(ui,2),mi=di[0],bi=di[1],ji=i.a.useState([]),fi=Object(o.a)(ji,2),hi=fi[0],pi=fi[1],gi=i.a.useState([]),Oi=Object(o.a)(gi,2),vi=Oi[0],xi=Oi[1],Ci=i.a.useState([]),_i=Object(o.a)(Ci,2),yi=_i[0],Si=_i[1],ki=i.a.useState([]),wi=Object(o.a)(ki,2),Ei=wi[0],Ii=wi[1],Di=i.a.useState([]),Ti=Object(o.a)(Di,2),Mi=Ti[0],Ni=Ti[1],Ri=i.a.useState([]),Ai=Object(o.a)(Ri,2),Pi=Ai[0],Li=Ai[1],Fi=i.a.useState([]),qi=Object(o.a)(Fi,2),Gi=qi[0],Hi=qi[1],Bi=i.a.useState([]),Vi=Object(o.a)(Bi,2),zi=Vi[0],Wi=Vi[1],Ki=i.a.useState([]),Ji=Object(o.a)(Ki,2),Yi=Ji[0],Qi=Ji[1],Xi=i.a.useState([]),$i=Object(o.a)(Xi,2),Zi=$i[0],ec=$i[1],tc=i.a.useState([]),nc=Object(o.a)(tc,2),ac=nc[0],ic=nc[1],cc=i.a.useState([]),rc=Object(o.a)(cc,2),sc=rc[0],lc=rc[1],oc=i.a.useState([]),uc=Object(o.a)(oc,2),dc=uc[0],mc=uc[1],bc=i.a.useMemo((function(){var e=xg(b);return Object.keys(e).map((function(t){return e[t]}))}),[b]),jc=i.a.useState([]),fc=Object(o.a)(jc,2),hc=fc[0],pc=fc[1],gc=i.a.useState(null),Oc=Object(o.a)(gc,2),vc=Oc[0],xc=Oc[1],Cc=i.a.useMemo((function(){return Object.keys(Cg).map((function(e){return Cg[e]}))}),[]),_c=i.a.useMemo((function(){return Ya.some((function(e){return"ss7"===e.type}))}),[Ya]),yc=Nm(i.a.useMemo((function(){var e=[{label:"Start",value:kn,setErrors:_n,validations:En},{label:"End",value:An,setErrors:Mn,validations:Ln}];return!0===le&&e.push({label:"Start",value:Vn,setErrors:Gn,validations:Wn},{label:"End",value:Zn,setErrors:Qn,validations:ta}),e}),[le,kn,_n,En,An,Mn,Ln,Vn,Gn,Wn,Zn,Qn,ta])),Sc=i.a.useCallback((function(){oe(!le)}),[le]),kc=i.a.useMemo((function(){return[{setter:wn,name:"onTimeframeFromChange"},{setter:Pn,name:"onTimeframeToChange"},{setter:zn,name:"onSecondTimeframeFromChange"},{setter:ea,name:"onSecondTimeframeToChange"},{setter:oa,name:"onSelectedClientsChange"},{setter:Bt,name:"onClientsOperatorChange"},{setter:xa,name:"onSelectedClientConnectionsChange"},{setter:dn,name:"onClientConnectionsOperatorChange"},{setter:Na,name:"onSelectedSuppliersChange"},{setter:tn,name:"onSuppliersOperatorChange"},{setter:za,name:"onSelectedSupplierConnectionsChange"},{setter:fn,name:"onSupplierConnectionsOperatorChange"},{setter:ii,name:"onSelectedSupplierConnectionLinksChange"},{setter:On,name:"onSupplierConnectionLinksOperatorChange"},{setter:pi,name:"onSelectedRoutesChange"},{setter:Ut,name:"onRoutesOperatorChange"},{setter:Ii,name:"onSelectedCountriesChange"},{setter:Xt,name:"onCountriesOperatorChange"},{setter:Hi,name:"onSelectedNetworksChange"},{setter:Kt,name:"onNetworksOperatorChange"},{setter:ec,name:"onSelectedProfiledCategoriesChange"},{setter:rn,name:"onProfiledCategoriesOperatorChange"},{setter:ze,name:"onShowFakeDeliveriesChange"},{setter:Ye,name:"onShowSentChange"},{setter:ft,name:"onShowChargedChange"},{setter:Tt,name:"onShowNotChargedChange"},{setter:be,name:"onShowCostChange"},{setter:Ze,name:"onShowOtherChange"},{setter:pe,name:"onShowPriceChange"},{setter:xe,name:"onShowProfitChange"},{setter:Ge,name:"onShowBaseProfitChange"},{setter:dt,name:"onShowPendingChange"},{setter:Se,name:"onShowRevenueChange"},{setter:Ot,name:"onShowRejectedChange"},{setter:Ne,name:"onAmountFormatChange"},{setter:Le,name:"onNegativeValuesChange"},{setter:wt,name:"onShowDeliveredChange"},{setter:_t,name:"onShowSubmittedChange"},{setter:st,name:"onShowEnrouteChange"},{setter:Ie,name:"onShowTotalCostChange"},{setter:At,name:"onShowUndeliveredChange"},{setter:at,name:"onShowExpiredChange"},{setter:mc,name:"onSplitByChange"},{setter:xc,name:"onTimeframeChange"}].reduce((function(e,t){return e[t.name]=function(){p(!0),t.setter.apply(t,arguments)},e}),{})}),[]),wc=kc.onTimeframeToChange,Ec=kc.onTimeframeFromChange,Ic=kc.onSecondTimeframeToChange,Dc=kc.onSecondTimeframeFromChange,Tc=kc.onSelectedClientsChange,Mc=kc.onClientsOperatorChange,Nc=kc.onSelectedClientConnectionsChange,Rc=kc.onClientConnectionsOperatorChange,Pc=kc.onSelectedSuppliersChange,Lc=kc.onSuppliersOperatorChange,Fc=kc.onSelectedSupplierConnectionsChange,Uc=kc.onSupplierConnectionsOperatorChange,qc=kc.onSelectedSupplierConnectionLinksChange,Gc=kc.onSupplierConnectionLinksOperatorChange,Bc=kc.onSelectedRoutesChange,Vc=kc.onRoutesOperatorChange,zc=kc.onSelectedCountriesChange,Wc=kc.onCountriesOperatorChange,Kc=kc.onSelectedNetworksChange,Jc=kc.onNetworksOperatorChange,Yc=kc.onSelectedProfiledCategoriesChange,Qc=kc.onProfiledCategoriesOperatorChange,Xc=kc.onShowSentChange,$c=kc.onShowCostChange,Zc=kc.onShowOtherChange,er=kc.onShowPriceChange,tr=kc.onShowProfitChange,nr=kc.onShowChargedChange,ar=kc.onShowEnrouteChange,ir=kc.onShowPendingChange,cr=kc.onShowExpiredChange,rr=kc.onShowRevenueChange,sr=kc.onAmountFormatChange,lr=kc.onShowRejectedChange,or=kc.onShowSubmittedChange,ur=kc.onShowNotChargedChange,dr=kc.onShowDeliveredChange,mr=kc.onShowTotalCostChange,br=kc.onNegativeValuesChange,jr=kc.onShowBaseProfitChange,fr=kc.onShowUndeliveredChange,hr=kc.onShowFakeDeliveriesChange,pr=kc.onSplitByChange,gr=kc.onTimeframeChange,Or=i.a.useCallback((function(e){u(Ui(e))}),[u]),vr=i.a.useCallback((function(){A(!1)}),[]);i.a.useEffect((function(){return c("Statistics Search"),r("Statistics Search"),s([{name:"Statistics"},{name:"Search"}]),function(){c(null),s([])}}),[c,r,s]);var xr=Object(l.d)((function(e){var t=e.auth,n=e.route,a=e.client,i=e.country;return{route:n,client:a,network:e.network,country:i,supplier:e.supplier,categorisation:e.categorisation,clientConnection:e.clientConnection,supplierConnection:e.supplierConnection,supplierConnectionLink:e.supplierConnectionLink,customerPortalClientID:t.getIn(["misc","customer_client_id"])}})),Cr=xr.route,_r=xr.client,yr=xr.network,Sr=xr.country,kr=xr.supplier,wr=xr.categorisation,Er=xr.clientConnection,Ir=xr.supplierConnection,Dr=xr.supplierConnectionLink,Tr=xr.customerPortalClientID,Mr=i.a.useCallback((function(e,t){var n=!1===t.dataItem.profiling||!0===t.selected?null:"Text--Primary Text--Bold",a=Object(Ka.jsx)("span",{className:n,children:e.props.children});return i.a.cloneElement(e,e.props,a)}),[]),Nr=Object(l.d)((function(e){var a=e.statisticsSavedReport,i=e.statisticsShareReport;return!0===h?null:"saved"===n?a.getIn([t,"saved_search"]):i.getIn([t,"shared_search"])}));i.a.useEffect((function(){var e,a=[];return!1===b&&(_(!0),T(!0),U(!0),B(!0),a.push(u(Fr()),u(Fs()),u(vl()),u($l()))),null!=t&&a.push(u("saved"===n?(e=t,function(t){return ko.get("/sms/save/".concat(e)).then((function(e){return t(Io(e.data)),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}):Mo(t))),Promise.all(a).catch((function(e){Or({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){!1===b&&(_(!1),T(!1),U(!1),B(!1))})),function(){u(Lr()),u(ys()),u(ml()),u(Jl()),u(Do()),u({type:on})}}),[u,Or,n,t,b]);var Rr=i.a.useMemo((function(){return Object(x.a)(yr.values()).reduce((function(e,t){var n=t.get("country_id");return null==n||(null==e[n]&&(e[n]=[]),e[n].push({id:t.get("network_id"),name:t.get("network_name")+" (".concat(Sr.getIn([n,"iso_code"]),") ")})),e}),{})}),[yr,Sr]);_g({savedSearchQuery:Nr,setOperator:Bt,setValues:oa,dimension:"StatsKey.clientId",availableOptions:ma}),_g({savedSearchQuery:Nr,setOperator:dn,setValues:xa,dimension:"StatsKey.clientConnectionId",availableOptions:ya}),_g({savedSearchQuery:Nr,setOperator:tn,setValues:Na,dimension:"StatsKey.supplierId",availableOptions:Pa}),_g({savedSearchQuery:Nr,setOperator:fn,setValues:za,dimension:"StatsKey.supplierConnectionId",availableOptions:Ya}),_g({savedSearchQuery:Nr,setOperator:On,setValues:ii,dimension:"StatsKey.supplierConnectionLinkId",availableOptions:si}),_g({savedSearchQuery:Nr,setOperator:Xt,setValues:Ii,dimension:"StatsKey.countryId",availableOptions:Mi}),_g({savedSearchQuery:Nr,setOperator:Kt,setValues:Hi,dimension:"StatsKey.networkId",availableOptions:zi}),_g({savedSearchQuery:Nr,setOperator:rn,setValues:ec,dimension:"StatsKey.oaProfiledCategoryId",availableOptions:ac}),_g({savedSearchQuery:Nr,setOperator:Ut,setValues:pi,dimension:"StatsKey.routeId",availableOptions:vi}),i.a.useEffect((function(){null!=Nr&&([{setter:ze,measures:["Stats.fake_deliveries"]},{setter:be,dimensions:["Stats.cost"]},{setter:pe,dimensions:["Stats.price"]},{setter:ft,measures:["Stats.charged","Stats.charged_percent"]},{setter:Tt,measures:["Stats.not_charged","Stats.not_charged_percent"]},{setter:Ye,measures:["Stats.sent","Stats.sent_percent"]},{setter:wt,measures:["Stats.delivered","Stats.delivered_percent"]},{setter:_t,measures:["Stats.submitted","Stats.submitted_percent"]},{setter:st,measures:["Stats.enroute","Stats.enroute_percent"]},{setter:At,measures:["Stats.undelivered","Stats.undelivered_percent"]},{setter:Ot,measures:["Stats.rejected","Stats.rejected_percent"]},{setter:dt,measures:["Stats.pending","Stats.pending_percent"]},{setter:Ze,measures:["Stats.others","Stats.others_percent"]},{setter:at,measures:["Stats.expired","Stats.expired"]},{setter:Se,measures:["Stats.revenue"]},{setter:Ie,measures:["Stats.total_cost"]},{setter:Ge,measures:["Stats.profit_in_base"]},{setter:xe,measures:["Stats.profit"]}].forEach((function(e){var t=e.setter,n=e.measures,a=void 0===n?[]:n,i=e.dimensions,c=void 0===i?[]:i,r=a.some((function(e){return Nr.chart_options.measures.includes(e)})),s=c.some((function(e){return Nr.chart_options.dimensions.includes(e)}));t(r||s)})),!0===["Stats.sent_percent","Stats.others_percent","Stats.enroute_percent","Stats.pending_percent","Stats.expired_percent","Stats.charged_percent","Stats.rejected_percent","Stats.delivered_percent","Stats.not_charged_percent","Stats.submitted_percent","Stats.undelivered_percent"].some((function(e){return Nr.chart_options.measures.includes(e)}))&&Ne("percentage"),["Stats.profit_in_base"].some((function(e){return null!=Nr.chart_options.filters.find((function(t){return t.dimension===e}))}))&&Le("negative"))}),[Nr]),i.a.useEffect((function(){if(null!=Nr){var e=Nr.chart_options.timeDimensions[0];if(null!=e.dateRange){var t=Object(o.a)(e.dateRange,2),n=t[0],a=t[1],i=new window.Date(a),c=new window.Date(n);Pn(oi(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),0,0)),wn(oi(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),0,0))}else{var r=Object(o.a)(e.compareDateRange[0],2),s=r[0],l=r[1],u=new window.Date(l),d=new window.Date(s),m=Object(o.a)(e.compareDateRange[1],2),b=m[0],j=m[1];oe(!0),Pn(new window.Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours()+1,u.getMinutes())),wn(new window.Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours()+1,d.getMinutes())),ea(new window.Date(b)),zn(new window.Date(j))}}}),[Nr]),i.a.useEffect((function(){if(null!=Nr){var e=null!=Nr&&Nr.chart_options.timeDimensions[0].granularity;null!=e&&xc(Cc.find((function(t){return e===t.id})))}}),[Cc,Nr]),i.a.useEffect((function(){if(null!=Nr){var e=Nr.chart_options.dimensions;null!=e&&mc(bc.filter((function(t){return e.includes(t.id)})))}}),[bc,Nr]),i.a.useEffect((function(){var e=new m.e(ma.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(_r.values()).map((function(e){return new m.b({id:e.get("client_id"),name:e.get("client_name")})})));e.equals(t)||ba(t.toJS())}),[_r,ma]),i.a.useEffect((function(){if(!1!==b){var e=_r.getIn([Tr,"connections"]);Sa(Object(x.a)(null==e?[]:e.values()).map((function(e){return{id:e,name:Er.getIn([e,"connection_name"])}})))}}),[_r,Tr,Er,b]),i.a.useEffect((function(){if(!0!==b){var e=new m.e(ya.map((function(e){return new m.b(e)}))),t=new m.e(la.reduce((function(e,t){var n=_r.getIn([t.id,"connections"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=Er.get(t);null!=n&&e.push(new m.b({id:n.get("connection_id"),name:n.get("connection_name")}))})),e}),[]));e.equals(t)||Sa(t.toJS())}}),[_r,la,b,Er,ya]),i.a.useEffect((function(){var e=new m.e(Pa.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(kr.values()).map((function(e){return new m.b({id:e.get("supplier_id"),name:e.get("supplier_name")})})));e.equals(t)||La(t.toJS())}),[kr,Pa]),i.a.useEffect((function(){var e=new m.e(Ya.map((function(e){return new m.b(e)}))),t=new m.e(Ma.reduce((function(e,t){var n=kr.getIn([t.id,"connections"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=Ir.get(t);null!=n&&e.push(new m.b({id:n.get("connection_id"),name:n.get("connection_name"),type:n.get("connection_type"),supplier_id:n.get("supplier_id")}))})),e}),[]));e.equals(t)||Qa(t.toJS())}),[kr,Ma,Ir,Ya]),i.a.useEffect((function(){var e=new m.e(si.map((function(e){return new m.b(e)}))),t=new m.e(Va.reduce((function(e,t){var n=Ir.getIn([t.id,"links"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=Dr.get(t);null!=n&&e.push(new m.b({id:n.get("link_id"),name:n.get("link_name")}))})),e}),[]));e.equals(t)||li(t.toJS())}),[kr,Ma,Ir,Dr,Va,si]),i.a.useEffect((function(){var e=new m.e(vi.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(Cr.values()).map((function(e){return new m.b({id:e.get("id"),name:e.get("name")})})));e.equals(t)||xi(t.toJS())}),[Cr,vi]),i.a.useEffect((function(){var e=new m.d(Mi.map((function(e){return new m.b(e)}))),t=new m.d(Object(x.a)(Sr.values()).reduce((function(e,t){return"Rest of the World"===t.get("country_name")||e.push(new m.b({id:t.get("country_id"),name:t.get("country_name")})),e}),[]).sort((function(e,t){return e.get("name")>t.get("name")?1:-1})));e.equals(t)||Ni(t.toJS())}),[Sr,Mi]),i.a.useEffect((function(){var e=new m.e(zi.map((function(e){return new m.b(e)}))),t=new m.e(Ei.reduce((function(e,t){return e.push.apply(e,Object(x.a)(Rr[t.id].map((function(e){return new m.b(e)})))),e}),[]));e.equals(t)||Wi(t.toJS())}),[Ei,Rr,zi]),i.a.useEffect((function(){var e=new m.e(ac.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(wr.values()).map((function(e){return new m.b({id:e.get("id"),name:e.get("name"),profiling:e.get("profiling")})})));e.equals(t)||ic(t.toJS())}),[wr,ac]),i.a.useEffect((function(){if(!0!==Ht)return K(!0),Promise.all(la.map((function(e){return u(Zs(e.id))}))).then((function(){return K(!1)})),function(){return gs()}}),[u,Ht,la]),i.a.useEffect((function(){!1!==b&&(K(!0),u(el(Tr)).catch((function(e){Or({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){K(!1)})))}),[Tr,u,Or,b]),i.a.useEffect((function(){if(!0!==en)return X(!0),Promise.all(Ma.map((function(e){return u(yl(e.id))}))).then((function(){return X(!1)})),function(){return Ac()}}),[u,en,Ma]),i.a.useEffect((function(){if(!0!==jn)return te(!0),Promise.all(Va.map((function(e){return u(Hc(e.id))}))).then((function(){return te(!1)})),function(){return Hl()}}),[u,jn,Va]),i.a.useEffect((function(){!1!==Ht&&(xa([]),dn(!1))}),[Ht]),i.a.useEffect((function(){!1!==en&&(za([]),fn(!1))}),[en]),i.a.useEffect((function(){!1!==jn&&(ii([]),On(!1))}),[jn]),i.a.useEffect((function(){!1!==Qt&&(Hi([]),Kt(!1))}),[Qt]);var Ar=i.a.useCallback((function(){var e,t=yc();if(!1===[Je,me,$e,he,ve,nt,jt,rt,ut,ye,gt,Ct,Dt,Ee,kt,qe,Rt,Ve].includes(!0)&&t.push("Please choose at least one output field"),kn>An&&t.push("Start Date must be before End date"),t.length>0)Or({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}});else{var n=null==vc?void 0:vc.id,a={offset:0,order:{},filters:[],limit:5e4,measures:[],dimensions:[],timeDimensions:[]};!1===le?a.timeDimensions.push({granularity:n,dimension:"Stats.time",dateRange:[Sg(kn),Sg(An)]}):a.timeDimensions.push({granularity:n,dimension:"Stats.time",compareDateRange:[[Sg(kn),Sg(An)],[Sg(Vn),Sg(Zn)]]}),(e=a.dimensions).push.apply(e,Object(x.a)(dc.map((function(e){return e.id})))),[{dimension:"StatsKey.clientId",values:la,isNotEqual:Ht},{dimension:"StatsKey.clientConnectionId",values:va,isNotEqual:un},{dimension:"StatsKey.supplierId",values:Ma,isNotEqual:en},{dimension:"StatsKey.supplierConnectionId",values:Va,isNotEqual:jn},{dimension:"StatsKey.supplierConnectionLinkId",values:ai,isNotEqual:gn},{dimension:"StatsKey.routeId",values:hi,isNotEqual:Ft},{dimension:"StatsKey.countryId",values:Ei,isNotEqual:Qt},{dimension:"StatsKey.networkId",values:Gi,isNotEqual:Wt},{dimension:"StatsKey.oaProfiledCategoryId",values:Zi,isNotEqual:cn}].forEach((function(e){var t=e.isNotEqual,n=e.dimension,i=e.values,c=void 0===i?[]:i;0!==c.length&&a.filters.push(function(e,t,n){return{dimension:e,values:t.map((function(e){return e.id})),operator:!1===n?"equals":"notEquals"}}(n,c,t))})),[{measures:["Stats.fake_deliveries"],value:Ve},{measures:["number"===Me?"Stats.charged":"Stats.charged_percent"],value:jt},{measures:["number"===Me?"Stats.not_charged":"Stats.not_charged_percent"],value:Dt},{dimensions:["Stats.costCurrency","Stats.cost"],value:me},{dimensions:["Stats.priceCurrency","Stats.price"],value:he},{dimensions:["Stats.profitCurrency"],measures:["Stats.profit"],value:ve},{measures:["Stats.revenue"],dimensions:["Stats.priceCurrency"],value:ye},{measures:["Stats.total_cost"],dimensions:["Stats.costCurrency"],value:Ee},{measures:["Stats.profit_in_base"],dimensions:["Stats.baseCurrency"],value:qe},{measures:["Stats.profit_in_base"],dimensions:["Stats.baseCurrency"],filters:[{dimension:"Stats.profit_in_base",operator:"lt",values:["0"]}],value:qe&&"negative"===Pe},{measures:["number"===Me?"Stats.sent":"Stats.sent_percent"],value:Je},{measures:["number"===Me?"Stats.pending":"Stats.pending_percent"],value:ut},{measures:["number"===Me?"Stats.rejected":"Stats.rejected_percent"],value:gt},{measures:["number"===Me?"Stats.delivered":"Stats.delivered_percent"],value:kt},{measures:["number"===Me?"Stats.submitted":"Stats.submitted_percent"],value:Ct},{measures:["number"===Me?"Stats.enroute":"Stats.enroute_percent"],value:rt},{measures:["number"===Me?"Stats.undelivered":"Stats.undelivered_percent"],value:Rt},{measures:["number"===Me?"Stats.expired":"Stats.expired_percent"],value:nt},{measures:["number"===Me?"Stats.others":"Stats.others_percent"],value:$e}].forEach((function(e){var t,n,i,c=e.value,r=e.measures,s=void 0===r?[]:r,l=e.dimensions,o=void 0===l?[]:l,u=e.filters,d=void 0===u?[]:u;!1!==c&&((t=a.measures).push.apply(t,Object(x.a)(s)),(n=a.dimensions).push.apply(n,Object(x.a)(o)),(i=a.filters).push.apply(i,Object(x.a)(d)))})),a.measures=Object(x.a)(new window.Set(a.measures)),a.dimensions=Object(x.a)(new window.Set(a.dimensions)),ce(a),A(!0)}}),[dc,Je,me,Or,$e,he,vc,ve,nt,rt,jt,ut,ye,An,yc,Me,gt,Ee,kt,Ct,Dt,kn,Ft,Pe,hi,qe,Rt,la,Ht,Wt,Gi,Qt,Ei,en,Ma,Zn,Ve,Vn,le,un,va,cn,Zi,Va,jn,gn,ai]);return!0===R?Object(Ka.jsx)(vg,{query:ie,onBack:vr}):Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsxs)(w.d,{children:[Object(Ka.jsx)(w.f,{children:"Statistics Search"}),Object(Ka.jsx)(w.e,{style:{marginTop:"10px"},children:"Find statistics easily by searching specific attributes."})]}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:4,children:Object(Ka.jsx)("h4",{style:{marginTop:"26px",marginLeft:"10px",marginRight:"40px",color:"grey"},children:"Select Transactions' Timeframe"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"Start",value:kn,errors:Cn,onChange:Ec,onErrorsChange:_n,validations:En,max:null==An?void 0:An})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"End",value:An,errors:Tn,onChange:wc,onErrorsChange:Mn,validations:Ln,min:null==kn?void 0:kn})}),le&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:4,children:Object(Ka.jsx)("h4",{style:{marginTop:"26px",marginLeft:"10px",marginRight:"40px",color:"grey"},children:"Select Transactions' Timeframe"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"Start",value:Vn,errors:qn,onChange:Dc,onErrorsChange:Gn,validations:Wn,max:null==Zn?void 0:Zn})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"End",value:Zn,errors:Yn,onChange:Ic,onErrorsChange:Qn,validations:ta,min:null==Vn?void 0:Vn})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{style:{width:"100%",display:"none"},onClick:Sc,children:!0===le?"Filter using a single timeframe":"Compare with another timeframe"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Client Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!1===b&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===D?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Client",errors:ia,data:ma,value:la,onChange:Tc,onErrorsChange:ca})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===D?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Ht,onChange:Mc,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===W?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:!1===b?"Client Connection":"Connection",errors:ha,data:ya,value:va,onChange:Nc,onErrorsChange:pa,disabled:!1===b&&(!0===Ht||0===la.length)})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===W?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",style:{fontWeight:"bold"},value:un,onChange:Rc,disabled:!1===b&&0===la.length})})]})})]})}),!1===b&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Supplier Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===F?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier",errors:Ea,data:Pa,value:Ma,onChange:Pc,onErrorsChange:Ia})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===F?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:en,onChange:Lc,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===Q?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Connection",errors:qa,data:Ya,value:Va,onChange:Fc,onErrorsChange:Ga,disabled:!0===en||0===Ma.length})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===Q?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",style:{fontWeight:"bold"},value:jn,onChange:Uc,disabled:!0===en||0===Ma.length})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===ee?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Connection Link",errors:Za,data:si,value:ai,onChange:qc,onErrorsChange:ei,disabled:!0===jn||0===Va.length||!0===_c})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===ee?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:gn,onChange:Gc,style:{fontWeight:"bold"},disabled:0===Va.length})})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Route Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===C?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Route",errors:mi,data:vi,value:hi,onChange:Bc,onErrorsChange:bi})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,md:2,children:!0===C?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Ft,onChange:Vc,style:{fontWeight:"bold"}})})]})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Country / Network Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Country",errors:yi,data:Mi,value:Ei,onChange:zc,onErrorsChange:Si})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Qt,style:{fontWeight:"bold"},onChange:Wc})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Network",errors:Pi,data:zi,value:Gi,onChange:Kc,onErrorsChange:Li,disabled:!0===Qt||0===Ei.length})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Wt,style:{fontWeight:"bold"},onChange:Jc,disabled:!0===Qt||0===Ei.length})})]})})]})}),!1===b&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Message Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===H?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Profiled Categories",errors:Yi,data:ac,itemRender:Mr,value:Zi,onChange:Yc,onErrorsChange:Qi})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===H?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:cn,style:{fontWeight:"bold"},onChange:Qc})})]})})})})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Output Fields"}),Object(Ka.jsx)("h4",{style:{marginTop:"15px",color:"grey"},children:"Select Statistics' Output Fields."}),Object(Ka.jsx)("h4",{style:{marginTop:"15px",marginBottom:"-15px"},children:"Message Status Fields"})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Sent",value:Je,onChange:Xc})}),!0===b&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Charged",value:jt,onChange:nr})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Not Charged",value:Dt,onChange:ur})})]}),!1===b&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Submitted",value:Ct,onChange:or})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Delivered",value:kt,onChange:dr})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Undelivered",value:Rt,onChange:fr})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Rejected",value:gt,onChange:lr})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Pending",value:ut,onChange:ir})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Enroute",value:rt,onChange:ar})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Expired",value:nt,onChange:cr})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Other",value:$e,onChange:Zc})})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"ButtonGroup",label:"Display As",value:Me,onChange:sr,data:[{id:"number",name:"# Number"},{id:"percentage",name:"% Percentage"}]})})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{style:{marginTop:"15px",marginBottom:"-15px"},children:"Financial Fields"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:6,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Price",value:he,onChange:er})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:!1===b?"Revenue":"Total Cost",value:ye,onChange:rr})}),!1===b&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Cost",value:me,onChange:$c})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:3,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Total Cost",value:Ee,onChange:mr})})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:6,children:!1===b&&Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Profit",value:ve,onChange:tr})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"Profit (Base Currency)",value:qe,onChange:jr})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:6,children:Object(Ka.jsx)(fm,{variant:"ButtonGroup",label:"Profit (Base Currency) Values",disabled:!qe,value:Pe,onChange:br,data:[{id:"full",name:"All Values"},{id:"negative",name:"Negative Only"}]})})]})})]})}),!1===b&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{style:{marginTop:"15px",marginBottom:"-15px"},children:"Message Fields"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:6,sm:4,lg:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"SMSC DLR",value:Ve,onChange:hr})})})})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Split Output By",errors:sc,data:bc,value:dc,onChange:pr,onErrorsChange:lc})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(fm,{variant:"Combobox",label:"Split Timeframe By",errors:hc,data:Cc,value:vc,onChange:gr,onErrorsChange:pc})})]})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ar,children:"Search"})})]})}function Sg(e){return e.setSeconds(0),e.setMilliseconds(0),[[e.getUTCFullYear(),String(e.getUTCMonth()+1).padStart(2,"0"),String(e.getUTCDate()).padStart(2,"0")].join("-"),[String(e.getUTCHours()).padStart(2,"0"),String(e.getUTCMinutes()).padStart(2,"0"),String(e.getUTCSeconds()).padStart(2,"0")].join(":")].join(" ")}var kg=i.a.memo(yg),wg={skip:0,take:20};function Eg(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setContentTitle,a=e.setBreadcrumbs,c=Object(d.h)(),r=Object(l.c)(),s=i.a.useState(!0),u=Object(o.a)(s,2),m=u[0],b=u[1],j=i.a.useState([]),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),O=Object(o.a)(g,2),v=O[0],C=O[1],y=i.a.useState(wg),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useCallback((function(e){D(e.dataState)}),[]);i.a.useEffect((function(){return t("Statistics Saved Searches"),n("Statistics Saved Searches"),a([{name:"Statistics"},{name:"Saved Searches"}]),function(){t(null),a([])}}),[t,n,a]);var M=i.a.useCallback((function(e){r(Ui(e))}),[r]),N=Object(l.d)((function(e){return e.statisticsSavedReport})),R=i.a.useCallback((function(){r(Do())}),[r]),A=i.a.useCallback((function(){return R(),r((function(e){return ko.get("/sms/save").then((function(t){e(Io.apply(void 0,Object(x.a)(t.data.saved_searches)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))}),[r,R]),P=i.a.useCallback((function(){return b(!0),A().then((function(){b(!1)})).catch((function(e){M({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[A,M]);i.a.useEffect((function(){return P(),function(){return R()}}),[R,P]);var L=i.a.useCallback((function(){D(wg)}),[]),F=i.a.useCallback((function(e){p([e]),C(!0)}),[]),U=i.a.useCallback((function(){p([]),C(!1)}),[]),q=i.a.useCallback((function(){var e;b(!0),r((e=h,function(){return ko.delete("/sms/save/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){M({severity:"success",message:"Saved Search Successfully Deleted"})})).catch((function(e){M({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return A()})).then((function(){b(!1),p([]),C(!1)}))}),[r,A,M,h]),G=sb({variant:"Input",props:{label:"Name"}}),H=sb({variant:"Input",props:{label:"ID"}}),B=sb({variant:"Date",props:{label:"Created On"}}),V=i.a.useMemo((function(){return[{field:"saved_search_name",title:"Name",filterCell:G},{field:"created_on",title:"Created On",view:"dateDOM",width:"250px",filterCell:B},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:H},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"100px"}]}),[G,H,B]),z=i.a.useMemo((function(){return Object(x.a)(N.values()).map((function(e){var t=new window.Date(e.get("created_on"));return{id:e.get("saved_search_id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:e.get("saved_search_id")})}),saved_search_name:e.get("saved_search_name"),created_on:new window.Date(t.getFullYear(),t.getMonth(),t.getDate()),dateDOM:Object(Ka.jsx)(Nd,{utc:e.get("created_on")}),actions:Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View ".concat(e.get("saved_search_name")," Saved Report"),"aria-label":"View ".concat(e.get("saved_search_name")," Saved Report"),onClick:function(){c.push("/statistics/search/saved/".concat(e.get("saved_search_id")))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable ".concat(e.get("saved_search_name")," Saved Report"),"aria-label":"Disable ".concat(e.get("saved_search_name")," Saved Report"),onClick:function(){return F(e.get("saved_search_id"))}})]})}}))}),[c,N,F]),W=i.a.useMemo((function(){return h.map((function(e){return Object(Ka.jsxs)("li",{children:[N.getIn([e,"saved_search_name"]),"(ID: ",e,")"]},e)}))}),[N,h]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,lg:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Saved Searches"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:m,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:I.skip,take:I.take,sort:I.sort,filter:I.filter,data:z,columns:V,onDataStateChange:T})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:P,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:L,children:"Clear Filters and Sorting"})]})]})})}),!0===v&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:U,children:["Are you sure you want to delete the following Saved Search?",Object(Ka.jsx)("ul",{children:W}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:q,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:U,children:"Cancel"})]})]})]})}var Ig=i.a.memo(Eg),Dg={skip:0,take:20,sort:[{dir:"desc",field:"created_on"}]},Tg={FAILED:"Failed",PENDING:"Pending",COMPLETED:"Completed",IN_PROGRESS:"In Progress"};function Mg(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setContentTitle,a=e.setBreadcrumbs,c=Object(l.c)(),r=i.a.useState(!0),s=Object(o.a)(r,2),u=s[0],d=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(Dg),g=Object(o.a)(p,2),O=g[0],v=g[1],x=i.a.useCallback((function(e){c(Ui(e))}),[c]);i.a.useEffect((function(){return t("Statistics Latest Reports"),n("Statistics Latest Reports"),a([{name:"Statistics"},{name:"Latest Reports"}]),function(){t(null),a([])}}),[t,n,a]);var C=i.a.useCallback((function(){c({type:nn})}),[c]),y=i.a.useCallback((function(){return C(),c(Eo())}),[c,C]),E=kb({frequency:1e4,intervalPolicy:"update",name:"Latest Reports",request:i.a.useCallback((function(){return y()}),[y]),getData:i.a.useCallback((function(e){var t=e.statisticsLatestReport.reduce((function(e,t){return e.add(new m.b({id:t.get("report_id"),status:t.get("status"),created_on:t.get("created_on"),report_name:t.get("report_name"),schedule_id:t.get("schedule_id"),schedule_day:t.get("schedule_day"),download_link:t.get("download_link"),schedule_time:t.get("schedule_time"),schedule_frequency:t.get("schedule_frequency")}))}),new m.e);return new m.b({data:t,totalRecords:t.size})}),[])}),I=E.data,D=E.update,T=i.a.useCallback((function(){return h(!0),D().then((function(){h(!1)})).catch((function(e){x({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[D,x]);i.a.useEffect((function(){return d(!0),D().then((function(){d(!1)})).catch((function(e){x({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return C()}}),[C,x,D]);var M=i.a.useCallback((function(e){window.location.assign(e)}),[]),N=i.a.useCallback((function(e){v(e.dataState)}),[]),R=i.a.useCallback((function(){v(Dg)}),[]),A=sb({variant:"Input",props:{label:"Name"}}),P=sb({variant:"Input",props:{label:"ID"}}),L=sb({variant:"Date",props:{label:"Created On"}}),F=sb({variant:"MultiSelect",props:{label:"Status",data:i.a.useMemo((function(){return Object.keys(Tg).map((function(e){return{id:e,name:Tg[e]}}),[])}),[])}}),U=i.a.useMemo((function(){return[{field:"report_name",title:"Name",filterCell:A},{field:"created_on",title:"Created On",view:"dateDOM",width:"250px",filterCell:L},{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:F},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:P},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"70px"}]}),[A,P,L,F]),q=i.a.useMemo((function(){return I.get("data").reduce((function(e,t){return e.push({id:t.get("id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:t.get("id")})}),created_on:t.get("created_on"),report_name:t.get("report_name"),dateDOM:Object(Ka.jsx)(Nd,{utc:t.get("created_on")}),status:t.get("status"),statusDOM:Object(Ka.jsxs)(Ka.Fragment,{children:["COMPLETED"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-check"}):"FAILED"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-exclamation-triangle"}):Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",Tg[t.get("status")]]}),actions:Object(Ka.jsx)(i.a.Fragment,{children:null!=t.get("download_link")&&Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"download",title:"Export ".concat(t.get("report_name")," Latest Report"),"aria-label":"Export ".concat(t.get("report_name")," Latest Report"),onClick:function(){return M(t.get("download_link"))}})})})}),e}),[])}),[I,M]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,lg:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Latest Reports"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:u,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:O.skip,take:O.take,sort:O.sort,filter:O.filter,data:q,columns:U,onDataStateChange:N})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:T,disabled:!0===f,children:!0===f?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:R,children:"Clear Filters and Sorting"})]})]})})})}var Ng=i.a.memo(Mg),Rg=[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}].map((function(e){return e.name})),Ag={skip:0,take:20};function Pg(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setContentTitle,a=e.setBreadcrumbs,c=Object(l.c)(),r=i.a.useState(!0),s=Object(o.a)(r,2),u=s[0],d=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(Ag),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState([]),y=Object(o.a)(C,2),E=y[0],I=y[1],D=i.a.useState(null),T=Object(o.a)(D,2),M=T[0],N=T[1],R=null!=M,A=i.a.useState(!1),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useCallback((function(e){v(e.dataState)}),[]),q=i.a.useCallback((function(e){c(Ui(e))}),[c]),G=Object(l.d)((function(e){return e.statisticsScheduledReport}));i.a.useEffect((function(){return t("Statistics Scheduled Reports"),n("Statistics Scheduled Reports"),a([{name:"Statistics"},{name:"Scheduled Reports"}]),function(){t(null),a([])}}),[t,n,a]);var H=i.a.useCallback((function(){c({type:sn})}),[c]),B=i.a.useCallback((function(){return H(),c((function(e){return ko.get("/sms/schedule").then((function(t){e(To.apply(void 0,Object(x.a)(t.data.scheduled_reports)))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))}),[c,H]),V=kb({name:"Scheduled Reports",request:i.a.useCallback((function(){return B()}),[B]),getData:i.a.useCallback((function(e){var t=e.statisticsScheduledReport.reduce((function(e,t){var n=t.get("schedule_time").split(":").map((function(e){return Number(e)})),a=Object(o.a)(n,2),i=a[0],c=a[1],r=new Date;r.setHours(i),r.setMinutes(c);var s=oi(void 0,void 0,void 0,i,c),l=[s.getHours(),s.getMinutes()].map((function(e){return String(e).padStart(2,"0")})).join(":");return e.add(new m.b({id:t.get("schedule_id"),schedule_time:l,report_name:t.get("report_name"),schedule_id:t.get("schedule_id"),schedule_day:t.get("schedule_day"),schedule_frequency:t.get("schedule_frequency")}))}),new m.e);return new m.b({data:t,totalRecords:t.size})}),[])}),z=V.data,W=V.update,K=i.a.useCallback((function(){return h(!0),W().then((function(){h(!1)})).catch((function(e){q({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[W,q]);i.a.useEffect((function(){return d(!0),W().then((function(){d(!1)})).catch((function(e){q({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return H()}}),[H,q,W]);var J=i.a.useCallback((function(){v(Ag)}),[]),Y=i.a.useCallback((function(e){return("submission"!==e.reason?Promise.resolve():K()).then((function(){return N(null)}))}),[K]),Q=i.a.useCallback((function(e){N(e)}),[]),X=i.a.useCallback((function(e){I([e]),F(!0)}),[]),$=i.a.useCallback((function(){var e;d(!0),F(!1),c((e=E[0],function(){return ko.delete("/sms/schedule/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){q({severity:"success",message:"Scheduled Report Successfully Deleted"})})).catch((function(e){q({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return W()})).then((function(){d(!1),I([])}))}),[c,W,q,E]),Z=i.a.useCallback((function(){I([]),F(!1)}),[]),ee=sb({variant:"Input",props:{label:"Name"}}),te=sb({variant:"Input",props:{label:"ID"}}),ne=sb({variant:"Input",props:{label:"Period"}}),ae=i.a.useMemo((function(){return[{field:"report_name",title:"Name",filterCell:ee},{field:"period",title:"Period",filterCell:ne},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:te},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"100px"}]}),[te,ee,ne]),ie=i.a.useMemo((function(){return z.get("data").reduce((function(e,t){return e.push({id:t.get("id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:t.get("id")})}),report_name:t.get("report_name"),schedule_time:t.get("schedule_time"),schedule_frequency:t.get("schedule_frequency").toLowerCase(),period:Lg({day:t.get("schedule_day"),time:t.get("schedule_time"),frequency:t.get("schedule_frequency")}),actions:Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"View & Edit ".concat(t.get("report_name")," Report"),"aria-label":"View & Edit ".concat(t.get("report_name")," Report"),onClick:function(){return Q(t.get("schedule_id"))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable ".concat(t.get("report_name")," Report"),"aria-label":"Disable ".concat(t.get("report_name")," Report"),onClick:function(){return X(t.get("schedule_id"))}})]})}),e}),[])}),[z,X,Q]),ce=i.a.useMemo((function(){return E.map((function(e){return Object(Ka.jsxs)("li",{children:[G.getIn([e,"report_name"]),"(ID: ",e,")"]},e)}))}),[E,G]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===R?6:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Scheduled Reports"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:u,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:O.skip,take:O.take,sort:O.sort,filter:O.filter,data:ie,columns:ae,onDataStateChange:U})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:K,disabled:!0===f,children:!0===f?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:J,children:"Clear Filters and Sorting"})]})]})}),!0===R&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(gg,{id:M,onClose:Y})})]}),!0===L&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:Z,children:["Are you sure you want to delete the following Scheduled Report?",Object(Ka.jsx)("ul",{children:ce}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:$,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Z,children:"Cancel"})]})]})]})}function Lg(e){var t=e.day,n=e.time;switch(e.frequency){case"DAILY":return"Daily @ ".concat(n);case"MONTHLY":return"Every ".concat(t," of the Month @ ").concat(n);case"WEEKLY":return"Every ".concat(Rg[t]," @ ").concat(n);default:return"-"}}var Fg=i.a.memo(Pg);function Ug(){var e="/statistics",t=b();return Object(Ka.jsx)(Rb,{tabs:[{url:"".concat(e,"/search"),path:"".concat(e,"/search/:searchType?/:searchID?"),title:"Statistics Search",key:"statistics.search",component:Object(Ka.jsx)(kg,{})},{title:"Latest Reports",key:"statistics.latestReports",url:"".concat(e,"/latest-reports"),path:"".concat(e,"/latest-reports"),component:Object(Ka.jsx)(Ng,{}),visible:t.has("FRONTEND:STATISTICS-LATEST-REPORTS-PAGE-ACCESS")},{title:"Scheduled Reports",key:"statistics.scheduledReports",url:"".concat(e,"/scheduled-reports"),path:"".concat(e,"/scheduled-reports"),component:Object(Ka.jsx)(Fg,{}),visible:t.has("FRONTEND:STATISTICS-SCHEDULED-REPORTS-PAGE-ACCESS")},{title:"Saved Searches",key:"statistics.savedReports",url:"".concat(e,"/saved-reports"),path:"".concat(e,"/saved-reports"),component:Object(Ka.jsx)(Ig,{})}]})}var qg=i.a.memo(Ug),Gg={prepaid:{id:"prepaid",name:"Prepaid"},postpaid:{id:"postpaid",name:"Postpaid"}};var Hg=Gg,Bg={yes:{id:"yes",name:"Yes"},no:{id:"no",name:"No"}},Vg={gsm7:{id:"gsm7",name:"GSM7"},latin1:{id:"latin1",name:"Latin1"},utf8:{id:"utf8",name:"UTF8"}},zg={DEFAULT_POLICY:{id:"DEFAULT_POLICY",name:"Actual DLR"},SMSC_DELIVERY_REPORT_ONLY:{id:"SMSC_DELIVERY_REPORT_ONLY",name:"SMSC DLR"}},Wg=Object.keys(Hg).map((function(e){return Hg[e]})),Kg=Object.keys(Bg).map((function(e){return Bg[e]})),Jg=Object.keys(Vg).map((function(e){return Vg[e]})),Yg=Object.keys(zg).map((function(e){return zg[e]}));function Qg(e){var t=e.clientID,n=b(),a=Object(d.h)(),c=Object(l.c)(),r=O("customer-portal"),s=i.a.useState(),u=Object(o.a)(s,2),j=u[0],f=u[1],h=i.a.useState(),p=Object(o.a)(h,2),g=p[0],v=p[1],C=i.a.useState(!1),_=Object(o.a)(C,2),y=_[0],E=_[1],I=i.a.useState(),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useState(!1),R=Object(o.a)(N,2),A=R[0],P=R[1],L=i.a.useState(!1),F=Object(o.a)(L,2),U=F[0],q=F[1],G=oj(j),H=oj(g),B=i.a.useMemo((function(){return n.has("API:CLIENT_DETAILS:WRITE")}),[n]),V=i.a.useCallback((function(e){c(Ui(e))}),[c]),z=i.a.useCallback((function(){var e=!U;q(e),!0===e&&M(Object.keys(j).reduce((function(e,t){return e[t]=Object.assign({},j[t]),e}),{}))}),[j,U]),W=Object(l.d)((function(e){var n=e.client;return new m.b(n.get(t))})),K=Object(l.d)((function(e){return e.field["client-fields"]||[]})),J=Mj(K),Y=Nj(K,W.get("client_fields")),Q=i.a.useMemo((function(){return!0===A}),[A]);i.a.useEffect((function(){return P(!0),Promise.all([c(xi("client-fields"))]).then((function(){P(!1)})).catch((function(e){V({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){c(vi("client-fields"))}}),[c,V,t]),i.a.useEffect((function(){if(!0!==Q){var e=Object.assign({},J),t={name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""}};t.name.value=W.get("client_name"),["client_name"].forEach((function(t){null!=e[t]&&(e[t].value=Y[t])})),K.forEach((function(t){var n=t.field_id;null!=e[n]&&(e[n].value=Y[n])})),f(e),v(t)}}),[Q,K,Y,W,J]);var X=i.a.useCallback((function(e){E(!0),f(e)}),[]),$=i.a.useCallback((function(e){E(!0),v(e)}),[]),Z=i.a.useCallback((function(){f(T),z()}),[z,T]),ee=i.a.useCallback((function(){return c(!1===r?Us(t):qs())}),[c,t,r]),te=i.a.useCallback((function(){var e=G(),n=e.invalidMessages,a=e.controls,i=H(),r=i.invalidMessages,s=i.controls;f(a),v(s);var l=[].concat(Object(x.a)(n),Object(x.a)(r));if(l.length>0)V({message:Object(Ka.jsx)(Mm,{messageList:l}),severity:"error",action:{label:"Dismiss"}});else{P(!0);var o,u,d=K.map((function(e){return{field_id:e.field_id,value:Xg(a[e.field_id])}}));c((o=t,u={client_fields:d,client_name:s.name.value},function(){return jc.patch("/".concat(o),u).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){return V({severity:"success",message:"Client Successfully Edited"}),E(!1),q(!1),ee()})).catch((function(e){V({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return P(!1)}))}}),[G,H,t,c,V,K,ee]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:y}),Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",style:{minHeight:"584px"},children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Client Details"})}),Object(Ka.jsx)(w.c,{children:!0===Q?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:g,isEdit:U,onControlsChange:$}),Object(Ka.jsx)(lj,{controls:j,isEdit:U,onControlsChange:X})]})}),!1===r&&Object(Ka.jsx)(w.b,{layout:"stretched",children:!1===U?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return a.push("/clients")},children:"Cancel"}),!0===B&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:z,children:"Edit"})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Z,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:te,disabled:!0===Q,children:"Save"})]})})]})]})}function Xg(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var $g=i.a.memo(Qg),Zg={skip:0,take:20};function eO(e){var t=e.clientID,n=b(),a=Object(l.c)(),c=O("customer-portal"),r=i.a.useState(),s=Object(o.a)(r,2),u=s[0],d=s[1],j=i.a.useState(!0),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),v=Object(o.a)(g,2),y=v[0],E=v[1],I=i.a.useState([]),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useState({}),R=Object(o.a)(N,2),A=R[0],P=R[1],F=i.a.useState([]),U=Object(o.a)(F,2),q=U[0],G=U[1],H=i.a.useState(!1),B=Object(o.a)(H,2),V=B[0],z=B[1],W=!0===q.length>0||!0===V,K=i.a.useState(!1),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useState(Zg),$=Object(o.a)(X,2),Z=$[0],ee=$[1],te=Kb(),ne=i.a.useMemo((function(){return n.has("API:CLIENT_DETAILS:WRITE")&&!1===c}),[n,c]),ae=i.a.useCallback((function(e){a(Ui(e))}),[a]),ie=Object(l.d)((function(e){var n=e.client,a=e.clientContact,i=n.getIn([t,"contacts"]);return(null==i?[]:i.toJS()).reduce((function(e,t){var n=a.get(t);return null==n?e:e.set(t,n)}),new m.b)})),ce=Object(l.d)((function(e){return e.clientContactType})),re=i.a.useCallback((function(){var e=!y;if(E(e),!0===e){var t=Object.assign({},{name:{elementType:"input",elementConfig:{placeholder:"Full Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},email:{elementType:"input",elementConfig:{placeholder:"Email Address"},value:"",validation:{required:!0,isEmail:!0},valid:!0,validationMessage:""},contactType:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Contact Type"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}});t.contactType.data=tO(ce),d(t)}}),[ce,y]),se=i.a.useCallback((function(){a({type:we}),a({type:L})}),[a]),le=i.a.useCallback((function(){return se(),Promise.all([a(Si()),a(!1===c?Gs(t):Hs(t))])}),[a,se,t,c]),oe=i.a.useCallback((function(){return p(!0),le().then((function(){p(!1)})).catch((function(e){ae({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[le,ae]);i.a.useEffect((function(){return oe(),function(){return se()}}),[se,oe]);var ue=i.a.useCallback((function(){ee(Zg)}),[]),de=i.a.useCallback((function(e){ee(e.dataState)}),[]),me=i.a.useCallback((function(e){z(!0),d(e)}),[]);i.a.useEffect((function(){G(q.reduce((function(e,t){if(null!=A[t])return e;var n=Object(x.a)(e);return n.splice(n.indexOf(t),1),n}),q))}),[A,q]);var be=i.a.useCallback((function(e){!0!==q.includes(e)&&G([].concat(Object(x.a)(q),[e]))}),[q]),je=i.a.useCallback((function(e){return function(t){var n=Object.assign({},A);n[e]=t,P(n),be(e)}}),[A,be]),fe=i.a.useCallback((function(){re()}),[re]),he=i.a.useCallback((function(e){if(null==A[e.contact_id]){var t={name:{elementType:"input",elementConfig:{placeholder:"Full Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},email:{elementType:"input",elementConfig:{placeholder:"Email Address"},value:"",validation:{required:!0,isEmail:!0},valid:!0,validationMessage:""},contactType:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Contact Type"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};t.name.value=e.contact_name,t.email.value=e.contact_email,t.contactType.value=null!=e.contact_type_id&&{id:e.contact_type_id,name:ce.get(e.contact_type_id).get("contact_type_name")},t.contactType.data=tO(ce);var n=Object.assign({},A);n[e.contact_id]=t,P(n)}}),[A,ce]),pe=i.a.useCallback((function(e){var n=A[e],i=Object.keys(n).reduce((function(e,t){var n=e.controls[t],a=ei(n.value,n.validation);return""!==a?(n.valid=!1,n.validationMessage=n.elementConfig.placeholder+a,e.invalidMessages.push(n.validationMessage)):(n.valid=!0,n.validationMessage=""),e}),{invalidMessages:[],controls:Object.assign({},n)}),c=i.invalidMessages,r=i.controls,s=Object.assign({},A,Object(C.a)({},e,r));if(c.length>0)return ae({message:Object(Ka.jsx)(Mm,{messageList:c}),severity:"error",action:{label:"Dismiss"}}),void P(s);p(!0),Promise.all([a(ll(t,e)),a(cl(t,{contact_name:nO(r.name),contact_email:nO(r.email),contact_type_id:nO(r.contactType)}))]).then((function(){ae({severity:"success",message:"Client Contact Successfully Edited"}),delete s[e]})).catch((function(e){ae({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return a(Gs(t))})).catch((function(e){ae({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){p(!1),P(s)}))}),[A,t,a,ae]),ge=i.a.useCallback((function(e){if(null!=A[e]){var t=Object.assign({},A);delete t[e],P(t)}}),[A]),Oe=i.a.useCallback((function(e){M([e]),Q(!0)}),[]),ve=i.a.useCallback((function(){p(!0),a(ll(t,T[0])).then((function(){ae({severity:"success",message:"Client Contact Successfully Deleted"})})).catch((function(e){ae({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return le()})).then((function(){p(!1),M([]),Q(!1)}))}),[a,t,le,ae,T]),xe=i.a.useCallback((function(){M([]),Q(!1)}),[]),Ce=i.a.useCallback((function(e){!0===ne&&he(e.dataItem.originalRecord)}),[he,ne]),_e=sb({variant:"Input"}),ye=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return ce.reduce((function(e,t){return e.push({id:t.get("contact_type_id"),name:t.get("contact_type_name")}),e}),[])}),[ce])}}),Se=i.a.useMemo((function(){var e=[{field:"name",title:"Name",width:"200px",view:"nameDOM",filterCell:_e},{field:"email",title:"Email",width:"200px",view:"emailDOM",filterCell:_e},{field:"contactType",title:"Contact Type",width:"200px",view:"contactTypeDOM",filterCell:ye},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:_e}];return!0===ne&&e.push({field:"actions",width:"100px",locked:!0,sortable:!1,filterable:!1}),e}),[ye,ne,_e]),ke=i.a.useMemo((function(){return Object(x.a)(ie.values()).map((function(e){var t=e.toJS(),n=A[t.contact_id],a=null!=n,c=je(t.contact_id);return{id:t.contact_id,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:t.contact_id})}),originalRecord:t,email:t.contact_email,contactType:t.contact_type_id,name:t.contact_name,nameDOM:!1===a?t.contact_name:Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){te(e,t,n,c)},formElement:{id:"name",config:n.name}},"name"),emailDOM:!1===a?t.contact_email:Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){te(e,t,n,c)},formElement:{id:"email",config:n.email}},"email"),contactTypeDOM:!1===a?ce.getIn([t.contact_type_id,"contact_type_name"]):Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){te(e,t,n,c)},formElement:{id:"contactType",config:n.contactType}},"contactType"),actions:!1===a?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(t.contact_name," Contact"),"aria-label":"Edit ".concat(t.contact_name," Contact"),onClick:function(){return he(t)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"delete",title:"Disable ".concat(t.contact_name," Contact"),"aria-label":"Disable ".concat(t.contact_name," Contact"),onClick:function(){return Oe(t.contact_id)}})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel Client Contact Modifications","aria-label":"Cancel Client Contact Modifications",onClick:function(){return ge(t.contact_id)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Submit Client Contact Modifications","aria-label":"Submit Client Contact Modifications",onClick:function(){return pe(t.contact_id)}})]})}}))}),[ie,pe,he,Oe,A,ce,ge,te,je]),Ee=i.a.useCallback((function(){var e=Object.keys(u).reduce((function(e,t){var n=e.controls[t],a=ei(n.value,n.validation);return""!==a?(n.valid=!1,n.validationMessage=n.elementConfig.placeholder+a,e.invalidMessages.push(n.validationMessage)):(n.valid=!0,n.validationMessage=""),e}),{invalidMessages:[],controls:Object.assign({},u)}),n=e.invalidMessages,i=e.controls;d(i),n.length>0?ae({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}}):(p(!0),a(cl(t,{contact_name:nO(i.name),contact_email:nO(i.email),contact_type_id:nO(i.contactType)})).then((function(){ae({severity:"success",message:"Client Contact Successfully Added"});var e=Object.assign({},i);return Object.keys(e).forEach((function(e){i[e].value=""})),re(),a(Gs(t))})).catch((function(e){ae({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){p(!1),z(!1)})))}),[u,t,a,ae,re]),Ie=i.a.useMemo((function(){return T.map((function(e){return Object(Ka.jsxs)("li",{children:[ie.getIn([e,"contact_name"]),"(ID: ",e,")"]},e)}))}),[ie,T]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(Yb,{show:W}),Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Client Contacts"})}),Object(Ka.jsx)(w.c,{children:!0===h?Object(Ka.jsx)(Wm,{className:"loader",height:!1===y?"400px":"718px"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===ne&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:!1===y?Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:re,children:"Add Contact"})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Add Contact"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:u,onControlsChange:me})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:fe,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ee,children:"Save"})]})]}),Object(Ka.jsx)("hr",{})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,frontendFiltering:!0,frontendPagination:!0,style:{height:"403px"},skip:Z.skip,take:Z.take,sort:Z.sort,filter:Z.filter,data:ke,onRowClick:Ce,columns:Se,onDataStateChange:de})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:oe,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ue,children:"Clear Filters and Sorting"})]})]}),!0===Y&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:xe,children:["Are you sure you want to delete the following Client Contacts?",Object(Ka.jsx)("ul",{children:Ie}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ve,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:xe,children:"Cancel"})]})]})]})}function tO(e){return Object(x.a)(e.values()).map((function(e){return{id:e.get("contact_type_id"),name:e.get("contact_type_name")}}))}function nO(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var aO=i.a.memo(eO);function iO(e){var t=e.clientID,n=i.a.useContext(Tm),a=n.setTitle,c=n.setContentTitle,r=n.setBreadcrumbs,s=Object(l.d)((function(e){return e.client.getIn([t,"client_name"])}));return i.a.useEffect((function(){return null==s?(a("Information"),c("Information")):(a("".concat(s,"'s Information")),c("".concat(s,"'s Information"))),r([{link:"/clients",name:"Clients"},{name:s},{name:"Information"}]),function(){a(null),r([]),c(null)}}),[s,a,c,r]),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)($g,{clientID:t})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(aO,{clientID:t})})]})}var cO=i.a.memo(iO);function rO(e){var t=e.clientID,n=b(),a=Object(d.j)().walletID,c=i.a.useContext(Tm),r=c.setTitle,s=c.setContentTitle,u=c.setBreadcrumbs,j=Object(d.h)(),f=Object(l.c)(),h=i.a.useState(!0),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useState(),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(!1),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(!1),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState(!1),q=Object(o.a)(U,2),G=q[0],H=q[1],B=!0===L||!0===G,V=oj(C),z=oj(I),W=i.a.useMemo((function(){return[Object(Rd.a)(),Object(Rd.a)()]}),[]),K=Object(o.a)(W,2),J=K[0],Y=K[1],Q=i.a.useState(!1),X=Object(o.a)(Q,2),$=X[0],Z=X[1],ee=i.a.useState(!1),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],ie=i.a.useCallback((function(){Z(!1)}),[]),ce=i.a.useCallback((function(){ae(!1)}),[]),re=i.a.useCallback((function(){Z(!0)}),[]),se=i.a.useCallback((function(){ae(!0)}),[]),le=i.a.useMemo((function(){return n.has("API:CLIENT_WALLET:WRITE")}),[n]),oe=i.a.useCallback((function(e){f(Ui(e))}),[f]);i.a.useEffect((function(){return f(Vs(t,a)).then((function(){O(!1)})).catch((function(e){oe({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return f(ds())}}),[f,t,a,oe]);var ue=Object(l.d)((function(e){return e.client})),de=Object(l.d)((function(e){var t=e.clientWallet;return new m.b(t.get(a))})),me=Object(l.d)((function(e){var t=e.currency;return new m.b(t.get(de.get("currency")))})),be=i.a.useMemo((function(){return new m.b(me.get("settings"))}),[me]);i.a.useEffect((function(){var e=de.get("currency"),n=ue.getIn([t,"client_name"]);return null==e||null==n?(r("Wallet Modification"),s("Wallet Modification")):(r("".concat(n,"'s ").concat(e," Wallet Modification")),s("".concat(n,"'s ").concat(e," Wallet Modification"))),u([{link:"/clients",name:"Clients"},{name:n},{name:"Wallets",link:"/clients/".concat(t,"/wallets/")},{name:e}]),function(){r(null),u([])}}),[ue,t,de,r,s,u]);var je=i.a.useCallback((function(){var e={amount:{elementType:"numeric",elementConfig:{min:0,step:.01,placeholder:"Amount",format:{style:"currency",currencyDisplay:"code",currency:""}},value:0,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""}};e.amount.elementConfig.format.currency=de.get("currency");var t=be.get("decimal_places");null!=t&&(e.amount.elementConfig.format.minimumFractionDigits=t),_(e)}),[de,be]),fe=i.a.useMemo((function(){return{color:be.get("background_bottom")}}),[be]),he=i.a.useCallback((function(){var e={walletId:{isEditable:!1,elementConfig:{placeholder:"Wallet ID"},validation:{required:!0},valid:!0,validationMessage:""},creditBalance:{isEditable:!1,elementType:"numeric",elementConfig:{placeholder:"Wallet Balance",format:{style:"currency",currencyDisplay:"code",currency:"EUR"}},value:0,validation:{required:!0,isNumeric:!0},valid:!0,validationMessage:""},walletType:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Wallet Type"},valid:!0,value:null,data:Wg,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},creditLimit:{elementType:"numeric",elementConfig:{step:.01,placeholder:"Wallet Credit Limit",format:{style:"currency",currencyDisplay:"code",currency:""}},value:0,validation:{required:!0,isNumeric:!0},valid:!0,validationMessage:""}};e.walletId.value=Object(Ka.jsx)("div",{style:fe,className:"WalletWidgetId",children:Object(Ka.jsx)(Id,{value:de.get("wallet_id"),variant:"secondary"})}),e.creditBalance.value=Number(de.get("credits")),e.creditLimit.value=Number(de.get("credit_limit")),e.walletType.value=Hg[de.get("wallet_type")],e.creditLimit.elementConfig.format.currency=de.get("currency"),e.creditBalance.elementConfig.format.currency=de.get("currency");var t=be.get("decimal_places");null!=t&&(e.creditLimit.elementConfig.format.minimumFractionDigits=t,e.creditBalance.elementConfig.format.minimumFractionDigits=t),lO(e),D(e)}),[de,be,fe]);i.a.useEffect((function(){je(),he()}),[je,he]);var pe=i.a.useCallback((function(e){lO(e),D(e),H(!0)}),[]),ge=i.a.useCallback((function(e){_(e),F(!0)}),[]),Oe=i.a.useCallback((function(){R(!N),he()}),[he,N]),ve=i.a.useCallback((function(){var e=z({ignore:["creditBalance"]}),n=e.invalidMessages,i=e.controls;if(D(i),n.length>0)oe({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}});else{O(!0);var c=sO(i.walletType);f(function(e,t,n){return function(){return jc.put("/".concat(e,"/wallets/").concat(t,"/type?wallet_type=").concat(n.wallet_type),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,a,{wallet_type:c})).then((function(){if(c!==Hg.prepaid.id)return f(function(e,t,n){return function(){return jc.put("/".concat(e,"/wallets/").concat(t,"/limit?limit=").concat(n.limit)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,a,{limit:sO(i.creditLimit)}))})).then((function(){return oe({severity:"success",message:"Wallet Successfully Edited"}),R(!1),H(!1),f(Vs(t,a))})).catch((function(e){oe({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return O(!1)}))}}),[f,oe,t,a,z]),xe=i.a.useCallback((function(e){var n=V(),i=n.invalidMessages,c=n.controls;if(_(c),i.length>0)oe({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{Z(!1),ae(!1),O(!0);var r=e?"-"+String(sO(c.amount)):String(sO(c.amount));f(function(e,t,n){return function(){return jc.post("/".concat(e,"/wallets/").concat(t,"/transaction?amount=").concat(n.amount)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,a,{amount:r})).then((function(){return oe({severity:"success",message:e?"Amount Successfully Deducted":"Amount Successfully Added"}),F(!1),f(Vs(t,a))})).catch((function(e){oe({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return O(!1)}))}}),[f,t,a,oe,V]),Ce=i.a.useMemo((function(){return!1===g&&C&&Number(C.amount.value)>0}),[g,C]),_e={border:"1px solid ".concat(be.get("background_bottom")),background:"linear-gradient(180deg, ".concat(be.get("background_top")," 0%,  ").concat(be.get("background_bottom"),"  100%)")};return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:B}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===le?6:12,"aria-labelledby":Y,children:Object(Ka.jsxs)(w.a,{className:"Card--Dark",style:_e,children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsx)("span",{id:Y,children:"Wallet Details"})})}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsx)("div",{className:"WalletWidgetBGCurrency",children:de.get("currency")}),!0===g?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,item:!0,spacing:2,children:Object(Ka.jsx)(lj,{isEdit:N,controls:I,onControlsChange:pe})})]}),Object(Ka.jsx)(w.b,{layout:"stretched",children:!0===N?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Oe,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ve,disabled:!0===g,children:"Save"})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return j.push("/clients/".concat(t,"/wallets/"))},children:"Go Back"}),!0===le&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Oe,disabled:!0===g,children:"Edit"})]})})]})}),!0===le&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"aria-labelledby":J,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:Object(Ka.jsx)("span",{id:J,children:"Modify Funds"})})}),Object(Ka.jsx)(w.c,{children:!0===g?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,item:!0,spacing:5,children:[Object(Ka.jsx)(lj,{controls:C,onControlsChange:ge}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:6})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:re,disabled:!1===Ce,children:"Add"}),Object(Ka.jsx)(k.a,{disabled:!1===Ce,onClick:se,children:"Deduct"})]})]})}),!0===$&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ie,children:["Are you sure you want to Add Credit to the Wallet?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{className:"DangerButton",onClick:function(){return xe(!1)},children:"Add Funds"}),Object(Ka.jsx)(k.a,{className:"ActionButton Plain",onClick:ie,children:"Cancel"})]})]}),!0===ne&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ce,children:["Are you sure you want to Deduct Credit from the Wallet?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{className:"DangerButton",onClick:function(){return xe(!0)},children:"Deduct Funds"}),Object(Ka.jsx)(k.a,{className:"ActionButton Plain",onClick:ce,children:"Cancel"})]})]})]})]})}function sO(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}function lO(e){var t=null==e.walletType.value?null:e.walletType.value.id;null==t||t===Hg.prepaid.id?ci(e.creditLimit,{defaultValue:0}):e.walletType.value.id===Hg.postpaid.id&&ri(e.creditLimit)}var oO=i.a.memo(rO);function uO(){var e=Object(l.d)((function(e){return e.currency}));return function(t,n){var a=e.getIn([t,"settings"]),i=null!=a&&a.decimal_places;return null==i?n:Number(n).toFixed(i)}}function dO(e){var t=e.id,n=e.type,a=e.clientID,c=e.settings,r=e.currency,s=e.suspended,l=e.credits,u=e.lastTopUp,m=e.lastChanged,b=e.latestAlarm,j=e.creditLimit,f=Object(d.h)(),h=uO(),p=O("customer-portal"),g=i.a.useMemo((function(){return[Object(Rd.a)(),Object(Rd.a)(),Object(Rd.a)(),Object(Rd.a)(),Object(Rd.a)()]}),[]),v=Object(o.a)(g,5),x=v[0],C=v[1],_=v[2],y=v[3],E=v[4],I=i.a.useMemo((function(){var e=!0===s?{color:"#ffffff",background:"linear-gradient(180deg, #929292 0%, #505050 100%)"}:{color:"#ffffff",background:"linear-gradient(180deg, ".concat(c.background_top," 0%,  ").concat(c.background_bottom,"  100%)")};return Object.assign({overflow:"hidden",position:"relative",background:"#ffffff"},e)}),[s,c]),D=i.a.useMemo((function(){var e=!0===s?{color:"linear-gradient(180deg, #929292 0%, #505050 100%)"}:{color:c.background_bottom};return Object.assign({padding:0},e)}),[s,c]),T={fontSize:"0.6em",color:"rgba(255, 255, 255, 0.5)"},M=i.a.useMemo((function(){return h(r,l)}),[h,r,l]),N=i.a.useMemo((function(){return h(r,j)}),[h,r,j]),R=i.a.useMemo((function(){return null==u?"N/A":Object(Ka.jsx)(Nd,{utc:u,includeTimezone:!1})}),[u]),A=i.a.useMemo((function(){return null==m?"N/A":Object(Ka.jsx)(Nd,{utc:m,includeTimezone:!1})}),[m]),P=i.a.useMemo((function(){return null==b?"N/A":Object(Ka.jsx)(Nd,{utc:b,includeTimezone:!1})}),[b]);return Object(Ka.jsx)("div",{"aria-label":"".concat(r," Wallet"),children:Object(Ka.jsxs)(w.a,{style:I,children:[Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsx)("div",{className:"WalletWidgetBGCurrency",children:r}),Object(Ka.jsxs)("header",{className:"WalletWidgetHeader",children:[Object(Ka.jsx)("span",{className:"WalletWidgetHeaderCurrency",children:r}),Object(Ka.jsx)("span",{className:"WalletWidgetHeaderCredit","aria-label":"Credits",children:M})]}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsxs)("div",{className:"WalletWidgetType",children:[Object(Ka.jsx)("span",{className:"k-icon k-i-check-circle"}),Object(Ka.jsx)("span",{className:"WalletWidgetTypeLabel","aria-label":"Wallet Type",children:n})]})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,sm:6,children:[Object(Ka.jsx)("div",{style:T,id:x,children:"Wallet ID"}),Object(Ka.jsx)(k.a,{className:"WalletWidgetId",style:D,look:"flat",children:Object(Ka.jsx)(Id,{value:t,variant:"secondary","aria-labelledby":x})})]})]}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,sm:6,children:[Object(Ka.jsx)("div",{style:T,id:C,children:"Limit"}),Object(Ka.jsxs)("div",{className:"WalletWidgetFieldValue","aria-labelledby":C,children:[N,r]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,sm:6,children:[Object(Ka.jsx)("div",{style:T,id:y,children:"Last Change"}),Object(Ka.jsx)("div",{className:"WalletWidgetFieldValue","aria-labelledby":y,children:A})]}),!1===p&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,sm:6,children:[Object(Ka.jsx)("div",{style:T,id:_,children:"Last Top-up"}),Object(Ka.jsx)("div",{className:"WalletWidgetFieldValue","aria-labelledby":_,children:R})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,sm:6,children:[Object(Ka.jsx)("div",{style:T,id:E,children:"Latest Alarm"}),Object(Ka.jsx)("div",{className:"WalletWidgetFieldValue","aria-labelledby":E,children:P})]})]})]})]}),!1===p&&Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return f.push("/clients/".concat(a,"/wallets/").concat(t))},children:"Wallet Details"})})]})})}var mO=i.a.memo(dO);function bO(e){var t=e.clientID,n=b(),a=Object(l.c)(),c=O("customer-portal"),r=i.a.useContext(Tm),s=r.setTitle,u=r.setContentTitle,d=r.setBreadcrumbs,m=i.a.useState(),j=Object(o.a)(m,2),f=j[0],h=j[1],p=i.a.useState(!0),g=Object(o.a)(p,2),v=g[0],C=g[1],_=i.a.useState(!1),y=Object(o.a)(_,2),E=y[0],I=y[1],D=i.a.useState(!1),T=Object(o.a)(D,2),M=T[0],N=T[1],R=oj(f),A=i.a.useMemo((function(){return n.has("API:CLIENT_WALLET:WRITE")&&!1===c}),[n,c]),P=i.a.useCallback((function(e){a(Ui(e))}),[a]);i.a.useEffect((function(){return a(!1===c?Bs(t):function(e){return function(t){return gc.get("/wallets").then((function(n){return t(ms.apply(void 0,Object(x.a)(n.data.wallets))),t(Ts.apply(void 0,[e].concat(Object(x.a)(n.data.wallets.map((function(e){return e.wallet_id})))))),{total:n.data.wallets.length}})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t)).then((function(){C(!1)})).catch((function(e){P({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return a(ds())}}),[a,P,t,c]);var L=Object(l.d)((function(e){var n=e.client,a=e.clientWallet,i=new Map(n.get(t)).get("wallets");return(null==i?[]:i.toJS()).reduce((function(e,t){var n=a.get(t);return null!=n&&e.push(n.toJS()),e}),[])})),F=Object(l.d)((function(e){return e.currency})),U=i.a.useMemo((function(){var e=L.map((function(e){return e.currency}));return Object(x.a)(F.values()).reduce((function(t,n){var a=n.get("currency");return!1===e.includes(a)&&t.push(a),t}),[])}),[L,F]),q=Object(l.d)((function(e){return e.client.getIn([t,"client_name"])}));i.a.useEffect((function(){return null==q?(s("Wallets"),u("Wallets")):(s("".concat(q,"'s Wallets")),u("".concat(q,"'s Wallets"))),d([{link:"/clients",name:"Clients"},{name:q},{name:"Wallets"}]),function(){s(null),d([])}}),[q,t,s,u,d]);var G=i.a.useCallback((function(){var e=!M;if(N(e),!0===e){var t=Object.assign({},{currency:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},walletType:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Wallet Type"},valid:!0,value:null,data:Wg,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}});t.currency.data=U.map((function(e){return{id:e,name:e}})),h(t)}}),[M,U]),H=i.a.useCallback((function(e){I(!0),h(e)}),[]),B=i.a.useMemo((function(){return L.map((function(e){return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsx)(mO,{clientID:t,id:e.wallet_id,credits:e.credits,type:e.wallet_type,currency:e.currency,lastTopUp:e.last_top_up,latestAlarm:e.last_alarm,lastChanged:e.last_changed,creditLimit:e.credit_limit,suspended:"yes"===e.suspended,settings:new Map(F.get(e.currency)).get("settings")})},e.wallet_id)}))}),[t,L,F]),V=i.a.useCallback((function(){G()}),[G]),z=i.a.useCallback((function(){var e=R(),n=e.invalidMessages,i=e.controls;h(i),n.length>0?P({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}}):(C(!0),a(rl(t,{wallet_type:i.walletType.value.id,currency:jO(i.currency)})).then((function(){return P({severity:"success",message:"Client Wallet Successfully Added"}),I(!1),a(Bs(t))})).catch((function(e){P({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){G(),C(!1)})))}),[R,t,a,P,G]);return!0===v?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)(Yb,{show:E}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===A&&(!1===M?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("div",{className:"MainLayoutMainActions",children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:G,disabled:0===U.length,children:"Add Wallet"})})}):Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsxs)(w.a,{style:{height:"275px"},children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Add Wallet"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:1,children:Object(Ka.jsx)(lj,{controls:f,onControlsChange:H})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:V,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:z,disabled:!0===v,children:"Save"})]})]})})),B]})]})}function jO(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var fO=i.a.memo(bO);function hO(e){var t=e.clientID,n=O("customer-portal"),a=i.a.useMemo((function(){return!0===n?"/clients/wallets":"/clients/".concat(t,"/wallets")}),[t,n]);return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:a,exact:!0,children:Object(Ka.jsx)(fO,{clientID:t})}),!1===n&&Object(Ka.jsx)(d.c,{path:"".concat(a,"/:walletID"),children:Object(Ka.jsx)(oO,{clientID:t})})]})}var pO=i.a.memo(hO),gO={skip:0,take:20};function OO(e){var t=e.clientID,n=b(),a=Object(l.c)(),c=i.a.useState(!0),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState({}),j=Object(o.a)(d,2),f=j[0],h=j[1],p=i.a.useState(gO),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useContext(Tm),y=C.setTitle,E=C.setContentTitle,I=C.setBreadcrumbs,D=i.a.useState(new m.b),T=Object(o.a)(D,2),M=T[0],N=T[1],R=M.size>0,A=i.a.useMemo((function(){return n.has("API:WHITELIST:WRITE")}),[n]),P=Object(l.d)((function(e){return{route:e.route,client:e.client,whitelistSID:e.whitelistSID}})),L=P.route,F=P.client,U=P.whitelistSID,q=i.a.useMemo((function(){var e=F.getIn([t,"routes"]);return null!=e&&e.size>0}),[F,t]);i.a.useEffect((function(){var e=F.getIn([t,"client_name"]);return null==e?(y("SID Preregistration"),E("SID Preregistration")):(y("".concat(e,"'s SID Preregistration")),E("".concat(e,"'s SID Preregistration"))),I([{link:"/clients",name:"Clients"},{name:e},{name:"SID Preregistration"}]),function(){y(null),I([])}}),[F,t,y,E,I]);var G=i.a.useCallback((function(e){a(Ui(e))}),[a]),H=i.a.useCallback((function(){a(Lr()),a(is()),a({data:{id:t},type:pe})}),[a,t]),B=i.a.useCallback((function(){return H(),Promise.all([a(tl(t)),a(cs())]).then((function(e){var n=Object(o.a)(e,1)[0];return Promise.all(n.routes.map((function(e){var n=e.id;return a(nl(t,n))})))}))}),[a,t,H]),V=i.a.useCallback((function(){return u(!0),B().then((function(){u(!1)})).catch((function(e){G({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[B,G]);i.a.useEffect((function(){return V(),function(){return H()}}),[H,V]);var z=i.a.useMemo((function(){return U.reduce((function(e,t){return e.push({id:t.get("id"),name:t.get("name")}),e}),[])}),[U]),W=i.a.useCallback((function(){v(gO)}),[]),K=i.a.useCallback((function(e){v(e.dataState)}),[]),J=i.a.useCallback((function(e){if(!1!==A){var t=e.id,n=e.whitelist;if(null==f[t]){var a=Object.assign({},f);a[t]={errors:[],options:z,value:!0===M.has(t)?M.get(t):n},h(a)}}}),[f,M,z,A]),Y=i.a.useCallback((function(e){var t=e.dataItem;J({id:t.id,whitelist:t.currentWhitelist})}),[J]),Q=i.a.useCallback((function(e,t){if(null!=f[e]){var n=Object.assign({},f);f[e].value=t,h(n)}}),[f]),X=i.a.useCallback((function(e){if(null!=f[e]){var t=Object.assign({},f);delete t[e],h(t)}}),[f]),$=i.a.useCallback((function(e){!1!==M.has(e)&&N(M.delete(e))}),[M]),Z=i.a.useCallback((function(e,t){var n=f[e];if(null!=n){var a=Object.assign({},f);if(n.value&&n.value.id===t)return delete a[e],h(a),void N(M.delete(e));var i=Xa([{label:"Whitelist",value:n.value}]);i.length>0?(a[e].errors=i,G({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}})):(delete a[e],N(M.set(e,n.value))),h(a)}}),[G,M,f]),ee=i.a.useCallback((function(){u(!0),Promise.all(M.reduce((function(e,n,i){return e.push(a(null==n?function(e,t){return function(){return jc.delete("/".concat(e,"/routes/").concat(t,"/whitelist")).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,i):function(e,t,n){return function(){return jc.post("/".concat(e,"/routes/").concat(t,"/whitelist"),JSON.stringify(n)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,i,n.id))),e}),[])).then((function(){G({severity:"success",message:"Route/s's Preregistration List Successfully Updated"}),N(new m.b)})).catch((function(e){G({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return B()})).catch((function(e){G({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return u(!1)}))}),[t,a,G,B,M]),te=sb({variant:"MultiSelect",props:{data:lb({fieldID:"id",fieldName:"name",namespace:U})}}),ne=sb({variant:"Input"}),ae=i.a.useMemo((function(){return[{field:"route",title:"Route",filterCell:ne},{field:"whitelist",title:"Sid Preregistration",width:"300px",view:"whitelistDOM",filterCell:te},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:ne},{field:"actions",width:"100px",locked:!0,sortable:!1,filterable:!1}]}),[te,ne]),ie=i.a.useMemo((function(){var e=F.getIn([t,"routes"]);return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=t.get("id"),a=L.getIn([n,"name"]);if(null==a)return e;var c=!1===M.has(n)?t.get("whitelist-sid"):null==M.get(n)?null:M.get(n).id,r=null==U.getIn([c,"name"])?"-":U.getIn([c,"name"]),s=f[n],l=null!=s,o=null==c?null:{id:c,name:r};return e.push({id:n,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})}),route:a,currentWhitelist:o,whitelist:c,whitelistDOM:!1===l?Object(Ka.jsx)("div",{className:"ResponsiveGridEditableCell",onClick:function(){return J({id:n,whitelist:o})},children:r}):Object(Ka.jsx)(fm,{variant:"Combobox",min:0,autofocus:!0,value:s.value,data:s.options,errors:s.errors,onChange:function(e){return Q(n,e)}}),actions:!1===l?Object(Ka.jsx)(i.a.Fragment,{children:!0===M.has(n)&&Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",title:"Revert Preregistration","aria-label":"Revert Preregistration",onClick:function(){return $(n)}})}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Save Preregistration","aria-label":"Save Preregistration",onClick:function(){Z(n,t.get("whitelist-sid"))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel Change","aria-label":"Cancel Change",onClick:function(){return X(n)}})]})}),e}),[])}),[L,F,t,U,J,f,Q,M,Z,X,$]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:R}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:0===U.size&&!1===s&&Object(Ka.jsx)(mh,{variant:"error",children:"Please create a SID Preregistration"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:!0===s?Object(Ka.jsx)(Wm,{className:"loader",height:"448px"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[M.size>0&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"save",primary:!0,onClick:ee,children:"Save Whitelists"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{noDataMessage:!1===q?"Please Create a price plan before assigning a SID Preregistration":null,resizable:!0,filterable:!0,groupable:!1,onRowClick:Y,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:O.skip,take:O.take,sort:O.sort,filter:O.filter,data:ie,columns:ae,onDataStateChange:K})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:V,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:W,children:"Clear Filters and Sorting"})]})]})})]})]})}var vO=i.a.memo(OO),xO={skip:0,take:20},CO={skip:0,take:20};function _O(e){var t=e.clientID,n=b(),a=Object(l.c)(),c=i.a.useState(!0),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState(new m.b),j=Object(o.a)(d,2),f=j[0],h=j[1],p=i.a.useState(new m.b),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(null),_=Object(o.a)(C,2),E=_[0],I=_[1],D=i.a.useMemo((function(){return Object(Rd.a)()}),[]),T=i.a.useMemo((function(){return Object(Rd.a)()}),[]),M=i.a.useMemo((function(){return n.has("API:VIRTUAL_NUMBER:WRITE")}),[n]),N=i.a.useState(xO),R=Object(o.a)(N,2),A=R[0],P=R[1],L=i.a.useState(CO),F=Object(o.a)(L,2),U=F[0],q=F[1],G=i.a.useMemo((function(){return null==E?null:E.id}),[E]),B=i.a.useState(!0),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useState(!0),J=Object(o.a)(K,2),Y=J[0],Q=J[1],X=i.a.useContext(Tm),$=X.setTitle,Z=X.setContentTitle,ee=X.setBreadcrumbs,te=Object(l.d)((function(e){return{client:e.client,supplier:e.supplier,clientConnection:e.clientConnection}})),ne=te.client,ae=te.supplier,ie=te.clientConnection,ce=i.a.useCallback((function(e){a(Ui(e))}),[a]),re=i.a.useCallback((function(e){P(e.dataState)}),[]),se=i.a.useCallback((function(e){q(e.dataState)}),[]),le=i.a.useCallback((function(){h(new m.b),v(new m.b)}),[]);i.a.useEffect((function(){le()}),[E,le]),i.a.useEffect((function(){var e=ne.getIn([t,"client_name"]);return null==e?($("2 Way Virtual Numbers"),Z("2 Way Virtual Numbers")):($("".concat(e,"'s 2 Way Virtual Numbers")),Z("".concat(e,"'s 2 Way Virtual Numbers"))),ee([{link:"/clients",name:"Clients"},{name:e},{name:"2 Way Virtual Numbers"}]),function(){$(null),ee([]),Z(null)}}),[ne,t,$,Z,ee]);var oe=i.a.useCallback((function(){a({type:H})}),[a]),ue=i.a.useCallback((function(){return oe(),a((e=Object.assign({in_use:!1},ni(A)),function(t){return wi.get("",{params:e}).then((function(e){return t(Ei.apply(void 0,Object(x.a)(e.data.virtual_numbers))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}));var e}),[a,A,oe]),de=i.a.useCallback((function(e){a({data:{id:e},type:Te})}),[a]),me=i.a.useCallback((function(){return null==G?Promise.resolve():(de(G),a(xs(t,G,ni(U))).then((function(e){return{connectionID:G,totalRecords:e.total_records}})))}),[a,t,G,U,de]),be=kb({intervalPolicy:"update",name:"2 Way Available Virtual Numbers",request:i.a.useCallback((function(){return ue()}),[ue]),getData:i.a.useCallback((function(e,t){var n=e.virtualNumbers;return new m.b({totalRecords:t.total_records,data:n.reduce((function(e,t){return e.set(t.get("id"),new m.b({id:t.get("id"),msisdn:t.get("msisdn"),supplierID:t.getIn(["supplier","id"]),supplierName:t.getIn(["supplier","name"])}))}),new m.b)})}),[])}),je=be.data,fe=be.update,he=kb({intervalPolicy:"update",name:"2 Way Included Virtual Numbers",request:i.a.useCallback((function(){return me()}),[me]),getData:i.a.useCallback((function(e,t){var n=e.virtualNumbers,a=e.clientConnection;if(null==t)return new m.b({totalRecords:0,data:new m.e});var i=a.getIn([t.connectionID,"virtual-numbers"]);return new m.b({totalRecords:t.totalRecords,data:(null==i?[]:i).reduce((function(e,t){return e.set(t,new m.b({id:t,msisdn:n.getIn([t,"msisdn"]),supplierID:n.getIn([t,"supplier","id"]),supplierName:n.getIn([t,"supplier","name"])}))}),new m.b)})}),[])}),pe=he.data,ge=he.update,Oe=i.a.useCallback((function(e){O.has(e)?v(O.delete(e)):h(f.set(e,je.getIn(["data",e])))}),[f,O,je]),ve=i.a.useCallback((function(e){f.has(e)?h(f.delete(e)):v(O.set(e,pe.getIn(["data",e])))}),[f,O,pe]),xe=i.a.useCallback((function(e,t){var n=t.dataItem,a=!0!==n.modified?{}:!0===n.added?{className:"".concat(e.props.className," ResponsiveGridRow--Info")}:!0===n.removed?{className:"".concat(e.props.className," ResponsiveGridRow--Error")}:{};return i.a.cloneElement(e,a,e.props.children)}),[]);i.a.useEffect((function(){return u(!0),Promise.all([a(vl()),a(Zs(t,{connection_type:"smpp"}))]).catch((function(e){ce({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){u(!1)})),function(){a(ml()),a(gs())}}),[t,a,ce]),i.a.useEffect((function(){W(!0),fe().catch((function(e){ce({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){W(!1)}))}),[fe,ce]),i.a.useEffect((function(){Q(!0),ge().catch((function(e){ce({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){Q(!1)}))}),[ge,ce]);var Ce=i.a.useMemo((function(){return Object(x.a)(ie.values()).reduce((function(e,t){return"smpp"!==t.get("connection_type")||e.push({id:t.get("connection_id"),name:t.get("connection_name")}),e}),[])}),[ie]),_e=sb({variant:"MultiSelect",props:{label:"Supplier",data:i.a.useMemo((function(){return ae.reduce((function(e,t){return e.push({id:t.get("supplier_id"),name:t.get("supplier_name")}),e}),[])}),[ae])}}),ye=sb({variant:"Input",props:{label:"MSISDN"}}),Se=i.a.useMemo((function(){var e=[{field:"supplier",title:"Supplier",view:"supplierDom",filterCell:_e},{field:"msisdn",title:"MSISDN",filterCell:ye}];return!0===M&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[M,_e,ye]),ke=i.a.useMemo((function(){return Object(x.a)(je.get("data").values()).reduce((function(e,t){var n=t.get("id");return e.push({id:n,msisdn:t.get("msisdn"),supplier:t.get("supplierId"),supplierDom:t.get("supplierName"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"add",onClick:function(){return Oe(n)},disabled:!0===f.has(n),title:"Include ".concat(t.get("msisdn")),"aria-label":"Include ".concat(t.get("supplierName"))})}),e}),[])}),[Oe,f,je]),we=i.a.useMemo((function(){return[{field:"supplier",title:"Supplier",view:"supplierDom",filterCell:_e},{field:"msisdn",title:"MSISDN",filterCell:ye},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[_e,ye]),Ee=i.a.useMemo((function(){return[].concat(Object(x.a)(f.values()),Object(x.a)(pe.get("data").values())).reduce((function(e,t){var n=t.get("id"),a=f.has(n)||O.has(n);return e.push({id:n,modified:a,added:f.has(n),removed:O.has(n),msisdn:t.get("msisdn"),supplier:t.get("supplierId"),supplierDom:t.get("supplierName"),actions:!0===O.has(n)?Object(Ka.jsx)(k.a,{icon:"add",look:"flat",onClick:function(){return Oe(n)},title:"Include ".concat(t.get("msisdn")),"aria-label":"Include ".concat(t.get("supplierName"))}):Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",onClick:function(){return ve(n)},title:"Remove ".concat(t.get("msisdn")),"aria-label":"Remove ".concat(t.get("supplierName"))})}),e}),[])}),[Oe,ve,f,O,pe]),Ie=i.a.useCallback((function(){var e,n,i,c=[];if(O.size>0){var r=Object(x.a)(O.values()).reduce((function(e,t){return e.push(t.get("id")),e}),[]);c.push(a((e=t,n=G,i=r,function(){return jc.delete("/".concat(e,"/connection/").concat(n,"/virtual-numbers/").concat(i)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})))}if(f.size>0){var s=Object(x.a)(f.values()).reduce((function(e,t){return e.push(t.get("id")),e}),[]);c.push(a(function(e,t,n){return function(){return jc.post("/".concat(e,"/connection/").concat(t,"/virtual-numbers"),{supplier_virtual_number_id:n}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,G,s)))}W(!0),Q(!0),Promise.all(c).then((function(){fe(),ge()})).catch((function(e){ce({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){le(),W(!1),Q(!1),ce({severity:"success",message:"SMPP Category ".concat(E.name," Virtual Numbers Successfully Updated")})}))}),[t,a,ce,f,O,E,G,le,ge,fe]);return Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[0===Ce.length&&!1===s&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(mh,{variant:"error",children:"Please create an SMPP Connection"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(w.a,{children:Object(Ka.jsx)(w.c,{children:!0===s?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Combobox",label:"Connection",data:Ce,value:E,onChange:I})})})})})}),null!=E&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===M&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:6,"aria-labelledby":T,children:[Object(Ka.jsx)("h3",{className:"SectionHeader",id:T,children:"Available MSISDNs"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:z,style:{height:"400px"},skip:A.skip,sort:A.sort,take:A.take,filter:A.filter,total:je.get("totalRecords"),columns:Se,data:ke,onDataStateChange:re})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:!0===M?6:12,"aria-labelledby":D,children:[Object(Ka.jsx)("h3",{className:"SectionHeader",id:D,children:"Included MSISDNs"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,rowRender:xe,isLoading:Y,style:{height:"400px"},skip:U.skip,sort:U.sort,take:U.take,filter:U.filter,total:pe.get("totalRecords"),columns:we,data:Ee,onDataStateChange:se})]})]})}),!0===M&&Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:le,children:"Clear"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Ie,children:"Save"})]})]})})]})})]})})}var yO=i.a.memo(_O);function SO(e){var t=e.dataItem;return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Connections:"})," ",t.connections]})})}var kO=i.a.memo(SO);function wO(e){var t=e.dataItem;return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Type:"})," ",t.changeType]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Submitted on:"})," ",t.createdOn]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Customer notified:"})," ",t.notificationSent]})]})}var EO=i.a.memo(wO),IO={MIN:{id:"MIN",name:"Minutes"},HOUR:{id:"HOUR",name:"Hours"},DAYS:{id:"DAYS",name:"Days"}},DO={skip:0,take:20},TO={skip:0,take:20,sort:[{dir:"desc",field:"scheduled_for"}]},MO={DONE:"Done",CANCELLED:"Cancelled",SCHEDULED:"Scheduled",IN_PROGRESS:"In Progress",PENDING_EMAIL:"Pending Email"};function NO(e){var t=e.clientID,n=i.a.useContext(Tm),a=n.setTitle,c=n.setContentTitle,r=n.setBreadcrumbs,s=b(),u=Object(d.h)(),j=Object(l.c)(),f=Vb(Fr),h=i.a.useState(0),p=Object(o.a)(h,2),g=p[0],v=p[1],y=O("customer-portal"),E=i.a.useState([]),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState([]),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState({}),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState([]),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(!1),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useState([]),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useState(!1),ae=Object(o.a)(ne,2),ie=ae[0],ce=ae[1],re=W.length>0,se=i.a.useState(!1),le=Object(o.a)(se,2),oe=le[0],ue=le[1],de=i.a.useState(!1),me=Object(o.a)(de,2),be=me[0],je=me[1],fe=i.a.useState(!1),he=Object(o.a)(fe,2),pe=he[0],ge=he[1],Oe=i.a.useState(DO),ve=Object(o.a)(Oe,2),xe=ve[0],Ce=ve[1],_e=i.a.useState(TO),ye=Object(o.a)(_e,2),Se=ye[0],ke=ye[1],we=i.a.useMemo((function(){return(!0===y?[]:1===g?["DONE","CANCELLED","PENDING_EMAIL"]:["SCHEDULED","IN_PROGRESS"]).reduce((function(e,t){return e[t]=MO[t],e}),{})}),[g,y]),Ee=i.a.useMemo((function(){return s.has("API:CLIENT_PRICE_MANAGEMENT:WRITE")&&!1===y}),[s,y]),Ie=Object(l.d)((function(e){return{route:e.route,client:e.client,template:e.template,currency:e.currency,clientPricePlan:e.clientPricePlan,clientConnection:e.clientConnection}})),De=Ie.route,Te=Ie.client,Me=Ie.template,Ne=Ie.currency,Re=Ie.clientPricePlan,Ae=Ie.clientConnection,Pe=i.a.useMemo((function(){return Ae.reduce((function(e,t){var n=t.get("route_id");if(null==n)return e;var a=!1===e.has(n)?new m.e:e.get(n);return e.set(n,a.add(t.get("connection_name")))}),new m.b)}),[Ae]),Le=i.a.useMemo((function(){var e=Object.keys(we),t=ni(Se);return null!=t.status&&(t.status=t.status.split(",").filter((function(t){return e.includes(t)})).join(",")),e.length>0&&(null==t.status||""===t.status)&&(t.status=e.join(",")),t}),[we,Se]);i.a.useEffect((function(){var e=Te.getIn([t,"client_name"]);return null==e?(a("Price Plans"),c("Price Plans")):(a("".concat(e,"'s Price Plans")),c("".concat(e,"'s Price Plans"))),r([{link:"/clients",name:"Clients"},{name:e},{name:"Pricing"}]),function(){a(null),r([])}}),[Te,t,a,c,r]);var Fe=i.a.useCallback((function(e){var t=!1===Pe.has(e)?[]:Pe.get(e).toJS();return 0===t.length?"N/A":t.length<10?t.join(", "):t.slice(0,10).join(", ")+" & ".concat(t.length-10," more")}),[Pe]),Ue=i.a.useCallback((function(e){j(Ui(e))}),[j]),qe=i.a.useCallback((function(){j(Lr())}),[j]),Ge=i.a.useCallback((function(){j(Bo()),j(hs())}),[j]),He=i.a.useCallback((function(){j(Cs())}),[j]),Be=i.a.useCallback((function(){return Ge(),Promise.all(!0===y?[j(el(t)),j((e=t,function(t){return gc.get("/price-plan",{params:n}).then((function(n){return t(ps.apply(void 0,Object(x.a)(n.data.route_prices))),t(Ms.apply(void 0,[e].concat(Object(x.a)(n.data.route_prices.map((function(e){return e.id})))))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))]:[f(),j(Vo()),j(zs(t))]);var e,n}),[j,f,Ge,t,y]),Ve=i.a.useCallback((function(){He();var e,n,a=[j(!0===y?(e=t,n=Le,function(t){return gc.get("route-price-schedulings",{params:n}).then((function(n){return t(_s.apply(void 0,Object(x.a)(n.data.route_price_schedule))),t(Ns.apply(void 0,[e].concat(Object(x.a)(n.data.route_price_schedule.map((function(e){return"".concat(e.id,"\u200b-").concat(e.route_id,"\u200b")})))))),n.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}):Js(t,Le))];return!1===y&&a.push(f()),Promise.all(a)}),[t,j,f,y,He,Le]),ze=kb({frequency:1e4,intervalPolicy:"update",name:"Scheduled Changes",request:i.a.useCallback((function(){return Ve()}),[Ve]),getData:i.a.useCallback((function(e,n){var a=e.client,i=e.clientRoutePriceSchedule,c=Object(o.a)(n,1)[0],r=a.getIn([t,"route_price_schedules"]);return new m.b({totalRecords:c.total_records,data:(null==r?[]:Object(x.a)(r.values())).reduce((function(e,t){var n=i.get(t);return null==n?e:e.add(new m.b({id:n.get("id"),status:n.get("status"),route_id:n.get("route_id"),created_on:n.get("created_on"),change_type:n.get("change_type"),no_of_changes:n.get("no_of_changes"),scheduled_for:n.get("scheduled_for"),route_price_id:n.get("route_price_id"),notification_sent:n.get("notification_sent")}))}),new m.e)})}),[t])}),We=ze.data,Ke=ze.update,Je=i.a.useCallback((function(){return Promise.all([Be(),Ke()])}),[Be,Ke]),Ye=i.a.useCallback((function(){return X(!0),Be().then((function(){X(!1)})).catch((function(e){Ue({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[Be,Ue]),Qe=i.a.useCallback((function(){return je(!0),Ke().then((function(){je(!1)})).catch((function(e){Ue({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[Ue,Ke]);i.a.useEffect((function(){return function(){return qe()}}),[qe]),i.a.useEffect((function(){return X(!0),Be().then((function(){X(!1)})).catch((function(e){Ue({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return Ge()}}),[Ue,Be,Ge]),i.a.useEffect((function(){return ue(!0),Ke().then((function(){ue(!1)})).catch((function(e){Ue({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return He()}}),[Ue,Ke,He]);var Xe=i.a.useCallback((function(){Ce(DO)}),[]),$e=i.a.useCallback((function(){ke(TO)}),[]),Ze=i.a.useCallback((function(e){Ce(e.dataState)}),[]),et=i.a.useCallback((function(e){ke(e.dataState)}),[]),tt=i.a.useCallback((function(){ce(!ie)}),[ie]);i.a.useEffect((function(){K(W.reduce((function(e,t){if(null!=H[t])return e;var n=Object(x.a)(e);return n.splice(n.indexOf(t),1),n}),W))}),[H,W]);var nt=i.a.useCallback((function(e){!0!==W.includes(e)&&K([].concat(Object(x.a)(W),[e]))}),[W]),at=i.a.useCallback((function(e){var t=Object(x.a)(ee),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),te(t)}),[ee]),it=i.a.useCallback((function(e){var t=Object(x.a)(F),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),U(t)}),[F]),ct=i.a.useCallback((function(e){return function(t){PO(t),AO(t);var n=Object.assign({},H);n[e]=t,B(n),nt(e)}}),[H,nt]),rt=i.a.useCallback((function(e){if(null==H[e.get("id")]){var t={notificationPeriodValue:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Value"},value:null,validation:{minValue:0,required:!1,isNumeric:!0},valid:!0,validationMessage:""},notificationPeriod:{flexSize:6,elementType:"combo",clearButton:!0,elementConfig:{disabled:!0,allowCustom:!1,placeholder:"Period"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},template:{elementType:"combo",clearButton:!0,elementConfig:{allowCustom:!1,placeholder:"Base Template"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},inherit:{elementType:"checkbox",elementConfig:{placeholder:"Inherit Template Pricing"},value:!1,validation:{required:!0},valid:!0,validationMessage:""}},n=Me.reduce((function(t,n){var a={id:n.get("id"),name:n.get("name")};return e.get("currency_id")!==n.get("currency_id")||(t.data.push(a),e.get("template_id")===a.id&&(t.value=a)),t}),{data:[],value:null}),a=n.data,i=n.value,c=Object.keys(IO).reduce((function(t,n){var a={id:n,name:IO[n].name};return t.data.push(a),e.get("notification_period")===a.id&&(t.value=a),t}),{data:[],value:null}),r=c.data,s=c.value;t.template.data=a,t.template.value=i,t.notificationPeriod.data=r,t.notificationPeriod.value=s,t.inherit.value=e.get("template_inherit_all"),t.notificationPeriodValue.value=e.get("value"),PO(t),AO(t);var l=Object.assign({},H);l[e.get("id")]=t,B(l)}}),[H,Me]),st=i.a.useCallback((function(e){if(null!=H[e]){var t=Object.assign({},H);delete t[e],B(t)}}),[H]),lt=i.a.useCallback((function(e){var n=Qa(H[e]),a=n.invalidMessages,i=n.controls,c=Object.assign({},H,Object(C.a)({},e,i));if(a.length>0)return Ue({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}),void B(c);var r={template_id:RO(i.template),template_inherit_all:RO(i.inherit),route_id:Re.getIn([e,"route_id"]),value:RO(i.notificationPeriodValue),currency_id:Re.getIn([e,"currency_id"]),notification_period:RO(i.notificationPeriod)};if(!1===Object.keys(r).some((function(t){return r[t]!==Re.getIn([e,t])})))return delete c[e],void B(c);X(!0),j(function(e,t,n){return function(){return jc.put("".concat(e,"/price-plan/").concat(t),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,e,r)).then((function(){return Ue({severity:"success",message:"Price Plan Successfully Scheduled Changes"}),Je()})).catch((function(e){Ue({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){X(!1),delete c[e],B(c)}))}),[t,j,Ue,Je,Re,H]),ot=i.a.useCallback((function(e){!1!==Ee&&rt(e.dataItem.originalRecord)}),[rt,Ee]),ut=i.a.useCallback((function(e){v(e.selected)}),[]),dt=Kb(),mt=rj(),bt=i.a.useCallback((function(e){T([e]),ge(!0)}),[]),jt=i.a.useCallback((function(){X(!0),j(ol(t,D[0])).then((function(){Ue({severity:"success",message:"Price Plan Successfully Deleted"})})).then((function(){return Je()})).catch((function(e){Ue({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){X(!1),T([]),ge(!1)}))}),[j,t,Ue,Je,D]),ft=i.a.useCallback((function(){T([]),ge(!1)}),[]),ht=sb({variant:"Input"}),pt=sb({variant:"Date"}),gt=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(we).map((function(e){return{id:e,name:MO[e]}}),[])}),[we])}}),Ot=sb({variant:"MultiSelect",props:{data:lb({fieldID:"name",fieldName:"name",namespace:De})}}),vt=sb({variant:"Combobox",props:{data:lb({fieldID:"id",fieldName:"name",namespace:De})}}),xt=sb({variant:"MultiSelect",props:{data:lb({fieldID:"currency",fieldName:"currency",namespace:Ne})}}),Ct=sb({variant:"MultiSelect",props:{data:lb({fieldID:"name",fieldName:"name",namespace:Me})}}),_t=sb({variant:"Combobox",props:{data:i.a.useMemo((function(){return[{id:"Yes",name:"Inherited"},{id:"No",name:"Not Inherited"}]}),[])}}),yt=i.a.useMemo((function(){return{field:"expand",width:"65px",sortable:!1,filterable:!1}}),[]),St=i.a.useMemo((function(){return{field:"routeDOM",title:"Route",view:"routeDOM",filterCell:Ot}}),[Ot]),kt=i.a.useMemo((function(){return{field:"currency",title:"Currency",filterCell:xt}}),[xt]),wt=i.a.useMemo((function(){return{field:"templateDOM",title:"Template",width:"200px",view:"templateDOM",filterCell:Ct}}),[Ct]),Et=i.a.useMemo((function(){return{field:"inherit",title:"Inherit",width:"250px",view:"inheritDOM",filterCell:_t}}),[_t]),It=i.a.useMemo((function(){return{field:"notificationPeriod",title:"Notification Period",width:"300px",view:"notificationPeriodDOM",filterCell:ht}}),[ht]),Dt=i.a.useMemo((function(){return{field:"id",title:"ID",view:"pricePlanDOM",width:"150px",filterCell:ht}}),[ht]),Tt=i.a.useMemo((function(){return{field:"actions",width:!0===y?"75px":"130px",locked:!0,sortable:!1,filterable:!1}}),[y]),Mt=i.a.useMemo((function(){return{field:"route",title:"Route",view:"routeDOM",sortable:!1,filterCell:vt}}),[vt]),Nt=i.a.useMemo((function(){return{field:"scheduled_for",title:"Scheduled",width:"250px",view:"scheduledForDOM",filterCell:pt}}),[pt]),Rt=i.a.useMemo((function(){return{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:gt}}),[gt]),At=i.a.useMemo((function(){return{field:"no_of_changes",title:"No. of Changes",sortable:!1,filterable:!1}}),[]),Pt=i.a.useMemo((function(){return{field:"id",title:"ID",view:"scheduleDOM",width:"150px",filterCell:ht}}),[ht]),Lt=i.a.useMemo((function(){return{field:"actions",width:"75px",locked:!0,sortable:!1,filterable:!1}}),[]),Ft=i.a.useMemo((function(){return!0===y?[yt,kt,Dt,Tt]:[St,kt,wt,Et,It,Dt,Tt]}),[Dt,St,y,yt,Et,Tt,kt,wt,It]),Ut=i.a.useMemo((function(){return!0===y?[yt,Nt,At,Pt,Lt]:[yt,Mt,Nt,Rt,At,Pt,Lt]}),[y,yt,Rt,Nt,At,Pt,Mt,Lt]),qt=i.a.useMemo((function(){var e=Te.getIn([t,"price_plans"]);return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,n){var a=Re.get(n);if(null==a)return e;var c=a.get("route_id"),r=H[n],s=null!=r,l=ct(n),o=!0===a.get("template_inherit_all")?"Yes":"No",d=null==a.get("notification_period")||null==a.get("value")?"-":"".concat(a.get("value")," ").concat(a.get("notification_period")),m=F.includes(n);return e.push({inherit:o,id:n,pricePlanDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})}),notificationPeriod:d,expanded:m,originalRecord:a,route:a.get("route_id"),template:a.get("template_id"),currency:a.get("currency_id"),connections:Fe(c),routeDOM:De.getIn([a.get("route_id"),"name"]),templateDOM:!1===s?null==Me.getIn([a.get("template_id"),"name"])?"-":Me.getIn([a.get("template_id"),"name"]):Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){dt(e,t,r,l)},formElement:{id:"template",config:r.template}},"template"),inheritDOM:!1===s?o:Object(Ka.jsx)(Bb,{checkedChangedHandler:function(e,t){mt(e,t,r,l)},formElement:{id:"inherit",config:r.inherit}},"inherit"),notificationPeriodDOM:!1===s?d:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){dt(e,t,r,l)},formElement:{id:"notificationPeriodValue",config:r.notificationPeriodValue}},"notificationPeriodValue"),Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){dt(e,t,r,l)},formElement:{id:"notificationPeriod",config:r.notificationPeriod}},"notificationPeriod")]}),actions:!1===s?Object(Ka.jsxs)(i.a.Fragment,{children:[!0===Ee&&Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit Price Plan","aria-label":"Edit Price Plan",onClick:function(){return rt(a)}})}),Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View & Edit Prices","aria-label":"View & Edit Prices",onClick:function(){u.push(!1===y?"/clients/".concat(t,"/pricing/").concat(n):"/clients/pricing/".concat(n))}}),!0===Ee&&Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable Price Plan","aria-label":"Disable Price Plan",onClick:function(){bt(n)}})})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Cancel Price Plan Modifications","aria-label":"Cancel Price Plan Modifications",onClick:function(){return st(n)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Submit Price Plan Changes","aria-label":"Submit Price Plan Changes",onClick:function(){return lt(n)}})]}),expand:Object(Ka.jsx)(k.a,{look:"flat",title:"More Info","aria-label":"More Info",icon:!0===m?"minus":"add",onClick:function(){return it(n)}})}),e}),[])}),[De,Te,u,t,Me,lt,rt,Re,y,bt,F,H,Fe,mt,st,dt,Ee,ct,it]),Gt=i.a.useMemo((function(){return We.get("data").reduce((function(e,n){var a=n.get("id"),c=n.get("route_id"),r=n.get("no_of_changes"),s=ee.includes(a);return"DONE"!==n.get("status")&&"CANCELLED"!==n.get("status")&&A(!0),e.push({id:a,scheduleDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:a})}),route:c,expanded:s,no_of_changes:r,connections:Fe(c),scheduled_for:n.get("scheduled_for"),createdOn:Object(Ka.jsx)(Nd,{utc:n.get("created_on")}),routeDOM:De.getIn([n.get("route_id"),"name"]),scheduledForDOM:Object(Ka.jsx)(Nd,{utc:n.get("scheduled_for")}),status:null==MO[n.get("status")]?"-":MO[n.get("status")],statusDOM:Object(Ka.jsxs)(Ka.Fragment,{children:["DONE"===n.get("status")?Object(Ka.jsx)("i",{className:"fas fa-check"}):"SCHEDULED"===n.get("status")?Object(Ka.jsx)("i",{className:"fas fa-calendar-alt"}):"Cancelled"===n.get("status")?Object(Ka.jsx)("i",{className:"fas fa-ban"}):Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",MO[n.get("status")]]}),notificationSent:!0===n.get("notification_sent")?"Yes":"No",changeType:"TEMPLATE_AND_INHERITANCE"===n.get("change_type")?"Template Change":"INDIVIDUAL_PRICES"===n.get("change_type")?"Client Specific Change":"N/A",expand:Object(Ka.jsx)(k.a,{look:"flat",title:"More Info","aria-label":"More Info",icon:!0===s?"minus":"add",onClick:function(){return at(a)}}),actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",title:"View Price Changes","aria-label":"View Price Changes",disabled:0===r,onClick:function(){u.push(!1===y?"/clients/".concat(t,"/pricing/").concat(n.get("route_price_id"),"/changes/").concat(a):"/clients/pricing/".concat(n.get("route_price_id"),"/changes/").concat(a))}})})}),e}),[])}),[De,u,t,Fe,ee,y,We,at]),Ht=i.a.useMemo((function(){return D.map((function(e){return Object(Ka.jsxs)("li",{children:["ID: ",e]},e)}))}),[D]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:re}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(Wb,{title:"Scheduled Changes",expanded:ie,className:R?"Card--Highlight":"",onToggleExpanded:tt,children:[Object(Ka.jsxs)(w.c,{item:!0,xs:12,children:[!1===y&&Object(Ka.jsxs)(w.i,{animation:!1,selected:g,onSelect:ut,className:"TabStrip--NoButtomGutter",children:[Object(Ka.jsx)(w.j,{title:"Scheduled"}),Object(Ka.jsx)(w.j,{title:"History"})]}),Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:oe,style:{height:"450px",marginTop:"10px"},skip:Se.skip,take:Se.take,sort:Se.sort,filter:Se.filter,data:Gt,columns:Ut,total:We.get("totalRecords"),onDataStateChange:et,detail:!1===y?EO:kO})]}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Qe,disabled:!0===be,children:!0===be?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:$e,children:"Clear Filters and Sorting"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Price Plans"})}),Object(Ka.jsx)(w.c,{children:!0===Q?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:!0===Ee&&Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){return u.push("/clients/".concat(t,"/pricing/new"))},children:"Add Price Plan"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,onRowClick:ot,frontendFiltering:!0,frontendPagination:!0,style:{height:"450px"},skip:xe.skip,take:xe.take,sort:xe.sort,filter:xe.filter,data:qt,columns:Ft,onDataStateChange:Ze,detail:!0===y&&kO})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Ye,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Xe,children:"Clear Filters and Sorting"})]})]})})]}),!0===pe&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ft,children:["Are you sure you want to delete the following Price Plan?",Object(Ka.jsx)("ul",{children:Ht}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:jt,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ft,children:"Cancel"})]})]})]})}function RO(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}function AO(e){null==e.notificationPeriodValue.value?ci(e.notificationPeriod):ri(e.notificationPeriod)}function PO(e){null==e.template.value?ci(e.inherit,{defaultValue:!1}):ri(e.inherit)}var LO=i.a.memo(NO),FO={TEMPLATE:{id:"TEMPLATE",name:"Template"},FIXED:{id:"FIXED",name:"Fixed"},COST_MARGIN:{id:"COST_MARGIN",name:"Margin $"},PERCENTAGE_MARGIN:{id:"PERCENTAGE_MARGIN",name:"Margin %"},BLOCKED:{id:"BLOCKED",name:"Blocked"},DELETED:{id:"DELETED",name:"To Be Deleted"}};function UO(e){var t=uj(e),n=i.a.useCallback((function(e,n){var a=FO.TEMPLATE.id,i=FO.PERCENTAGE_MARGIN.id;return!0===(e===i)||!0===(e===a&&n===i)?{style:"percent"}:t}),[t]);return i.a.useCallback((function(e,a){var i=n(a.type),c=n(e.type,e.templateType);return["type","value","notes","minPrice","decimalPoints"].reduce((function(n,r){var s=e[r],l=a[r],o=null,u=null;switch(r){case"type":o=HO(s,e.templateType),u=HO(l);break;case"minPrice":o=qO(Object(aj.f)(s,t)),u=qO(Object(aj.f)(l,t));break;case"value":o=qO(Object(aj.f)("percent"!==c.style?s:s/100,c)),u=qO(Object(aj.f)("percent"!==i.style?l:l/100,i));break;default:o=qO(s),u=qO(l)}return n[r]={current:o,scheduled:u,hasChanged:s!==l},n}),{})}),[t,n])}function qO(e){return null==e||0===String(e).length?"-":e}function GO(e){var t=FO[e];return null==t?null:t.name}function HO(e,t){return null==t||e!==FO.TEMPLATE.id?qO(GO(e)):[qO(GO(e)),qO(GO(t))].join(" - ")}function BO(e){var t=e.dataItem,n=UO(t.currency)({type:t.oldType,value:t.oldValue,notes:t.oldNotes,minPrice:t.oldMinPrice,templateType:t.oldTemplateType,decimalPoints:t.oldDecimalPoints},{type:t.type,value:t.value,notes:t.notes,minPrice:t.minPrice,decimalPoints:t.decimalPoints}),a=n.type,i=n.value,c=n.notes,r=n.minPrice,s=n.decimalPoints,l=!1===a.hasChanged?null:"DifferenceColorHighlight",o=!1===i.hasChanged?null:"DifferenceColorHighlight",u=!1===c.hasChanged?null:"DifferenceColorHighlight",d=!1===r.hasChanged?null:"DifferenceColorHighlight",m=!1===s.hasChanged?null:"DifferenceColorHighlight";return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsx)("strong",{children:"Type: "}),Object(Ka.jsxs)("span",{className:l,children:[a.scheduled," "]}),!0===a.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",a.current,")"]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsx)("strong",{children:"Value: "}),Object(Ka.jsxs)("span",{className:o,children:[i.scheduled," "]}),!0===i.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",i.current,")"]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsx)("strong",{children:"Min. Price: "}),Object(Ka.jsxs)("span",{className:d,children:[r.scheduled," "]}),!0===r.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",r.current,")"]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:6,children:[Object(Ka.jsx)("strong",{children:"Decimal Points: "}),Object(Ka.jsxs)("span",{className:m,children:[s.scheduled," "]}),!0===s.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current: ",s.current,")"]})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Notes: "}),Object(Ka.jsxs)("span",{className:u,children:[c.scheduled," "]}),!0===c.hasChanged&&Object(Ka.jsxs)("i",{children:[Object(Ka.jsx)("br",{}),"(Current: ",c.current,")"]})]})]})}var VO=i.a.memo(BO);function zO(e){var t=e.clientID,n=Object(d.j)().pricePlanID,a=i.a.useContext(Tm),c=a.setTitle,r=a.setContentTitle,s=a.setBreadcrumbs,u=b(),j=Object(d.h)(),f=Object(l.c)(),h=O("customer-portal"),p=i.a.useState(),g=Object(o.a)(p,2),v=g[0],y=g[1],E=i.a.useState(!0),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState([]),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState({}),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState([]),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState([]),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState([]),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useState(!1),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useMemo((function(){return u.has("API:CLIENT_PRICE_MANAGEMENT:WRITE")&&!1===h}),[u,h]),ae=i.a.useState(new m.b),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1],se=ee||Q.length>0||ce.size>0,le=i.a.useCallback((function(){X([]),re(new m.b),te(!1)}),[]),oe=oj(v),ue=i.a.useState({skip:0,take:20,sort:[{dir:"desc",field:"value"}]}),de=Object(o.a)(ue,2),me=de[0],be=de[1],je=i.a.useState({skip:0,take:20}),fe=Object(o.a)(je,2),he=fe[0],pe=fe[1],ge=Object(l.d)((function(e){return{route:e.route,client:e.client,network:e.network,country:e.country,trafficStatuses:e.trafficStatuses,clientPricePlan:e.clientPricePlan}})),Oe=ge.route,ve=ge.client,xe=ge.network,Ce=ge.country,_e=ge.trafficStatuses,ye=ge.clientPricePlan,Se=i.a.useCallback((function(e){f(Ui(e))}),[f]);i.a.useEffect((function(){var e=Oe.getIn([ye.getIn([n,"route_id"]),"name"]),a=ve.getIn([t,"client_name"]);return null==e||null==a?(c("Prices"),r("Prices")):(c("".concat(a,"'s ").concat(e," Prices")),r("".concat(a,"'s ").concat(e," Prices"))),s([{link:"/clients",name:"Clients"},{name:a},{name:"Pricing",link:"/clients/".concat(t,"/pricing/")},{name:e},{name:"Prices"}]),function(){c(null),s([])}}),[Oe,ve,t,c,n,r,s,ye]),i.a.useEffect((function(){return T(!0),f(!1===h?Ws(t,n):Ks(t,n)).then((function(e){if(!1===h)return f(Ur(e.route_id))})).then((function(){T(!1)})).catch((function(e){Se({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){f(Lr()),f(hs())}}),[f,t,n,Se,h]),i.a.useEffect((function(){T(!0);var e=[f(!1===h?Xs(t,n):$s(n))];!1===h&&e.push(f(go())),Promise.all(e).then((function(){T(!1)})).catch((function(e){Se({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[f,t,n,Se,h]),i.a.useEffect((function(){var e={scheduleFor:{minDate:new Date,flexSize:6,elementType:"dateTimePicker",elementConfig:{placeholder:"Schedule For"},value:null,validation:{required:!0},valid:!0,validationMessage:""}};y(e)}),[Ce]);var ke=i.a.useCallback((function(e){be(e.dataState)}),[]),we=i.a.useCallback((function(e){pe(e.dataState)}),[]),Ee=i.a.useCallback((function(e){e.scheduleFor.value<e.scheduleFor.minDate||(y(e),te(!0))}),[]);i.a.useEffect((function(){var e=new m.e(W.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(_e.values()).reduce((function(e,t){return!1===t.get("charge_on_status")||e.push(new m.b({id:t.get("code"),name:t.get("description")})),e}),[]));e.equals(t)||K(t.toJS())}),[_e,W]),i.a.useEffect((function(){B(Object(x.a)(_e.values()).reduce((function(e,t){return!1===t.get("charge_on_status_default")||e.push({id:t.get("code"),name:t.get("description")}),e}),[]))}),[_e]),i.a.useEffect((function(){X(Q.reduce((function(e,t){if(null!=F[t])return e;var n=Object(x.a)(e);return n.splice(n.indexOf(t),1),n}),Q))}),[F,Q]);var Ie=i.a.useCallback((function(e){!0!==Q.includes(e)&&X([].concat(Object(x.a)(Q),[e]))}),[Q]),De=uj(ye.getIn([n,"currency_id"])),Te=i.a.useCallback((function(e){var t=null==e.type.value?null:e.type.value.id;switch(e.charge_on_status_enabled.elementConfig.disabled=0===W.length&&0===H.length,e.charge_on_status.selected=!1===(!1===e.charge_on_status_enabled.value||!0===e.charge_on_status_enabled.elementConfig.disabled),e.charge_on_status.validation.required=!0===e.charge_on_status.selected,t){case FO.FIXED.id:ri(e.value),ci(e.minPrice),ci(e.decimalPoints),e.minPrice.elementConfig.format=null,e.value.elementConfig.format=De;break;case FO.COST_MARGIN.id:ri(e.value),ri(e.minPrice),ri(e.decimalPoints),e.value.elementConfig.format=De,e.minPrice.elementConfig.format=De;break;case FO.PERCENTAGE_MARGIN.id:ri(e.value),ri(e.minPrice),ri(e.decimalPoints),e.minPrice.elementConfig.format=De,e.value.elementConfig.format={style:"percent"};break;default:ci(e.value),ci(e.minPrice),ci(e.decimalPoints),e.charge_on_status.selected=!1,ci(e.charge_on_status_enabled,{defaultValue:!1}),e.value.elementConfig.format=null,e.minPrice.elementConfig.format=null}}),[De,W,H]),Me=i.a.useCallback((function(e){return function(t){var n=Object.assign({},F);Te(t),n[e]=t,U(n),Ie(e)}}),[F,Ie,Te]),Ne=i.a.useCallback((function(e){re(ce.set(e.get("network_id"),{networkID:e.get("network_id"),type:"DELETED",value:null,notes:null,min_price:null,dp_rounding:null,charge_on_status:[],charge_on_status_enabled:null}))}),[ce]),Re=i.a.useCallback((function(e){if(!1!==ne&&null==F[e.get("network_id")]){var t=ce.get(e.get("network_id")),a={value:{elementType:"numeric",elementConfig:{min:0,step:.01,placeholder:"Value"},value:null,validation:{minValue:0,required:!1,isNumeric:!0},valid:!0,validationMessage:""},charge_on_status:{elementType:"multi",clearButton:!0,elementConfig:{allowCustom:!1,placeholder:"Charge on Status"},valid:!0,value:[],data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},charge_on_status_enabled:{elementType:"checkbox",elementConfig:{placeholder:""},value:!1,validation:{required:!1},valid:!0,validationMessage:""},type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Type"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},minPrice:{elementType:"numeric",elementConfig:{min:0,step:.01,placeholder:"Min. Price"},value:null,validation:{minValue:0,required:!1,isNumeric:!0},valid:!0,validationMessage:""},decimalPoints:{elementType:"numeric",elementConfig:{min:0,placeholder:"Decimal Points"},value:null,validation:{minValue:0,required:!1,isNumeric:!0},valid:!0,validationMessage:""},notes:{elementType:"textarea",elementConfig:{placeholder:"Notes"},value:"",validation:{required:!1,maxLength:1e3},valid:!0,validationMessage:""}},i=[t&&t.type,e.get("type")].find((function(e){return null!=e}));if(a.value.value=JO(null!=t?t.value:e.get("value"),i),a.charge_on_status_enabled.value=null!=e.get("charge_on_status_enabled")&&e.get("charge_on_status_enabled"),a.charge_on_status.value=null==e.get("charge_on_status")?Object(x.a)(H):Object(x.a)(new window.Set([].concat(Object(x.a)(H.map((function(e){return e.id}))),Object(x.a)(e.get("charge_on_status"))))).map((function(e){return{id:_e.getIn([e,"code"]),name:_e.getIn([e,"description"])}})),a.charge_on_status.data=W,a.notes.value=null!=t?t.notes:null==e.get("notes")?"":e.get("notes"),a.minPrice.value=null!=t?t.min_price:e.get("min_price"),a.decimalPoints.value=null!=t?t.dp_rounding:e.get("dp_rounding"),null!=i){var c=FO[i];null!=c&&(a.type.value={id:c.id,name:c.name})}a.type.data=Object.keys(FO).reduce((function(e,t){return t===FO.DELETED.id||!1===(null!=ye.getIn([n,"template_id"]))&&t===FO.TEMPLATE.id||e.push({id:FO[t].id,name:FO[t].name}),e}),[]),Te(a);var r=Object.assign({},F);r[e.get("network_id")]=a,U(r)}}),[n,_e,ye,H,W,Te,ce,ne,F]),Ae=i.a.useCallback((function(e){if(null!=F[e]){var t=Object.assign({},F);delete t[e],U(t)}}),[F]),Pe=i.a.useCallback((function(){re(new m.b)}),[]),Le=i.a.useCallback((function(e){re(ce.delete(e))}),[ce]),Fe=i.a.useCallback((function(e){var t=Qa(F[e]),a=t.invalidMessages,i=t.controls,c=Object.assign({},F,Object(C.a)({},e,i));if(a.length>0)return Se({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}),void U(c);var r=KO(i.type),s=KO(i.value),l={type:r,notes:KO(i.notes),min_price:KO(i.minPrice),dp_rounding:KO(i.decimalPoints),value:"PERCENTAGE_MARGIN"===r?100*s:s,charge_on_status:KO(i.charge_on_status),charge_on_status_enabled:KO(i.charge_on_status_enabled)},o=Object.keys(l).some((function(t){return l[t]!==ye.getIn([n,"prices",e,t])}));re(!1===o?ce.delete(e):ce.set(e,l)),delete c[e],U(c)}),[ce,ye,n,Se,F]),Ue=i.a.useCallback((function(e){Re(e.dataItem.originalRecord)}),[Re]),qe=i.a.useCallback((function(e){var t=Object(x.a)(R),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),A(t)}),[R]),Ge=Kb(),He=rj(),Be=i.a.useCallback((function(){if(0!==ce.size){var e=oe(),a=e.invalidMessages,i=e.controls;y(i),a.length>0?Se({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}):(T(!0),f(function(e,t,n){return function(){return jc.post("".concat(e,"/price-plan/").concat(t,"/schedule-route-network-pricings"),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n,{schedule_for:i.scheduleFor.value.getTime(),prices:ce.reduce((function(e,t,n){return e.push({type:t.type,value:t.value,notes:t.notes,network_id:n,min_price:t.min_price,dp_rounding:t.dp_rounding,charge_on_status:!0===t.charge_on_status_enabled?t.charge_on_status.map((function(e){return e.id})):null,country_id:xe.getIn([n,"country_id"]),charge_on_status_enabled:t.charge_on_status_enabled}),e}),[])})).then((function(){Se({severity:"success",message:"Prices Successfully Edited"}),le(),j.push("/clients/".concat(t,"/pricing/"))})).catch((function(e){Se({severity:"error",message:e.message,action:{label:"Dismiss"}}),T(!1)})))}else Se({message:"No prices where changed",severity:"error",action:{label:"Dismiss"}})}),[j,xe,t,f,Se,le,n,ce,oe]),Ve=hj({dataState:me,countryFieldID:"country_name",networkFieldID:"network_name"}),ze=Ve.availableNetworks,We=Ve.availableCountries,Ke=hj({dataState:he,countryFieldID:"country_name",networkFieldID:"network_name"}),Je=Ke.availableNetworks,Ye=Ke.availableCountries,Qe=sb({variant:"MultiSelect",props:{data:We}}),Xe=sb({variant:"MultiSelect",props:{data:ze}}),$e=sb({variant:"MultiSelect",props:{data:Ye}}),Ze=sb({variant:"MultiSelect",props:{data:Je}}),et=sb({variant:"Input"}),tt=sb({variant:"Numeric"}),nt=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(FO).map((function(e){return{id:e,name:FO[e].name}}),[])}),[])}}),at=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return _e.reduce((function(e,t){return e.push({id:t.get("code"),name:t.get("description")}),e}),[])}),[_e])}}),it=i.a.useMemo((function(){return{field:"country",title:"Country",filterCell:Qe}}),[Qe]),ct=i.a.useMemo((function(){return{field:"mcc",title:"MCC",width:"100px",filterCell:et}}),[et]),rt=i.a.useMemo((function(){return{field:"network",title:"Network",filterCell:Xe}}),[Xe]),st=i.a.useMemo((function(){return{field:"mnc",title:"MNC",width:"100px",filterCell:et}}),[et]),lt=i.a.useMemo((function(){return{field:"cost",title:"Current Price",view:"costDOM",filterCell:tt}}),[tt]),ot=i.a.useMemo((function(){return{field:"profit",title:"Profit",view:"profitDOM",filterCell:tt}}),[tt]),ut=i.a.useMemo((function(){return{field:"type",title:"Type",width:"200px",view:"typeDOM",filterCell:nt}}),[nt]),dt=i.a.useMemo((function(){return{field:"charge_on_status",title:"Charge on Delivery",view:"charge_on_status_DOM",width:"250px",sortable:!1,filterCell:at}}),[at]),mt=i.a.useMemo((function(){return{field:"value",title:h?"Price":"Value",width:"200px",view:"valueDOM",filterCell:et}}),[et,h]),bt=i.a.useMemo((function(){return{field:"minPrice",title:"Min. Price",width:"200px",view:"minPriceDOM",filterCell:tt}}),[tt]),jt=i.a.useMemo((function(){return{field:"decimalPoints",title:"Decimal Points",width:"200px",view:"decimalPointsDOM",filterCell:tt}}),[tt]),ft=i.a.useMemo((function(){return{field:"notes",title:"Notes",width:"300px",view:"notesDOM",filterCell:et}}),[et]),ht=i.a.useMemo((function(){return{field:"id",title:"ID",view:"priceIdDOM",width:"150px",filterCell:et}}),[et]),pt=i.a.useMemo((function(){var e=!0===h?[it,ct,rt,st,mt,ht]:[it,ct,rt,st,lt,ot,ut,dt,mt,bt,jt,ft,ht];return!0===ne&&e.push({field:"actions",width:"100px",locked:!0,sortable:!1,filterable:!1}),e}),[ht,ct,st,lt,ut,mt,ft,h,ot,it,rt,bt,ne,dt,jt]),gt=i.a.useMemo((function(){return Object(x.a)(xe.values()).reduce((function(e,t){var a=t.get("network_id"),c=new m.b(Object.assign({network_id:a},new m.b(ye.getIn([n,"prices",a])).toJS())),r=F[a],s=null!=r,l=Me(a),o=t.get("network_name"),u=Ce.getIn([t.get("country_id"),"country_name"]),d=ce.get(a),b=[d&&d.type,c.get("type")].find((function(e){return null!=e})),j=null==d?c.get("notes"):d.notes,f=null==d?c.get("charge_on_status_enabled"):d.charge_on_status_enabled,p=null==d?c.get("charge_on_status"):!1===f?[]:d.charge_on_status.map((function(e){return e.id})),g=null==d?c.get("min_price"):d.min_price,O=null==d?c.get("dp_rounding"):d.dp_rounding,v=null==c.get("template_type")||null!=d?null:"(".concat(FO[c.get("template_type")].name,")"),x=b===FO.PERCENTAGE_MARGIN.id||b===FO.TEMPLATE.id&&c.get("template_type")===FO.PERCENTAGE_MARGIN.id?{style:"percent"}:De,C=JO(null==d?h?c.get("price"):c.get("value"):d.value,b,c.get("template_type")),y=Object(aj.f)(C,x),w=ii({min_price:g,cost:c.get("cost"),value:C,dp_rounding:null==O?De.minimumFractionDigits:O,type:b!==FO.TEMPLATE.id?b:c.get("template_type")},FO),E=t.getIn(["mccmnc",0,"mcc"]),I=t.get("mccmnc").map((function(e){return e.get("mnc")})).join(", ");return e.push({id:a,priceIdDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:a})}),networkID:a,country:u,network:o,originalRecord:c,type:WO(b),value:WO(y),notes:WO(j),mcc:E,mnc:I,minPrice:WO(g),countryID:t.get("country_id"),decimalPoints:WO(O),profitDOM:WO(w,"N/A"),profit:null==w?-1/0:w,costDOM:WO(c.get("cost"),"N/A"),cost:null==c.get("cost")?-1/0:c.get("cost"),charge_on_status:p,charge_on_status_DOM:!1===s?null==p||0===p.length?"-":Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:1,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{disabled:!0,variant:"Checkbox",value:f})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:p.map((function(e,t){var n=_e.getIn([e,"description"]);return Object(Ka.jsx)(wd,{children:n},t)}))})]})}):Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:1,children:[Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(Bb,{checkedChangedHandler:function(e,t){He(e,t,r,l)},formElement:{id:"charge_on_status_enabled",config:r.charge_on_status_enabled}},"charge_on_status_enabled")}),Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){Ge(e,t,r,l)},formElement:{id:"charge_on_status",config:r.charge_on_status}},"charge_on_status")}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:null==p||0===p.length?"-":p.map((function(e,t){var n=_e.getIn([e,"description"]);return Object(Ka.jsx)(wd,{children:n},t)}))})]})}),typeDOM:!1===s?[null==b||""===b.length?"-":FO[b].name,null==v?"":v].join(" "):Object(Ka.jsx)(Bb,{dropDownChangedHandler:function(e,t){Ge(e,t,r,l)},formElement:{id:"type",config:r.type}},"type"),notesDOM:!1===s?Object(Ka.jsx)(pm,{length:40,content:WO(j)}):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Ge(e,t,r,l)},formElement:{id:"notes",config:r.notes}},"notes"),valueDOM:!1===s?WO(y):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Ge(e,t,r,l)},formElement:{id:"value",config:r.value}},"value"),minPriceDOM:!1===s?WO(Object(aj.f)(g,De)):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Ge(e,t,r,l)},formElement:{id:"minPrice",config:r.minPrice}},"minPrice"),decimalPointsDOM:!1===s?WO(O):Object(Ka.jsx)(Bb,{inputChangedHandler:function(e,t){Ge(e,t,r,l)},formElement:{id:"decimalPoints",config:r.decimalPoints}},"decimalPoints"),actions:!1===s?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Change ".concat(o," Price"),"aria-label":"Change ".concat(o," Price"),onClick:function(){return Re(c)}}),!1===ce.has(a)&&null!=c.get("type")&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Delete ".concat(o," Price"),"aria-label":"Delete ".concat(o," Price"),onClick:function(){return Ne(c)}}),ce.has(a)&&Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",title:"Revert ".concat(o," Price Changes"),"aria-label":"Revert ".concat(o," Price Changes"),onClick:function(){return Le(a)}})]}):Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"save",title:"Submit ".concat(o," Price Changes"),"aria-label":"Submit ".concat(o," Price Changes"),onClick:function(){return Fe(a)}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"close",title:"Cancel ".concat(o," Price Modifications"),"aria-label":"Cancel ".concat(o," Price Modifications"),onClick:function(){return Ae(a)}})]})}),e}),[])}),[xe,Ce,n,De,ye,_e,h,Fe,Re,ce,Ne,F,He,Ge,Le,Ae,Me]),Ot=i.a.useMemo((function(){return[{field:"expand",width:"65px",sortable:!1,filterable:!1},{field:"country",title:"Country",filterCell:$e},{field:"network",title:"Network",filterCell:Ze},{field:"charge_on_status",title:"Charge on Delivery",view:"charge_on_status_DOM",width:"250px",sortable:!1,filterCell:at},{field:"changes",title:"Changes",filterCell:tt},{field:"id",title:"ID",view:"priceIdDOM",width:"150px",filterCell:et},{field:"actions",width:"100px",locked:!0,sortable:!1,filterable:!1}]}),[tt,et,Ze,$e,at]),vt=i.a.useMemo((function(){return ce.reduce((function(e,t,a){var i=new m.b(Object.assign({network_id:a},new m.b(ye.getIn([n,"prices",a])).toJS())),c=i.get("charge_on_status"),r=xe.getIn([a,"network_name"]);if(null==r)return e;var s=Ce.getIn([xe.getIn([a,"country_id"]),"country_name"]);if(null==s)return e;var l=R.includes(a),o=[{old:i.get("type"),new:t.type},{old:i.get("value"),new:t.value},{old:i.get("notes"),new:t.notes},{old:i.get("min_price"),new:t.min_price},{old:i.get("dp_rounding"),new:t.dp_rounding},{old:i.get("charge_on_status_enabled"),new:t.charge_on_status_enabled},{old:i.get("charge_on_status"),new:t.charge_on_status}].reduce((function(e,t){return t.old!==t.new?e+1:e}),0);return e.push({changes:o,id:a,price_id:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:a})}),networkID:a,expanded:l,country:s,network:r,countryID:xe.getIn([a,"country_id"]),charge_on_status:c,charge_on_status_DOM:t.charge_on_status_enabled?t.charge_on_status.map((function(e,t){return Object(Ka.jsx)(wd,{children:e.name},t)})):"-",expand:Object(Ka.jsx)(k.a,{look:"flat",icon:!0===l?"minus":"add",title:"View ".concat(r," Price Changes"),"aria-label":"View ".concat(r," Price Changes"),onClick:function(){return qe(a)}}),type:t.type,value:t.value,notes:t.notes,minPrice:t.min_price,decimalPoints:t.dp_rounding,oldType:i.get("type"),oldValue:i.get("value"),oldNotes:i.get("notes"),oldMinPrice:i.get("min_price"),oldDecimalPoints:i.get("dp_rounding"),oldTemplateType:i.get("template_type"),currency:ye.getIn([n,"currency_id"]),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"undo",title:"Revert ".concat(r," Price Changes"),"aria-label":"Revert ".concat(r," Price Changes"),onClick:function(){return Le(a)}})}),e}),[])}),[Ce,xe,n,ye,R,ce,Le,qe]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:se}),Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",spacing:0,children:[ce.size>0&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Highlight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Uncommitted Changes"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:v,onControlsChange:Ee}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"492px"},skip:he.skip,take:he.take,sort:he.sort,filter:he.filter,data:vt,columns:Ot,onDataStateChange:we,detail:VO})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Pe,disabled:0===ce.size,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Be,disabled:D,children:"Save"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"".concat(!1===h?"Edit":""," Pricing")})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:D,frontendFiltering:!0,frontendPagination:!0,style:{height:"492px"},skip:me.skip,take:me.take,sort:me.sort,onRowClick:Ue,filter:me.filter,data:gt,columns:pt,onDataStateChange:ke})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return j.push(!1===h?"/clients/".concat(t,"/pricing/"):"/clients/pricing/")},children:"Go Back"})})]})})]})})})]})}function WO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return null==e||0===String(e).length?t:e}function KO(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}function JO(e,t,n){return null==e?null:e/(t===FO.PERCENTAGE_MARGIN.id||t===FO.TEMPLATE.id&&n===FO.PERCENTAGE_MARGIN.id?100:1)}var YO=i.a.memo(zO);function QO(e){var t=e.clientID,n=i.a.useContext(Tm),a=n.setTitle,c=n.setContentTitle,r=n.setBreadcrumbs,s=Object(d.h)(),u=Object(l.c)(),m=i.a.useState(),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useState(!0),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(!1),C=Object(o.a)(v,2),_=C[0],y=C[1],E=oj(j),I=Object(l.d)((function(e){return{client:e.client,route:e.route,template:e.template,currency:e.currency,clientPricePlan:e.clientPricePlan}})),D=I.client,T=I.route,M=I.template,N=I.currency,R=I.clientPricePlan,A=i.a.useMemo((function(){return T.filter((function(e){for(var t=Object(x.a)(R.values()),n=0;n<t.length;n++){var a=t[n];if(e.get("id")===a.get("route_id"))return!1}return!0}))}),[T,R]);i.a.useEffect((function(){return a("Price Plan Creation"),c("Price Plan Creation"),r([{link:"/clients",name:"Clients"},{name:D.getIn([t,"client_name"])},{link:"/clients/".concat(t,"/pricing/"),name:"Pricing"},{name:"Creation"}]),function(){return r([])}}),[D,t,c,a,r]);var P=i.a.useCallback((function(e){u(Ui(e))}),[u]);i.a.useEffect((function(){return O(!0),Promise.all([u(Fr()),u(zs(t)),u(Vo())]).then((function(){O(!1)})).catch((function(e){P({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){u(Lr()),u(Bo())}}),[u,t,P]);var L=i.a.useCallback((function(e){var t=e.currency.value&&e.currency.value.id;if(null!=t){ri(e.template,{required:!1});var n=null==e.template.value?null:e.template.value.id,a=M.reduce((function(e,a){if(t!==a.get("currency_id"))return e;var i={id:a.get("id"),name:a.get("name")};return e.data.push(i),i.id===n&&(e.value=i),e}),{data:[],value:null}),i=a.data,c=a.value;e.template.data=i,e.template.value=c}else ci(e.template)}),[M]);i.a.useEffect((function(){var e={route:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Route"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},currency:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},notificationPeriodValue:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Notification Period Value"},value:null,validation:{isNumeric:!0,minValue:0,required:!1},valid:!0,validationMessage:""},notificationPeriod:{flexSize:6,elementType:"combo",clearButton:!0,elementConfig:{disabled:!0,allowCustom:!1,placeholder:"Notification Period"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},template:{flexSize:6,elementType:"combo",clearButton:!0,elementConfig:{allowCustom:!1,placeholder:"Base Template"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},inherit:{flexSize:6,elementType:"checkbox",elementConfig:{placeholder:"Inherit Template Pricing"},value:!1,validation:{required:!0},valid:!0,validationMessage:""}};e.currency.data=N.reduce((function(e,t){return e.push({id:t.get("currency"),name:t.get("currency")}),e}),[]),e.route.data=A.reduce((function(e,t){return e.push({id:t.get("id"),name:t.get("name")}),e}),[]),e.notificationPeriod.data=Object.keys(IO).map((function(e){return{id:e,name:IO[e].name}})),ZO(e),L(e),$O(e),f(e)}),[A,N,L]);var F=i.a.useCallback((function(e){y(!0),ZO(e),L(e),$O(e),f(e)}),[L]),U=i.a.useCallback((function(){var e=E(),n=e.invalidMessages,a=e.controls;if(f(a),n.length>0)P({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}});else{O(!0);var i={route_id:XO(a.route),currency_id:XO(a.currency),template_id:XO(a.template),template_inherit_all:XO(a.inherit),value:XO(a.notificationPeriodValue),notification_period:XO(a.notificationPeriod)};u(function(e,t){return function(){return jc.post("".concat(e,"/price-plan"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,i)).then((function(){P({severity:"success",message:"Client Price Plan Successfully Created"}),y(!1),s.push("/clients/".concat(t,"/pricing/"))})).catch((function(e){P({severity:"error",message:e.message,action:{label:"Dismiss"}}),O(!1)}))}}),[s,t,u,P,E]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:_}),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:0===A.size&&!1===g&&Object(Ka.jsx)(mh,{variant:"error",children:"Please create a Route"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Details"})}),Object(Ka.jsx)(w.c,{children:!0===g?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:j,onControlsChange:F})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return s.push("/clients/".concat(t,"/pricing/"))},children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:function(){return U()},disabled:!0===g,children:"Save"})]})]})})]})]})}function XO(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}function $O(e){null==e.notificationPeriodValue.value?ci(e.notificationPeriod):ri(e.notificationPeriod)}function ZO(e){null==e.template.value?ci(e.inherit,{defaultValue:!1}):ri(e.inherit)}var ev=i.a.memo(QO),tv={skip:0,take:20};function nv(e){var t=e.clientID,n=Object(d.j)(),a=n.scheduleID,c=n.pricePlanID,r=Object(d.h)(),s=Object(l.c)(),u=O("customer-portal"),b=i.a.useState(!0),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useContext(Tm),g=p.setTitle,v=p.setContentTitle,C=p.setBreadcrumbs,y=i.a.useState(tv),E=Object(o.a)(y,2),I=E[0],D=E[1],T=Object(l.d)((function(e){return{route:e.route,client:e.client,country:e.country,network:e.network,trafficStatuses:e.trafficStatuses,clientPricePlan:e.clientPricePlan,clientConnection:e.clientConnection,clientRoutePriceSchedule:e.clientRoutePriceSchedule}})),M=T.route,N=T.client,R=T.country,A=T.network,P=T.trafficStatuses,L=T.clientPricePlan,F=T.clientConnection,U=T.clientRoutePriceSchedule,q=i.a.useMemo((function(){return M.getIn([L.getIn([c,"route_id"]),"name"])}),[M,c,L]),G=i.a.useMemo((function(){var e=L.getIn([c,"route_id"]),t=F.reduce((function(t,n){var a=n.get("route_id");return e!==a?t:t.add(n.get("connection_name"))}),new m.e).toJS();return 0===t.length?"N/A":t.length<10?t.join(", "):t.slice(0,10).join(", ")+" & ".concat(t.length-10," more")}),[F,L,c]),H=i.a.useCallback((function(e){s(Ui(e))}),[s]),B=i.a.useCallback((function(){s(Lr()),s(hs()),s(Cs())}),[s]),V=i.a.useCallback((function(){B();var e=[s(!1===u?Ws(t,c):Ks(t,c)),s(!1===u?Ys(t,c,a):Qs(a)),s(!1===u?Xs(t,c):$s(c))];return!1===u&&e.push(s(go())),!0===u&&e.push(s(el(t))),Promise.all(e).then((function(e){var t=Object(o.a)(e,1)[0];if(!1===u)return s(Ur(t.route_id))}))}),[s,t,B,a,c,u]),z=i.a.useCallback((function(){return h(!0),V().then((function(){h(!1)})).catch((function(e){H({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[V,H]);i.a.useEffect((function(){return z(),function(){return B()}}),[B,z]),i.a.useEffect((function(){var e=N.getIn([t,"client_name"]);return null==q||null==e?(g("Changes"),v("Changes")):(g("".concat(e,"'s ").concat(q," Changes")),v("".concat(e,"'s ").concat(q," Changes"))),C([{link:"/clients",name:"Clients"},{name:e},{name:"Pricing",link:"/clients/".concat(t,"/pricing/")},{name:q},{name:"Changes"}]),function(){g(null),C([])}}),[N,t,q,g,v,C]);var W=i.a.useCallback((function(){D(tv)}),[]),K=i.a.useCallback((function(e){D(e.dataState)}),[]),J=UO(L.getIn([c,"currency_id"])),Y=hj({dataState:I,countryFieldID:"country_name",networkFieldID:"network_name"}),Q=Y.availableNetworks,X=sb({variant:"MultiSelect",props:{data:Y.availableCountries}}),$=sb({variant:"Input",props:{min:0,label:"MCC"}}),Z=sb({variant:"MultiSelect",props:{data:Q}}),ee=sb({variant:"Input",props:{min:0,label:"MNC"}}),te=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(FO).map((function(e){return{id:e,name:FO[e].name}}),[])}),[])}}),ne=sb({variant:"Input"}),ae=sb({variant:"Numeric"}),ie=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return P.reduce((function(e,t){return e.push({id:t.get("code"),name:t.get("description")}),e}),[])}),[P])}}),ce=i.a.useMemo((function(){return{field:"country",title:"Country",filterCell:X}}),[X]),re=i.a.useMemo((function(){return{field:"mcc",title:"MCC",width:"100px",filterCell:$}}),[$]),se=i.a.useMemo((function(){return{field:"network",title:"Network",filterCell:Z}}),[Z]),le=i.a.useMemo((function(){return{field:"mnc",title:"MNC",width:"100px",filterCell:ee}}),[ee]),oe=i.a.useMemo((function(){return{field:"charge_on_status",title:"Charge on Delivery",view:"charge_on_status_DOM",width:"250px",sortable:!1,filterCell:ie}}),[ie]),ue=i.a.useMemo((function(){return{field:"type",title:"Type",width:"250px",view:"typeDOM",filterCell:te}}),[te]),de=i.a.useMemo((function(){return{field:"value",title:!0===u?"Price":"Value",width:"200px",view:"valueDOM",filterCell:ne}}),[u,ne]),me=i.a.useMemo((function(){return{field:"minPrice",title:"Min. Price",width:"200px",view:"minPriceDOM",filterCell:ae}}),[ae]),be=i.a.useMemo((function(){return{field:"decimalPoints",title:"Decimal Points",width:"200px",view:"decimalPointsDOM",filterCell:ae}}),[ae]),je=i.a.useMemo((function(){return{field:"notes",title:"Notes",width:"300px",view:"notesDOM",filterCell:ne}}),[ne]),fe=i.a.useMemo((function(){return{field:"id",title:"ID",view:"price_planDOM",width:"150px",filterCell:ne}}),[ne]),he=i.a.useMemo((function(){return!0===u?[ce,re,se,le,de,fe]:[ce,re,se,le,oe,ue,de,me,be,je,fe]}),[fe,re,le,ue,de,je,u,ce,se,me,be,oe]),pe=i.a.useMemo((function(){var e=U.getIn([a,"prices"]);return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=t.get("network_id"),a=A.get(n);if(null==a)return e;var i=new m.b(L.getIn([c,"prices",n])),r=t.get("charge_on_status"),s=J({type:i.get("type"),value:!0===u?i.get("price"):i.get("value"),notes:i.get("notes"),minPrice:i.get("min_price"),decimalPoints:i.get("dp_rounding"),templateType:i.get("template_type")},{type:t.get("type"),value:!0===u?t.get("price"):t.get("value"),notes:t.get("notes"),minPrice:t.get("min_price"),decimalPoints:t.get("dp_rounding")}),l=s.type,o=s.value,d=s.notes,b=s.minPrice,j=s.decimalPoints,f=!1===l.hasChanged?null:"DifferenceColorHighlight",h=!1===o.hasChanged?null:"DifferenceColorHighlight",p=!1===b.hasChanged?null:"DifferenceColorHighlight",g=!1===j.hasChanged?null:"DifferenceColorHighlight",O=!1===d.hasChanged?null:"DifferenceColorHighlight",v=A.getIn([n,"country_id"]);return e.push({id:c,price_planDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:c})}),value:o.scheduled,notes:d.scheduled,type:t.get("type"),decimalPoints:j.scheduled,minPrice:t.get("min_price"),mcc:a.getIn(["mccmnc",0,"mcc"]),countryID:v,country:R.getIn([v,"country_name"]),mnc:a.get("mccmnc").map((function(e){return e.get("mnc")})).join(", "),networkID:n,network:A.getIn([n,"network_name"]),charge_on_status:r,charge_on_status_DOM:t.get("charge_on_status_enabled")?r.map((function(e,t){var n=P.getIn([e,"description"]);return Object(Ka.jsx)(wd,{children:n},t)})):"-",typeDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:f,children:[l.scheduled," "]}),!0===l.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",l.current,")"]})]}),valueDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:h,children:[o.scheduled," "]}),!0===o.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",o.current,")"]})]}),minPriceDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:p,children:[b.scheduled," "]}),!0===b.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",b.current,")"]})]}),decimalPointsDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)("span",{className:g,children:[j.scheduled," "]}),!0===j.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",j.current,")"]})]}),notesDOM:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("span",{className:O,children:Object(Ka.jsx)(pm,{length:40,content:d.scheduled})}),!0===d.hasChanged&&Object(Ka.jsxs)("i",{children:["(Current ",Object(Ka.jsx)(pm,{length:40,content:d.current}),")"]})]})}),e}),[])}),[R,A,a,c,L,P,u,J,U]),ge=i.a.useMemo((function(){return Object(Ka.jsx)(Nd,{utc:U.getIn([a,"schedule_for"])})}),[a,U]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsxs)(w.f,{children:[U.getIn([a,"status"])," Changes"]})}),Object(Ka.jsx)(w.c,{children:!0===f?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!1===u?Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:["Changes on ",Object(Ka.jsx)("strong",{children:q})," scheduled for"," ",ge]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:["Scheduled for ",ge]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("strong",{children:"Connections:"})," ",G]})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendFiltering:!0,frontendPagination:!0,style:{height:"411px"},skip:I.skip,take:I.take,sort:I.sort,filter:I.filter,data:pe,columns:he,onDataStateChange:K})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return r.push(!1===u?"/clients/".concat(t,"/pricing/"):"/clients/pricing/")},children:"Go Back"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:z,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:W,children:"Clear Filters and Sorting"})]})]})})})}var av=i.a.memo(nv);function iv(e){var t=e.clientID,n=b(),a=O("customer-portal"),c=i.a.useMemo((function(){return!0===a?"/clients/pricing":"/clients/".concat(t,"/pricing")}),[t,a]);return Object(Ka.jsxs)(d.e,{children:[!0===n.has("FRONTEND:PRICING-MANAGER-CLIENT-PRICE-PLAN-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"".concat(c,"/new"),children:Object(Ka.jsx)(ev,{clientID:t})}),Object(Ka.jsx)(d.c,{path:"".concat(c,"/:pricePlanID/changes/:scheduleID"),children:Object(Ka.jsx)(av,{clientID:t})}),Object(Ka.jsx)(d.c,{path:"".concat(c,"/:pricePlanID"),children:Object(Ka.jsx)(YO,{clientID:t})}),Object(Ka.jsx)(d.c,{path:c,children:Object(Ka.jsx)(LO,{clientID:t})})]})}var cv=i.a.memo(iv);function rv(e){var t=e.clientID,n=Object(d.j)().connectionID,a=Object(d.j)().connectionType,c=i.a.useContext(Tm),r=c.setTitle,s=c.setContentTitle,u=c.setBreadcrumbs,j=b(),f=Object(d.h)(),h=Object(l.c)(),p=O("customer-portal"),g=i.a.useState(),C=Object(o.a)(g,2),_=C[0],y=C[1],E=i.a.useState(!0),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState(!1),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState(!1),G=Object(o.a)(q,2),H=G[0],B=G[1],V=oj(_),z=i.a.useMemo((function(){return j.has("API:CLIENT_CONNECTION:WRITE")&&!1===p}),[j,p]),W=i.a.useCallback((function(e){h(Ui(e))}),[h]),K=Object(l.d)((function(e){return{route:e.route}})).route;i.a.useEffect((function(){var e=[h(!1===p?al(t,n,a):il(t,n,a))];return!1===p&&e.push(h(Fr())),Promise.all(e).then((function(){T(!1)})).catch((function(e){W({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){h(Lr()),h(gs())}}),[h,W,t,n,a,p]);var J=Object(l.d)((function(e){var t=e.clientConnection;return new m.b(t.get(n))})),Y=Object(l.d)((function(e){return e.client.getIn([t,"client_name"])}));i.a.useEffect((function(){var e=J.get("connection_name");return null==Y||null==e?(r("Connection Modifications"),s("Connection Modifications")):(r("".concat(Y,"'s ").concat(e," Connection Modifications")),s("".concat(Y,"'s ").concat(e," Connection Modifications"))),u([{link:"/clients",name:"Clients"},{name:Y},{name:"Connections",link:"/clients/".concat(t,"/connections/")},{name:e}]),function(){r(null),u([])}}),[Y,t,J,r,s,u]);var Q=i.a.useCallback((function(){var e="";"smpp"===a&&((e=function(e){return Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({system_id:{elementType:"input",elementConfig:{placeholder:"System ID",readOnly:!0},value:"",validation:{required:!0},valid:!0,validationMessage:""}},!1===e&&{password:{elementType:"input",elementConfig:{placeholder:"Password"},value:"",validation:{required:!0},valid:!0,validationMessage:""},default_alphabet:{elementType:"combo",elementConfig:{placeholder:"Default Alphabet"},data:Jg,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""},delivery_report:{elementType:"combo",elementConfig:{placeholder:"Delivery Report"},data:Yg,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""}}),{},{maximum_binds:{elementType:"numeric",elementConfig:{min:0,placeholder:"Limit Number of Binds"},value:0,validation:{required:!0,min:0,isNumeric:!0},valid:!0,validationMessage:""}},!1===e&&{mps:{elementType:"numeric",elementConfig:{min:0,placeholder:"MPS Limit"},value:0,validation:{required:!0,min:0,isNumeric:!0},valid:!0,validationMessage:""}}),{},{allowed_ip_list:{elementType:"multi",elementConfig:{type:"",allowCustom:!0,placeholder:"Allowed IP List"},value:null,validation:{required:!0,isIP:!0},style:{width:"100%"},valid:!0,validationMessage:""}},!1===e&&{route_id:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Route ID"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},note:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{maxLength:1e3},style:{height:"60px"},valid:!0,validationMessage:""}}),{},{active:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Active"},valid:!0,value:Kg[0],data:Kg,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}})}(p)).system_id.value=J.get("system_id"),e.maximum_binds.value=J.get("maximum_binds"),e.allowed_ip_list.value=J.get("allowed_ip_list"),e.active.value=Bg[J.get("active")],!1===p&&(e.password.value=J.get("password"),e.default_alphabet.value=Vg[J.get("default_alphabet")],e.delivery_report.value=zg[J.get("delivery_report")],e.mps.value=J.get("mps"),e.route_id.value=J.get("route_id"),e.note.value=J.get("note"))),"rest"===a&&((e=function(e){return Object(v.a)(Object(v.a)(Object(v.a)({name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},token_masked:{flexSize:6,elementType:"input",elementConfig:{placeholder:"Masked Token",readOnly:!0},value:"",validation:{required:!1},valid:!0,validationMessage:""},token_masked_refresh:{flexSize:2,className:"flat",elementType:"button",elementConfig:{buttonIcon:"refresh",buttonText:"Refresh",disabled:!1},valid:!0,style:{marginTop:"15px"},validationMessage:""}},!1===e&&{delivery_report:{elementType:"combo",elementConfig:{placeholder:"Delivery Report"},data:Yg,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""}}),{},{allowed_ip_list:{elementType:"multi",elementConfig:{type:"",allowCustom:!0,placeholder:"Allowed IP List"},value:null,validation:{required:!0,isIP:!0},style:{width:"100%"},valid:!0,validationMessage:""}},!1===e&&{route_id:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Route ID"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},note:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{maxLength:1e3},style:{height:"60px"},valid:!0,validationMessage:""}}),{},{active:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Active"},valid:!0,value:Kg[0],data:Kg,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}})}(p)).name.value=J.get("name"),e.token_masked.value=J.get("token_masked"),e.delivery_report.value=zg[J.get("delivery_report")],e.allowed_ip_list.value=J.get("allowed_ip_list"),e.active.value=Bg[J.get("active")],R&&(e.token_masked_refresh=Object(v.a)(Object(v.a)({},e.token_masked_refresh),{},{className:"flat DisabledRefreshToken",elementConfig:{buttonText:Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin fa-1g"}),buttonIcon:"",disabled:!0}})),!1===p&&(e.delivery_report.value=zg[J.get("delivery_report")])),!1===p&&(e.route_id.data=Object(x.a)(K.values()).map((function(e){return{id:e.get("id"),name:e.get("name")}})),null!=J.get("route_id")&&(e.route_id.value={id:J.get("route_id"),name:K.getIn([J.get("route_id"),"name"])})),y(e)}),[K,J,a,p,R]);i.a.useEffect((function(){Q()}),[Q]);var X=i.a.useCallback((function(e){if(null!=e.allowed_ip_list.value){var t=e.allowed_ip_list.value.map((function(e){return e})),n=t.filter((function(e,n){return t.indexOf(e)===n}));new Set(t).size!==t.length&&W({message:"Duplicate IP Addresses not accepted",severity:"error",action:{label:"Dismiss"}}),e.allowed_ip_list.value=n}U(!0),y(e)}),[W]),$=i.a.useCallback((function(){B(!H),Q()}),[Q,H]),Z=i.a.useCallback((function(){A(!0),h(sl(t,n)).then((function(){W({severity:"success",message:"Token Successfully Refreshed"})})).catch((function(e){W({severity:"error",message:e.message,action:{label:"Dismiss"}})})).finally((function(){return A(!1)}))}),[h,W,t,n]),ee=i.a.useCallback((function(){var e=V(),i=e.invalidMessages,c=e.controls;if(y(c),i.length>0)W({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{T(!0);var r=Object.keys(c).reduce((function(e,t){return"button"===c[t].elementType||(e[t]=function(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}(c[t])),e}),{});h(function(e,t,n,a){return function(){return jc.patch("/".concat(e,"/connections/").concat(n,"/").concat(a),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,r,a,n)).then((function(){h(al(t,n,a)).then((function(){W({severity:"success",message:"Client Connection Successfully Edited"})})).catch((function(e){W({severity:"error",message:e.message,action:{label:"Dismiss"}})}))})).catch((function(e){W({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){$(),T(!1),U(!1)}))}}),[h,W,$,V,t,a,n]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:F}),Object(Ka.jsxs)(w.a,{className:"smpp"===a?"SmppConnectionEditAddCard":"rest"===a?"RestConnectionEditAddCard":"web"===a?"WebConnectionEditAddCard":"",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsxs)(w.f,{children:[a.toUpperCase()," Connection Details"]})}),Object(Ka.jsx)(w.c,{children:!0===D?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{isEdit:H,onButtonClick:Z,controls:_,onControlsChange:X})})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:!1===H?Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return f.push(!1===p?"/clients/".concat(t,"/connections/"):"/clients/connections/")},children:"Go Back"}),!0===z&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:$,children:"Edit"})]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:$,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ee,disabled:!0===D,children:"Save"})]})})]})]})}var sv=i.a.memo(rv);function lv(e){var t=e.clientID,n=b(),a=Object(d.h)(),c=Object(l.c)(),r=O("customer-portal"),s=i.a.useContext(Tm),u=s.setTitle,j=s.setContentTitle,f=s.setBreadcrumbs,h=i.a.useState(!0),p=Object(o.a)(h,2),g=p[0],v=p[1],x=Object(l.d)((function(e){return{client:e.client}})).client,C=i.a.useMemo((function(){return n.has("API:CLIENT_CONNECTION:WRITE")&&!1===r}),[n,r]),y=i.a.useCallback((function(e){c(Ui(e))}),[c]),E=i.a.useMemo((function(){var e=x.getIn([t,"routes"]);return null!=e&&e.size>0}),[x,t]),I=Object(l.d)((function(e){var n=e.client,a=e.clientConnection,i=new m.b(n.get(t)).get("connections");return(null==i?[]:i.toJS()).reduce((function(e,t){var n=a.get(t);return null!=n&&e.push(n.toJS()),e}),[])})),D=Object(l.d)((function(e){return e.client.getIn([t,"client_name"])}));i.a.useEffect((function(){return u("".concat(D,"'s Connections")),null==D?(u("Connections"),j("Connections")):(u("".concat(D,"'s Connections")),j("".concat(D,"'s Connections"))),f([{link:"/clients",name:"Clients"},{name:D},{name:"Connections"}]),function(){u(null),f([])}}),[D,t,u,j,f]),i.a.useEffect((function(){v(!0);var e=[c(!1===r?Zs(t):el(t))];return!1===r&&e.push(c(tl(t))),Promise.all(e).then((function(){v(!1)})).catch((function(e){y({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return c(Lr())}}),[c,y,t,r]);var T=I.filter((function(e){return"smpp"===e.connection_type})),M=I.filter((function(e){return"rest"===e.connection_type})),N=I.filter((function(e){return"ss7"===e.connection_type})),R=0===T.length?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h2",{className:"EmptySmppConnectionCard",children:!0===E||!0===r?"No SMPP Connections Available":"Please create a price plan before creating a connection"})}):T.map((function(e){var n=["k-icon","k-i-share","yes"===e.connection_active?"RestColor":"DisabledColor"];return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(w.a,{className:"yes"===e.connection_active?"SmppConnectionCard":"DisabledConnectionCard",children:Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)("h2",{children:["Connection ",e.connection_name,Object(Ka.jsx)(k.a,{className:"ConnectionCardDetailsButton",onClick:function(){return a.push(!0===r?"/clients/connections/".concat(e.connection_type,"/").concat(e.connection_id):"/clients/".concat(t,"/connections/").concat(e.connection_type,"/").concat(e.connection_id))},children:"Details"})]}),!1===r&&Object(Ka.jsxs)("h4",{children:[Object(Ka.jsx)("span",{className:n.join(" ")})," Route"," ",e.route_name]})]})})},e.connection_id)})),A=0===M.length?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h2",{className:"EmptyRestConnectionCard",children:!0===E||!0===r?"No Rest Connections Available":"Please create a price plan before creating a connection"})}):M.map((function(e){var n=["k-icon","k-i-share","yes"===e.connection_active?"RestColor":"DisabledColor"];return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(w.a,{className:"yes"===e.connection_active?"RestConnectionCard":"DisabledConnectionCard",children:Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)("h2",{children:["Connection ",e.connection_name,Object(Ka.jsx)(k.a,{className:"ConnectionCardDetailsButton",onClick:function(){return a.push(!0===r?"/clients/connections/".concat(e.connection_type,"/").concat(e.connection_id):"/clients/".concat(t,"/connections/").concat(e.connection_type,"/").concat(e.connection_id))},children:"Details"})]}),!1===r&&Object(Ka.jsxs)("h4",{children:[Object(Ka.jsx)("span",{className:n.join(" ")})," Route"," ",e.route_name]})]})})},e.connection_id)})),P=0===N.length?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h2",{className:"EmptySS7ConnectionCard",children:!0===E||!0===r?"No SS7 Connections Available":"Please create a price plan before creating a connection"})}):N.map((function(e){var t=["k-icon","k-i-share","yes"===e.connection_active?"SS7Color":"DisabledColor"];return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(w.a,{className:"yes"===e.connection_active?"SS7ConnectionCard":"DisabledConnectionCard",children:Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)("h2",{children:["Connection ",e.connection_name]}),!1===r&&Object(Ka.jsxs)("h4",{children:[Object(Ka.jsx)("span",{className:t.join(" ")})," Route"," ",e.route_name]})]})})},e.connection_id)}));return Object(Ka.jsxs)(w.g,{children:[Object(Ka.jsx)(w.h,{expanded:null!=T,title:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{className:"SmppColor",children:"SMPP"}),!0===C&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat",disabled:!0!==E,onClick:function(e){e.stopPropagation(),a.push("/clients/".concat(t,"/connections/smpp"))},children:"Add Connection"})]}),children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,style:{padding:"15px"},children:!0===g?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"loader"})}):R})}),Object(Ka.jsx)(w.h,{expanded:null!=N,title:Object(Ka.jsx)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:Object(Ka.jsx)("span",{className:"SS7Color",children:"SS7"})}),children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,style:{padding:"20px"},children:!0===g?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"loader"})}):P})}),Object(Ka.jsx)(w.h,{expanded:null!=M,title:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{className:"RestColor",children:"HTTP/ RestAPI"}),!0===C&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat",disabled:!0!==E,onClick:function(e){e.stopPropagation(),a.push("/clients/".concat(t,"/connections/rest"))},children:"Add Connection"})]}),children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,style:{padding:"20px"},children:!0===g?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"loader"})}):A})}),Object(Ka.jsx)(w.h,{disabled:!0,title:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",style:{marginRight:"30px"},children:[Object(Ka.jsx)("span",{className:"WebColor",children:"Web2SMS"}),!0===C&&Object(Ka.jsx)(k.a,{icon:"add",look:"flat",onClick:function(){return a.push("/clients/".concat(t,"/connections/web"))},children:"Add Connection"})]})})]})}var ov=i.a.memo(lv);function uv(e){var t=e.clientID,n=Object(d.j)().connectionType,a=Object(d.h)(),c=Object(l.c)(),r=i.a.useState(),s=Object(o.a)(r,2),u=s[0],m=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=["0","1","2","3","4","5","6","7","8","9","#","!","*","(",")","+","-",".","$","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n="";n.length<e;)n+=t[Math.floor(Math.random()*t.length)];return n}()),_=Object(o.a)(C,1)[0],y=oj(u),E=i.a.useCallback((function(e){c(Ui(e))}),[c]),I=Object(l.d)((function(e){return{route:e.route}})).route;i.a.useEffect((function(){var e="rest"===n?{name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},delivery_report:{elementType:"combo",elementConfig:{placeholder:"Delivery Report"},data:Yg,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""},allowed_ip_list:{elementType:"multi",elementConfig:{type:"",allowCustom:!0,placeholder:"Allowed IP List"},value:null,validation:{required:!0,isIP:!0},style:{width:"100%"},valid:!0,validationMessage:""},route_id:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Route ID"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},note:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{maxLength:1e3},style:{height:"60px"},valid:!0,validationMessage:""},active:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Active"},valid:!0,value:Kg[0],data:Kg,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}}:{system_id:{elementType:"input",elementConfig:{placeholder:"System ID"},value:"",validation:{required:!0},valid:!0,validationMessage:""},password:{elementType:"input",elementConfig:{placeholder:"Password"},value:"",validation:{required:!0},valid:!0,validationMessage:""},default_alphabet:{elementType:"combo",elementConfig:{placeholder:"Default Alphabet"},data:Jg,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""},delivery_report:{elementType:"combo",elementConfig:{placeholder:"Delivery Report"},data:Yg,value:null,textField:"name",dataItemKey:"id",validation:{required:!0},valid:!0,validationMessage:""},maximum_binds:{elementType:"numeric",elementConfig:{min:0,placeholder:"Limit Number of Binds"},value:10,validation:{required:!0,min:0,isNumeric:!0},valid:!0,validationMessage:""},mps:{elementType:"numeric",elementConfig:{min:0,placeholder:"MPS Limit"},value:0,validation:{required:!0,min:0,isNumeric:!0},valid:!0,validationMessage:""},allowed_ip_list:{elementType:"multi",elementConfig:{type:"",allowCustom:!0,placeholder:"Allowed IP List"},value:null,validation:{required:!0,isIP:!0},style:{width:"100%"},valid:!0,validationMessage:""},route_id:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Route ID"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},note:{elementType:"textarea",elementConfig:{placeholder:"Note"},value:"",validation:{maxLength:1e3},style:{height:"60px"},valid:!0,validationMessage:""},active:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Active"},valid:!0,value:Kg[0],data:Kg,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.route_id.data=Object(x.a)(I.values()).map((function(e){return{id:e.get("id"),name:e.get("name")}})),e.delivery_report.value={id:"DEFAULT_POLICY",name:"Actual DLR"},"rest"!==n&&(e.password.value=_,e.default_alphabet.value={id:"gsm7",name:"GSM7"}),m(e)}),[I,n,f,_]);var D=i.a.useCallback((function(e){if(null!=e.allowed_ip_list.value){var t=e.allowed_ip_list.value.map((function(e){return e})),n=t.filter((function(e,n){return t.indexOf(e)===n}));new Set(t).size!==t.length&&E({message:"Duplicate IP Addresses not accepted",severity:"error",action:{label:"Dismiss"}}),e.allowed_ip_list.value=n}v(!0),m(e)}),[E]),T=i.a.useCallback((function(){var e=y(),i=e.invalidMessages,r=e.controls;if(m(r),i.length>0)E({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{h(!0);var s="rest"===n?{allowed_ip_list:r.allowed_ip_list.value,delivery_report:r.delivery_report.value.id,name:r.name.value,route_id:r.route_id.value.id,active:r.active.value.id,note:r.note.value}:{system_id:r.system_id.value,password:r.password.value,default_alphabet:r.default_alphabet.value.id,delivery_report:r.delivery_report.value.id,maximum_binds:r.maximum_binds.value,mps:r.mps.value,allowed_ip_list:r.allowed_ip_list.value,route_id:r.route_id.value.id,note:r.note.value,active:r.active.value.id};c(function(e,t,n){return function(){return jc.post("/".concat(e,"/connections/").concat(n),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,s,n)).then((function(){return E({severity:"success",message:"Client Connection Successfully Added"}),v(!1),c(Zs(t))})).then((function(){a.push("/clients/".concat(t,"/connections/"))})).catch((function(e){E({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return h(!1)}))}}),[c,a,y,E,t,n]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:O}),Object(Ka.jsxs)(w.a,{className:"smpp"===n?"SmppConnectionEditAddCard":"rest"===n?"RestConnectionEditAddCard":"web"===n?"WebConnectionEditAddCard":"",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsxs)(w.f,{children:["Add ",n.toUpperCase()," Connection"]})}),Object(Ka.jsx)(w.c,{children:!0===f?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:u,onControlsChange:D})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return a.push("/clients/".concat(t,"/connections/"))},children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:T,disabled:!0===f,children:"Save"})]})]})]})}var dv=i.a.memo(uv);function mv(e){var t=e.clientID,n=O("customer-portal"),a=i.a.useMemo((function(){return!0===n?"/clients/connections":"/clients/".concat(t,"/connections")}),[t,n]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:a,exact:!0,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(ov,{clientID:t})})}),Object(Ka.jsxs)(d.c,{path:"".concat(a,"/:connectionType"),exact:!0,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(ov,{clientID:t})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(dv,{clientID:t})})]}),Object(Ka.jsx)(d.c,{path:"".concat(a,"/:connectionType/:connectionID"),children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(sv,{clientID:t})})})]})})}var bv=i.a.memo(mv);function jv(e){var t=e.email,n=e.isLoading,a=void 0!==n&&n,c=e.fullName,r=e.onSubmit,s=bm(e.onCancel),l=i.a.useState(t),u=Object(o.a)(l,2),d=u[0],m=u[1],b=i.a.useState(c),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState([]),g=Object(o.a)(p,2),O=g[0],v=g[1],x=i.a.useState([]),C=Object(o.a)(x,2),_=C[0],y=C[1],w=i.a.useMemo((function(){return{isEmail:!0,required:!0}}),[]),E=i.a.useMemo((function(){return{required:!0}}),[]),I=Nm(i.a.useMemo((function(){return[{label:"Full Name",value:f,setErrors:y,validations:E},{label:"Email Address",value:d,setErrors:v,validations:w}]}),[d,v,w,f,y,E])),D=i.a.useCallback((function(){"function"===typeof r&&r({email:d,fullName:f},I())}),[d,f,r,I]);return Object(Ka.jsxs)(Ub.a,{title:"Account Modification",onClose:s,children:[!0===a?Object(Ka.jsxs)("center",{children:[Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin fa-lg"})," Updating Details. Please wait."]}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,alignItems:"center",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Full Name",value:f,onChange:h,errors:_,validations:E,onErrorsChange:y})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Email",value:d,onChange:m,errors:O,validations:w,onErrorsChange:v})})]})})}),!1===a&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:D,children:"Submit"}),Object(Ka.jsx)(k.a,{onClick:s,children:"Cancel"})]})]})}var fv=i.a.memo(jv),hv={onboarding:{id:"onboarding",name:"ONBOARDING",variant:"info"},active:{id:"active",name:"ACTIVE",variant:"default"},locked:{id:"locked",name:"LOCKED",variant:"warning"},suspended:{id:"suspended",name:"SUSPENDED",variant:"error"},soft_block:{id:"soft_block",name:"SOFT BLOCK",variant:"error"}};function pv(e){var t=hv[e];return null!=t?t:{id:"unknown",name:e}}var gv=hv;function Ov(e){var t=e.userID,n=e.status,a=e.isLoading,c=void 0!==a&&a,r=e.onSubmit,s=e.onCancel,u=bm(r),d=bm(s),m=Object(l.d)((function(e){var n=e.customerPortalUser;return[n.getIn([t,"username"]),n.getIn([t,"status"])]})),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useMemo((function(){return[f,n].map((function(e){var t=pv(e);return Object(Ka.jsx)(wd,{variant:t.variant,children:t.name})}))}),[f,n]),p=Object(o.a)(h,2),g=p[0],O=p[1];return Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:d,children:[!0===c?Object(Ka.jsxs)("center",{children:[Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin fa-lg"})," Updating Status. Please wait."]}):Object(Ka.jsxs)(Ka.Fragment,{children:["Are you sure you want to change the status of"," ",Object(Ka.jsx)("strong",{children:j})," from ",g," to ",O]}),!1===c&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:u,children:"Submit"}),Object(Ka.jsx)(k.a,{onClick:d,children:"Cancel"})]})]})}var vv=i.a.memo(Ov);function xv(e){var t=e.clientID,n=Object(d.j)().userID,a=b(),c=Object(d.h)(),r=Object(l.c)(),s=i.a.useState(),u=Object(o.a)(s,2),m=u[0],j=u[1],f=i.a.useState(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(!0),v=Object(o.a)(O,2),x=v[0],C=v[1],_=i.a.useState(!1),y=Object(o.a)(_,2),E=y[0],I=y[1],D=i.a.useContext(Tm),T=D.setTitle,M=D.setContentTitle,N=D.setBreadcrumbs,R=i.a.useMemo((function(){return a.has("API:CUSTOMER_PORTAL_ACCOUNTS:WRITE")}),[a]),A=i.a.useCallback((function(e){r(Ui(e))}),[r]),P=Object(l.d)((function(e){var t=e.customerPortalUser;return{name:t.getIn([n,"name"]),email:t.getIn([n,"email"]),status:t.getIn([n,"status"]),username:t.getIn([n,"username"]),ipFromLastLogin:t.getIn([n,"ip_from_last_login"]),lastSuccessfulLogin:t.getIn([n,"last_successful_login"])}})),L=P.name,F=P.email,U=P.status,q=P.username,G=P.ipFromLastLogin,H=P.lastSuccessfulLogin,B=Object(l.d)((function(e){return e.client.getIn([t,"client_name"])}));i.a.useEffect((function(){return null==L?(T("Customer Portal Account Details"),M("Customer Portal Account Details")):(T("".concat(L,"'s Portal Accounts")),M("".concat(L,"'s Portal Accounts"))),N([{link:"/clients",name:"Clients"},{link:"/clients/".concat(t,"/"),name:B},{link:"/clients/".concat(t,"/customer-portal-accounts/"),name:"Customer Portal Accounts"},{name:L}]),function(){T(null),N([]),M(null)}}),[t,T,M,N,L,B]);var V=i.a.useCallback((function(){return C(!0),r(function(e,t){return function(n){return nd.get("/clients/".concat(e,"/users/").concat(t)).then((function(e){return n(ad(e.data)),n(ws(e.data.id)),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,n)).catch((function(e){A({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){C(!1)})),function(){r(id()),r(Ss())}}),[n,t,r,A]);i.a.useEffect((function(){return V()}),[V]);var z=i.a.useCallback((function(){c.push("/clients/".concat(t,"/customer-portal-accounts/"))}),[c,t]),W=i.a.useCallback((function(){j(null)}),[]),K=i.a.useCallback((function(){I(!0)}),[]),J=i.a.useCallback((function(){I(!1)}),[]),Y=i.a.useCallback((function(){g(!0),r(cd(t,n,{status:m})).then((function(){A({severity:"success",message:"Customer Portal Account Successfully Updated"})})).catch((function(e){A({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){g(!1),W()})).then((function(){return V()}))}),[n,t,r,A,m,V,W]),Q=i.a.useCallback((function(e,a){a.length>0?A({message:Object(Ka.jsx)(Mm,{messageList:a}),severity:"error",action:{label:"Dismiss"}}):(g(!0),r(cd(t,n,{email:e.email,name:e.fullName})).then((function(){A({severity:"success",message:"Customer Portal Account Successfully Updated"})})).catch((function(e){console.error(e),A({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return g(!1),J(),V()})).catch((function(e){console.error(e),A({severity:"error",message:e.message,action:{label:"Dismiss"}})})))}),[n,r,t,A,V,J]),X=i.a.useMemo((function(){var e=pv(U);return null==e?null:Object(Ka.jsx)(wd,{variant:e.variant,children:e.name})}),[U]),$=i.a.useMemo((function(){switch(U){case gv.active.id:return[Object(Ka.jsx)(k.a,{onClick:function(){return j(gv.suspended.id)},children:"Suspend"},"suspended")];case gv.locked.id:return[Object(Ka.jsx)(k.a,{onClick:function(){return j(gv.active.id)},children:"Unlock"},"active"),Object(Ka.jsx)(k.a,{onClick:function(){return j(gv.suspended.id)},children:"Suspend"},"suspended")];case gv.suspended.id:return[Object(Ka.jsx)(k.a,{onClick:function(){return j(gv.active.id)},children:"Activate"},"active")];case gv.onboarding.id:return[Object(Ka.jsx)(k.a,{onClick:function(){return j(gv.suspended.id)},children:"Suspend"},"suspended")];default:return[]}}),[U]);return!0===x?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(cj,{label:"ID",value:Object(Ka.jsx)(Id,{value:n})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(cj,{label:"Full Name",value:L})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(cj,{label:"Username",value:q})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(cj,{label:"Email",value:F})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(cj,{label:"Status",value:X})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(cj,{label:"Last Successful Login",value:null==H?Object(Ka.jsx)("span",{className:"Text--Faded",children:"Not available."}):Object(Ka.jsx)(Nd,{utc:H})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ka.jsx)(cj,{label:"IP From Last Login",value:null==G?Object(Ka.jsx)("span",{className:"Text--Faded",children:"Not available."}):G})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:z,children:"Go Back"}),!0===R&&Object(Ka.jsxs)(Ka.Fragment,{children:[$,Object(Ka.jsx)(k.a,{look:"flat",onClick:K,children:"Edit"})]})]})]}),null!=m&&Object(Ka.jsx)(vv,{userID:n,status:m,isLoading:p,onSubmit:Y,onCancel:W}),!0===E&&Object(Ka.jsx)(fv,{email:F,fullName:L,isLoading:p,onSubmit:Q,onCancel:J})]})}var Cv=i.a.memo(xv);function _v(e){var t=e.clientID,n=e.isLoading,a=void 0!==n&&n,c=e.onSubmit,r=e.onCancel,s=Object(l.c)(),u=bm(r),d=i.a.useState(null),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useCallback((function(e){s(Ui(e))}),[s]),h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(""),x=Object(o.a)(v,2),C=x[0],y=x[1],w=i.a.useState(""),E=Object(o.a)(w,2),I=E[0],D=E[1],T=i.a.useState(""),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState([]),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useState([]),q=Object(o.a)(U,2),G=q[0],H=q[1],B=i.a.useState([]),V=Object(o.a)(B,2),z=V[0],W=V[1],K=i.a.useMemo((function(){return{isEmail:!0,required:!0}}),[]),J=i.a.useMemo((function(){return{required:!0}}),[]),Y=i.a.useMemo((function(){return{required:!0}}),[]),Q=i.a.useMemo((function(){return!0===b}),[b]),X=Nm(i.a.useMemo((function(){return[{label:"Full Name",value:N,setErrors:W,validations:Y},{label:"Username",value:I,setErrors:H,validations:J},{label:"Email Address",value:C,setErrors:F,validations:K}]}),[C,F,K,I,H,J,N,W,Y])),$=i.a.useCallback((function(){"function"===typeof c&&c({email:C,username:I,fullName:N},X())}),[C,I,N,c,X]);return i.a.useEffect((function(){if(j(null),""!==I){var e=window.setTimeout((function(){O(!0),s(function(e){return function(){return nd.get("/users",{params:{username:e}}).then((function(e){return 0===e.data.data.length})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(I)).then((function(e){j(e)})).catch((function(e){f({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return O(!1)}))}),1e3);return function(){return window.clearTimeout(e)}}}),[s,I,t,f]),Object(Ka.jsxs)(Ub.a,{title:"Account Creation",onClose:u,children:[!0===a?Object(Ka.jsxs)("center",{children:[Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin fa-lg"})," Creating Account. Please wait."]}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,alignItems:"center",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Full Name",value:N,onChange:R,errors:z,validations:Y,onErrorsChange:W})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(_.a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)(fm,{variant:"Input",label:"Username",value:I,onChange:D,errors:G,validations:J,onErrorsChange:H}),!0===g?Object(Ka.jsx)(_.a,{ml:2,children:Object(Ka.jsx)("i",{title:"Checking if usernme is unique","aria-label":"Checking if usernme is unique",className:"fas fa-spinner fa-spin fa-lg"})}):null!=b&&Object(Ka.jsx)(_.a,{ml:2,children:!0===b?Object(Ka.jsx)("i",{title:"Username is unique","aria-label":"Username is unique",className:"fas fa-check Text--Success fa-lg"}):Object(Ka.jsx)("i",{title:"Username is not unique","aria-label":"Username is not unique",className:"fas fa-times Text--Error fa-lg"})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Email",value:C,onChange:y,errors:L,validations:K,onErrorsChange:F})})]})})}),!1===a&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:$,disabled:!1===Q,children:"Create"}),Object(Ka.jsx)(k.a,{onClick:u,children:"Cancel"})]})]})}var yv=i.a.memo(_v),Sv={skip:0,take:20};function kv(e){var t=e.clientID,n=b(),a=Object(d.h)(),c=Object(l.c)(),r=i.a.useState(!1),s=Object(o.a)(r,2),u=s[0],j=s[1],f=i.a.useState(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(!1),v=Object(o.a)(O,2),C=v[0],_=v[1],y=i.a.useState(Sv),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(!1),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useState(null),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useMemo((function(){return n.has("API:CUSTOMER_PORTAL_ACCOUNTS:WRITE")}),[n]),q=i.a.useContext(Tm),G=q.setTitle,H=q.setContentTitle,B=q.setBreadcrumbs,V=i.a.useCallback((function(e){c(Ui(e))}),[c]),z=Object(l.d)((function(e){return e.client}));i.a.useEffect((function(){var e=z.getIn([t,"client_name"]);return null==e?(G("Customer Portal Accounts"),H("Customer Portal Accounts")):(G("".concat(e,"'s Portal Accounts")),H("".concat(e,"'s Portal Accounts"))),B([{link:"/clients",name:"Clients"},{name:e},{name:"Customer Portal Accounts"}]),function(){G(null),B([]),H(null)}}),[z,t,G,H,B]);var W=i.a.useCallback((function(){c(id()),c(Ss(t))}),[c,t]),K=i.a.useCallback((function(){return W(),c(function(e,t){return function(n){return nd.get("/users",{params:Object.assign({},t,{client_id:e})}).then((function(t){return n(ad.apply(void 0,Object(x.a)(t.data.data))),n(ws(e,t.data.data.map((function(e){return e.id})))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,ni(I)))}),[t,c,I,W]),J=i.a.useCallback((function(e){D(e.dataState)}),[]),Y=i.a.useCallback((function(){D(Sv)}),[]),Q=i.a.useCallback((function(){F(null)}),[]),X=i.a.useCallback((function(e,t){F({userID:e,status:t})}),[]),$=i.a.useCallback((function(){R(!1)}),[]),Z=i.a.useCallback((function(){R(!0)}),[]),ee=kb({intervalPolicy:"update",name:"Customer Portal Accounts",request:i.a.useCallback((function(){return K()}),[K]),getData:i.a.useCallback((function(e,n){var a=e.client,i=e.customerPortalUser,c=a.getIn([t,"customer-portal-users"]);return new m.b({totalRecords:n.total_records,data:(null==c?[]:Object(x.a)(c)).reduce((function(e,t){var n=i.get(t);return null==n?e:e.add(n)}),new m.e)})}),[t])}),te=ee.data,ne=ee.update,ae=i.a.useCallback((function(){return _(!0),ne().catch((function(e){V({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return _(!1)}))}),[V,ne]);i.a.useEffect((function(){return g(!0),ne().catch((function(e){V({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){g(!1)})),function(){return W()}}),[V,W,ne]);var ie=i.a.useMemo((function(){return te.get("data").reduce((function(e,n){var i=n.get("id"),c=n.get("username"),r=pv(n.get("status"));return e.push({id:i,username:c,name:n.get("name"),idDOM:Object(Ka.jsx)(Id,{value:i}),email:n.get("email"),status:n.get("status"),ip_from_last_login:n.get("ip_from_last_login"),ipFromLastLoginDOM:null==n.get("ip_from_last_login")?Object(Ka.jsx)("span",{className:"Text--Faded",children:"Not available."}):n.get("ip_from_last_login"),last_successful_login:n.get("last_successful_login"),lastSuccessfulLoginDOM:null==n.get("last_successful_login")?Object(Ka.jsx)("span",{className:"Text--Faded",children:"Not available."}):Object(Ka.jsx)(Nd,{utc:n.get("last_successful_login")}),statusDOM:Object(Ka.jsx)(wd,{variant:r.variant,children:r.name}),actions:Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{icon:"eye",look:"flat",title:"View ".concat(c," Details"),"aria-label":"View ".concat(c," Details"),onClick:function(){return a.push("/clients/".concat(t,"/customer-portal-accounts/").concat(i))}}),!0===U&&Object(Ka.jsxs)(Ka.Fragment,{children:[[gv.locked.id,gv.soft_block.id].includes(n.get("status"))&&Object(Ka.jsx)(k.a,{look:"flat",icon:"unlock",title:"Unlock ".concat(c),"aria-label":"Unlock ".concat(c),onClick:function(){return X(i,gv.active.id)}}),n.get("status")!==gv.suspended.id&&Object(Ka.jsx)(k.a,{look:"flat",icon:"minus-circle",title:"Suspend ".concat(c),"aria-label":"Suspend ".concat(c),onClick:function(){return X(i,gv.suspended.id)}}),n.get("status")===gv.suspended.id&&Object(Ka.jsx)(k.a,{look:"flat",icon:"check-circle",title:"Activate ".concat(c),"aria-label":"Activate ".concat(c),onClick:function(){return X(i,gv.active.id)}})]})]})}),e}),[])}),[te,a,t,U,X]),ce=sb({variant:"Input",props:{label:"ID"}}),re=sb({variant:"Input",props:{label:"Name"}}),se=sb({variant:"Input",props:{label:"Username"}}),le=sb({variant:"Input",props:{label:"IP From Last Login"}}),oe=sb({variant:"Input",props:{label:"Email"}}),ue=sb({variant:"Date",props:{label:"Last Successful Login"}}),de=sb({variant:"MultiSelect",props:{label:"Status",data:i.a.useMemo((function(){return Object.keys(gv).map((function(e){return{id:e,name:gv[e].name}}),[])}),[])}}),me=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:re},{field:"username",title:"Username",filterCell:se},{field:"email",title:"Email",filterCell:oe},{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:de},{field:"last_successful_login",title:"Last Successful Login",width:"250px",view:"lastSuccessfulLoginDOM",filterCell:ue},{field:"ip_from_last_login",title:"IP From Last Login",view:"ipFromLastLoginDOM",width:"300px",filterCell:le},{field:"id",title:"ID",width:"250px",view:"idDOM",sortable:!1,filterCell:ce},{field:"actions",locked:!0,width:!0===U?"130px":"60px",sortable:!1,filterable:!1}]}),[ce,re,U,oe,se,de,le,ue]),be=i.a.useCallback((function(){if(null!=L){var e=L.userID,n=L.status;j(!0),c(cd(t,e,{status:n})).then((function(){V({severity:"success",message:"Status Successfully Updated"})})).catch((function(e){console.error(e),V({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return j(!1),g(!0),Q(),ne()})).catch((function(e){console.error(e),V({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return g(!1)}))}}),[ne,c,t,V,Q,L]),je=i.a.useCallback((function(e,n){n.length>0?V({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}}):(j(!0),c(function(e,t){return function(){return nd.post("/clients/".concat(e,"/users"),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,{email:e.email,name:e.fullName,username:e.username})).then((function(){j(!1),$(),V({severity:"success",message:"Customer Portal Account Successfully Created"})})).catch((function(e){console.error(e),V({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return g(!0),ne()})).catch((function(e){console.error(e),V({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return g(!1)})))}),[ne,c,t,V,$]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===U&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:Z,children:"Add User"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,isLoading:p,frontendSorting:!1,style:{minHeight:"400px",maxHeight:"700px"},skip:I.skip,take:I.take,sort:I.sort,filter:I.filter,data:ie,columns:me,total:te.get("totalRecords"),onDataStateChange:J})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:ae,disabled:!0===C,children:!0===C?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:Y,children:"Clear Filters and Sorting"})]})]}),null!=L&&Object(Ka.jsx)(vv,{isLoading:u,onSubmit:be,onCancel:Q,userID:L.userID,status:L.status}),!0===N&&Object(Ka.jsx)(yv,{clientID:t,isLoading:u,onSubmit:je,onCancel:$})]})}var wv=i.a.memo(kv);function Ev(e){var t=e.clientID,n=i.a.useMemo((function(){return"/clients/".concat(t,"/customer-portal-accounts")}),[t]);return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:n,exact:!0,children:Object(Ka.jsx)(wv,{clientID:t})}),Object(Ka.jsx)(d.c,{path:"".concat(n,"/:userID"),children:Object(Ka.jsx)(Cv,{clientID:t})})]})}var Iv=i.a.memo(Ev);function Dv(){var e=Object(d.j)().id,t=b(),n=Object(l.c)(),a=O("customer-portal"),c=Object(l.d)((function(e){return e.auth.getIn(["misc","customer_client_id"])})),r=i.a.useMemo((function(){return!0===a?c:e}),[e,c,a]),s=i.a.useCallback((function(e){n(Ui(e))}),[n]);i.a.useEffect((function(){return n(!1===a?Us(r):qs()).catch((function(e){s({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return n(ys())}}),[r,n,s,a]);var o=i.a.useMemo((function(){return!0===a?"/clients":"/clients/".concat(r)}),[r,a]),u=i.a.useMemo((function(){return[{url:o,key:"clients.info",title:"Info",path:o,component:Object(Ka.jsx)(cO,{clientID:r})},{key:"clients.wallets",title:"Wallets",url:"".concat(o,"/wallets/"),path:"".concat(o,"/wallets/*"),component:Object(Ka.jsx)(pO,{clientID:r}),visible:t.has("FRONTEND:CLIENT-WALLETS-PAGE-ACCESS")},{key:"clients.pricing",title:"Pricing",url:"".concat(o,"/pricing/"),path:"".concat(o,"/pricing/*"),component:Object(Ka.jsx)(cv,{clientID:r}),visible:t.has("FRONTEND:CLIENT-CLIENT-PRICING-PAGE-ACCESS")},{key:"clients.connections",title:"Connections",url:"".concat(o,"/connections/"),path:"".concat(o,"/connections/*"),component:Object(Ka.jsx)(bv,{clientID:r}),visible:t.has("FRONTEND:CLIENT-CONNECTIONS-PAGE-ACCESS")},{key:"clients.whitelist-sids",title:"SID Preregistration",url:"".concat(o,"/whitelist-sids/"),path:"".concat(o,"/whitelist-sids/*"),component:Object(Ka.jsx)(vO,{clientID:r}),visible:!1===a&&t.has("FRONTEND:CLIENT-CLIENT-WHITELIST-SIDS-PAGE-ACCESS")},{key:"clients.virtual-numbers",title:"2 Way Virtual Numbers",url:"".concat(o,"/virtual-numbers/"),path:"".concat(o,"/virtual-numbers/*"),component:Object(Ka.jsx)(yO,{clientID:r}),visible:!1===a&&t.has("FRONTEND:CLIENT-VIRTUAL-NUMBERS-PAGE-ACCESS")},{key:"clients.customer-portal-account",title:"Customer Portal Accounts",url:"".concat(o,"/customer-portal-accounts/"),path:"".concat(o,"/customer-portal-accounts/*"),component:Object(Ka.jsx)(Iv,{clientID:r}),visible:!1===a&&t.has("FRONTEND:CLIENT-CUSTOMER-PORTAL-ACCOUNTS-PAGE-ACCESS")}]}),[r,o,t,a]);return Object(Ka.jsx)(Rb,{tabs:u})}var Tv=i.a.memo(Dv);function Mv(e){var t=e.onCancel,n=e.onSuccess,a=Object(l.c)(),c=i.a.useState(),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState(!1),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useState(),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(!1),v=Object(o.a)(O,2),C=v[0],_=v[1],y=oj(s),E=oj(p),I=i.a.useCallback((function(e){a(Ui(e))}),[a]),D=Object(l.d)((function(e){return e.currency})),T=Object(l.d)((function(e){return e.field["client-fields"]})),M=Mj(T),N=i.a.useMemo((function(){return!0===C}),[C]);i.a.useEffect((function(){return _(!0),a(xi("client-fields")).then((function(){_(!1)})).catch((function(e){I({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return a(vi("client-fields"))}}),[a,I]),i.a.useEffect((function(){if(!0!==N){var e=Object.assign({name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""}},M);u(e)}}),[N,D,M]),i.a.useEffect((function(){var e={currency:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Currency"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},walletType:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Wallet Type"},valid:!0,value:null,data:Wg,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}}};e.currency.data=Object(x.a)(D.values()).map((function(e){return{id:e.get("currency"),name:e.get("currency")}})),e.walletType.value=e.walletType.data.find((function(e){return e.id===Hg.postpaid.id})),g(e)}),[D]);var R=i.a.useCallback((function(e){j(!0),u(e)}),[]),A=i.a.useCallback((function(e){g(e)}),[]),P=i.a.useCallback((function(){"function"===typeof t&&t()}),[t]),L=i.a.useCallback((function(){var e=y(),t=e.controls,i=e.invalidMessages,c=E(),r=c.controls,s=c.invalidMessages,l=[].concat(Object(x.a)(i),Object(x.a)(s));if(u(t),g(r),l.length>0)I({message:Object(Ka.jsx)(Mm,{messageList:l}),severity:"error",action:{label:"Dismiss"}});else{_(!0);var o,d=T.map((function(e){return{field_id:e.field_id,value:Nv(t[e.field_id])}}));a((o={client_fields:d,client_name:Nv(t.name)},function(){return jc.post("",o).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){return a(rl(e.data.client_id,{wallet_type:r.walletType.value.id,currency:Nv(r.currency)}))})).then((function(){j(!1),I({severity:"success",message:"Client Successfully Added"}),"function"===typeof n&&n()})).catch((function(e){I({severity:"error",message:e.message,action:{label:"Dismiss"}}),_(!1)}))}}),[a,I,T,n,y,E]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:b}),Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Add Client"})}),Object(Ka.jsx)(w.c,{children:!0===N?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Client Details"})}),Object(Ka.jsx)(lj,{controls:s,onControlsChange:R}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Wallet Details"})}),Object(Ka.jsx)(lj,{controls:p,onControlsChange:A})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:P,children:"Cancel"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:L,disabled:!0===N,children:"Save"})]})]})]})}function Nv(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var Rv=i.a.memo(Mv),Av={skip:0,take:20};function Pv(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(Av),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useContext(Tm),C=v.setTitle,y=v.setBreadcrumbs,E=v.setContentTitle,I=i.a.useMemo((function(){return e.has("API:CLIENT_DETAILS:WRITE")&&e.has("API:CLIENT_WALLET:WRITE")}),[e]),D=i.a.useCallback((function(e){n(Ui(e))}),[n]);i.a.useEffect((function(){return C("Clients"),E("Clients"),y([{name:"Clients"}]),function(){C(null),y([]),E(null)}}),[C,y,E]);var T=Object(l.d)((function(e){return{client:e.client}})).client,M=i.a.useCallback((function(){n(ys())}),[n]),N=i.a.useCallback((function(){return M(),n(Fs())}),[M,n]),R=i.a.useCallback((function(){return s(!0),N().then((function(){s(!1)})).catch((function(e){D({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[N,D]);i.a.useEffect((function(){return R(),function(){return M()}}),[M,R]);var A=i.a.useCallback((function(){f(Av)}),[]),P=i.a.useCallback((function(e){f(e.dataState)}),[]),L=i.a.useCallback((function(){O(!g)}),[g]),F=i.a.useCallback((function(){O(!1)}),[]),U=i.a.useCallback((function(){return R().then((function(){return O(!1)}))}),[R]),q=sb({variant:"Input",props:{label:"Name"}}),G=sb({variant:"Input",props:{label:"ID"}}),H=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:q},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:G},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"75px"}]}),[G,q]),B=i.a.useMemo((function(){return Object(x.a)(T.values()).map((function(e){var n=e.get("client_id");return{id:n,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})}),name:e.get("client_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("client_name")," Details"),"aria-label":"Edit ".concat(e.get("client_name")," Details"),onClick:function(){return t.push("/clients/".concat(e.get("client_id")))}})}}))}),[T,t]);return Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===g?6:12,children:Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===I&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:L,children:"Add Client"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{data:B,resizable:!0,groupable:!1,filterable:!0,isLoading:r,columns:H,frontendFiltering:!0,frontendPagination:!0,style:{height:"564px"},skip:j.skip,take:j.take,sort:j.sort,total:B.length,filter:j.filter,onDataStateChange:P})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:R,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:A,children:"Clear Filters and Sorting"})]})]})}),!0===g&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(Rv,{onCancel:F,onSuccess:U})})]})}var Lv=i.a.memo(Pv);function Fv(){var e=O("customer-portal"),t=i.a.useMemo((function(){return"/clients"}),[]);return Object(Ka.jsx)(d.e,{children:!0===e?Object(Ka.jsx)(d.c,{path:t,children:Object(Ka.jsx)(Tv,{})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(d.c,{path:"".concat(t,"/:id"),children:Object(Ka.jsx)(Tv,{})}),Object(Ka.jsx)(d.c,{path:t,exact:!0,children:Object(Ka.jsx)(Lv,{})})]})})}var Uv=i.a.memo(Fv),qv={skip:0,take:20,sort:[{dir:"desc",field:"active_from"}]};function Gv(){var e=Object(l.c)(),t=i.a.useState(!0),n=Object(o.a)(t,2),a=n[0],c=n[1],r=i.a.useState(0),u=Object(o.a)(r,2),d=u[0],b=u[1],j=uO(),f=i.a.useState(!0),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(!0),E=Object(o.a)(O,2),I=E[0],D=E[1],T=i.a.useState(!0),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useReducer((function(e,t){switch(t.type){case"UPDATE":return["client","route","skip","take","sort","audit_id","country","network","active_to","active_from"].reduce((function(e,n){var a=t.data[n];return null==a?e:Object.assign({},e,Object(C.a)({},n,a))}),e);default:return e}}),qv),P=Object(o.a)(A,2),L=P[0],F=P[1],U=i.a.useMemo((function(){return{skip:L.skip,take:L.take,sort:L.sort}}),[L]),q=i.a.useMemo((function(){return null!=L.active_from&&null!=L.active_to}),[L]),G=i.a.useContext(Tm),H=G.setTitle,B=G.setBreadcrumbs,V=G.setContentTitle,z=i.a.useMemo((function(){var e=new window.Date;return new window.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())}),[]),W=i.a.useMemo((function(){var e=new window.Date(z.getTime());return e.setDate(e.getDate()-15),e}),[z]),K=i.a.useMemo((function(){return[]}),[]),J=i.a.useMemo((function(){return[]}),[]),Y=i.a.useMemo((function(){return[]}),[]),Q=i.a.useMemo((function(){return[]}),[]),X=i.a.useMemo((function(){return[]}),[]),$=i.a.useState([]),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useState(W),ae=Object(o.a)(ne,2),ie=ae[0],ce=ae[1],re=i.a.useMemo((function(){return{required:!0}}),[]),se=i.a.useState([]),oe=Object(o.a)(se,2),ue=oe[0],de=oe[1],me=i.a.useState(z),be=Object(o.a)(me,2),je=be[0],fe=be[1],he=i.a.useMemo((function(){return{required:!0}}),[]),pe=i.a.useState([]),ge=Object(o.a)(pe,2),Oe=ge[0],ve=ge[1],xe=i.a.useState(K),Ce=Object(o.a)(xe,2),_e=Ce[0],ye=Ce[1],Se=i.a.useState([]),ke=Object(o.a)(Se,2),we=ke[0],Ee=ke[1],Ie=i.a.useState(J),De=Object(o.a)(Ie,2),Te=De[0],Me=De[1],Ne=i.a.useState([]),Re=Object(o.a)(Ne,2),Ae=Re[0],Pe=Re[1],Le=i.a.useState([]),Fe=Object(o.a)(Le,2),Ue=Fe[0],qe=Fe[1],Ge=i.a.useState(X),He=Object(o.a)(Ge,2),Be=He[0],Ve=He[1],ze=i.a.useState([]),We=Object(o.a)(ze,2),Ke=We[0],Je=We[1],Ye=i.a.useState([]),Qe=Object(o.a)(Ye,2),Xe=Qe[0],$e=Qe[1],Ze=i.a.useState(Q),et=Object(o.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState([]),it=Object(o.a)(at,2),ct=it[0],rt=it[1],st=i.a.useState([]),lt=Object(o.a)(st,2),ot=lt[0],ut=lt[1],dt=i.a.useState(Y),mt=Object(o.a)(dt,2),bt=mt[0],jt=mt[1],ft=i.a.useState([]),ht=Object(o.a)(ft,2),pt=ht[0],gt=ht[1],Ot=Nm(i.a.useMemo((function(){return[{label:"Start",value:ie,setErrors:te,validations:re},{label:"End",value:je,setErrors:de,validations:he}]}),[ie,te,re,je,de,he])),vt=i.a.useCallback((function(t){e(Ui(t))}),[e]);i.a.useEffect((function(){return H("Client Prices"),V("Client Prices"),B([{name:"Client Prices"}]),function(){H(null),B([]),V(null)}}),[H,B,V]);var xt=Object(l.d)((function(e){return{client:e.client,country:e.country,network:e.network,route:e.route,trafficStatuses:e.trafficStatuses,auditClientRate:e.auditClientRate}})),Ct=xt.client,_t=xt.country,yt=xt.network,St=xt.route,kt=xt.trafficStatuses,wt=xt.auditClientRate;i.a.useEffect((function(){Je(Object(x.a)(St.values()).map((function(e){return{id:e.get("id"),name:e.get("name")}})))}),[St]),i.a.useEffect((function(){null!=ie&&null!=je&&ie>je&&fe(ie)}),[ie,je]);var Et=i.a.useMemo((function(){return Object(x.a)(yt.values()).reduce((function(e,t){var n=t.get("country_id");return null==n||(null==e[n]&&(e[n]=[]),e[n].push({id:t.get("network_id"),name:t.get("network_name")})),e}),{})}),[yt]);i.a.useEffect((function(){var e=new m.e(pt.map((function(e){return new m.b(e)}))),t=new m.e(tt.reduce((function(e,t){return e.push.apply(e,Object(x.a)(Et[t.id].map((function(e){return new m.b(e)})))),e}),[]));e.equals(t)||gt(t.toJS())}),[tt,Et,pt]),i.a.useEffect((function(){var e=new m.e(Ae.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(Ct.values()).map((function(e){return new m.b({id:e.get("client_id"),name:e.get("client_name")})})));e.equals(t)||Pe(t.toJS())}),[Ct,Ae]),i.a.useEffect((function(){var e=new m.d(ct.map((function(e){return new m.b(e)}))),t=new m.d(Object(x.a)(_t.values()).reduce((function(e,t){return e.push(new m.b({id:t.get("country_id"),name:t.get("country_name")})),e}),[]).sort((function(e,t){return e.get("name")>t.get("name")?1:-1})));e.equals(t)||(rt(t.toJS()),R(!1))}),[_t,ct]);var It=i.a.useMemo((function(){if(!1!==q)return["audit_id","client","route","country","network"].reduce((function(e,t){var n=L[t];return 0===n.length||(e[t]=n.join(",")),e}),Object(v.a)({active_to:L.active_to.getTime(),active_from:L.active_from.getTime()},ni(U)))}),[L,U,q]),Dt=i.a.useCallback((function(){e(ys()),e(Lr())}),[e]),Tt=i.a.useCallback((function(){e({type:le})}),[e]),Mt=i.a.useCallback((function(){return Dt(),Promise.all([e(Fs()),e(Fr()),e(go())])}),[Dt,e]),Nt=i.a.useCallback((function(t){return Tt(),e(rc(t)).then((function(e){b(e.total_records)}))}),[Tt,e]),Rt=i.a.useCallback((function(){return g(!0),D(!0),Mt().catch((function(e){vt({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){g(!1),D(!1)}))}),[Mt,vt]),At=i.a.useCallback((function(){if(null!=It)return c(!0),Nt(It).catch((function(e){vt({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){c(!1)}))}),[Nt,It,vt]);i.a.useEffect((function(){return Rt(),function(){return Dt()}}),[Rt,Dt]),i.a.useEffect((function(){return At(),function(){return Tt()}}),[At,Tt]);var Pt=i.a.useCallback((function(){fe(z),ce(W),Ve(X),Me(J),jt(Y),ye(K),nt(Q)}),[X,J,z,Y,Q,K,W]),Lt=i.a.useCallback((function(){var e=Ot();e.length>0?vt({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):F({type:"UPDATE",data:{skip:0,active_to:je,active_from:ie,network:bt.map((function(e){return e.id})),country:tt.map((function(e){return e.id})),client:Te.map((function(e){return e.id})),route:Be.map((function(e){return e.id})),audit_id:_e.map((function(e){return e.name}))}})}),[je,ie,Be,Te,bt,_e,tt,vt,Ot]);i.a.useEffect((function(){!1===q&&Lt()}),[L,Lt,q]);var Ft=i.a.useCallback((function(e){F({type:"UPDATE",data:{skip:e.dataState.skip,take:e.dataState.take,sort:e.dataState.sort}})}),[]),Ut=i.a.useCallback((function(e){!0!==_e.some((function(t){var n=t.name;return e===n}))&&ye([].concat(Object(x.a)(_e),[{name:e}]))}),[_e]),qt=i.a.useCallback((function(e){if(!0!==Te.some((function(t){var n=t.id;return e===n}))){var t=Ct.get(e);null!=t&&Me([].concat(Object(x.a)(Te),[{id:e,name:t.get("client_name")}]))}}),[Ct,Te]),Gt=i.a.useCallback((function(e){if(!0!==Be.some((function(t){var n=t.id;return e===n}))){var t=St.get(e);null!=t&&Ve([].concat(Object(x.a)(Be),[{id:e,name:t.get("name")}]))}}),[St,Be]),Ht=i.a.useCallback((function(e){if(!0!==tt.some((function(t){var n=t.id;return e===n}))){var t=_t.get(e);null!=t&&nt([].concat(Object(x.a)(tt),[{id:e,name:t.get("country_name")}]))}}),[_t,tt]),Bt=i.a.useCallback((function(e){if(!0!==bt.some((function(t){var n=t.id;return e===n}))){var t=yt.get(e);null!=t&&jt([].concat(Object(x.a)(bt),[{id:e,name:t.get("network_name")}]))}}),[yt,bt]),Vt=i.a.useMemo((function(){return[{field:"client",title:"Client",width:"200px",sortable:!1,filterable:!1},{field:"route",title:"Route",width:"200px",sortable:!1,filterable:!1},{field:"country",title:"Country",width:"200px",sortable:!1,filterable:!1},{field:"network",title:"Network",width:"200px",sortable:!1,filterable:!1},{field:"charge_on_status",title:"Charge on Delivery",width:"200px",sortable:!1,filterable:!1},{field:"rate",title:"Rate",width:"200px",sortable:!1,filterable:!1},{field:"active",title:"Active",width:"100px",sortable:!1,filterable:!1},{field:"active_from",title:"Active From",width:"250px",view:"active_from_dom",filterable:!1},{field:"active_to",title:"Active To",width:"250px",sortable:!1,filterable:!1},{field:"audit_id",title:"Audit ID",width:"150px",sortable:!1,filterable:!1}]}),[]),zt=i.a.useMemo((function(){return[{field:"client",title:"Client"},{field:"route",title:"Route"},{field:"country",title:"Country"},{field:"network",title:"Network"},{field:"charge_on_status",title:"Charge on Delivery"},{field:"rate",title:"Rate"},{field:"active",title:"Active"},{field:"active_from",title:"Active From"},{field:"active_to",title:"Active To"},{field:"audit_id",title:"Audit ID"}]}),[]),Wt=i.a.useMemo((function(){return Object(x.a)(wt.values()).map((function(e){var t=e.get("audit_id");return{id:t,audit_id:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(Id,{value:t}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Audit ID in the filter criteria","aria-label":"Add Audit ID in the filter criteria",onClick:function(){return Ut(t)}})]}),charge_on_status:!0===e.get("charge_on_status_enabled")?e.get("charge_on_status").map((function(e,t){var n=kt.getIn([e,"description"]);return Object(Ka.jsx)(wd,{variant:"default",children:n},t)})):"-",active_from:e.get("active_from"),active_from_dom:Object(Ka.jsx)(Nd,{utc:e.get("active_from")}),active_to:null==e.get("active_to")?"Now":Object(Ka.jsx)(Nd,{utc:e.get("active_to")}),active:!0===e.get("isactive")?"Yes":"No",rate:e.get("price_currency")+" "+j(e.get("price_currency"),e.get("price")),client:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(s.b,{to:"/clients/".concat(e.getIn(["client","client_id"])),children:e.getIn(["client","client_name"])}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Client in the filter criteria","aria-label":"Add Client in the filter criteria",onClick:function(){return qt(e.getIn(["client","client_id"]))}})]}),route:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.getIn(["route","route_name"]),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Route in the filter criteria","aria-label":"Add Route in the filter criteria",onClick:function(){return Gt(e.getIn(["route","route_id"]))}})]}),country:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[_t.getIn([e.get("country_id"),"country_name"]),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Country in the filter criteria","aria-label":"Add Country in the filter criteria",onClick:function(){return Ht(e.get("country_id"))}})]}),network:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[yt.getIn([e.get("network_id"),"network_name"]),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Network in the filter criteria","aria-label":"Add Network in the filter criteria",onClick:function(){return Bt(e.get("network_id"))}})]})}}))}),[wt,_t,yt,kt,j,qt,Ut,Ht,Bt,Gt]),Kt=i.a.useMemo((function(){return(null==wt?[]:Object(x.a)(wt.values())).map((function(e){return{audit_id:e.get("audit_id"),client:e.getIn(["client","client_name"]),route:e.getIn(["route","route_name"]),country:_t.getIn([e.get("country_id"),"country_name"]),network:yt.getIn([e.get("network_id"),"network_name"]),charge_on_status:!1===e.get("charge_on_status_enabled")?"-":e.get("charge_on_status").map((function(e){return kt.getIn([e,"description"])})).join(", "),rate:e.get("price_currency")+" "+j(e.get("price_currency"),e.get("price")),active:!0===e.get("isactive")?"Yes":"No",active_from:new window.Date(e.get("active_from")).toString(),active_to:(null==e.get("active_to")?new window.Date:new window.Date(e.get("active_to"))).toString()}}))}),[_t,yt,j,wt,kt]);return Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Filter"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:4,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"Start",value:ie,errors:ee,onChange:ce,onErrorsChange:te,validations:re,max:null==je?"now":je})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"End",value:je,errors:ue,onChange:fe,onErrorsChange:de,validations:he,min:null==ie?void 0:ie,max:"now"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"audit-id-filter",children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Audit ID",allowCustom:!0,errors:Oe,value:_e,onChange:ye,onErrorsChange:ve})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"client-filter",children:!0===p?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50,"aria-label":"Loading Clients"}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Client",errors:we,value:Te,data:Ae,onChange:Me,onErrorsChange:Ee})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"route-filter",children:!0===I?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50,"aria-label":"Loading Routes"}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Route",errors:Ue,value:Be,data:Ke,onChange:Ve,onErrorsChange:qe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"country-filter",children:!0===N?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50,"aria-label":"Loading Countries"}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Country",errors:Xe,value:tt,data:ct,onChange:nt,onErrorsChange:$e})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Network",errors:ot,disabled:0===tt.length,value:bt,data:pt,onChange:jt,onErrorsChange:ut})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Pt,children:"Clear"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Lt,children:"Search"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{data:Wt,resizable:!0,groupable:!1,isLoading:a,columns:Vt,style:{height:"600px",marginTop:"20px"},skip:U.skip,take:U.take,sort:U.sort,total:d,filter:U.filter,exportData:Kt,exportColumns:zt,onDataStateChange:Ft})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:At,children:"Reload"})})]})})]})}var Hv=i.a.memo(Gv),Bv={skip:0,take:20,sort:[{dir:"desc",field:"active_from"}]};function Vv(){var e=Object(l.c)(),t=i.a.useState(!0),n=Object(o.a)(t,2),a=n[0],c=n[1],r=i.a.useState(0),u=Object(o.a)(r,2),d=u[0],b=u[1],j=uO(),f=i.a.useState(!0),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useReducer((function(e,t){switch(t.type){case"UPDATE":return["supplier","supplier_connection","skip","take","sort","audit_id","country","network","active_to","active_from"].reduce((function(e,n){var a=t.data[n];return null==a?e:Object.assign({},e,Object(C.a)({},n,a))}),e);default:return e}}),Bv),E=Object(o.a)(O,2),I=E[0],D=E[1],T=i.a.useMemo((function(){return{skip:I.skip,take:I.take,sort:I.sort}}),[I]),M=i.a.useMemo((function(){return null!=I.active_from&&null!=I.active_to}),[I]),N=i.a.useContext(Tm),R=N.setTitle,A=N.setBreadcrumbs,P=N.setContentTitle,L=i.a.useMemo((function(){var e=new window.Date;return new window.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())}),[]),F=i.a.useMemo((function(){var e=new window.Date(L.getTime());return e.setDate(e.getDate()-15),e}),[L]),U=i.a.useMemo((function(){return[]}),[]),q=i.a.useMemo((function(){return[]}),[]),G=i.a.useMemo((function(){return[]}),[]),H=i.a.useMemo((function(){return[]}),[]),B=i.a.useMemo((function(){return[]}),[]),V=i.a.useState([]),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(F),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useMemo((function(){return{required:!0}}),[]),Z=i.a.useState([]),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(L),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1],se=i.a.useMemo((function(){return{required:!0}}),[]),le=i.a.useState([]),oe=Object(o.a)(le,2),de=oe[0],me=oe[1],be=i.a.useState(U),je=Object(o.a)(be,2),fe=je[0],he=je[1],pe=i.a.useState([]),ge=Object(o.a)(pe,2),Oe=ge[0],ve=ge[1],xe=i.a.useState(q),Ce=Object(o.a)(xe,2),_e=Ce[0],ye=Ce[1],Se=i.a.useState([]),ke=Object(o.a)(Se,2),we=ke[0],Ee=ke[1],Ie=i.a.useState([]),De=Object(o.a)(Ie,2),Te=De[0],Me=De[1],Ne=i.a.useState(B),Re=Object(o.a)(Ne,2),Ae=Re[0],Pe=Re[1],Le=i.a.useState([]),Fe=Object(o.a)(Le,2),Ue=Fe[0],qe=Fe[1],Ge=i.a.useState([]),He=Object(o.a)(Ge,2),Be=He[0],Ve=He[1],ze=i.a.useState(H),We=Object(o.a)(ze,2),Ke=We[0],Je=We[1],Ye=i.a.useState([]),Qe=Object(o.a)(Ye,2),Xe=Qe[0],$e=Qe[1],Ze=i.a.useState([]),et=Object(o.a)(Ze,2),tt=et[0],nt=et[1],at=i.a.useState(G),it=Object(o.a)(at,2),ct=it[0],rt=it[1],st=i.a.useState([]),lt=Object(o.a)(st,2),ot=lt[0],ut=lt[1],dt=Nm(i.a.useMemo((function(){return[{label:"Start",value:Q,setErrors:K,validations:$},{label:"End",value:ce,setErrors:ne,validations:se}]}),[Q,K,$,ce,ne,se])),mt=i.a.useCallback((function(t){e(Ui(t))}),[e]);i.a.useEffect((function(){return R("Supplier Prices"),P("Supplier Prices"),A([{name:"Supplier Prices"}]),function(){R(null),A([]),P(null)}}),[R,A,P]);var bt=Object(l.d)((function(e){return{supplier:e.supplier,country:e.country,network:e.network,auditSupplierRate:e.auditSupplierRate,supplierConnection:e.supplierConnection}})),jt=bt.supplier,ft=bt.country,ht=bt.network,pt=bt.auditSupplierRate,gt=bt.supplierConnection,Ot=i.a.useMemo((function(){return Object(x.a)(ht.values()).reduce((function(e,t){var n=t.get("country_id");return null==n||(null==e[n]&&(e[n]=[]),e[n].push({id:t.get("network_id"),name:t.get("network_name")})),e}),{})}),[ht]);i.a.useEffect((function(){var e=new m.e(ot.map((function(e){return new m.b(e)}))),t=new m.e(Ke.reduce((function(e,t){return e.push.apply(e,Object(x.a)(Ot[t.id].map((function(e){return new m.b(e)})))),e}),[]));e.equals(t)||ut(t.toJS())}),[Ke,Ot,ot]),i.a.useEffect((function(){null!=Q&&null!=ce&&Q>ce&&re(Q)}),[Q,ce]),i.a.useEffect((function(){var e=new m.e(we.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(jt.values()).map((function(e){return new m.b({id:e.get("supplier_id"),name:e.get("supplier_name")})})));e.equals(t)||Ee(t.toJS())}),[jt,we]),i.a.useEffect((function(){var e=new m.e(Ue.map((function(e){return new m.b(e)}))),t=new m.e(_e.reduce((function(e,t){var n=jt.getIn([t.id,"connections"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=gt.get(t);null!=n&&e.push(new m.b({id:n.get("connection_id"),name:n.get("connection_name")}))})),e}),[]));e.equals(t)||qe(t.toJS())}),[jt,_e,gt,Ue]),i.a.useEffect((function(){var e=new m.d(Xe.map((function(e){return new m.b(e)}))),t=new m.d(Object(x.a)(ft.values()).reduce((function(e,t){return e.push(new m.b({id:t.get("country_id"),name:t.get("country_name")})),e}),[]).sort((function(e,t){return e.get("name")>t.get("name")?1:-1})));e.equals(t)||$e(t.toJS())}),[ft,Xe]);var vt=i.a.useMemo((function(){if(!1!==M)return["audit_id","supplier","supplier_connection","country","network"].reduce((function(e,t){var n=I[t];return 0===n.length||(e[t]=n.join(",")),e}),Object(v.a)({active_to:I.active_to.getTime(),active_from:I.active_from.getTime()},ni(T)))}),[I,T,M]),xt=i.a.useCallback((function(){e(ml()),e(Ac())}),[e]),Ct=i.a.useCallback((function(){e({type:ue})}),[e]),_t=i.a.useCallback((function(){return xt(),e(vl())}),[xt,e]);i.a.useEffect((function(){return Promise.all(_e.map((function(t){return e(yl(t.id))}))),function(){return Ac()}}),[e,_e]);var yt=i.a.useCallback((function(t){return Ct(),e(ic(t)).then((function(e){b(e.total_records)}))}),[Ct,e]),St=i.a.useCallback((function(){return g(!0),_t().catch((function(e){mt({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){g(!1)}))}),[_t,mt]),kt=i.a.useCallback((function(){if(null!=vt)return c(!0),yt(vt).catch((function(e){mt({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){c(!1)}))}),[yt,vt,mt]);i.a.useEffect((function(){return St(),function(){return xt()}}),[St,xt]),i.a.useEffect((function(){return kt(),function(){return Ct()}}),[kt,Ct]);var wt=i.a.useCallback((function(){re(L),Je(H),X(F),ye(q),Pe(B),rt(G),he(U)}),[q,L,G,H,U,F,B]),Et=i.a.useCallback((function(){var e=dt();e.length>0?mt({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):D({type:"UPDATE",data:{skip:0,active_to:ce,active_from:Q,network:ct.map((function(e){return e.id})),country:Ke.map((function(e){return e.id})),supplier:_e.map((function(e){return e.id})),supplier_connection:Ae.map((function(e){return e.id})),audit_id:fe.map((function(e){return e.name}))}})}),[ce,Q,ct,fe,Ke,_e,Ae,mt,dt]);i.a.useEffect((function(){!1===M&&Et()}),[I,Et,M]);var It=i.a.useCallback((function(e){D({type:"UPDATE",data:{skip:e.dataState.skip,take:e.dataState.take,sort:e.dataState.sort}})}),[]),Dt=i.a.useCallback((function(e){!0!==fe.some((function(t){var n=t.name;return e===n}))&&he([].concat(Object(x.a)(fe),[{name:e}]))}),[fe]),Tt=i.a.useCallback((function(e){if(!0!==_e.some((function(t){var n=t.id;return e===n}))){var t=jt.get(e);null!=t&&ye([].concat(Object(x.a)(_e),[{id:e,name:t.get("supplier_name")}]))}}),[jt,_e]),Mt=i.a.useCallback((function(e){if(!0!==Ae.some((function(t){var n=t.id;return e===n}))){var t=gt.get(e);null!=t&&Pe([].concat(Object(x.a)(Ae),[{id:e,name:t.get("connection_name")}]))}}),[gt,Ae]),Nt=i.a.useCallback((function(e){if(!0!==Ke.some((function(t){var n=t.id;return e===n}))){var t=ft.get(e);null!=t&&Je([].concat(Object(x.a)(Ke),[{id:e,name:t.get("country_name")}]))}}),[ft,Ke]),Rt=i.a.useCallback((function(e){if(!0!==ct.some((function(t){var n=t.id;return e===n}))){var t=ht.get(e);null!=t&&rt([].concat(Object(x.a)(ct),[{id:e,name:t.get("network_name")}]))}}),[ht,ct]),At=i.a.useMemo((function(){return[{field:"supplier",title:"Supplier",width:"200px",sortable:!1,filterable:!1},{field:"supplier_connection",title:"Supplier Connection",width:"200px",sortable:!1,filterable:!1},{field:"country",title:"Country",width:"200px",sortable:!1,filterable:!1},{field:"network",title:"Network",width:"200px",sortable:!1,filterable:!1},{field:"rate",title:"Rate",width:"200px",sortable:!1,filterable:!1},{field:"active",title:"Active",width:"100px",sortable:!1,filterable:!1},{field:"active_from",title:"Active From",width:"250px",view:"active_from_dom",filterable:!1},{field:"active_to",title:"Active To",width:"250px",sortable:!1,filterable:!1},{field:"audit_id",title:"Audit ID",width:"150px",sortable:!1,filterable:!1}]}),[]),Pt=i.a.useMemo((function(){return[{field:"audit_id",title:"Audit ID"},{field:"supplier",title:"Supplier"},{field:"supplier_connection",title:"Supplier Connection"},{field:"country",title:"Country"},{field:"network",title:"Network"},{field:"rate",title:"Rate"},{field:"active",title:"Active"},{field:"active_from",title:"Active From"},{field:"active_to",title:"Active To"}]}),[]),Lt=i.a.useMemo((function(){return Object(x.a)(pt.values()).map((function(e){var t=e.get("audit_id");return{id:t,audit_id:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(Id,{value:t}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Audit ID in the filter criteria","aria-label":"Add Audit ID in the filter criteria",onClick:function(){return Dt(t)}})]}),active_from:e.get("active_from"),active_from_dom:Object(Ka.jsx)(Nd,{utc:e.get("active_from")}),active_to:null==e.get("active_to")?"Now":Object(Ka.jsx)(Nd,{utc:e.get("active_to")}),active:!0===e.get("isactive")?"Yes":"No",rate:e.get("currency")+" "+j(e.get("currency"),e.get("cost")),supplier:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[Object(Ka.jsx)(s.b,{to:"/suppliers/".concat(e.getIn(["supplier","supplier_id"])),children:e.getIn(["supplier","supplier_name"])}),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Supplier in the filter criteria","aria-label":"Add Supplier in the filter criteria",onClick:function(){return Tt(e.getIn(["supplier","supplier_id"]))}})]}),supplier_connection:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.getIn(["supplier_connection","supplier_connection_name"]),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Supplier Connection in the filter criteria","aria-label":"Add Supplier Connection in the filter criteria",onClick:function(){return Mt(e.getIn(["supplier_connection","supplier_connection_id"]))}})]}),country:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[ft.getIn([e.get("country_id"),"country_name"]),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Country in the filter criteria","aria-label":"Add Country in the filter criteria",onClick:function(){return Nt(e.get("country_id"))}})]}),network:Object(Ka.jsxs)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:[ht.getIn([e.get("network_id"),"network_name"]),Object(Ka.jsx)(k.a,{look:"flat",icon:"filter",className:"Button--Faded",title:"Add Network in the filter criteria","aria-label":"Add Network in the filter criteria",onClick:function(){return Rt(e.get("network_id"))}})]})}}))}),[ft,ht,j,Rt,Dt,pt,Tt,Nt,Mt]),Ft=i.a.useMemo((function(){return(null==pt?[]:Object(x.a)(pt.values())).map((function(e){return{audit_id:e.get("audit_id"),supplier:e.getIn(["supplier","supplier_name"]),supplier_connection:e.getIn(["supplier_connection","supplier_connection_name"]),country:ft.getIn([e.get("country_id"),"country_name"]),network:ht.getIn([e.get("network_id"),"network_name"]),rate:e.get("currency")+" "+j(e.get("currency"),e.get("cost")),active:!0===e.get("isactive")?"Yes":"No",active_from:new window.Date(e.get("active_from")).toString(),active_to:(null==e.get("active_to")?new window.Date:new window.Date(e.get("active_to"))).toString()}}))}),[ft,ht,j,pt]);return Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Filter"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:4,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"Start",value:Q,errors:W,onChange:X,onErrorsChange:K,validations:$,max:null==ce?"now":ce})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"End",value:ce,errors:te,onChange:re,onErrorsChange:ne,validations:se,min:null==Q?void 0:Q,max:"now"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"audit-id-filter",children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Audit ID",allowCustom:!0,errors:de,value:fe,onChange:he,onErrorsChange:me})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"supplier-filter",children:!0===p?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50,"aria-label":"Loading Suppliers"}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier",errors:Oe,value:_e,data:we,onChange:ye,onErrorsChange:ve})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Connection",errors:Te,disabled:0===_e.length,value:Ae,data:Ue,onChange:Pe,onErrorsChange:Me})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,"data-testid":"country-filter",children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Country",errors:Be,value:Ke,data:Xe,onChange:Je,onErrorsChange:Ve})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Network",errors:tt,disabled:0===Ke.length,value:ct,data:ot,onChange:rt,onErrorsChange:nt})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:wt,children:"Clear"}),Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:Et,children:"Search"})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{data:Lt,resizable:!0,groupable:!1,isLoading:a,columns:At,style:{height:"600px",marginTop:"20px"},skip:T.skip,take:T.take,sort:T.sort,total:d,filter:T.filter,exportData:Ft,exportColumns:Pt,onDataStateChange:It})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:kt,children:"Reload"})})]})})]})}var zv=i.a.memo(Vv);var Wv={skip:0,take:20};function Kv(){var e=b(),t=Object(l.c)(),n=i.a.useState(null),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useState(),u=Object(o.a)(s,2),d=u[0],m=u[1],j=i.a.useState(!0),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),O=Object(o.a)(g,2),v=O[0],C=O[1],y=i.a.useState(!1),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState([]),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useContext(Tm),P=A.setTitle,L=A.setBreadcrumbs,F=A.setContentTitle,U=i.a.useMemo((function(){return e.has("API:QOS:WRITE")}),[e]),q=oj(d),G=i.a.useState(!1),H=Object(o.a)(G,2),B=H[0],V=H[1],z=i.a.useState(Wv),W=Object(o.a)(z,2),K=W[0],J=W[1];i.a.useEffect((function(){return P("Quality of Service"),F("Quality of Service"),L([{name:"Quality of Service"}]),function(){P(null),L([]),F(null)}}),[P,L,F]);var Y=i.a.useCallback((function(e){t(Ui(e))}),[t]),Q=Object(l.d)((function(e){return{qos:e.qos}})).qos;i.a.useEffect((function(){!1!==I&&m({name:{flexSize:6,elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},deliveryRate:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Delivery Rate"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""},lookBackMin:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Look Back (in Minutes)"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""},minTrafficVolume:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Traffic Volume"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""}})}),[I]),i.a.useEffect((function(){var e={name:{flexSize:6,elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},deliveryRate:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Delivery Rate"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""},lookBackMin:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Look Back (in Minutes)"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""},minTrafficVolume:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Traffic Volume"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""}};e.name.value=Q.getIn([c,"name"]),e.lookBackMin.value=Q.getIn([c,"lookBackMin"]),e.deliveryRate.value=Q.getIn([c,"deliveryRate"]),e.minTrafficVolume.value=Q.getIn([c,"minTrafficVolume"]),e.name.elementConfig.disabled=!1===U,e.lookBackMin.elementConfig.disabled=!1===U,e.deliveryRate.elementConfig.disabled=!1===U,e.minTrafficVolume.elementConfig.disabled=!1===U,m(e)}),[Q,c,U]);var X=i.a.useCallback((function(){t(lo())}),[t]),$=i.a.useCallback((function(){return X(),t(oo())}),[X,t]),Z=i.a.useCallback((function(){return p(!0),$().then((function(){p(!1)})).catch((function(e){Y({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[$,Y]);i.a.useEffect((function(){return Z(),function(){return X()}}),[X,Z]);var ee=i.a.useCallback((function(){J(Wv)}),[]),te=i.a.useCallback((function(e){J(e.dataState)}),[]),ne=i.a.useCallback((function(e){C(!0),m(e)}),[]),ae=i.a.useCallback((function(e){R([e]),V(!0)}),[]),ie=i.a.useCallback((function(){var e;p(!0),t((e=N[0],function(){return io.delete("/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){Y({severity:"success",message:"Quality of Service Successfully Deleted"})})).catch((function(e){Y({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return $()})).then((function(){p(!1),R([]),V(!1)}))}),[t,$,Y,N]),ce=i.a.useCallback((function(){R([]),V(!1)}),[]),re=i.a.useCallback((function(){r(null),D(!0)}),[]),se=i.a.useCallback((function(e){r(e),D(!0)}),[]),le=i.a.useCallback((function(){r(null),D(!1)}),[]),oe=i.a.useCallback((function(){var e=q(),n=e.invalidMessages,a=e.controls;if(m(a),n.length>0)Y({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}});else{p(!0);var i,s=null==c;t(!0===s?(i={name:Jv(a.name),lookBackMin:Jv(a.lookBackMin),deliveryRate:Jv(a.deliveryRate),minTrafficVolume:Jv(a.minTrafficVolume)},function(){return io.post("",i).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}):function(e,t){return function(){return io.put("/".concat(e),t).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(c,{name:Jv(a.name),lookBackMin:Jv(a.lookBackMin),deliveryRate:Jv(a.deliveryRate),minTrafficVolume:Jv(a.minTrafficVolume)})).then((function(){return Y({severity:"success",message:!0===s?"Quality of Service Successfully Added":"Quality of Service Successfully Edited"}),C(!1),t(oo())})).catch((function(e){Y({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){r(null),p(!1),D(!1)}))}}),[t,Y,q,c]),ue=sb({variant:"Input",props:{label:"Name"}}),de=sb({variant:"Numeric",props:{min:0,label:"Delivery Rate"}}),me=sb({variant:"Numeric",props:{min:0,label:"Look Back"}}),be=sb({variant:"Numeric",props:{min:0,label:"Volume"}}),je=sb({variant:"Input",props:{label:"ID"}}),fe=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:ue},{field:"deliveryRate",title:"Delivery Rate",filterCell:de},{field:"lookBackMin",title:"Look Back",filterCell:me},{field:"minTrafficVolume",title:"Volume",filterCell:be},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:je},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[je,ue,be,me,de]),he=i.a.useMemo((function(){return Object(x.a)(Q.values()).map((function(e){var t=e.get("id");return{id:e.get("id"),idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:t})}),name:e.get("name"),deleted:1===e.get("deleted"),lookBackMin:e.get("lookBackMin"),deliveryRate:e.get("deliveryRate"),minTrafficVolume:e.get("minTrafficVolume"),deletedDOM:Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)("input",{disabled:!0,type:"checkbox",className:"k-checkbox",defaultChecked:e.get("deleted")}),Object(Ka.jsx)("label",{className:"k-checkbox-label"})]}),actions:1!==e.get("deleted")&&Object(Ka.jsxs)(i.a.Fragment,{children:[U&&Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("name")," QoS"),"aria-label":"Edit ".concat(e.get("name")," QoS"),onClick:function(){return se(e.get("id"))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable ".concat(e.get("name")," QoS"),"aria-label":"Disable ".concat(e.get("name")," QoS"),style:{display:"none"},onClick:function(){ae(e.get("id"))}})]})}}))}),[Q,se,ae,U]),pe=i.a.useMemo((function(){return N.map((function(e){return Object(Ka.jsxs)("li",{children:[Q.getIn([e,"name"]),"(ID: ",e,")"]},e)}))}),[Q,N]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:v}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===I?6:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[(!1===I||null!=c)&&!0===U&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){return re()},children:"Add Quality of Service"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:h,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:K.skip,take:K.take,sort:K.sort,filter:K.filter,data:he,columns:fe,onDataStateChange:te})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Z,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ee,children:"Clear Filters and Sorting"})]})]})}),!0===I&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:null===c?"Add Quality of Service":"Update ".concat(Q.getIn([c,"name"]))})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:d,onControlsChange:ne})})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:le,children:"Cancel"}),U&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,disabled:!0===h,onClick:oe,children:"Save"})]})]})})]}),!0===B&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:ce,children:["Are you sure you want to delete the following Quality of Services?",Object(Ka.jsx)("ul",{children:pe}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ie,children:"Delete"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ce,children:"Cancel"})]})]})]})}function Jv(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var Yv=i.a.memo(Kv);function Qv(e){var t=e.scheduleID,n=Object(l.d)((function(e){return{network:e.network,country:e.country,routeRuleSchedule:e.routeRuleSchedule}})),a=n.network,c=n.country,r=n.routeRuleSchedule,o=i.a.useMemo((function(){var e=r.getIn([t,"action"]);if(null!=e){var n=Dp[e];return Object(Ka.jsx)(wd,{variant:n.variant,children:n.name})}}),[t,r]),u=i.a.useMemo((function(){var e=r.getIn([t,"status"]);if(null!=e){var n=Tp[e];return Object(Ka.jsxs)(wd,{variant:n.variant,children:[Object(Ka.jsx)("i",{className:n.icon})," ",Object(Ka.jsx)("span",{children:n.name})]})}}),[t,r]);return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"Country",value:c.getIn([a.getIn([r.getIn([t,"network_id"]),"country_id"]),"country_name"])})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"Network",value:a.getIn([r.getIn([t,"network_id"]),"network_name"])})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"Action",value:o})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"Status",value:u})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"Route",value:Object(Ka.jsx)(s.b,{to:"/routes/".concat(r.getIn([t,"route","id"])),children:r.getIn([t,"route","name"])})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"User",value:Object(Ka.jsx)(s.b,{to:"/users/".concat(r.getIn([t,"user","id"])),children:r.getIn([t,"user","name"])})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"Creation Date",value:Object(Ka.jsx)(Nd,{utc:r.getIn([t,"creation_date"])})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,lg:4,children:Object(Ka.jsx)(cj,{label:"Scheduled Date",value:Object(Ka.jsx)(Nd,{utc:r.getIn([t,"scheduled_date"])})})})]})}var Xv=i.a.memo(Qv);function $v(e){var t=e.scheduleID,n=Object(l.d)((function(e){return{routeRuleSchedule:e.routeRuleSchedule}})).routeRuleSchedule,a=i.a.useMemo((function(){var e=n.getIn([t,"details"]);if(null==e)return{};var a=[e.get("old"),e.get("new")].map((function(e){return null==e||null==e.conditions?[]:e.conditions.categories})),i=Object(o.a)(a,2),c=i[0],r=void 0===c?[]:c,s=i[1],l=[r,void 0===s?[]:s].map((function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})})),u=Object(o.a)(l,2),d=u[0],m=u[1];return Object(x.a)(new window.Set([].concat(Object(x.a)(Object.keys(d)),Object(x.a)(Object.keys(m))))).reduce((function(e,t){var n=d[t],a=m[t];return null!=n&&null!=a?e.unmodified.push(a):(null!=a&&e.added.push(a),null!=n&&e.removed.push(n)),e}),{added:[],removed:[],unmodified:[]})}),[t,n]),c=a.added,r=void 0===c?[]:c,s=a.removed,u=void 0===s?[]:s,d=a.unmodified,m=void 0===d?[]:d,b=i.a.useMemo((function(){return[{conditions:r,action:Object(Ka.jsx)(wd,{variant:Dp.create.variant,children:Dp.create.name})},{conditions:u,action:Object(Ka.jsx)(wd,{variant:Dp.delete.variant,children:Dp.delete.name})},{conditions:m,action:Object(Ka.jsx)("span",{className:"Text--Faded",children:"No Change"})}].reduce((function(e,t){var n=t.conditions,a=t.action;return n.forEach((function(t){e.push({id:Object(Ka.jsx)(Id,{value:t.id}),name:t.name,action:a})})),e}),[])}),[r,u,m]),j=i.a.useMemo((function(){return[{field:"id",title:"ID",width:"100px",sortable:!1,filterable:!1},{field:"name",title:"Name",width:"fill",sortable:!1,filterable:!1},{field:"action",title:"Action",width:"100px",sortable:!1,filterable:!1}]}),[]);return Object(Ka.jsx)(_.a,{p:4,children:Object(Ka.jsx)(Dm,{data:b,pageable:!1,columns:j,style:{minHeight:"200px",maxHeight:"700px"}})})}var Zv=i.a.memo($v);function ex(e){var t=e.scheduleID,n=Object(l.d)((function(e){return{routeRuleSchedule:e.routeRuleSchedule}})).routeRuleSchedule,a=i.a.useMemo((function(){var e=n.getIn([t,"details"]);if(null==e)return{};var a=[e.get("old"),e.get("new")].map((function(e){return null==e||null==e.conditions||null==e.conditions.timebased?[]:e.conditions.timebased.map((function(e){var t=li(e.to_hours,e.to_minutes),n=li(e.from_hours,e.from_minutes),a=[[t.hours,t.minutes],[n.hours,n.minutes]].map((function(e){return e.map((function(e){return String(e).padStart(2,"0")})).join(":")})),i=Object(o.a)(a,2),c=i[0],r=i[1],s="".concat(r," - ").concat(c);return{name:s,id:s}}))})),i=Object(o.a)(a,2),c=[i[0],i[1]].map((function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})})),r=Object(o.a)(c,2),s=r[0],l=r[1];return Object(x.a)(new window.Set([].concat(Object(x.a)(Object.keys(s)),Object(x.a)(Object.keys(l))))).reduce((function(e,t){var n=s[t],a=l[t];return null!=n&&null!=a?e.unmodified.push(a):(null!=a&&e.added.push(a),null!=n&&e.removed.push(n)),e}),{added:[],removed:[],unmodified:[]})}),[t,n]),c=a.added,r=void 0===c?[]:c,s=a.removed,u=void 0===s?[]:s,d=a.unmodified,m=void 0===d?[]:d,b=i.a.useMemo((function(){return[{conditions:r,action:Object(Ka.jsx)(wd,{variant:Dp.create.variant,children:Dp.create.name})},{conditions:u,action:Object(Ka.jsx)(wd,{variant:Dp.delete.variant,children:Dp.delete.name})},{conditions:m,action:Object(Ka.jsx)("span",{className:"Text--Faded",children:"No Change"})}].reduce((function(e,t){var n=t.conditions,a=t.action;return n.forEach((function(t){e.push({name:t.name,action:a})})),e}),[])}),[r,u,m]),j=i.a.useMemo((function(){return[{field:"name",title:"Time Range",width:"fill",sortable:!1,filterable:!1},{field:"action",title:"Action",width:"100px",sortable:!1,filterable:!1}]}),[]);return Object(Ka.jsx)(_.a,{p:4,children:Object(Ka.jsx)(Dm,{data:b,pageable:!1,columns:j,style:{minHeight:"200px",maxHeight:"700px"}})})}var tx=i.a.memo(ex);function nx(e){var t=e.scheduleID,n=Object(l.d)((function(e){return{routeRuleSchedule:e.routeRuleSchedule}})).routeRuleSchedule,a=i.a.useMemo((function(){var e=n.getIn([t,"details"]);if(null==e)return{};var a=[e.get("old"),e.get("new")].map((function(e){return null==e||null==e.conditions?[]:e.conditions.commitments})),i=Object(o.a)(a,2),c=i[0],r=void 0===c?[]:c,s=i[1],l=[r,void 0===s?[]:s].map((function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})})),u=Object(o.a)(l,2),d=u[0],m=u[1];return Object(x.a)(new window.Set([].concat(Object(x.a)(Object.keys(d)),Object(x.a)(Object.keys(m))))).reduce((function(e,t){var n=d[t],a=m[t];return null!=n&&null!=a?e.unmodified.push(a):(null!=a&&e.added.push(a),null!=n&&e.removed.push(n)),e}),{added:[],removed:[],unmodified:[]})}),[t,n]),c=a.added,r=void 0===c?[]:c,s=a.removed,u=void 0===s?[]:s,d=a.unmodified,m=void 0===d?[]:d,b=i.a.useMemo((function(){return[{conditions:r,action:Object(Ka.jsx)(wd,{variant:Dp.create.variant,children:Dp.create.name})},{conditions:u,action:Object(Ka.jsx)(wd,{variant:Dp.delete.variant,children:Dp.delete.name})},{conditions:m,action:Object(Ka.jsx)("span",{className:"Text--Faded",children:"No Change"})}].reduce((function(e,t){var n=t.conditions,a=t.action;return n.forEach((function(t){e.push({id:Object(Ka.jsx)(Id,{value:t.id}),name:t.name,action:a})})),e}),[])}),[r,u,m]),j=i.a.useMemo((function(){return[{field:"id",title:"ID",width:"100px",sortable:!1,filterable:!1},{field:"name",title:"Name",width:"fill",sortable:!1,filterable:!1},{field:"action",title:"Action",width:"100px",sortable:!1,filterable:!1}]}),[]);return Object(Ka.jsx)(_.a,{p:4,children:Object(Ka.jsx)(Dm,{data:b,pageable:!1,columns:j,style:{minHeight:"200px",maxHeight:"700px"}})})}var ax=i.a.memo(nx);function ix(e){var t=e.scheduleID,n=Object(l.d)((function(e){return{routeRuleSchedule:e.routeRuleSchedule}})).routeRuleSchedule,a=i.a.useMemo((function(){return n.getIn([t,"action"])===Dp.create.id}),[t,n]),c=i.a.useMemo((function(){var e=n.getIn([t,"details"]);if(null==e)return{};var a=[e.get("old"),e.get("new")].map((function(e){return null==e||null==e.conditions||null==e.conditions.quality_of_service?null:e.conditions.quality_of_service[0]})),i=Object(o.a)(a,2),c=i[0],r=i[1];return{oldConnection:null==c?null:c.connection,newConnection:null==r?null:r.connection,oldQualityOfService:null==c?null:c.quality_of_service,newQualityOfService:null==r?null:r.quality_of_service}}),[t,n]),r=c.oldConnection,s=c.newConnection,u=c.oldQualityOfService,d=c.newQualityOfService,m=i.a.useMemo((function(){return null==u&&null==d?Object(Ka.jsx)("i",{className:"Text--Faded",children:"Not Specified"}):null!=u&&null==d?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:"Not Specified"})," ",Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:u.name})]})]}):null==u&&null!=d?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:d.name})," ",!1===a&&Object(Ka.jsx)("i",{className:"Text--Faded",children:"wasn't specified"})]}):Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:d.name})," ",d.name!==u.name&&Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:u.name})]})]})}),[a,u,d]),b=i.a.useMemo((function(){return null==r&&null==s?Object(Ka.jsx)("i",{className:"Text--Faded",children:"Not Specified"}):null!=r&&null==s?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:"Not Specified"})," ",Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:r.name})]})]}):null==r&&null!=s?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:s.name})," ",!1===a&&Object(Ka.jsx)("i",{className:"Text--Faded",children:"wasn't specified"})]}):Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:s.name})," ",s.name!==r.name&&Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:r.name})]})]})}),[a,r,s]);return Object(Ka.jsx)(_.a,{p:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(cj,{label:"Quality of Service",value:m})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(cj,{label:"Connection",value:b})})]})})}var cx=i.a.memo(ix);function rx(e){var t=e.scheduleID;return Object(Ka.jsxs)(w.g,{width:"100%",children:[Object(Ka.jsx)(w.h,{title:"Quality of Service",expanded:!0,children:Object(Ka.jsx)(cx,{scheduleID:t})}),Object(Ka.jsx)(w.h,{title:"Categories",expanded:!0,children:Object(Ka.jsx)(Zv,{scheduleID:t})}),Object(Ka.jsx)(w.h,{title:"Commitments",expanded:!0,children:Object(Ka.jsx)(ax,{scheduleID:t})}),Object(Ka.jsx)(w.h,{title:"Time-Based",expanded:!0,children:Object(Ka.jsx)(tx,{scheduleID:t})})]})}var sx=i.a.memo(rx);function lx(e){var t=e.scheduleID,n=Object(l.d)((function(e){return{routeRuleSchedule:e.routeRuleSchedule}})).routeRuleSchedule,a=i.a.useMemo((function(){return n.getIn([t,"action"])===Dp.create.id}),[t,n]),c=i.a.useMemo((function(){var e=n.getIn([t,"details"]);if(null==e)return{};var a=e.get("old"),i=e.get("new");return{oldLCR:null==a?null:a.lcr,newLCR:null==i?null:i.lcr,oldType:null==a?null:a.type,newType:null==i?null:i.type}}),[t,n]),r=c.oldLCR,s=c.newLCR,o=c.oldType,u=c.newType,d=i.a.useMemo((function(){return null==o&&null==u?Object(Ka.jsx)("i",{className:"Text--Faded",children:"Not Specified"}):null!=o&&null==u?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:"Not Specified"})," ",Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:o})]})]}):null==o&&null!=u?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:u})," ",!1===a&&Object(Ka.jsx)("i",{className:"Text--Faded",children:"wasn't specified"})]}):Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:u})," ",u!==o&&Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:o})]})]})}),[o,u,a]),m=i.a.useMemo((function(){return null==r&&null==s?Object(Ka.jsx)("i",{className:"Text--Faded",children:"Not Specified"}):null!=r&&null==s?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:"Not Specified"})," ",Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:r.name})]})]}):null==r&&null!=s?Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:s.name})," ",!1===a&&Object(Ka.jsx)("i",{className:"Text--Faded",children:"wasn't specified"})]}):Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:s.name})," ",s.name!==r.name&&Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:r.name})]})]})}),[r,s,a]);return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(cj,{label:"Type",value:d})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(Ka.jsx)(cj,{label:"LCR",value:m})})]})}var ox=i.a.memo(lx);function ux(e){var t=e.scheduleID,n=Object(l.d)((function(e){return{routeRuleSchedule:e.routeRuleSchedule}})).routeRuleSchedule,a=i.a.useMemo((function(){var e=n.getIn([t,"details"]);if(null==e)return{};var a=[e.get("old"),e.get("new")].map((function(e){return null==e?[]:e.connections})),i=Object(o.a)(a,2),c=i[0],r=void 0===c?[]:c,s=i[1],l=[r,void 0===s?[]:s].map((function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})})),u=Object(o.a)(l,2),d=u[0],m=u[1];return Object(x.a)(new window.Set([].concat(Object(x.a)(Object.keys(d)),Object(x.a)(Object.keys(m))))).reduce((function(e,t){var n=d[t],a=m[t];null!=n&&null!=a?!0===["ratio"].some((function(e){return n[e]!==a[e]}))?e.updated.push(Object.assign({},a,{oldRatio:n.ratio})):e.unmodified.push(a):(null==n&&e.added.push(a),null==a&&e.removed.push(n));return e}),{added:[],removed:[],updated:[],unmodified:[]})}),[t,n]),c=a.added,r=void 0===c?[]:c,s=a.removed,u=void 0===s?[]:s,d=a.updated,m=void 0===d?[]:d,b=a.unmodified,j=void 0===b?[]:b,f=i.a.useMemo((function(){return[{conditions:r,action:Object(Ka.jsx)(wd,{variant:Dp.create.variant,children:Dp.create.name})},{conditions:u,action:Object(Ka.jsx)(wd,{variant:Dp.delete.variant,children:Dp.delete.name})},{conditions:m,action:Object(Ka.jsx)(wd,{variant:Dp.update.variant,children:Dp.update.name})},{conditions:j,action:Object(Ka.jsx)("span",{className:"Text--Faded",children:"No Change"})}].reduce((function(e,t){var n=t.conditions,a=t.action;return n.forEach((function(t){e.push({id:Object(Ka.jsx)(Id,{value:t.id}),action:a,name:t.name,ratio:null==t.oldRatio?t.ratio:Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("span",{children:t.ratio})," ",Object(Ka.jsxs)("i",{className:"Text--Faded",children:["was ",Object(Ka.jsx)("strong",{children:t.oldRatio})]})]})})})),e}),[])}),[r,u,m,j]),h=i.a.useMemo((function(){return[{field:"id",title:"ID",width:"100px",sortable:!1,filterable:!1},{field:"name",title:"Name",width:"fill",sortable:!1,filterable:!1},{field:"ratio",title:"Ratio",width:"fill",sortable:!1,filterable:!1},{field:"action",title:"Action",width:"100px",sortable:!1,filterable:!1}]}),[]);return Object(Ka.jsx)(Dm,{data:f,pageable:!1,columns:h,style:{minHeight:"200px",maxHeight:"700px"}})}var dx=i.a.memo(ux);function mx(e){var t=e.scheduleID,n=e.hasNextRecord,a=e.hasPreviousRecord,c=e.onNextRecord,r=e.onPreviousRecord,s=b(),u=Object(l.c)(),d=i.a.useState(!1),m=Object(o.a)(d,2),j=m[0],f=m[1],h=bm(c),p=bm(r),g=i.a.useState(!1),O=Object(o.a)(g,2),v=O[0],x=O[1],C=i.a.useContext(Tm),y=C.setTitle,E=C.setBreadcrumbs,I=C.setContentTitle,D=i.a.useCallback((function(e){u(Ui(e))}),[u]),T=Object(l.d)((function(e){return{route:e.route,network:e.network,country:e.country,routeRuleSchedule:e.routeRuleSchedule}})),M=T.network,N=T.country,R=T.routeRuleSchedule,A=i.a.useMemo((function(){return s.has("API:ROUTE_MANAGEMENT:WRITE")&&R.getIn([t,"status"])===Tp.pending.id}),[s,t,R]),P=i.a.useMemo((function(){return!0===n||!0===a||!0===A}),[n,a,A]);i.a.useEffect((function(){var e=R.get(t);return null==e||(y(e.getIn(["route","name"])),I(e.getIn(["route","name"])),E([{name:"Routes",link:"/routes"},{name:e.getIn(["route","name"]),link:"/routes/".concat(e.getIn(["route","id"]))},{name:N.getIn([M.getIn([e.get("network_id"),"country_id"]),"country_name"])},{name:M.getIn([e.get("network_id"),"network_name"])},{name:"Schedule Changes"}])),function(){y(null),E([]),I(null)}}),[M,N,y,t,E,I,R]);var L=i.a.useCallback((function(){u(Yu()),u(function(e){return{data:{id:e},type:aa}}(t))}),[u,t]),F=i.a.useCallback((function(){return L(),Promise.all([u((e=t,function(t){return Ku.get("/".concat(e)).then((function(e){return t(Ju(e.data)),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})),u(Zu(t))]).catch((function(e){D({severity:"error",message:e.message,action:{label:"Dismiss"}})}));var e}),[u,t,D,L]);i.a.useEffect((function(){return f(!0),F().then((function(){return f(!1)})),function(){return L()}}),[L,F]);var U=i.a.useCallback((function(){x(!0)}),[]),q=i.a.useCallback((function(){x(!1)}),[]),G=i.a.useCallback((function(){f(!0),x(!1),u(ed(t)).then((function(){D({severity:"success",message:"Scheduled Change Successfully Cancelled"})})).catch((function(e){D({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return F()})).catch((function(e){D({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){f(!1)}))}),[u,D,t,F]),H=i.a.useMemo((function(){if(!1===v)return null;var e=R.get(t);return null==e?null:{scheduledDate:e.get("scheduled_date"),action:Dp[e.get("action")]}}),[t,R,v]);return!0===j?Object(Ka.jsx)(Wm,{height:"630px",className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===P&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(_.a,{display:"flex",justifyContent:"space-between",children:[Object(Ka.jsx)(_.a,{children:!0===A&&Object(Ka.jsx)(k.a,{primary:!0,onClick:U,children:"Cancel Schedule"})}),Object(Ka.jsxs)(_.a,{display:"flex",children:[!0===a&&Object(Ka.jsx)(_.a,{ml:2,children:Object(Ka.jsx)(k.a,{onClick:p,children:"Previous"})}),!0===n&&Object(Ka.jsx)(_.a,{ml:2,children:Object(Ka.jsx)(k.a,{onClick:h,children:"Next"})})]})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Xv,{scheduleID:t})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Route Rule Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(ox,{scheduleID:t})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Route Rule Connections"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(dx,{scheduleID:t})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Route Rule Conditions"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(sx,{scheduleID:t})})]})})]}),null!=H&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:q,children:["Are you sure you want to cancel the",Object(Ka.jsx)(wd,{variant:H.action.variant,children:H.action.name}),"changes scheduled on"," ",Object(Ka.jsx)("strong",{children:Object(Ka.jsx)(Nd,{utc:H.scheduledDate})})," ","?",Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:G,children:"Cancel Schedule"}),Object(Ka.jsx)(k.a,{onClick:q,children:"Close"})]})]})]})}var bx=i.a.memo(mx);function jx(){var e=Object(d.j)().scheduleID,t=Object(d.h)(),n=Object(l.c)(),a=Object(d.i)(),c=null==e,r=i.a.useState(),s=Object(o.a)(r,2),u=s[0],m=s[1],b=i.a.useState(0),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useCallback((function(e){n(Ui(e))}),[n]),g=i.a.useMemo((function(){return!1===c?null:Ia.a.parse(a.search.substring(1))}),[a,c]),O=i.a.useMemo((function(){return null==g?null:Math.max(0,Number(null==g.offset?0:g.offset))}),[g]),v=i.a.useMemo((function(){if(null==g)return null;var e=Object.assign({},g);return e.size=1,e.page=O,delete e.offset,e}),[O,g]),x=i.a.useMemo((function(){return null!=O&&O+1<f}),[f,O]),C=i.a.useMemo((function(){return null!=O&&O>0}),[O]),_=i.a.useCallback((function(e){var n=Object.assign({},g);n.offset=e,t.push("".concat(a.pathname,"?").concat(Ia.a.stringify(n)))}),[t,a,g]),y=i.a.useCallback((function(){m(null),!1!==x&&_(O+1)}),[_,x,O]),S=i.a.useCallback((function(){m(null),!1!==C&&_(O-1)}),[_,C,O]);return i.a.useEffect((function(){if(!1!==c)return n($u(v)).then((function(e){h(e.total_records);var n=Object(o.a)(e.data,1)[0];null!=n?m(n.id):f>0&&f!==O+1?_(f-1):t.push("/routes")})).catch((function(e){p({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return n(Yu())};m(e)}),[O,t,_,n,p,c,f,e,v]),null==u?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(bx,{scheduleID:u,hasNextRecord:x,hasPreviousRecord:C,onNextRecord:!1===x?null:y,onPreviousRecord:!1===C?null:S})}var fx=i.a.memo(jx);function hx(){var e=b(),t=Object(d.j)().lcrID,n=Object(d.h)(),a=Object(l.c)(),c=i.a.useState(),r=Object(o.a)(c,2),s=r[0],u=r[1],m=i.a.useState(!0),j=Object(o.a)(m,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState([]),_=Object(o.a)(C,2),y=_[0],E=_[1],I=i.a.useState([]),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useContext(Tm),R=N.setTitle,A=N.setBreadcrumbs,P=N.setContentTitle,L=i.a.useMemo((function(){return e.has("API:LCR:WRITE")}),[e]),F=oj(s),U="new"===t,q=Object(l.d)((function(e){var n=e.qos,a=e.lcr;return{qos:n,supplierCommitment:e.supplierCommitment,supplierConnection:e.supplierConnection,lcr:a.get(t)}})),G=q.qos,H=q.lcr,B=q.supplierCommitment,V=q.supplierConnection,z=i.a.useState({skip:0,take:20}),W=Object(o.a)(z,2),K=W[0],J=W[1],Y=i.a.useState({skip:0,take:20}),Q=Object(o.a)(Y,2),X=Q[0],$=Q[1],Z=i.a.useState({skip:0,take:20}),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState({skip:0,take:20}),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1];i.a.useEffect((function(){var e=null==H?null:H.get("name");return!0===U?(R("Least Cost Routing Creation"),P("Least Cost Routing Creation")):null==e?(R("Least Cost Routing Modification"),P("Least Cost Routing Modification")):(R("".concat(e," Least Cost Routing Modification")),P("".concat(e," Least Cost Routing Modification"))),A([{link:"/least-cost-routing",name:"Least Cost Routing"},{name:!0===U?"Creation":e}]),function(){R(null),A([]),P(null)}}),[U,H,R,P,A]);var se=i.a.useCallback((function(e){a(Ui(e))}),[a]);i.a.useEffect((function(){var e,n=[a(oo()),a(er()),a(Bc({not_connection_type:"blocked"}))];return!1===U&&n.push(a((e=t,function(t){return kc.get("/".concat(e)).then((function(e){t(tr(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))),Promise.all(n).then((function(){if(!0!==U)return Promise.all([a(lr(t)),a(or(t))])})).then((function(){h(!1)})).catch((function(e){se({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){a(nr()),a(lo()),a($c()),a(Ac())}}),[a,se,t,U]),i.a.useEffect((function(){var e={name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},qos:{flexSize:6,elementType:"combo",clearButton:!0,elementConfig:{allowCustom:!1,placeholder:"Quality of Service"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},loadSharingRate:{flexSize:6,elementType:"numeric",elementConfig:{min:0,placeholder:"Load Sharing Rate"},value:null,validation:{required:!0,isNumeric:!0,minValue:0},valid:!0,validationMessage:""}};e.qos.data=Object(x.a)(G.values()).map((function(e){return{id:e.get("id"),name:e.get("name")}})),null!=H&&(e.name.elementConfig.disabled=!1===L,e.loadSharingRate.elementConfig.disabled=!1===L,e.qos.elementConfig.disabled=!1===L,e.name.value=H.get("name"),e.loadSharingRate.value=H.get("load_sharing_rate"),e.qos.value=null==H.get("qos_id")?null:{id:H.get("qos_id"),name:G.getIn([H.get("qos_id"),"name"])}),!0===L&&gx(e),u(e)}),[G,H,t,L]),i.a.useEffect((function(){null!=H&&(null!=H.get("commitments")&&E(H.get("commitments").toJS()),null!=H.get("connections")&&M(H.get("connections").toJS()))}),[H,t]);var le=i.a.useCallback((function(e){J(e.dataState)}),[]),oe=i.a.useCallback((function(e){$(e.dataState)}),[]),ue=i.a.useCallback((function(e){ne(e.dataState)}),[]),de=i.a.useCallback((function(e){re(e.dataState)}),[]),me=i.a.useCallback((function(e){gx(e),u(e),v(!0)}),[]),be=i.a.useCallback((function(e){v(!0);var t=Object(x.a)(T);t.push(e),M(Object(x.a)(new Set(t)))}),[T]),je=i.a.useCallback((function(e){var t=Object(x.a)(T),n=t.indexOf(e);-1!==n&&(v(!0),t.splice(n,1),M(t))}),[T]),fe=i.a.useCallback((function(e){v(!0);var t=Object(x.a)(y);t.push(e),E(Object(x.a)(new Set(t)))}),[y]),he=i.a.useCallback((function(e){var t=Object(x.a)(y),n=t.indexOf(e);-1!==n&&(v(!0),t.splice(n,1),E(t))}),[y]),pe=i.a.useCallback((function(){var e=F(),i=e.invalidMessages,c=e.controls;if(u(c),i.length>0)se({message:Object(Ka.jsx)(Mm,{messageList:i}),severity:"error",action:{label:"Dismiss"}});else{h(!0);var r,s,l,o=null;if(!0===U)o=a((l={name:px(c.name),qos_id:px(c.qos),load_sharing_rate:px(c.loadSharingRate)},function(){return kc.post("",l).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){var t=[];return y.length>0&&t.push(a(mr(e.data.id,y))),T.length>0&&t.push(a(dr(e.data.id,T))),Promise.all(t)}));else{var d=H.get("commitments").toJS(),m=H.get("connections").toJS(),b=Object(x.a)(new Set([].concat(Object(x.a)(d),Object(x.a)(y)))).reduce((function(e,t){var n=y.includes(t),a=d.includes(t);return!0===a&&!1===n&&e.removedCommitments.push(t),!1===a&&!0===n&&e.newCommitments.push(t),e}),{newCommitments:[],removedCommitments:[]}),j=b.newCommitments,f=b.removedCommitments,p=Object(x.a)(new Set([].concat(Object(x.a)(m),Object(x.a)(T)))).reduce((function(e,t){var n=T.includes(t),a=m.includes(t);return!0===a&&!1===n&&e.removedConnections.push(t),!1===a&&!0===n&&e.newConnections.push(t),e}),{newConnections:[],removedConnections:[]}),g=p.newConnections,O=p.removedConnections,C=[a(ur(t,{name:px(c.name),qos_id:px(c.qos),load_sharing_rate:px(c.loadSharingRate)}))];g.length>0&&a(dr(t,g)),j.length>0&&a(mr(t,j)),O.length>0&&C.push(a((r=t,s=O.join(","),function(){return kc.delete("/".concat(r,"/connections/").concat(s)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))),f.length>0&&C.push(a(function(e,t){return function(){return kc.delete("/".concat(e,"/commitments/").concat(t)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,f.join(",")))),o=Promise.all(C)}o.then((function(){se({severity:"success",message:!0===U?"Least Cost Routing Successfully Added":"Least Cost Routing Successfully Edited"}),v(!1),n.push("/least-cost-routing")})).catch((function(e){se({severity:"error",message:e.message,action:{label:"Dismiss"}}),h(!1)}))}}),[H,U,t,n,a,se,F,y,T]),ge=sb({variant:"Input"}),Oe=i.a.useMemo((function(){var e=[{field:"name",title:"Name",width:"490px",filterCell:ge}];return!0===L&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[ge,L]),ve=i.a.useMemo((function(){return Object(x.a)(V.values()).reduce((function(e,t){return T.includes(t.get("connection_id"))||e.push({name:t.get("connection_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"add",title:"Add ".concat(t.get("connection_name")," connection"),"aria-label":"Add ".concat(t.get("connection_name")," connection"),onClick:function(){be(t.get("connection_id"))}})}),e}),[])}),[be,V,T]),xe=i.a.useMemo((function(){return Object(x.a)(B.values()).reduce((function(e,t){return y.includes(t.get("commitment_id"))||e.push({name:t.get("commitment_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"add",title:"Add ".concat(t.get("commitment_name")," commitment"),"aria-label":"Add ".concat(t.get("commitment_name")," commitment"),onClick:function(){fe(t.get("commitment_id"))}})}),e}),[])}),[fe,B,y]),Ce=i.a.useMemo((function(){return T.reduce((function(e,t){var n=V.get(t);return null==n||e.push({name:n.get("connection_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",title:"Remove ".concat(n.get("connection_name")," connection"),"aria-label":"Remove ".concat(n.get("connection_name")," connection"),onClick:function(){return je(t)}})}),e}),[])}),[T,V,je]),_e=i.a.useMemo((function(){return y.reduce((function(e,t){var n=B.get(t);return null==n||e.push({name:n.get("commitment_name"),actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",title:"Remove ".concat(n.get("commitment_name")," commitment"),"aria-label":"Remove ".concat(n.get("commitment_name")," commitment"),onClick:function(){return he(t)}})}),e}),[])}),[y,B,he]);return!0===f?Object(Ka.jsx)(Wm,{height:"630px",className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:O}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"LCR Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:s,onControlsChange:me})})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Connections"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===L&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:6,children:[Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Available Connections"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:K.skip,take:K.take,sort:K.sort,filter:K.filter,columns:Oe,data:ve,onDataStateChange:le})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:!0===L?6:12,children:[!0===L&&Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Included Connections"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},skip:X.skip,take:X.take,sort:X.sort,filter:X.filter,columns:Oe,data:Ce,onDataStateChange:oe})]})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("hr",{})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Commitments"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===L&&Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:6,children:[Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Available Commitments"}),Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},noDataMessage:"Create New Commitment",noDataIcon:Object(Ka.jsx)("i",{className:""}),skip:te.skip,take:te.take,sort:te.sort,filter:te.filter,columns:Oe,data:xe,onDataStateChange:ue})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:!0===L?6:12,children:[!0===L&&Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Included Commitments"}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,frontendFiltering:!0,frontendPagination:!0,style:{height:"400px"},noDataMessage:0===xe.length?"Create New Commitment":"No records available",noDataIcon:0===xe.length?Object(Ka.jsx)("i",{className:""}):Object(Ka.jsx)("i",{className:"fas fa-times fa-7x"}),skip:ce.skip,take:ce.take,sort:ce.sort,filter:ce.filter,columns:Oe,data:_e,onDataStateChange:de})]})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return n.push("/least-cost-routing")},children:"Cancel"}),L&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:function(){return pe()},children:"Save"})]})]})})]})]})}function px(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}function gx(e){null==e.qos.value?ci(e.loadSharingRate):ri(e.loadSharingRate)}var Ox=i.a.memo(hx),vx={skip:0,take:20};function xx(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState([]),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useContext(Tm),p=h.setTitle,g=h.setBreadcrumbs,O=h.setContentTitle,v=i.a.useMemo((function(){return e.has("FRONTEND:LCR-PAGE-ACCESS")&&e.has("API:LCR:WRITE")}),[e]),C=i.a.useMemo((function(){return e.has("FRONTEND:LCR-PAGE-ACCESS")}),[e]),y=i.a.useState(!1),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState(vx),M=Object(o.a)(T,2),N=M[0],R=M[1];i.a.useEffect((function(){return p("Least Cost Routing"),O("Least Cost Routing"),g([{name:"Least Cost Routing"}]),function(){p(null),g([]),O(null)}}),[p,O,g]);var A=i.a.useCallback((function(e){n(Ui(e))}),[n]),P=Object(l.d)((function(e){return{lcr:e.lcr,qos:e.qos}})),L=P.lcr,F=P.qos,U=i.a.useCallback((function(){n(nr()),n(lo())}),[n]),q=i.a.useCallback((function(){return U(),Promise.all([n(sr()),n(oo())])}),[n,U]),G=i.a.useCallback((function(){return s(!0),q().then((function(){s(!1)})).catch((function(e){A({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[q,A]);i.a.useEffect((function(){return G(),function(){return U()}}),[U,G]);var H=i.a.useCallback((function(){R(vx)}),[]),B=i.a.useCallback((function(e){R(e.dataState)}),[]),V=i.a.useCallback((function(e){f([e]),D(!0)}),[]),z=i.a.useCallback((function(){var e;s(!0),n((e=j[0],function(){return kc.delete("/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){A({severity:"success",message:"LCR Successfully Deleted"})})).catch((function(e){A({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return q()})).then((function(){s(!1),f([]),D(!1)}))}),[n,A,q,j]),W=i.a.useCallback((function(){f([]),D(!1)}),[]),K=sb({variant:"MultiSelect",props:{label:"Quality of Service",data:lb({fieldID:"id",fieldName:"name",namespace:F})}}),J=sb({variant:"Input",props:{label:"Name"}}),Y=sb({variant:"Input",props:{label:"ID"}}),Q=sb({variant:"Numeric",props:{min:0,label:"Load Sharing Rate"}}),X=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:J},{field:"qos",title:"Quality of Service",view:"qosDOM",filterCell:K},{field:"loadSharingRate",title:"Load Sharing Rate",filterCell:Q},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:Y},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[Y,J,K,Q]),$=i.a.useMemo((function(){return Object(x.a)(L.values()).map((function(e){var n=e.get("id");return{id:n,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})}),name:e.get("name"),qos:e.get("qos_id"),deleted:1===e.get("deleted"),qosDOM:null==F.getIn([e.get("qos_id"),"name"])?"-":F.getIn([e.get("qos_id"),"name"]),loadSharingRate:null==e.get("load_sharing_rate")?"-":e.get("load_sharing_rate"),deletedDOM:Object(Ka.jsxs)("div",{children:[Object(Ka.jsx)("input",{disabled:!0,type:"checkbox",className:"k-checkbox",defaultChecked:e.get("deleted")}),Object(Ka.jsx)("label",{className:"k-checkbox-label"})]}),actions:1!==e.get("deleted")&&Object(Ka.jsxs)(i.a.Fragment,{children:[!0===C&&Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("name")," LCR"),"aria-label":"Edit ".concat(e.get("name")," LCR"),onClick:function(){return t.push("/least-cost-routing/".concat(e.get("id")))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",style:{display:"none"},onClick:function(){V(e.get("id"))}})]})}}))}),[F,L,t,V,C]),Z=i.a.useMemo((function(){return j.map((function(e){return Object(Ka.jsxs)("li",{children:[L.getIn([e,"name"]),"(ID: ",e,")"]},e)}))}),[L,j]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===v&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){return t.push("/least-cost-routing/new")},children:"Add Least Cost Routing"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:r,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:N.skip,take:N.take,sort:N.sort,filter:N.filter,data:$,columns:X,onDataStateChange:B})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:G,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:H,children:"Clear Filters and Sorting"})]})]}),!0===I&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:W,children:["Are you sure you want to delete the following LCRs?",Object(Ka.jsx)("ul",{children:Z}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:z,children:"Disable"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:W,children:"Cancel"})]})]})]})}var Cx=i.a.memo(xx);function _x(){var e=b(),t="/least-cost-routing";return Object(Ka.jsxs)(d.e,{children:[!0===e.has("FRONTEND:LCR-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"".concat(t,"/:lcrID"),children:Object(Ka.jsx)(Ox,{})}),Object(Ka.jsx)(d.c,{path:t,children:Object(Ka.jsx)(Cx,{})})]})}var yx=i.a.memo(_x),Sx={CONTAINS:{id:"CONTAINS",name:"Contains"},EXACT:{id:"EXACT",name:"Exact"},STARTS_WITH:{id:"STARTS_WITH",name:"Starts With"},ENDS_WITH:{id:"ENDS_WITH",name:"Ends With"}};var kx=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];function wx(){var e=b(),t=Object(d.j)().whitelistSIDID,n=Object(d.h)(),a=Object(l.c)(),c=i.a.useRef(null),r=i.a.useState(!1),s=Object(o.a)(r,2),u=s[0],m=s[1],j=i.a.useState(!1),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(!1),O=Object(o.a)(g,2),v=O[0],C=O[1],y=i.a.useState(0),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useContext(Tm),M=T.setTitle,N=T.setBreadcrumbs,R=T.setContentTitle,A=i.a.useMemo((function(){return e.has("API:WHITELIST:WRITE")}),[e]),P=i.a.useState([]),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState(),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState(),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(0),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=i.a.useState([]),Z=Object(o.a)($,2),ee=Z[0],te=Z[1],ne=i.a.useState(),ae=Object(o.a)(ne,2),ie=ae[0],ce=ae[1],re=i.a.useState(!1),se=Object(o.a)(re,2),le=se[0],oe=se[1],ue=oj(H),de=oj(W),me=oj(ie),be="new"===t,je=i.a.useMemo((function(){return!0===be?F.length:I}),[be,F,I]),fe=Object(l.d)((function(e){var n=e.whitelistSID;return{whitelistSIDSID:e.whitelistSIDSID,whitelistSID:n.get(t)}})),he=fe.whitelistSID,pe=fe.whitelistSIDSID,ge=i.a.useState({skip:0,take:20,sort:[]}),Oe=Object(o.a)(ge,2),ve=Oe[0],xe=Oe[1];i.a.useEffect((function(){var e=null==he?null:he.get("name");return!0===be?(M("SID Preregistration Creation"),R("SID Preregistration Creation")):!1===be&&null==e?(M("SID Preregistration Modification"),R("SID Preregistration Modification")):(M("".concat(e," SID Preregistration Modification")),R("".concat(e," SID Preregistration Modification"))),N([{name:"SID Preregistration"},{name:!0===be?"Creation":e}]),function(){M(null),N([]),R(null)}}),[be,he,M,R,N]);var Ce=i.a.useCallback((function(e){a(Ui(e))}),[a]);i.a.useEffect((function(){if(!0!==be)return C(!0),a(ss(t,ni(ve))).then((function(e){var t=e.total_records;C(!1),D(t)})).catch((function(e){Ce({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return a({type:Nn})}}),[be,a,Ce,t,ve]),i.a.useEffect((function(){var e;if(!0!==be)return a((e=t,function(t){return Xr.get("/sids/".concat(e)).then((function(e){return t(Zr(e.data)),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){m(!1)})).catch((function(e){Ce({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){a(is())}}),[be,Ce,a,t]),i.a.useEffect((function(){var e={name:{elementType:"input",elementConfig:{placeholder:"Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""}};null!=he&&(e.name.elementConfig.disabled=!1===A,e.name.value=he.get("name")),B(e)}),[he,A]);var _e=i.a.useCallback((function(e){X(e.selected)}),[]),ye=i.a.useCallback((function(){p(!0)}),[]),Se=i.a.useCallback((function(){var e={mergePolicy:{elementType:"buttonGroup",elementConfig:{placeholder:"Merge Policy"},value:"update",data:[{id:"update",name:"Update"},{id:"replace",name:"Replace All"}],validation:{required:!0},valid:!0,validationMessage:""},existingSIDs:{selected:!1,elementType:"buttonGroup",elementConfig:{placeholder:"Existing SIDs"},value:"update",data:[{id:"update",name:"Update"},{id:"skip",name:"Skip"}],validation:{required:!0},valid:!0,validationMessage:""}};Ex(e),ce(e)}),[]),ke=i.a.useCallback((function(){var e={sid:{elementType:"input",elementConfig:{placeholder:"SID"},value:"",validation:{isSid:!0,required:!0},valid:!0,validationMessage:""},match_type:{flexSize:6,elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Match Type"},valid:!0,value:null,data:[],textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!0}},case_sensitive:{flexSize:6,elementType:"checkbox",elementConfig:{placeholder:"Case Sensitive"},value:!1,validation:{required:!0},valid:!0,validationMessage:""}},t=Object.keys(Sx).reduce((function(e,t){var n={id:Sx[t].id,name:Sx[t].name};return e.data.push(n),null==e.value&&(e.value=n),e}),{data:[],value:null}),n=t.data,a=t.value;e.match_type.data=n,e.match_type.value=a,K(e)}),[]);i.a.useEffect((function(){Se()}),[Se]),i.a.useEffect((function(){ke()}),[ke]);var we=i.a.useCallback((function(){oe(!0)}),[]),Ee=i.a.useCallback((function(){oe(!1)}),[]),Ie=i.a.useCallback((function(){var e=de(),t=e.invalidMessages,n=e.controls;K(n),t.length>0?Ce({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}}):(U([].concat(Object(x.a)(F),[{value:Dx(n.sid),match_type:Dx(n.match_type),case_sensitive:Dx(n.case_sensitive)}])),ke())}),[F,de,Ce,ke]),De=i.a.useCallback((function(e){var t=Object(x.a)(F);t.splice(e,1),U(t)}),[F]),Te=i.a.useCallback((function(e){te([].concat(Object(x.a)(ee),[e])),p(!0)}),[ee]),Me=i.a.useCallback((function(e){xe(e.dataState)}),[]),Ne=i.a.useCallback((function(e){p(!0),B(e)}),[]),Re=i.a.useCallback((function(e){p(!0),K(e)}),[]),Ae=i.a.useCallback((function(e){p(!0),ce(e)}),[]),Pe=i.a.useCallback((function(e,t,n){var a=Object.assign({},ie);ie[t].value=n,Ex(a),ce(a),p(!0)}),[ie]),Le=i.a.useCallback((function(e,t){return{data:e,replace_sids:"replace"===t.mergePolicy.value?1:0,update_existing_sids:"update"===t.existingSIDs.value?1:0}}),[]),Fe=i.a.useCallback((function(){var e=[],i=null,r=null,s=ue();if(e.push.apply(e,Object(x.a)(s.invalidMessages)),B(s.controls),null!=c.current&&c.current.files.length>0&&(i=c.current.files[0],r=me(),e.push.apply(e,Object(x.a)(r.invalidMessages)),ce(r.controls),!1===i.name.endsWith(".csv")&&!1===kx.includes(i.type)&&e.push("Upload a CSV or an MS Excel file")),e.length>0)Ce({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}});else{m(!0);var l,o,u,d=null;if(!0===be)d=a((u={name:Dx(s.controls.name)},function(){return Xr.post("/sids",u).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){var t=[];return F.length>0&&t.push(a(os(e.data.id,{data:F}))),null!=i&&null!=r&&t.push(a(us(e.data.id,Le(i,r.controls)))),Promise.all(t)}));else{var b=[a(ls(t,{name:Dx(s.controls.name)}))];F.length>0&&b.push(a(os(t,{data:F}))),ee.length>0&&b.push(a((l=t,o=ee.join(","),function(){return Xr.delete("/sids/".concat(l,"/sids/").concat(o)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))),null!=i&&null!=r&&b.push(a(us(t,Le(i,r.controls)))),d=Promise.all(b)}d.then((function(){Ce({severity:"success",message:!0===be?"SID Preregistration Successfully Added":"SID Preregistration Successfully Edited"})})).then((function(){n.push("/whitelist-sids/")})).catch((function(e){Ce({severity:"error",message:e.message,action:{label:"Dismiss"}}),m(!1)}))}}),[be,F,n,a,Ce,ee,t,ue,Le,me]),Ue=sb({variant:"Combobox",props:{data:i.a.useMemo((function(){return[{id:"CONTAINS",name:"Contains"},{id:"EXACT",name:"Exact"},{id:"STARTS_WITH",name:"Starts With"},{id:"ENDS_WITH",name:"Ends With"}]}),[])}}),qe=sb({variant:"Combobox",props:{data:i.a.useMemo((function(){return[{id:"true",name:"Yes"},{id:"false",name:"No"}]}),[])}}),Ge=sb({variant:"Input"}),He=sb({variant:"Date"}),Be=i.a.useMemo((function(){var e=[{field:"value",title:"SID",filterCell:Ge},{field:"match_type",title:"Match Type",width:"250px",filterCell:Ue},{field:"case_sensitive",title:"Case Sensitive",view:"case_sensitiveDOM",width:"250px",filterCell:qe},{field:"last_modified_on",title:"Last Modified On",width:"250px",filterCell:He}];return!0===A&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[A,Ge,He,Ue,qe]),Ve=i.a.useMemo((function(){return Object($d.a)(Object($d.c)(F.map((function(e,t){return{id:"new-".concat(t),value:e.value,last_modified_on:"-",className:!0===be?"":"ResponsiveGridHighlight",match_type:Ix(e.match_type),case_sensitive:e.case_sensitive,case_sensitiveDOM:e.case_sensitive?"Yes":"No",actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",title:"Remove ".concat(e.value," SID"),"aria-label":"Remove ".concat(e.value," SID"),onClick:function(){return De(t)}})}})),ve.sort),ve.filter)}),[be,F,ve,De]),ze=i.a.useMemo((function(){if(null==he)return[];var e=he.get("sids");return(null==e?[]:Object(x.a)(e.values())).reduce((function(e,t){var n=pe.get(t);return!0===ee.includes(t)||null==n||e.push({id:"existent-".concat(t),value:n.get("value"),match_type:Ix(n.get("match_type")),last_modified_on:Object(Ka.jsx)(Nd,{utc:n.get("last_modified_on")}),case_sensitive:n.get("case_sensitive"),case_sensitiveDOM:!0===n.get("case_sensitive")?"Yes":"No",actions:Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",title:"Remove ".concat(n.get("value")," SID"),"aria-label":"Remove ".concat(n.get("value")," SID"),onClick:function(){return Te(t)}})}),e}),[])}),[ee,Te,he,pe]),We=i.a.useMemo((function(){return[].concat(Object(x.a)(Ve),Object(x.a)(ze))}),[Ve,ze]),Ke=i.a.useMemo((function(){return Object(Ka.jsxs)("ul",{children:[Object(Ka.jsx)("li",{children:"Files should be either CSV or Excel Sheets."}),Object(Ka.jsx)("li",{children:"When uploading an Excel Sheet, the SID info should be in the first sheet."}),Object(Ka.jsx)("li",{children:"Files should not include header rows."}),Object(Ka.jsxs)("li",{children:["Files should contain SIDs info in the following format:"," ",Object(Ka.jsx)("strong",{children:Object(Ka.jsx)("i",{children:"sid-name,match-type,case-sensitive"})}),"."]}),Object(Ka.jsxs)("li",{children:["Accepted values for match-types are the following:",Object(Ka.jsx)("ul",{children:Object.keys(Sx).map((function(e){return Object(Ka.jsx)("li",{children:e},e)}))})]}),Object(Ka.jsxs)("li",{children:["Accepted values for case-sensitive are the following:",Object(Ka.jsxs)("ul",{children:[Object(Ka.jsx)("li",{children:"true"}),Object(Ka.jsx)("li",{children:"false"})]})]})]})}),[]);return!0===u?Object(Ka.jsx)(Wm,{height:"630px",className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:h}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Preregistration Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:H,onControlsChange:Ne})})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"SIDs Configuration"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===A&&Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsxs)(w.i,{animation:!1,selected:Q,onSelect:_e,children:[Object(Ka.jsx)(w.j,{title:"Manual",children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(lj,{controls:W,onControlsChange:Re}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",onClick:Ie,style:{width:"100%"},primary:!0,disabled:!0===u,children:"Add"})})]})}),Object(Ka.jsx)(w.j,{title:"Upload",children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(_.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(Ka.jsx)("span",{children:"File"}),Object(Ka.jsx)("input",{type:"file",ref:c,onChange:ye,accept:[".csv"].concat(kx).join(", ")}),Object(Ka.jsx)(k.a,{icon:"info",look:"flat",title:"Show SID File Requirements","aria-label":"Show SID File Requirements",onClick:we})]})}),Object(Ka.jsx)(lj,{controls:ie,onButtonClick:Pe,onControlsChange:Ae})]})})})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===A?8:12,children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:v,style:{height:"400px"},data:We,total:je,columns:Be,skip:ve.skip,take:ve.take,sort:ve.sort,filter:ve.filter,frontendPagination:!0===be,onDataStateChange:Me})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){n.push("/whitelist-sids/")},children:"Cancel"}),A&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:function(){return Fe()},children:"Save"})]})]})})]}),!0===le&&Object(Ka.jsxs)(Ub.a,{title:"SID File Format",onClose:Ee,children:[Ke,Object(Ka.jsx)(Ub.b,{children:Object(Ka.jsx)(k.a,{look:"flat",onClick:Ee,children:"Close"})})]})]})}function Ex(e){var t=e.mergePolicy.value;e.existingSIDs.selected=null!=t&&"update"===t}function Ix(e){var t=Sx[e];return null==t?"-":t.name}function Dx(e){var t="combo"!==e.elementType?e.value:e.value&&e.value.id;return e.validation.isNumeric&&null!=t?Number(t):t}var Tx=i.a.memo(wx);function Mx(e){var t=e.dataItem.recordID,n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useCallback((function(e){n(Ui(e))}),[n]),d=Object(l.d)((function(e){var n=e.client,a=e.whitelistSID.getIn([t,"clients"]);return(null==a?[]:a).reduce((function(e,t){var a=n.get(t);return null==a||e.push(Object(Ka.jsx)(zp.a,{size:"small",label:a.get("client_name")},t)),e}),[])}));return i.a.useEffect((function(){s(!0),n(rs(t)).then((function(){s(!1)})).catch((function(e){u({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[t,u,n]),!0===r?Object(Ka.jsx)(Wm,{height:"150px",className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("span",{children:"Clients:"})," ",d]})}var Nx=i.a.memo(Mx),Rx={skip:0,take:20};function Ax(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(0),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useState([]),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState([]),C=Object(o.a)(v,2),y=C[0],E=C[1],I=i.a.useMemo((function(){return e.has("API:WHITELIST:WRITE")}),[e]),D=i.a.useState(!1),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useState(Rx),A=Object(o.a)(R,2),P=A[0],L=A[1],F=Object(l.d)((function(e){return{whitelistSID:e.whitelistSID}})).whitelistSID,U=i.a.useCallback((function(e){n(Ui(e))}),[n]),q=i.a.useCallback((function(){n(ys()),n(is())}),[n]),G=i.a.useCallback((function(){return q(),n(cs(ni(P))).then((function(e){f(e.total_records)}))}),[n,P,q]),H=i.a.useCallback((function(){return s(!0),G().then((function(){s(!1)})).catch((function(e){U({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[G,U]);i.a.useEffect((function(){return H(),function(){return q()}}),[q,H]);var B=i.a.useCallback((function(){L(Rx)}),[]),V=i.a.useCallback((function(e){L(e.dataState)}),[]),z=i.a.useCallback((function(e){var t=Object(x.a)(g),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),O(t)}),[g]),W=i.a.useCallback((function(e){E([e]),N(!0)}),[]),K=i.a.useCallback((function(){var e;s(!0),n((e=y[0],function(){return Xr.delete("/sids/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){U({severity:"success",message:"SID Preregistration Successfully Disabled"})})).catch((function(e){U({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return G()})).then((function(){s(!1),E([]),N(!1)}))}),[n,U,G,y]),J=i.a.useCallback((function(){E([]),N(!1)}),[]),Y=sb({variant:"Input"}),Q=sb({variant:"Date"}),X=i.a.useMemo((function(){return[{field:"expand",width:"65px",sortable:!1,filterable:!1},{field:"name",title:"Name",filterCell:Y},{field:"last_modified_on",title:"Last Modified On",view:"dateDOM",width:"250px",filterCell:Q},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:Y},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[Y,Q]),$=i.a.useMemo((function(){return Object(x.a)(F.values()).map((function(e){var n=e.get("id"),a=g.includes(n),c=new window.Date(e.get("last_modified_on"));return{id:n,recordID:n,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})}),expanded:a,name:e.get("name"),last_modified_on:new window.Date(c.getFullYear(),c.getMonth(),c.getDate()),dateDOM:Object(Ka.jsx)(Nd,{utc:e.get("last_modified_on")}),expand:Object(Ka.jsx)(k.a,{look:"flat",title:"View more details","aria-label":"View more details",icon:!0===a?"minus":"add",onClick:function(){return z(n)}}),deleted:1===e.get("deleted"),actions:1!==e.get("deleted")&&Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("name")," Preregistration"),"aria-label":"Edit ".concat(e.get("name")," Preregistration"),onClick:function(){return t.push("/whitelist-sids/".concat(n))}}),Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Disable ".concat(e.get("name")," Preregistration"),"aria-label":"Disable ".concat(e.get("name")," Preregistration"),style:{display:"none"},onClick:function(){W(e.get("id"))}})]})}}))}),[t,F,g,W,z]),Z=i.a.useMemo((function(){return y.map((function(e){return Object(Ka.jsxs)("li",{children:[F.getIn([e,"name"]),"(ID: ",e,")"]},e)}))}),[F,y]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[I&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){t.push("/whitelist-sids/new")},children:"Add SID Whitelist"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,data:$,isLoading:r,total:j,skip:P.skip,take:P.take,sort:P.sort,columns:X,filter:P.filter,style:{height:"500px"},detail:Nx,onDataStateChange:V})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:H,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:B,children:"Clear Filters and Sorting"})]})]}),!0===M&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:J,children:["Are you sure you want to delete the following SID Preregistration?",Object(Ka.jsx)("ul",{children:Z}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:K,children:"Disable"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:J,children:"Cancel"})]})]})]})}var Px=i.a.memo(Ax),Lx={skip:0,take:20,sort:[{dir:"desc",field:"uploaded_on"}]},Fx={DONE:"Done",PENDING:"Pending",IN_PROGRESS:"In Progress",FAILED:"Failed"};function Ux(){var e=Object(l.c)(),t=i.a.useState(!0),n=Object(o.a)(t,2),a=n[0],c=n[1],r=i.a.useState(0),s=Object(o.a)(r,2),u=s[0],d=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(Lx),g=Object(o.a)(p,2),O=g[0],v=g[1],x=i.a.useMemo((function(){return(1===u?["DONE","FAILED"]:["PENDING","IN_PROGRESS"]).reduce((function(e,t){return e[t]=Fx[t],e}),{})}),[u]),C=i.a.useMemo((function(){var e=Object.keys(x),t=ni(O);return null!=t.status&&(t.status=t.status.split(",").filter((function(t){return e.includes(t)})).join(",")),null!=t.status&&""!==t.status||(t.status=Object.keys(x).join(",")),t}),[x,O]),y=i.a.useCallback((function(t){e(Ui(t))}),[e]),S=i.a.useCallback((function(){e({type:An})}),[e]),E=i.a.useCallback((function(){return S(),e(au(C))}),[e,C,S]),I=kb({frequency:1e4,intervalPolicy:"update",name:"SID Upload Status",request:i.a.useCallback((function(){return E()}),[E]),getData:i.a.useCallback((function(e,t){var n=e.whitelistSIDSIDStatus;return new m.b({totalRecords:t.total_records,data:n.reduce((function(e,t){return e.add(new m.b({id:t.get("id"),status:t.get("status"),file_name:t.get("file_name"),uploaded_on:t.get("uploaded_on"),error_summary:t.get("error_summary"),whitelist_name:t.get("whitelist_name")}))}),new m.e)})}),[])}),D=I.data,T=I.update,M=i.a.useCallback((function(){return h(!0),T().catch((function(e){y({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return h(!1)}))}),[y,T]);i.a.useEffect((function(){return c(!0),T().then((function(){c(!1)})).catch((function(e){y({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return S()}}),[y,S,T]);var N=i.a.useCallback((function(){v(Lx)}),[]),R=i.a.useCallback((function(e){v(e.dataState)}),[]),A=i.a.useCallback((function(e){d(e.selected)}),[]),P=sb({variant:"Input"}),L=sb({variant:"Date"}),F=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(x).map((function(e){return{id:e,name:Fx[e]}}),[])}),[x])}}),U=i.a.useMemo((function(){return[{field:"whitelist_name",title:"Name",filterCell:P},{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:F},{field:"file_name",title:"File Name",width:"200px",filterCell:P},{field:"error_summary",title:"Error Summary",width:"200px",filterCell:P},{field:"uploaded_on",title:"Uploaded On",width:"230px",filterCell:L},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:P}]}),[P,L,F]),q=i.a.useMemo((function(){return D.get("data").reduce((function(e,t){var n=t.get("id");return e.push({id:n,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})}),file_name:t.get("file_name"),status:Fx[t.get("status")],whitelist_name:t.get("whitelist_name"),error_summary:null==t.get("error_summary")?"No Errors":t.get("error_summary"),uploaded_on:Object(Ka.jsx)(Nd,{utc:t.get("uploaded_on")}),statusDOM:Object(Ka.jsxs)(Ka.Fragment,{children:["DONE"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-check"}):"FAILED"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-exclamation-triangle"}):Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",Fx[t.get("status")]]})}),e}),[])}),[D]);return Object(Ka.jsxs)(w.a,{className:"Card--Highlight Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"SID Upload Status"})}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsxs)(w.i,{animation:!1,selected:u,onSelect:A,className:"TabStrip--NoButtomGutter",children:[Object(Ka.jsx)(w.j,{title:"Scheduled"}),Object(Ka.jsx)(w.j,{title:"History"})]}),Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,data:q,isLoading:a,skip:O.skip,take:O.take,sort:O.sort,columns:U,filter:O.filter,style:{height:"509px"},total:D.get("totalRecords"),onDataStateChange:R})]}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:M,disabled:!0===f,children:!0===f?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:N,children:"Clear Filters and Sorting"})]})]})}var qx=i.a.memo(Ux);function Gx(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setBreadcrumbs,a=e.setContentTitle;return i.a.useEffect((function(){return t("SID Preregistration"),a("SID Preregistration"),n([{name:"SID Preregistration"}]),function(){t(null),n([]),a(null)}}),[t,a,n]),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:7,children:Object(Ka.jsx)(Px,{})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:5,children:Object(Ka.jsx)(qx,{})})]})}var Hx=i.a.memo(Gx);function Bx(){var e=i.a.useMemo((function(){return"/whitelist-sids"}),[]);return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:e,exact:!0,children:Object(Ka.jsx)(Hx,{})}),Object(Ka.jsx)(d.c,{path:"".concat(e,"/:whitelistSIDID"),exact:!0,children:Object(Ka.jsx)(Tx,{})})]})}var Vx=i.a.memo(Bx);function zx(e){var t=e.details,n=i.a.useState(),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useState(),l=Object(o.a)(s,2),u=l[0],d=l[1],m=i.a.useState(),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useState(),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useState(),k=Object(o.a)(y,2),w=k[0],E=k[1],I=i.a.useState(),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useState(),R=Object(o.a)(N,2),A=R[0],P=R[1],L=i.a.useState(),F=Object(o.a)(L,2),U=F[0],q=F[1],G=i.a.useState(),H=Object(o.a)(G,2),B=H[0],V=H[1],z=i.a.useState(),W=Object(o.a)(z,2),K=W[0],J=W[1],Y=i.a.useState(),Q=Object(o.a)(Y,2),X=Q[0],$=Q[1],Z=i.a.useState(),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=i.a.useState(),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1],se=i.a.useState(),le=Object(o.a)(se,2),oe=le[0],ue=le[1],de=i.a.useState(),me=Object(o.a)(de,2),be=me[0],je=me[1],fe=i.a.useState(),he=Object(o.a)(fe,2),pe=he[0],ge=he[1],Oe=i.a.useState(),ve=Object(o.a)(Oe,2),xe=ve[0],Ce=ve[1],_e=i.a.useState(),ye=Object(o.a)(_e,2),Se=ye[0],ke=ye[1],we=i.a.useState(),Ee=Object(o.a)(we,2),Ie=Ee[0],De=Ee[1],Te=i.a.useState(),Me=Object(o.a)(Te,2),Ne=Me[0],Re=Me[1],Ae=i.a.useState(),Pe=Object(o.a)(Ae,2),Le=Pe[0],Fe=Pe[1],Ue=i.a.useState(),qe=Object(o.a)(Ue,2),Ge=qe[0],He=qe[1],Be=i.a.useState(),Ve=Object(o.a)(Be,2),ze=Ve[0],We=Ve[1],Ke=i.a.useMemo((function(){return Object.keys(t).reduce((function(e,n){return e[n]=null==t[n]?"":t[n],e}),{})}),[t]);return i.a.useEffect((function(){r(Ke.client_name),d(Ke.client_connection_name),f(Ke.client_connection_type),O(Ke.supplier_name),_(Ke.supplier_connection_name),E(Ke.supplier_connection_link_name),M(Ke.remote_message_id),P(Ke.virtual_number_message_id),q(Ke.site_name),V(Ke.source_addr),J(Ke.source_addr_ton),$(Ke.source_addr_npi),ne(Ke.destination_addr),re(Ke.destination_addr_ton),ue(Ke.destination_addr_npi),je(Ke.message_data),ge(Ke.has_udh),Ce(Ke.udh),ke(Ke.is_multipart),De(Ke.data_coding_scheme),Re(Ke.submit_status),Fe(Ke.submit_time),He(Ke.received_time),We(Ke.processed_time)}),[Ke]),Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Client Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Client Name",readOnly:!0,value:c})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Client Connection Name",value:u})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Client Connection Type",value:j})})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Supplier Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Supplier Name",value:g})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Supplier Connection Name",value:C})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Supplier Connection Link",value:w})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Remote Message ID",value:T})})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Message Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Message ID",value:A})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Site",value:U})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Source",value:B})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Source TON",value:K})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Source NPI",value:X})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Destination",value:te})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Destination TON",value:ce})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Destination NPI",value:oe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Message",value:be})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Has UDH",value:pe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"UDH",value:xe})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Multipart",value:Se})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Data Coding Scheme",value:Ie})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Status",value:Ne})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:" "}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Submit Time",value:Le})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Received Time",value:Ge})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"Input",readOnly:!0,label:"Processed Time",value:ze})})]})})]})})]})}var Wx=i.a.memo(zx),Kx={skip:0,take:20,sort:[{dir:"asc",field:"received_time"}]},Jx=[20,50,100,200,500];function Yx(e){var t=e.searchParams,n=e.onHideTrafficSearch,a=Object(l.c)(),c=i.a.useState(!0),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState([]),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useState(!1),h=Object(o.a)(f,2),p=h[0],g=h[1],O=i.a.useState(!1),v=Object(o.a)(O,2),x=v[0],C=v[1],y=i.a.useState(Kx),E=Object(o.a)(y,2),I=E[0],D=E[1],T=i.a.useState([]),M=Object(o.a)(T,2),N=M[0],R=M[1],A=i.a.useCallback((function(){"function"===typeof n&&n()}),[n]),P=i.a.useCallback((function(e){D(e.dataState)}),[]),L=i.a.useCallback((function(e){a(Ui(e))}),[a]),F=Object(l.d)((function(e){return{virtualNumbersTrafficStatus:e.virtualNumbersTrafficStatus}})).virtualNumbersTrafficStatus,U=i.a.useMemo((function(){var e=Object.assign({},t);return e.size=I.take,e.page=I.skip/I.take,e.sort=I.sort.map((function(e){return{order:e.dir,field:e.field}}),[]),e}),[I,t]);i.a.useEffect((function(){var e;u(!0),a((e=U,function(){return mo.post("/virtualnumber/cdrs",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){j(e.data.data),g(e.data.has_more),u(!1)})).catch((function(e){L({severity:"error",message:e.message,action:{label:"Dismiss"}}),A()}))}),[a,L,I,U,A]);var q=i.a.useCallback((function(){u(!0);var e,t=Object.assign({},U);delete t.page,delete t.size,a((e=t,function(){return mo.post("/virtualnumber/export",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){L({severity:"success",message:"Traffic Search Export Request Successful"})})).catch((function(e){L({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return u(!1)}))}),[a,L,U]),G=i.a.useCallback((function(e){C(!0),R(e)}),[]),H=i.a.useMemo((function(){return[{field:"received_time",title:"Timestamp",view:"dateDOM",width:"250px",filterable:!1},{field:"client_name",title:"Client Name",filterable:!1},{field:"source_addr",title:"Source",filterable:!1},{field:"destination_addr",title:"Destination",filterable:!1},{field:"supplier_name",title:"Supplier Name",filterable:!1},{field:"supplier_connection_name",title:"Supplier Connection",filterable:!1},{field:"submit_status",title:"Status",width:"150px",view:"statusDOM",filterable:!1},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"75px"}]}),[]),B=i.a.useMemo((function(){return b.map((function(e){var t=new window.Date(e.received_time),n=new window.Date(e.processed_time),a=new window.Date(e.submit_time),c=F.getIn([e.submit_status,"description"]),r={client_name:e.client_name,client_connection_name:e.client_connection_name,client_connection_type:e.client_connection_type,supplier_name:e.supplier_name,supplier_connection_name:e.supplier_connection_name,supplier_connection_link_name:e.supplier_connection_link_name,virtual_number_message_id:e.virtual_number_message_id,site_name:e.site_name,source_addr:e.source_addr,source_addr_ton:e.source_addr_ton,source_addr_npi:e.source_addr_npi,destination_addr:e.destination_addr,destination_addr_ton:e.destination_addr_ton,destination_addr_npi:e.destination_addr_npi,submit_status:c,virtual_number_id:e.virtual_number_id,remote_message_id:e.remote_message_id,original_message:e.original_message,message_data:e.message_data,udh:e.udh,has_udh:e.has_udh,is_multipart:e.is_multipart,data_coding_scheme:e.data_coding_scheme,message_encoding_name:e.message_encoding_name,received_time:t.toString().toString().replace(/\(.*\)$/,""),processed_time:n.toString().toString().replace(/\(.*\)$/,""),submit_time:null==a?null:a.toString().replace(/\(.*\)$/,"")};return{received_time:new window.Date(t.getFullYear(),t.getMonth(),t.getDate()),dateDOM:Object(Ka.jsx)(Nd,{utc:e.received_time}),client_name:e.client_name,source_addr:e.source_addr,destination_addr:e.destination_addr,supplier_name:e.supplier_name,supplier_connection_name:e.supplier_connection_name,submit_status:e.submit_status,statusDOM:c,actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"eye",onClick:function(){return G(r)}})})}}))}),[b,G,F]),V=i.a.useCallback((function(){C(!1)}),[]),z=i.a.useCallback((function(){var e=I.skip+I.take,t=Object.assign({},I,{skip:e});D(t)}),[I]),W=i.a.useCallback((function(){var e=I.skip-I.take<0?0:I.skip-I.take,t=Object.assign({},I,{skip:e});D(t)}),[I]),K=i.a.useCallback((function(e){var t=Object.assign({},I,{take:e.value});D(t)}),[I]),J=i.a.useCallback((function(){D(Kx)}),[]);return Object(Ka.jsx)(S.a,{item:!0,container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(w.a,{children:!0===x?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Traffic Search Result Details"})}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"close",style:{marginBottom:"10px"},onClick:function(){return V()},children:"Close Details View"}),Object(Ka.jsx)(Wx,{details:N})]})]}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.d,{children:[Object(Ka.jsx)(w.f,{children:"Traffic Search Results"}),Object(Ka.jsx)(w.e,{children:Object(Ka.jsxs)("span",{children:[Object(Ka.jsx)("strong",{children:"Time Period:"})," ",Object(Ka.jsx)(Nd,{utc:t.filters.receive_time_from})," -"," ",Object(Ka.jsx)(Nd,{utc:t.filters.receive_time_to})]})})]}),Object(Ka.jsxs)(w.c,{children:[Object(Ka.jsx)(S.a,{item:!0,container:!0,spacing:5,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,sm:3,children:Object(Ka.jsx)(k.a,{primary:!0,icon:"download",onClick:q,disabled:0===B.length,children:"Export to Excel"})})}),Object(Ka.jsxs)(S.a,{item:!0,container:!0,spacing:3,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,pageable:!1,groupable:!1,isLoading:s,style:{height:"500px"},skip:I.skip,take:I.take,sort:I.sort,filter:I.filter,data:B,columns:H,onDataStateChange:P})}),Object(Ka.jsx)(S.a,{item:!0,xs:12})]})]}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return A()},children:"Go Back"}),Object(Ka.jsxs)(k.a,{onClick:W,disabled:0===I.skip,children:[Object(Ka.jsx)("span",{className:"k-icon k-i-arrow-60-left"})," Previous"," ",I.take]}),Object(Ka.jsxs)(_.a,{p:2,alignItems:"center",justifyContent:"center",children:[Object(Ka.jsx)(_.a,{pl:1,pr:1,pb:1,pt:2,component:"strong",children:"Page Size"}),Object(Ka.jsx)(Zd.b,{data:Jx,value:I.take,style:{width:"60px",height:"38px",padding:"6px 0"},onChange:K})]}),Object(Ka.jsxs)(k.a,{onClick:z,disabled:!1===p,children:["Next ",I.take," ",Object(Ka.jsx)("span",{className:"k-icon k-i-arrow-60-right"})]}),Object(Ka.jsx)(k.a,{look:"flat",onClick:J,children:"Clear Filters and Sorting"})]})]})})})})}var Qx=i.a.memo(Yx);function Xx(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setContentTitle,a=e.setBreadcrumbs,c=Object(l.c)(),r=i.a.useState({}),s=Object(o.a)(r,2),u=s[0],d=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(!1),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(!1),_=Object(o.a)(C,2),E=_[0],I=_[1],D=i.a.useState(!1),T=Object(o.a)(D,2),M=T[0],N=T[1],R=i.a.useState(!1),A=Object(o.a)(R,2),P=A[0],L=A[1],F=i.a.useState(!1),U=Object(o.a)(F,2),q=U[0],G=U[1],H=i.a.useState(!1),B=Object(o.a)(H,2),V=B[0],z=B[1],W=i.a.useState(!1),K=Object(o.a)(W,2),J=K[0],Y=K[1],Q=i.a.useState(!1),X=Object(o.a)(Q,2),$=X[0],Z=X[1],ee=i.a.useState(!1),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],ie=i.a.useState(!1),ce=Object(o.a)(ie,2),re=ce[0],se=ce[1],le=i.a.useState(!1),oe=Object(o.a)(le,2),ue=oe[0],de=oe[1],me=i.a.useState(!1),be=Object(o.a)(me,2),je=be[0],fe=be[1],he=i.a.useState(!1),pe=Object(o.a)(he,2),ge=pe[0],Oe=pe[1],ve=i.a.useState(!1),xe=Object(o.a)(ve,2),Ce=xe[0],_e=xe[1],ye=i.a.useState(!1),Se=Object(o.a)(ye,2),ke=Se[0],we=Se[1],Ee=i.a.useState([]),Ie=Object(o.a)(Ee,2),De=Ie[0],Te=Ie[1],Me=i.a.useState((function(){var e=new Date;return e.setHours(e.getHours()-1),e})),Ne=Object(o.a)(Me,2),Re=Ne[0],Ae=Ne[1],Pe=i.a.useMemo((function(){return{required:!0}}),[]),Le=i.a.useState([]),Fe=Object(o.a)(Le,2),Ue=Fe[0],qe=Fe[1],Ge=i.a.useState(new Date),He=Object(o.a)(Ge,2),Be=He[0],Ve=He[1],ze=i.a.useMemo((function(){return{required:!0}}),[]),We=i.a.useState([]),Ke=Object(o.a)(We,2),Je=Ke[0],Ye=Ke[1],Qe=i.a.useState([]),Xe=Object(o.a)(Qe,2),$e=Xe[0],Ze=Xe[1],et=i.a.useState([]),tt=Object(o.a)(et,2),nt=tt[0],at=tt[1],it=i.a.useState([]),ct=Object(o.a)(it,2),rt=ct[0],st=ct[1],lt=i.a.useState([]),ot=Object(o.a)(lt,2),ut=ot[0],dt=ot[1],mt=i.a.useState([]),bt=Object(o.a)(mt,2),jt=bt[0],ft=bt[1],ht=i.a.useState([]),pt=Object(o.a)(ht,2),gt=pt[0],Ot=pt[1],vt=i.a.useState([]),xt=Object(o.a)(vt,2),Ct=xt[0],_t=xt[1],yt=i.a.useState([]),St=Object(o.a)(yt,2),kt=St[0],wt=St[1],Et=i.a.useState([]),It=Object(o.a)(Et,2),Dt=It[0],Tt=It[1],Mt=i.a.useState([]),Nt=Object(o.a)(Mt,2),Rt=Nt[0],At=Nt[1],Pt=i.a.useState([]),Lt=Object(o.a)(Pt,2),Ft=Lt[0],Ut=Lt[1],qt=i.a.useState([]),Gt=Object(o.a)(qt,2),Ht=Gt[0],Bt=Gt[1],Vt=i.a.useState([]),zt=Object(o.a)(Vt,2),Wt=zt[0],Kt=zt[1],Jt=i.a.useState([]),Yt=Object(o.a)(Jt,2),Qt=Yt[0],Xt=Yt[1],$t=i.a.useState([]),Zt=Object(o.a)($t,2),en=Zt[0],tn=Zt[1],nn=i.a.useState(""),an=Object(o.a)(nn,2),cn=an[0],rn=an[1],sn=i.a.useState([]),ln=Object(o.a)(sn,2),on=ln[0],un=ln[1],dn=i.a.useState(""),mn=Object(o.a)(dn,2),bn=mn[0],jn=mn[1],fn=i.a.useState([]),hn=Object(o.a)(fn,2),pn=hn[0],gn=hn[1],On=i.a.useState([]),vn=Object(o.a)(On,2),xn=vn[0],Cn=vn[1],_n=i.a.useState(""),yn=Object(o.a)(_n,2),Sn=yn[0],kn=yn[1],wn=i.a.useState([]),En=Object(o.a)(wn,2),In=En[0],Dn=En[1],Tn=i.a.useState([]),Mn=Object(o.a)(Tn,2),Nn=Mn[0],Rn=Mn[1],An=i.a.useState([]),Pn=Object(o.a)(An,2),Ln=Pn[0],Fn=Pn[1],Un=i.a.useState([]),qn=Object(o.a)(Un,2),Gn=qn[0],Hn=qn[1],Bn=i.a.useMemo((function(){return Ft.some((function(e){return"ss7"===e.type}))}),[Ft]),Vn=Nm(i.a.useMemo((function(){return[{label:"Start",value:Re,setErrors:Te,validations:Pe},{label:"End",value:Be,setErrors:qe,validations:ze}]}),[Re,Te,Pe,Be,qe,ze])),zn=i.a.useCallback((function(e){c(Ui(e))}),[c]),Wn=i.a.useCallback((function(){v(!1)}),[]);i.a.useEffect((function(){return t("Virtual Numbers Traffic Search"),n("Virtual Numbers Traffic Search"),a([{name:"Virtual Numbers Traffic"},{name:"Search"}]),function(){t(null),a([])}}),[t,n,a]);var Kn=Object(l.d)((function(e){var t=e.route,n=e.client,a=e.country;return{route:t,client:n,network:e.network,country:a,supplier:e.supplier,clientConnection:e.clientConnection,supplierConnection:e.supplierConnection,supplierSiteCategory:e.supplierSiteCategory,supplierConnectionLink:e.supplierConnectionLink}})),Jn=Kn.client,Yn=Kn.supplier,Qn=Kn.clientConnection,Xn=Kn.supplierConnection,$n=Kn.supplierSiteCategory,Zn=Kn.supplierConnectionLink;i.a.useEffect((function(){return I(!0),N(!0),Promise.all([c(Fs()),c(vo()),c(Pi()),c(vl({not_name:"BLOCKED Traffic"}))]).then((function(){h(!1),I(!1),N(!1)})).catch((function(e){zn({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){c(ys()),c(ml()),c(Ai())}}),[c,zn]),i.a.useEffect((function(){var e=new m.e(nt.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(Jn.values()).map((function(e){return new m.b({id:e.get("client_id"),name:e.get("client_name")})})));e.equals(t)||at(t.toJS())}),[Jn,nt]),i.a.useEffect((function(){var e=new m.e(jt.map((function(e){return new m.b(e)}))),t=new m.e($e.reduce((function(e,t){var n=Jn.getIn([t.id,"connections"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=Qn.get(t);null!=n&&e.push(new m.b({id:n.get("connection_id"),name:n.get("connection_name")}))})),e}),[]));e.equals(t)||ft(t.toJS())}),[Jn,$e,Qn,jt]),i.a.useEffect((function(){var e=new m.e(kt.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)(Yn.values()).map((function(e){return new m.b({id:e.get("supplier_id"),name:e.get("supplier_name")})})));e.equals(t)||wt(t.toJS())}),[Yn,kt]),i.a.useEffect((function(){var e=new m.e(Ft.map((function(e){return new m.b(e)}))),t=new m.e(Ct.reduce((function(e,t){var n=Yn.getIn([t.id,"connections"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=Xn.get(t);null!=n&&e.push(new m.b({id:n.get("connection_id"),name:n.get("connection_name"),type:n.get("connection_type"),supplier_id:n.get("supplier_id")}))})),e}),[]));e.equals(t)||Ut(t.toJS())}),[Yn,Ct,Xn,Ft]),i.a.useEffect((function(){var e=new m.e(Qt.map((function(e){return new m.b(e)}))),t=new m.e(Rt.reduce((function(e,t){var n=Xn.getIn([t.id,"links"]);return(null==n?[]:n.toJS()).forEach((function(t){var n=Zn.get(t);null!=n&&e.push(new m.b({id:n.get("link_id"),name:n.get("link_name")}))})),e}),[]));e.equals(t)||Xt(t.toJS())}),[Yn,Ct,Xn,Zn,Rt,Qt]),i.a.useEffect((function(){var e=new m.e(Gn.map((function(e){return new m.b(e)}))),t=new m.e(Object(x.a)($n.values()).map((function(e){return new m.b({id:e.get("site_id"),name:e.get("site_name")})})));e.equals(t)||Hn(t.toJS())}),[$n,Gn]),i.a.useEffect((function(){return L(!0),Promise.all($e.map((function(e){return c(Zs(e.id))}))).then((function(){return L(!1)})),function(){return gs()}}),[c,$e]),i.a.useEffect((function(){return G(!0),Promise.all(Ct.map((function(e){return c(yl(e.id))}))).then((function(){return G(!1)})),function(){return Ac()}}),[c,Ct]),i.a.useEffect((function(){return z(!0),Promise.all(Rt.map((function(e){return c(Gc(e.supplier_id,e.type,e.id))}))).then((function(){return z(!1)})),function(){return Hl()}}),[c,Rt]);var ea=i.a.useCallback((function(){var e=Vn();if(Re>Be&&e.push("Start Date must be before End date"),e.length>0)zn({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}});else{var t=[{field:"message_data",value:Sn,operator:re},{field:"source_addr",value:cn,operator:Ce},{field:"destination_addr",value:bn,operator:ke},{field:"virtual_number_message_id",value:xn.map((function(e){return e.name})),operator:!1},{field:"edge_notes_site_id",value:Ln.map((function(e){return e.id})),operator:ne},{field:"client_id",value:$e.map((function(e){return e.id})),operator:J},{field:"client_connection_id",value:ut.map((function(e){return e.id})),operator:ue},{field:"supplier_id",value:Ct.map((function(e){return e.id})),operator:$},{field:"supplier_connection_id",value:Rt.map((function(e){return e.id})),operator:je},{field:"supplier_connection_link_id",value:Wt.map((function(e){return e.id})),operator:ge}].reduce((function(e,t){return 0===t.value.length||(e[t.field]={operator:!0===t.operator?"not_equal":"equal",values:!0===Array.isArray(t.value)?t.value:[t.value]}),e}),{receive_time_to:Be.getTime(),receive_time_from:Re.getTime()});d({filters:t}),v(!0)}}),[ue,J,bn,ke,xn,Sn,re,ut,$e,Ln,Wt,Rt,Ct,zn,ne,cn,Ce,ge,je,$,Re,Be,Vn]);return!0===O?Object(Ka.jsx)(Qx,{searchParams:u,onHideTrafficSearch:Wn}):Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsxs)(w.d,{children:[Object(Ka.jsx)(w.f,{children:"Traffic Search"}),Object(Ka.jsx)(w.e,{style:{marginTop:"10px"},children:"Find transactions easily by searching specific attributes."})]}),Object(Ka.jsx)(w.c,{children:!0===f?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:4,children:Object(Ka.jsx)("h4",{style:{marginTop:"26px",marginLeft:"10px",marginRight:"40px",color:"grey"},children:"Select Transactions' Timeframe"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"Start",value:Re,errors:De,onChange:Ae,onErrorsChange:Te,validations:Pe,max:null==Be?void 0:Be})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(Ka.jsx)(fm,{variant:"DateTime",label:"End",value:Be,errors:Ue,onChange:Ve,onErrorsChange:qe,validations:ze,min:null==Re?void 0:Re})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Client Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===E?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Client",errors:Je,data:nt,value:$e,onChange:Ze,onErrorsChange:Ye})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===E?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:J,onChange:Y,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===P?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Client Connection",errors:rt,data:jt,value:ut,disabled:0===$e.length,onChange:dt,onErrorsChange:st})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===P?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ue,disabled:0===$e.length,onChange:de,style:{fontWeight:"bold"}})})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Supplier Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===M?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier",errors:gt,data:kt,value:Ct,onChange:_t,onErrorsChange:Ot})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===M?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:$,onChange:Z,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===q?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Connection",errors:Dt,data:Ft,value:Rt,disabled:0===Ct.length,onChange:At,onErrorsChange:Tt})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:!0===q?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:je,disabled:0===Ct.length,onChange:fe,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:!0===V?Object(Ka.jsx)(y.a,{variant:"rect",animation:"wave",width:"100%",height:50}):Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Supplier Connection Link",errors:Ht,data:Qt,value:Wt,onChange:Kt,onErrorsChange:Bt,disabled:0===Rt.length||!0===Bn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ge,onChange:Oe,style:{fontWeight:"bold"},disabled:0===Rt.length})})]})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Message Details"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Message Id",allowCustom:!0,errors:pn,value:xn,onChange:Cn,onErrorsChange:gn})})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Message Data",errors:In,value:Sn,onChange:kn,onErrorsChange:Dn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:re,onChange:se,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Source Address",errors:en,value:cn,onChange:rn,onErrorsChange:tn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:Ce,onChange:_e,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Destination Address",errors:on,value:bn,onChange:jn,onErrorsChange:un})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ke,onChange:we,style:{fontWeight:"bold"}})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:10,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Sites",errors:Nn,data:Gn,value:Ln,onChange:Fn,onErrorsChange:Rn})}),Object(Ka.jsx)(S.a,{item:!0,xs:2,children:Object(Ka.jsx)(fm,{variant:"Checkbox",label:"\u2260",value:ne,onChange:ae,style:{fontWeight:"bold"}})})]})})]})})]})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ea,children:"Search"})})]})}var $x=i.a.memo(Xx),Zx={skip:0,take:20,sort:[{field:"requested_time",dir:"desc"}]},eC={FAILED:"Failed",QUEUED:"Queued",PENDING:"Pending",COMPLETED:"Completed",IN_PROGRESS:"In Progress"};function tC(){var e=i.a.useContext(Tm),t=e.setTitle,n=e.setContentTitle,a=e.setBreadcrumbs,c=Object(l.c)(),r=i.a.useState(!0),s=Object(o.a)(r,2),u=s[0],d=s[1],b=i.a.useState(!1),j=Object(o.a)(b,2),f=j[0],h=j[1],p=i.a.useState(Zx),g=Object(o.a)(p,2),O=g[0],v=g[1],x=i.a.useCallback((function(e){v(e.dataState)}),[]);i.a.useEffect((function(){return t("Virtual Numbers Traffic Documents"),n("Virtual Numbers Traffic Documents"),a([{name:"Virtual Numbers Traffic"},{link:"/virtual-numbers-traffic/export",name:"Traffic Documents"}]),function(){t(null),a([])}}),[t,n,a]);var C=i.a.useCallback((function(e){c(Ui(e))}),[c]),_=i.a.useCallback((function(){c({type:Jt})}),[c]),y=i.a.useCallback((function(){return _(),c(ho())}),[c,_]),E=kb({frequency:1e4,intervalPolicy:"update",name:"Traffic Document",request:i.a.useCallback((function(){return y()}),[y]),getData:i.a.useCallback((function(e){var t=e.virtualNumbersTrafficExport.reduce((function(e,t){return e.add(new m.b({id:t.get("id"),link:t.get("link"),status:t.get("status"),username:t.get("username"),requested_time:t.get("requested_time")}))}),new m.e);return new m.b({data:t,totalRecords:t.size})}),[])}),I=E.data,D=E.update,T=i.a.useCallback((function(){return h(!0),D().then((function(){h(!1)})).catch((function(e){C({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[D,C]);i.a.useEffect((function(){return d(!0),D().then((function(){d(!1)})).catch((function(e){C({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){return _()}}),[_,C,D]);var M=i.a.useCallback((function(e){window.location.href=e}),[]),N=i.a.useCallback((function(){v(Zx)}),[]),R=sb({variant:"Input"}),A=sb({variant:"Date"}),P=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(eC).map((function(e){return{id:e,name:eC[e]}}),[])}),[])}}),L=i.a.useMemo((function(){return[{field:"id",title:"ID",filterCell:R},{field:"username",title:"Username",filterCell:R},{field:"status",title:"Status",width:"200px",view:"statusDOM",filterCell:P},{field:"requested_time",title:"Requested Time",view:"dateDOM",width:"250px",filterCell:A},{field:"actions",locked:!0,sortable:!1,filterable:!1,width:"75px"}]}),[R,A,P]),F=i.a.useMemo((function(){return I.get("data").reduce((function(e,t){return e.push({id:t.get("id"),status:t.get("status"),username:t.get("username"),requested_time:t.get("requested_time"),dateDOM:Object(Ka.jsx)(Nd,{utc:t.get("requested_time")}),statusDOM:Object(Ka.jsxs)(Ka.Fragment,{children:["COMPLETED"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-check"}):"FAILED"===t.get("status")?Object(Ka.jsx)("i",{className:"fas fa-exclamation-triangle"}):Object(Ka.jsx)("i",{className:"fas fa-spinner fa-spin"})," ",eC[t.get("status")]]}),actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"download",title:"Download Traffic Document","aria-label":"Download Traffic Document",disabled:null==t.get("link"),onClick:function(){return M(t.get("link"))}})})}),e}),[])}),[I,M]);return Object(Ka.jsx)(S.a,{item:!0,container:!0,spacing:2,children:Object(Ka.jsx)(S.a,{item:!0,xs:12,md:12,lg:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Traffic Documents"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,isLoading:u,frontendFiltering:!0,frontendPagination:!0,style:{height:"500px"},skip:O.skip,take:O.take,sort:O.sort,filter:O.filter,data:F,columns:L,onDataStateChange:x})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:T,disabled:!0===f,children:!0===f?"Loading...":"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:N,children:"Clear Filters and Sorting"})]})]})})})}var nC=i.a.memo(tC);function aC(){var e="/virtual-numbers-traffic",t=b();return Object(Ka.jsx)(Rb,{tabs:[{url:e,title:"Traffic Search",key:"virtual-numbers-traffic.search",path:e,component:Object(Ka.jsx)($x,{}),visible:t.has("FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-SEARCH-PAGE-ACCESS")},{title:"Traffic Documents",key:"virtual-numbers-traffic.documents",url:"".concat(e,"/export"),path:"".concat(e,"/export"),component:Object(Ka.jsx)(nC,{}),visible:t.has("FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-DOCUMENTS-PAGE-ACCESS")}]})}var iC=i.a.memo(aC);function cC(e){var t=e.userID,n=e.onStatusChange,a=b(),c=i.a.useMemo((function(){return a.has("API:USER:WRITE")}),[a]),r=Object(l.d)((function(e){var n=e.user,a=e.field;return{ldapUser:e.ldapUser,user:n.get(t),fields:a["ldap-user-fields"]}})),s=r.user,o=r.fields,u=r.ldapUser,d=i.a.useMemo((function(){if(null==s||null==s.get("ldap_id"))return{};var e=u.get(s.get("ldap_id"));return null==e?{}:{ldapID:s.get("ldap_id"),domain:e.get("domain"),isSuspended:!0===s.get("suspended")}}),[s,u]),m=d.domain,j=d.ldapID,f=d.isSuspended,h=i.a.useMemo((function(){if(null==o)return[];var e,t=(null==(e=s).get("ldap_user_fields")?[]:e.get("ldap_user_fields").toJS()).reduce((function(e,t){return e[t.field_id]=t.field_value,e}),{});return o.map((function(e){return Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(cj,{label:e.field_name,value:t[e.field_id]})},e.field_id)}))}),[s,o]),p=i.a.useCallback((function(e){"function"===typeof n&&e!==f&&n(e)}),[f,n]),g=i.a.useMemo((function(){return[{id:!0,name:"Suspended"},{id:!1,name:"Active"}]}),[]);return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[h,Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(cj,{label:"Status",value:!1===c?!0===f?"Suspended":"Active":Object(Ka.jsx)(fm,{variant:"ButtonGroup",value:f,data:g,onChange:p})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(cj,{label:"Domain",value:m})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(Ka.jsx)(cj,{label:"LDAP ID",value:j})})]})}var rC=i.a.memo(cC);function sC(e){var t=e.dataItem.recordID,n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useCallback((function(e){n(Ui(e))}),[n]),d=Object(l.d)((function(e){return{ldapGroup:e.ldapGroup,accessGroup:e.accessGroup}})),m=d.ldapGroup,b=d.accessGroup,j=i.a.useMemo((function(){return(null==b.getIn([t,"ldap-groups"])?[]:b.getIn([t,"ldap-groups"]).toJS()).reduce((function(e,t){var n=m.get(t);return null==n||e.push(Object(Ka.jsx)(zp.a,{size:"small",label:n.get("name")},t)),e}),[])}),[t,m,b]);return i.a.useEffect((function(){return s(!0),n(wu(t)).catch((function(e){u({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return s(!1)})),function(){return n({data:{id:t},type:Kn})}}),[n,t,u]),!0===r?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(Ka.Fragment,{children:["LDAP Groups: ",0===j.length?"None":j]})}var lC=i.a.memo(sC),oC={INHERITED:{id:"INHERITED",name:"Inherited"},ASSIGNED:{id:"ASSIGNED",name:"Assigned"}};function uC(e){var t=e.userID,n=e.onAccessGroupUnassign,a=b(),c=i.a.useState([]),r=Object(o.a)(c,2),s=r[0],u=r[1],d=i.a.useState([]),m=Object(o.a)(d,2),j=m[0],f=m[1],h=i.a.useState(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState({skip:0,take:20}),C=Object(o.a)(v,2),_=C[0],y=C[1],S=i.a.useMemo((function(){return a.has("API:USER:WRITE")}),[a]),w=Object(l.d)((function(e){var n=e.user;return{accessGroup:e.accessGroup,user:n.get(t)}})),E=w.user,I=w.accessGroup,D=i.a.useCallback((function(e){y(e.dataState)}),[]),T=i.a.useCallback((function(e){var t=Object(x.a)(j),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),f(t)}),[j]),M=i.a.useCallback((function(e){u([e]),O(!0)}),[]),N=i.a.useCallback((function(){u([]),O(!1)}),[]),R=i.a.useCallback((function(){"function"===typeof n&&(u([]),O(!1),n(s[0]))}),[s,n]),A=sb({variant:"Combobox",props:{data:i.a.useMemo((function(){return[{id:"INHERITED",name:"Inherited"},{id:"ASSIGNED",name:"Assigned"}]}),[])}}),P=sb({variant:"Input"}),L=i.a.useMemo((function(){return null==E?[]:(null==E||null==E.get("access-groups")?[]:Object(x.a)(E.get("access-groups").values())).reduce((function(e,t){var n=t.get("id"),a=I.get(n);if(null==a)return e;var i=a.get("name"),c=t.get("type"),r=j.includes(n);return e.push({name:i,id:n,expanded:r,type:dC(c),expand:Object(Ka.jsx)(k.a,{look:"flat",icon:!0===r?"minus":"add",title:"View ".concat(i," LDAP Groups"),"aria-label":"View ".concat(i," LDAP Groups"),onClick:function(){return T(n)}}),actions:c===oC.INHERITED.id||!1===S?null:Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Remove ".concat(i),"aria-label":"Remove ".concat(i),onClick:function(){return M(n)}})}),e}),[])}),[E,I,j,S,M,T]),F=i.a.useMemo((function(){var e=[{field:"expand",width:"70px",sortable:!1,filterable:!1},{field:"name",title:"Name",width:"238px",filterCell:P},{field:"type",title:"Type",width:"193px",filterCell:A}];return L.some((function(e){return null!=e.actions}))&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[L,A,P]),U=i.a.useMemo((function(){return s.map((function(e){return Object(Ka.jsxs)("li",{children:[I.getIn([e,"name"]),"(ID: ",e,")"]},e)}))}),[I,s]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendSorting:!0,frontendFiltering:!0,frontendPagination:!0,data:L,total:L.length,skip:_.skip,take:_.take,sort:_.sort,columns:F,filter:_.filter,style:{height:"756px"},detail:lC,onDataStateChange:D}),!0===g&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:N,children:["Are you sure you want to delete the following Access Group/s?",Object(Ka.jsx)("ul",{children:U}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:R,children:"Delete"}),Object(Ka.jsx)(k.a,{onClick:N,children:"Cancel"})]})]})]})}function dC(e){var t=oC[e];return null==t?"-":t.name}var mC=i.a.memo(uC);function bC(e){var t=e.dataItem,n=t.userID,a=t.id,c=Object(l.d)((function(e){var t=e.user;return{accessGroup:e.accessGroup,accessRight:t.getIn([n,"access-rights",a])}})),r=c.accessRight,s=c.accessGroup,o=i.a.useMemo((function(){return(null==r||null==r.get("access-groups")?[]:r.get("access-groups").toJS()).reduce((function(e,t){var n=s.get(t);return null==n||e.push(Object(Ka.jsx)(zp.a,{size:"small",label:n.get("name")},t)),e}),[])}),[r,s]);return Object(Ka.jsxs)(Ka.Fragment,{children:["Access Groups: ",0===o.length?"None":o]})}var jC=i.a.memo(bC),fC={READ_WRITE:{id:"READ_WRITE",name:"Read/Write"},READ_ONLY:{id:"READ_ONLY",name:"Read Only"},NO_ACCESS:{id:"NO_ACCESS",name:"No Access"}};function hC(e){var t=fC[e];return null==t?"-":t.name}var pC=fC;function gC(e){var t=e.userID,n=Object(l.d)((function(e){var n=e.user;return{accessRightModule:e.accessRightModule,user:n.get(t)}})),a=n.user,c=n.accessRightModule,r=i.a.useState([]),s=Object(o.a)(r,2),u=s[0],d=s[1],m=i.a.useState({skip:0,take:20}),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useCallback((function(e){f(e.dataState)}),[]),p=i.a.useCallback((function(e){var t=Object(x.a)(u),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),d(t)}),[u]),g=sb({variant:"MultiSelect",props:{data:i.a.useMemo((function(){return Object.keys(pC).map((function(e){return{id:e,name:pC[e].name}}),[])}),[])}}),O=sb({variant:"Input"}),v=i.a.useMemo((function(){return[{field:"expand",width:"65px",sortable:!1,filterable:!1},{field:"module",title:"Module",width:"200px",filterCell:O},{field:"rights",title:"Rights",view:"rightsDOM",width:"300px",filterCell:g}]}),[O,g]),C=i.a.useMemo((function(){return null==a?[]:(null==a||null==a.get("access-rights")?[]:Object(x.a)(a.get("access-rights").values())).reduce((function(e,n){var a=n.get("id"),i=c.get(a);if(null==i)return e;var r=u.includes(a);return e.push({id:a,userID:t,expanded:r,rights:n.get("access-level"),rightsDOM:hC(n.get("access-level")),module:i.get("name"),expand:Object(Ka.jsx)(k.a,{look:"flat",title:"View Access Groups","aria-label":"View Access Groups",icon:!0===r?"minus":"add",onClick:function(){return p(a)}})}),e}),[])}),[a,t,c,u,p]);return Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,frontendSorting:!0,frontendFiltering:!0,frontendPagination:!0,data:C,total:C.length,skip:j.skip,take:j.take,sort:j.sort,columns:v,filter:j.filter,style:{height:"500px"},detail:jC,onDataStateChange:h})}var OC=i.a.memo(gC);function vC(e){var t=e.data,n=void 0===t?[]:t,a=e.value,c=void 0===a?[]:a,r=e.open,s=void 0!==r&&r,l=e.disabled,o=void 0===l||l,u=e.onOpen,d=e.onChange,m=e.onCancel,b=e.onSubmit,j=i.a.useCallback((function(){"function"===typeof u&&u()}),[u]),f=i.a.useCallback((function(e){"function"===typeof d&&d(e)}),[d]),h=i.a.useCallback((function(){"function"===typeof m&&m()}),[m]),p=i.a.useCallback((function(){"function"===typeof b&&b()}),[b]);return!1===s?Object(Ka.jsx)(k.a,{onClick:j,primary:!0,children:"Assign Group"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,alignItems:"center",children:[Object(Ka.jsx)(S.a,{item:!0,xs:6,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"Access Groups",data:n,value:c,disabled:!0===o,onChange:f})}),Object(Ka.jsxs)(S.a,{item:!0,xs:6,style:{textAlign:"right"},children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:p,disabled:0===c.length||!0===o,children:"Save"}),Object(Ka.jsx)(k.a,{onClick:h,disabled:!0===o,style:{marginLeft:"10px"},children:"Cancel"})]})]})}var xC=i.a.memo(vC);function CC(){var e=Object(d.j)().userID,t=b(),n=Object(d.h)(),a=Object(l.c)(),c=i.a.useContext(Tm),r=c.setTitle,s=c.setContentTitle,u=c.setBreadcrumbs,m=i.a.useState(),j=Object(o.a)(m,2),f=j[0],h=j[1],p=i.a.useState([]),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(!1),_=Object(o.a)(C,2),y=_[0],E=_[1],I=i.a.useState(!1),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useState(!1),R=Object(o.a)(N,2),A=R[0],P=R[1],L=i.a.useState(!1),F=Object(o.a)(L,2),U=F[0],q=F[1],G=i.a.useState(!1),H=Object(o.a)(G,2),B=H[0],V=H[1],z=i.a.useState(!1),W=Object(o.a)(z,2),K=W[0],J=W[1],Y=i.a.useMemo((function(){return t.has("API:USER:WRITE")}),[t]),Q=Object(l.d)((function(t){var n=t.user;return{accessGroup:t.accessGroup,user:n.get(e)}})),X=Q.user,$=Q.accessGroup;i.a.useEffect((function(){return null==f?(r("User Details"),s("User Details")):(r("".concat(f,"'s Details")),s("".concat(f,"'s Details"))),u([{name:"Settings"},{link:"/users",name:"User Management"},{name:"User"},null!=f&&{name:f}]),function(){r(null),u([]),s(null)}}),[r,s,f,u]);var Z=i.a.useMemo((function(){return null==X||{isSuspended:!0===X.get("suspended")}}),[X]).isSuspended,ee=i.a.useCallback((function(e){a(Ui(e))}),[a]),te=i.a.useMemo((function(){var e=null==X||null==X.get("access-groups")?[]:Object(x.a)(X.get("access-groups").keys());return $.reduce((function(t,n){return!0===e.includes(n.get("id"))||t.push({id:n.get("id"),name:n.get("name")}),t}),[])}),[X,$]),ne=i.a.useCallback((function(){a(vu()),a({data:{id:e},type:Gn}),a(function(e){return{data:{id:e},type:qn}}(e))}),[a,e]),ae=i.a.useCallback((function(){a(zu()),a(vi("ldap-user-fields"))}),[a]),ie=i.a.useCallback((function(){a(Su())}),[a]),ce=i.a.useCallback((function(){return ne(),Promise.all([a(Fu(e)),a(Uu(e))])}),[e,a,ne]),re=i.a.useCallback((function(){return ae(),Promise.all([a((t=e,function(e){return su.get("/".concat(t)).then((function(t){return e(Nu(t.data)),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})),a(xi("ldap-user-fields"))]).then((function(e){var t=Object(o.a)(e,1)[0];return h(t.ldap_id),a(function(e){return function(t){return Gu.get("/".concat(e)).then((function(e){t(Hu(e.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t.ldap_id))}));var t}),[a,e,ae]),se=i.a.useCallback((function(){return ie(),a(ku())}),[a,ie]);i.a.useEffect((function(){return V(!0),q(!0),J(!0),Promise.all([re().then((function(){return V(!1)})),se().then((function(){return q(!1)})),ce().then((function(){return J(!1)}))]).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){ae(),ie(),ne(),a(Pu())}}),[n,a,ee,ae,re,ne,ie,se,ce]);var le=i.a.useCallback((function(){E(!0)}),[]),oe=i.a.useCallback((function(){E(!1),v([])}),[]),ue=i.a.useCallback((function(){var t,n;J(!0),a((t=e,n={access_groups:O.map((function(e){return e.id}))},function(){return su.post("/".concat(t,"/access-groups"),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){return v([]),ee({severity:"success",message:"Access Group/s Assigned Successfully"}),E(!1),ce()})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return J(!1)}))}),[e,a,ee,ce,O]),de=i.a.useCallback((function(t){var n,i;J(!0),a((n=e,i=t,function(){return su.delete("/".concat(n,"/access-groups/").concat(i)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){return v([]),ee({severity:"success",message:"Access Group Unassigned Successfully"}),ce()})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return J(!1)}))}),[e,a,ee,ce]),me=i.a.useCallback((function(){M(!0)}),[]),be=i.a.useCallback((function(){var t;P(!0),a(!0===Z?(t=e,function(){return su.patch("/".concat(t),{suspended:!1}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}):function(e){return function(){return su.patch("/".concat(e),{suspended:!0}).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(e)).then((function(){return ee({severity:"success",message:"User successfully ".concat(!0===Z?"Activated":"Suspended")}),P(!1),M(!1),V(!0),re()})).catch((function(e){ee({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return V(!1)}))}),[a,e,Z,ee,re]),je=i.a.useCallback((function(){M(!1)}),[]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:!0===U?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"loader"})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsxs)(w.a,{className:"Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"User Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:!0===B?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(rC,{userID:e,onStatusChange:me})}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("hr",{}),Object(Ka.jsx)("h3",{className:"SectionHeader",children:"Access Rights"}),!0===K?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(OC,{userID:e})]})]})}),Object(Ka.jsx)(w.b,{layout:"stretched",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return n.push("/users/")},children:"Back"})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,lg:6,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent Card--FullHeight",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Access Groups"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===Y&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(xC,{open:y,value:O,data:te,disabled:K,onChange:v,onOpen:le,onCancel:oe,onSubmit:ue})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:!0===K?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(mC,{userID:e,onAccessGroupUnassign:de})})]})})]})})]})}),!0===T&&Object(Ka.jsxs)(Ub.a,{title:"Status Change",onClose:je,children:[Object(Ka.jsx)("p",{children:!0===A?!0===Z?"Activating User. Please wait.":"Suspending User. Please wait.":Object(Ka.jsxs)(Ka.Fragment,{children:["Are you sure you want to",Object(Ka.jsx)("strong",{children:!0===Z?" Activate ":" Suspend "}),"user"]})}),!1===A&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:be,children:"Proceed"}),Object(Ka.jsx)(k.a,{onClick:je,children:"Close"})]})]})]})}var _C=i.a.memo(CC);function yC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=sb({variant:"Input"}),n=sb({variant:"Numeric"});return i.a.useMemo((function(){return e.map((function(e){var a={field:e.field_id,title:e.field_name,width:"200px"};switch(e.field_type){case"number":a.filterCell=n;break;default:a.filterCell=t}return a}))}),[e,t,n])}var SC={skip:0,take:20};function kC(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(0),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useContext(Tm),p=h.setTitle,g=h.setContentTitle,O=h.setBreadcrumbs,C=i.a.useState(SC),y=Object(o.a)(C,2),E=y[0],I=y[1],D=i.a.useMemo((function(){return e.has("API:USER:WRITE")}),[e]),T=Object(l.d)((function(e){return{user:e.user,fields:e.field["ldap-user-fields"]}})),M=T.user,N=yC(T.fields),R=i.a.useCallback((function(e){n(Ui(e))}),[n]);i.a.useEffect((function(){return p("Users"),g("Users"),O([{name:"Settings"},{name:"User Management"},{name:"Users"}]),function(){p(null),O([]),g(null)}}),[p,g,O]);var A=i.a.useCallback((function(){n(Pu()),n(vi("ldap-user-fields"))}),[n]),P=i.a.useCallback((function(){return A(),Promise.all([n(Lu(ni(E))),n(xi("ldap-user-fields"))]).then((function(e){var t=Object(o.a)(e,1)[0];f(t.total_records)}))}),[A,n,E]),L=i.a.useCallback((function(){return s(!0),P().then((function(){s(!1)})).catch((function(e){R({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[P,R]);i.a.useEffect((function(){return L(),function(){return A()}}),[A,L]);var F=i.a.useCallback((function(){I(SC)}),[]),U=i.a.useCallback((function(e){I(e.dataState)}),[]),q=sb({variant:"Combobox",props:{label:"Status",data:i.a.useMemo((function(){return[{id:!1,name:"Active"},{id:!0,name:"Suspended"}]}),[])}}),G=sb({variant:"Input",props:{label:"ID"}}),H=i.a.useMemo((function(){return[].concat(Object(x.a)(N),[{field:"suspended",title:"Status",width:"200px",filterCell:q},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:G},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}])}),[N,G,q]),B=i.a.useMemo((function(){return Object(x.a)(M.values()).map((function(e){var n=e.get("user_id"),a=function(e){return(null==e.get("ldap_user_fields")?[]:e.get("ldap_user_fields").toJS()).reduce((function(e,t){return e[t.field_id]=t.field_value,e}),{})}(e);return Object(v.a)(Object(v.a)({id:n,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})})},a),{},{suspended:!0===e.get("suspended")?"Suspended":"Active",actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("ldap_id")),"aria-label":"Edit ".concat(e.get("ldap_id")),onClick:function(){return t.push("/users/".concat(n))}})})})}))}),[M,t]);return Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===D&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){return t.push("/users/new")},children:"Add User"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,data:B,isLoading:r,total:j,skip:E.skip,take:E.take,sort:E.sort,columns:H,filter:E.filter,style:{height:"500px"},onDataStateChange:U})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:L,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:F,children:"Clear Filters and Sorting"})]})]})})}var wC=i.a.memo(kC),EC={skip:0,take:20,sort:[{dir:"desc",field:"active"}]};function IC(){var e=Object(d.h)(),t=Object(l.c)(),n=i.a.useState(!0),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useState(0),u=Object(o.a)(s,2),m=u[0],b=u[1],j=i.a.useState(!1),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState(null),O=Object(o.a)(g,2),C=O[0],y=O[1],S=null!=C,E=i.a.useContext(Tm),I=E.setTitle,D=E.setContentTitle,T=E.setBreadcrumbs,M=i.a.useState(EC),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useCallback((function(e){t(Ui(e))}),[t]),L=Object(l.d)((function(e){var t=e.field;return{ldapUser:e.ldapUser,fields:t["ldap-user-fields"]}})),F=L.fields,U=L.ldapUser,q=yC(F);i.a.useEffect((function(){return I("LDAP Users"),D("LDAP Users"),T([{name:"Settings"},{name:"User Management"},{name:"LDAP Users"}]),function(){I(null),T([]),D(null)}}),[I,D,T]);var G=i.a.useCallback((function(){t(zu()),t(vi("ldap-user-fields"))}),[t]),H=i.a.useCallback((function(){return G(),Promise.all([t((e=ni(R),function(t){return Gu.get("",{params:e}).then((function(e){return t(Hu.apply(void 0,Object(x.a)(e.data.users))),e.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})),t(xi("ldap-user-fields"))]).then((function(e){var t=Object(o.a)(e,1)[0];b(t.total_records)}));var e}),[G,t,R]),B=i.a.useCallback((function(){return r(!0),H().then((function(){r(!1)})).catch((function(e){P({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[H,P]);i.a.useEffect((function(){return B(),function(){return G()}}),[G,B]);var V=i.a.useCallback((function(){A(EC)}),[]),z=i.a.useCallback((function(e){A(e.dataState)}),[]),W=i.a.useCallback((function(){y(null)}),[]),K=i.a.useCallback((function(){var e;p(!0),t((e=C.get("id"),function(){return Gu.post("/".concat(e,"/activate")).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).catch((function(e){P({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return p(!1),y(null),B()}))}),[B,P,t,C]),J=sb({variant:"Combobox",props:{data:i.a.useMemo((function(){return[{id:!1,name:"Inactive"},{id:!0,name:"Active"}]}),[])}}),Y=sb({variant:"Input"}),Q=i.a.useMemo((function(){return[].concat(Object(x.a)(q),[{field:"domain",title:"Domain",width:"350px",filterCell:Y},{field:"active",title:"Status",width:"300px",filterCell:J},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}])}),[Y,q,J]),X=i.a.useMemo((function(){return Object(x.a)(U.values()).map((function(e){var t=e.get("id"),n=DC(e);return Object(v.a)(Object(v.a)({id:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:t})}),domain:e.get("domain"),username:e.get("username"),active:!0===e.get("active")?"Active":"Inactive"},n),{},{actions:!1===e.get("active")&&Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"add",title:"Grant ".concat(e.get("name")," Access"),"aria-label":"Edit ".concat(e.get("name")," Access"),onClick:function(){return y(e)}})})})}))}),[U]),$=i.a.useMemo((function(){return null==F?{}:F.reduce((function(e,t){return e[t.field_id]=t.field_name,e}),{})}),[F]),Z=i.a.useMemo((function(){if(null==C)return null;var e=DC(C);return[].concat(Object(x.a)(Object.keys(e).map((function(t){return{key:t,label:$[t],value:e[t]}}))),[{key:"domain",label:"Domain",value:C.get("domain")}]).map((function(e){return Object(Ka.jsxs)("span",{children:[e.label,": ",Object(Ka.jsx)("strong",{children:e.value})," ",Object(Ka.jsx)("br",{})]},e.key)}))}),[C,$]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,data:X,isLoading:c,total:m,skip:R.skip,take:R.take,sort:R.sort,columns:Q,filter:R.filter,style:{height:"500px"},onDataStateChange:z})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return e.push("/users")},children:"Back"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:B,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:V,children:"Clear Filters and Sorting"})]})]}),!0===S&&Object(Ka.jsxs)(Ub.a,{title:"Grant Access",onClose:W,children:[!1===h?Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)("p",{children:"Are you sure you want to grant access to the following user?"}),Object(Ka.jsx)("p",{style:{textAlign:"left"},children:Z})]}):Object(Ka.jsx)(Ka.Fragment,{children:Object(Ka.jsx)("p",{children:"Granting Access. Please wait."})}),!1===h&&Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:K,children:"Proceed"}),Object(Ka.jsx)(k.a,{onClick:W,children:"Close"})]})]})]})}function DC(e){return(null==e.get("ldap_user_fields")?[]:e.get("ldap_user_fields").toJS()).reduce((function(e,t){return e[t.field_id]=t.field_value,e}),{})}var TC=i.a.memo(IC);function MC(){var e="/users",t=b();return Object(Ka.jsxs)(d.e,{children:[!0===t.has("API:USER:WRITE")&&Object(Ka.jsx)(d.c,{path:"".concat(e,"/new"),exact:!0,children:Object(Ka.jsx)(TC,{})}),Object(Ka.jsx)(d.c,{path:"".concat(e,"/:userID"),children:Object(Ka.jsx)(_C,{})}),Object(Ka.jsx)(d.c,{path:e,children:Object(Ka.jsx)(wC,{})})]})}var NC=i.a.memo(MC);function RC(e){var t=e.name,n=void 0===t?"":t,a=e.nameErrors,c=void 0===a?[]:a,r=e.nameValidations,s=e.onNameChange,o=e.onNameErrorsChange,u=e.ldapGroups,d=void 0===u?[]:u,m=e.ldapGroupsErrors,b=void 0===m?[]:m,j=e.onLDAPGroupsChange,f=e.onLDAPGroupsErrorsChange,h=Object(l.d)((function(e){return{ldapGroup:e.ldapGroup}})).ldapGroup,p=i.a.useMemo((function(){return h.reduce((function(e,t){var n={id:t.get("id"),name:t.get("name")};return e.options.push(n),!0===d.includes(n.id)&&e.value.push(n),e}),{value:[],options:[]})}),[d,h]),g=p.value,O=p.options,v=i.a.useCallback((function(e){"function"===typeof s&&s(e)}),[s]),x=i.a.useCallback((function(e){"function"===typeof j&&j(e.map((function(e){return e.id})))}),[j]),C=i.a.useCallback((function(e){"function"===typeof o&&o(e)}),[o]),_=i.a.useCallback((function(e){"function"===typeof f&&f(e)}),[f]);return Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Details"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Group Name",value:n,errors:c,onChange:v,validations:r,onErrorsChange:C})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"MultiSelect",label:"LDAP Groups",value:g,data:O,errors:b,onChange:x,onErrorsChange:_})})]})})]})}var AC=i.a.memo(RC);function PC(e){var t=e.permissions,n=void 0===t?{}:t,a=e.onChange,c=Object(l.d)((function(e){return{accessRightModule:e.accessRightModule}})).accessRightModule,r=i.a.useCallback((function(e,t){if("function"===typeof a){var i=Object.assign({},n);i[e]=t,a(i)}}),[a,n]),s=i.a.useMemo((function(){return Object.keys(pC).map((function(e){return{id:pC[e].id,name:pC[e].name}}))}),[]),o=i.a.useMemo((function(){return Object.keys(n).reduce((function(e,t){return null==c.get(t)||e.push(Object(Ka.jsx)(S.a,{item:!0,xs:12,md:6,lg:4,children:Object(Ka.jsx)(fm,{label:c.getIn([t,"name"]),variant:"ButtonGroup",value:n[t],data:s,onChange:function(e){return r(t,e)}})},t)),e}),[])}),[r,n,c,s]);return Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Permissions"})}),Object(Ka.jsx)(w.c,{children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:o})})]})}var LC=i.a.memo(PC);function FC(){var e=Object(d.j)().groupID,t=b(),n=Object(d.h)(),a=Object(l.c)(),c=i.a.useState(!1),r=Object(o.a)(c,2),s=r[0],u=r[1],m=i.a.useState(""),j=Object(o.a)(m,2),f=j[0],h=j[1],p=i.a.useState([]),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState({}),_=Object(o.a)(C,2),y=_[0],E=_[1],I=i.a.useState(!1),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useMemo((function(){return{required:!0,maxLength:50}}),[]),R=i.a.useState([]),A=Object(o.a)(R,2),P=A[0],L=A[1],F=i.a.useContext(Tm),U=F.setTitle,q=F.setContentTitle,G=F.setBreadcrumbs,H=i.a.useMemo((function(){return t.has("API:USER:WRITE")}),[t]),B=i.a.useCallback((function(e){a(Ui(e))}),[a]),V=i.a.useState([]),z=Object(o.a)(V,2),W=z[0],K=z[1],J="new"===e,Y=Nm(i.a.useMemo((function(){return[{value:f,label:"Group Name",setErrors:v,validations:N}]}),[f,v,N])),Q=Object(l.d)((function(e){return{accessGroup:e.accessGroup,accessRightModule:e.accessRightModule}})),X=Q.accessGroup,$=Q.accessRightModule;i.a.useEffect((function(){var t=null==X?null:X.getIn([e,"name"]);return null==t?(U("Access Group Details"),q("Access Group Details")):(U("".concat(t,"'s Details")),q("".concat(t,"'s Details"))),G([{name:"Settings"},{link:"/groups",name:"Group Management"},{name:"Group"},{name:t}]),function(){U(null),G([]),q(null)}}),[e,U,q,G,X]);var Z=i.a.useMemo((function(){if(!0===J)return[];var t=X.getIn([e,"ldap-groups"]);return null==t?[]:t.toJS()}),[J,e,X]);i.a.useEffect((function(){var t,n=[a((function(e){return bu.get("").then((function(t){return e(fu.apply(void 0,Object(x.a)(t.data.groups))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})),a((function(e){return Ou.get("/modules").then((function(t){return e(xu.apply(void 0,Object(x.a)(t.data.modules))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))];return!1===J&&n.push(a((t=e,function(e){return du.get("/".concat(t)).then((function(t){e(yu(t.data))})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})),a(wu(e)),a(Eu(e))),u(!0),Promise.all(n).then((function(){u(!1)})).catch((function(e){B({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){a(ju()),a(Su()),a(vu())}}),[J,B,e,a]),i.a.useEffect((function(){!0!==J&&null!=X&&h(X.getIn([e,"name"]))}),[J,e,X]),i.a.useEffect((function(){if(!0!==J&&null!=X){var t=X.getIn([e,"ldap-groups"]);L(null==t?[]:t.toJS())}}),[J,e,X]),i.a.useEffect((function(){var t=Object(x.a)($.values()).map((function(e){return{id:e.get("id"),name:e.get("name")}}));t.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),E(Object(x.a)(t.values()).reduce((function(t,n){var a=X.getIn([e,"access-rights",n.id,"access-level"]),i=null!=a?a:pC.NO_ACCESS.id;return t[n.id]=i,t}),{}))}),[e,X,$]);var ee=i.a.useCallback((function(e){return a((t=e,n={access_rights:Object.keys(y).map((function(e){return{module_id:e,access_level:y[e]}}))},function(){return du.patch("/".concat(t,"/access-rights"),n).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}));var t,n}),[a,y]),te=i.a.useCallback((function(e){!1!==H&&(M(!0),h(e))}),[H]),ne=i.a.useCallback((function(e){!1!==H&&(M(!0),E(e))}),[H]),ae=i.a.useCallback((function(e){!1!==H&&(M(!0),L(e))}),[H]),ie=i.a.useCallback((function(){var t=Y();if(t.length>0)B({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}});else{u(!0);var i,c,r,s=Promise.resolve();if(!0===J)s=a((r={name:f},function(){return du.post("",r).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){var t=e.data.id,n=[ee(t)];return P.length>0&&n.push(a(Iu(t,{ldap_groups:P}))),Promise.all(n)}));else{var l=[ee(e),a(Du(e,{name:f}))],o=Object(x.a)(new Set([].concat(Object(x.a)(Z),Object(x.a)(P)))).reduce((function(e,t){var n=P.includes(t),a=Z.includes(t);return!0===n&&!1===a&&e.new.push(t),!1===n&&!0===a&&e.removed.push(t),e}),{new:[],removed:[]}),d=o.new,m=o.removed;d.length>0&&l.push(a(Iu(e,{ldap_groups:d}))),m.length>0&&l.push(a((i=e,c=m.join(","),function(){return du.delete("/".concat(i,"/ldap-groups/").concat(c)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}))),s=Promise.all(l)}s.then((function(){B({severity:"success",message:!0===J?"Access Group Successfully Added":"Access Group Successfully Edited"}),M(!1),n.push("/groups")})).catch((function(e){B({severity:"error",message:e.message,action:{label:"Dismiss"}}),u(!1)}))}}),[f,J,e,n,a,B,Y,Z,P,ee]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:T}),Object(Ka.jsx)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:!0===s?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{className:"loader"})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(AC,{name:f,nameErrors:O,onNameChange:te,nameValidations:N,onNameErrorChanges:v,ldapGroups:P,ldapGroupsErrors:W,onLDAPGroupsChange:ae,onLDAPGroupsErrorsChange:K})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(LC,{permissions:y,onChange:ne})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(w.a,{className:"Card--Transparent",children:Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return n.push("/groups")},children:"Back"}),!0===H&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:ie,children:"Save"})]})})})]})})]})}var UC=i.a.memo(FC),qC={skip:0,take:20};function GC(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(!0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(0),m=Object(o.a)(u,2),j=m[0],f=m[1],h=i.a.useState([]),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState([]),C=Object(o.a)(v,2),y=C[0],E=C[1],I=i.a.useState(!1),D=Object(o.a)(I,2),T=D[0],M=D[1],N=i.a.useContext(Tm),R=N.setTitle,A=N.setContentTitle,P=N.setBreadcrumbs,L=i.a.useState(qC),F=Object(o.a)(L,2),U=F[0],q=F[1],G=Object(l.d)((function(e){return{accessGroup:e.accessGroup}})).accessGroup,H=i.a.useMemo((function(){return e.has("API:USER:WRITE")}),[e]),B=i.a.useCallback((function(e){n(Ui(e))}),[n]);i.a.useEffect((function(){return function(){return n(ju())}}),[n]),i.a.useEffect((function(){return R("Groups"),A("Groups"),P([{name:"Settings"},{name:"Group Management"},{name:"Groups"}]),function(){R(null),P([]),A(null)}}),[R,A,P]);var V=i.a.useCallback((function(){n(Su())}),[n]),z=i.a.useCallback((function(){return V(),n(ku(ni(U))).then((function(e){f(e.total_records)}))}),[V,n,U]),W=i.a.useCallback((function(){return s(!0),z().then((function(){s(!1)})).catch((function(e){B({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[z,B]);i.a.useEffect((function(){return W(),function(){return V()}}),[V,W]);var K=i.a.useCallback((function(){q(qC)}),[]),J=i.a.useCallback((function(e){q(e.dataState)}),[]),Y=i.a.useCallback((function(e){var t=Object(x.a)(g),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),O(t)}),[g]),Q=i.a.useCallback((function(e){E([e]),M(!0)}),[]),X=i.a.useCallback((function(){var e;s(!0),M(!1),n((e=y[0],function(){return du.delete("/".concat(e)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){B({severity:"success",message:"Access Group Successfully Deleted"})})).catch((function(e){B({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return z()})).then((function(){s(!1),E([])}))}),[n,B,z,y]),$=i.a.useCallback((function(){E([]),M(!1)}),[]),Z=sb({variant:"Input",props:{label:"Name"}}),ee=sb({variant:"Input",props:{label:"ID"}}),te=i.a.useMemo((function(){return[{field:"expand",width:"65px",sortable:!1,filterable:!1},{field:"name",title:"Name",width:"300px",filterCell:Z},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:ee},{field:"actions",width:"110px",locked:!0,sortable:!1,filterable:!1}]}),[ee,Z]),ne=i.a.useMemo((function(){return Object(x.a)(G.values()).map((function(e){var n=e.get("id"),a=g.includes(n);return{recordID:n,id:n,idDOM:Object(Ka.jsx)(_.a,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",children:Object(Ka.jsx)(Id,{value:n})}),expanded:a,name:e.get("name"),expand:Object(Ka.jsx)(k.a,{look:"flat",icon:!0===a?"minus":"add",title:"View ".concat(e.get("name")," LDAP Groups"),"aria-label":"View ".concat(e.get("name")," LDAP Groups"),onClick:function(){return Y(n)}}),actions:Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"Edit ".concat(e.get("name")),"aria-label":"Edit ".concat(e.get("name")),onClick:function(){return t.push("/groups/".concat(n))}}),!0===H&&Object(Ka.jsx)(k.a,{look:"flat",icon:"cancel",title:"Delete ".concat(e.get("name")," Access Group"),"aria-label":"Delete ".concat(e.get("name")," Access Group"),onClick:function(){Q(e.get("id"))}})]})}}))}),[t,G,g,H,Q,Y]),ae=i.a.useMemo((function(){return y.map((function(e){return Object(Ka.jsxs)("li",{children:[G.getIn([e,"name"]),"(ID: ",e,")"]},e)}))}),[G,y]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===H&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",primary:!0,onClick:function(){return t.push("/groups/new")},children:"Add Group"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,data:ne,isLoading:r,total:j,skip:U.skip,take:U.take,sort:U.sort,columns:te,detail:lC,filter:U.filter,style:{height:"500px"},onDataStateChange:J})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:W,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:K,children:"Clear Filters and Sorting"})]})]}),!0===T&&Object(Ka.jsxs)(Ub.a,{title:"Please Confirm",onClose:$,children:["Are you sure you want to delete the following Access Group/s?",Object(Ka.jsx)("ul",{children:ae}),Object(Ka.jsxs)(Ub.b,{children:[Object(Ka.jsx)(k.a,{primary:!0,onClick:X,children:"Delete"}),Object(Ka.jsx)(k.a,{onClick:$,children:"Cancel"})]})]})]})}var HC=i.a.memo(GC);function BC(){var e="/groups";return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:e,exact:!0,children:Object(Ka.jsx)(HC,{})}),Object(Ka.jsx)(d.c,{path:"".concat(e,"/:groupID"),exact:!0,children:Object(Ka.jsx)(UC,{})})]})}var VC=i.a.memo(BC),zC={CONTAINS:{id:"CONTAINS",name:"Contains"},EXACT:{id:"EXACT",name:"Exact"},STARTS_WITH:{id:"STARTS_WITH",name:"Starts With"},ENDS_WITH:{id:"ENDS_WITH",name:"Ends With"}},WC=Object.keys(zC).map((function(e){return zC[e]}));function KC(){var e=b(),t=Object(d.j)().categoryID,n=i.a.useContext(Tm),a=n.setTitle,c=n.setBreadcrumbs,r=n.setContentTitle,s=i.a.useMemo((function(){return e.has("API:CATEGORY:WRITE")}),[e]),u=Object(d.h)(),m=Object(l.c)(),j=i.a.useState(),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState([]),O=Object(o.a)(g,1)[0],v=i.a.useState(0),C=Object(o.a)(v,2),_=C[0],y=C[1],E=i.a.useState(!1),I=Object(o.a)(E,2),D=I[0],T=I[1],M=i.a.useState(),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useState(!1),L=Object(o.a)(P,2),F=L[0],U=L[1],q=i.a.useState([]),G=Object(o.a)(q,2),H=G[0],B=G[1],V=i.a.useState(),z=Object(o.a)(V,2),W=z[0],K=z[1],J=i.a.useState(!1),Y=Object(o.a)(J,2),Q=Y[0],X=Y[1],$=oj(h),Z=oj(R),ee=oj(W),te=i.a.useCallback((function(e){m(Ui(e))}),[m]),ne=i.a.useState({skip:0,take:20}),ae=Object(o.a)(ne,2),ie=ae[0],ce=ae[1],re="new"===t,se=Object(l.d)((function(e){return{rule:e.rule,categorisation:e.categorisation}})),le=se.rule,oe=se.categorisation;i.a.useEffect((function(){var e={name:{flexSize:8,elementType:"input",elementConfig:{placeholder:"Category Name"},value:"",validation:{required:!0},valid:!0,validationMessage:""},profiling:{flexSize:2,elementType:"checkbox",elementConfig:{placeholder:"Enable Profiling"},value:!1,validation:{required:!0},valid:!0,validationMessage:""}};!1===re&&(e.name.value=oe.getIn([t,"name"]),e.profiling.value=oe.getIn([t,"profiling"])),e.name.elementConfig.disabled=!1===s,e.profiling.elementConfig.disabled=!1===s,p(e)}),[re,t,s,oe]);var ue=i.a.useCallback((function(){var e={sid:{elementType:"input",elementConfig:{placeholder:"Category Sender ID"},value:"",validation:{required:!1,isSid:!0},valid:!0,validationMessage:""},sid_match_type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Match Type"},valid:!0,value:null,data:WC,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},sid_case_sensitive:{elementType:"checkbox",elementConfig:{placeholder:"Case Sensitive"},value:!1,style:{paddingTop:"0! important"},validation:{required:!1},valid:!0,validationMessage:""}};e.sid_match_type.value=e.sid_match_type.data[0],A(e)}),[]),de=i.a.useCallback((function(){var e={content:{elementType:"textarea",elementConfig:{placeholder:"Category Content"},value:"",validation:{required:!1,maxLength:160},valid:!0,validationMessage:""},content_match_type:{elementType:"combo",clearButton:!1,elementConfig:{allowCustom:!1,placeholder:"Match Type"},valid:!0,value:null,data:WC,textField:"name",dataItemKey:"id",validationMessage:"",validation:{required:!1}},content_case_sensitive:{elementType:"checkbox",elementConfig:{placeholder:"Case Sensitive"},value:!1,style:{paddingTop:"0! important"},validation:{required:!1},valid:!0,validationMessage:""}};e.content_match_type.value=e.content_match_type.data[0],K(e)}),[]);i.a.useEffect((function(){ue()}),[ue]),i.a.useEffect((function(){de()}),[de]),i.a.useEffect((function(){B((function(e){var t=e.filter((function(e){return!e.id}));return[].concat(Object(x.a)(t),Object(x.a)(Object(x.a)(le.values()).map((function(e){return{id:e.get("category_rule_id"),sid:e.get("sid").value,sid_match_type:e.get("sid").match_type,sid_case_sensitive:e.get("sid").case_sensitive,content:e.get("content").value,content_match_type:e.get("content").match_type,content_case_sensitive:e.get("content").case_sensitive}}))))}))}),[le]),i.a.useEffect((function(){if(!0!==re)return T(!0),Promise.all([m(Zl(t)),m(eo(t))]).then((function(e){y(e[1].total),T(!1)})).catch((function(e){te({severity:"error",message:e.message,action:{label:"Dismiss"}})})),function(){m(zl()),m(Jl())}}),[re,t,m,te]);var me=i.a.useMemo((function(){var e=ni(ie);return[{to:"senderid",from:"sid"}].forEach((function(t){null!=e.sort&&null!=e.sort[t.from]&&(e.sort[t.to]=e.sort[t.from],delete e.sort[t.from]),null!=e[t.from]&&(e[t.to]=e[t.from],delete e[t.from])})),e}),[ie]);i.a.useEffect((function(){if(!0!==re)return X(!0),Object(Na.a)(Ma.a.mark((function e(){var n,a;return Ma.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(eo(t,me));case 3:n=e.sent,a=n.total,y(a),X(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),te({severity:"error",message:e.t0.message,action:{label:"Dismiss"}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),function(){m(zl())}}),[re,me,ie,t,m,te]);var be=i.a.useCallback((function(e){ce(e.dataState)}),[]),je=i.a.useCallback((function(e){p(e),U(!0)}),[]),fe=i.a.useCallback((function(e){var t=QC(e);e.sid.validation.required=t,e.sid_match_type.validation.required=t,!1===t&&(e.sid.valid=!0,e.sid_match_type.valid=!0,e.sid.validationMessage="",e.sid_match_type.validationMessage=""),A(e),U(!0)}),[]),he=i.a.useCallback((function(e){var t=XC(e);e.content.validation.required=t,e.content_match_type.validation.required=t,!1===t&&(e.content.valid=!0,e.content_match_type.valid=!0,e.content.validationMessage="",e.content_match_type.validationMessage=""),K(e),U(!0)}),[]),pe=i.a.useMemo((function(){return null!=R&&null!=W&&(!0===QC(R)||!0===XC(W))}),[R,W]),ge=i.a.useCallback((function(){var e=Z(),t=e.controls,n=e.invalidMessages,a=ee(),i=a.controls,c=a.invalidMessages,r=[].concat(Object(x.a)(n),Object(x.a)(c));if(r.length>0)return te({message:Object(Ka.jsx)(Mm,{messageList:r}),severity:"error",action:{label:"Dismiss"}}),A(t),void K(i);var s=Object(x.a)(H);s.unshift({sid:t.sid.value,sid_case_sensitive:t.sid_case_sensitive.value,sid_match_type:null==t.sid_match_type.value?null:t.sid_match_type.value.id,content:i.content.value,content_case_sensitive:i.content_case_sensitive.value,content_match_type:null==i.content_match_type.value?null:i.content_match_type.value.id}),B(s),ue(),de()}),[te,H,ue,de,Z,ee]),Oe=i.a.useCallback((function(e){var t=Object(x.a)(H);t.splice(e,1),B(t)}),[H]),ve=i.a.useCallback((function(e,t){var n=Object(x.a)(H);n.splice(e,1),B(n),void 0!==t&&O.push([t])}),[H,O]),xe=i.a.useCallback((function(){var e=$(),n=e.invalidMessages,a=e.controls;if(p(a),n.length>0)te({message:Object(Ka.jsx)(Mm,{messageList:n}),severity:"error",action:{label:"Dismiss"}});else{T(!0),0!==O.length&&O.map((function(e){return m(function(e,t){return function(){return Vl.delete("/".concat(e,"/rules/").concat(t)).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))}}(t,e[0]))}));var i,c=H.reduce((function(e,t){if(null!=t.id)return e;var n={};return""!==t.sid&&(n.sid={value:t.sid,match_type:t.sid_match_type,case_sensitive:t.sid_case_sensitive}),""!==t.content&&(n.content={value:t.content,match_type:t.content_match_type,case_sensitive:t.content_case_sensitive}),[].concat(Object(x.a)(e),[n])}),[]),r=null;if(!0===re)r=m((i={name:a.name.value,profiling:a.profiling.value},function(){return Vl.post("",i).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(e){if(0!==c.length)return m(no(e.data.id,c))}));else{var s=[m(to(t,{name:a.name.value,profiling:a.profiling.value}))];c.length>0&&s.push(m(no(t,c))),r=Promise.all(s)}r.then((function(){te({severity:"success",message:!0===re?"Category Successfully Added":"Category Successfully Edited"}),U(!1),u.push("/categorisations")})).catch((function(e){te({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return T(!1)}))}}),[m,t,u,re,H,O,$,te]),Ce=Object(l.d)((function(e){return e.categorisation.getIn([t,"name"])}));i.a.useEffect((function(){return!0===re?(a("Category Creation"),r("Category Creation")):null==Ce?(a("Category Modification"),r("Category Modification")):(a("".concat(Ce," Category Modification")),r("".concat(Ce," Category Modification"))),c([{link:"/categorisations",name:"Categorisations"},{name:!0===re?"Creation":Ce}]),function(){a(null),c([]),r(null)}}),[re,Ce,a,r,c]);var _e=sb({variant:"Input"}),ye=i.a.useMemo((function(){var e=[{field:"sid",title:"SID",filterCell:_e},{field:"matchtype",view:"sid_match_typeDOM",title:"SID Match Type",width:"250px",sortable:!1,filterable:!1},{field:"sid_case_sensitive",title:"SID Case Sensitive",view:"sidCaseDOM",width:"250px",sortable:!1,filterable:!1},{field:"content",title:"Content",filterCell:_e},{field:"content_match_type",view:"content_match_typeDOM",title:"Content Match Type",width:"250px",sortable:!1,filterable:!1},{field:"content_case_sensitive",title:"Content Case Sensitive",view:"contentCaseDOM",filter:"boolean",width:"250px",sortable:!1,filterable:!1}];return!0===s&&e.push({field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}),e}),[s,_e]),Se=i.a.useMemo((function(){return H.map((function(e,t){return{sid:JC(e.sid),sid_case_sensitive:e.sid_case_sensitive,sid_match_type:""===e.sid?"-":e.sid_match_type,sid_match_typeDOM:""===e.sid?"-":YC(e.sid_match_type),content:JC(e.content),content_case_sensitive:e.content_case_sensitive,content_match_type:""===e.content?"-":e.content_match_type,content_match_typeDOM:""===e.content?"-":YC(e.content_match_type),sidCaseDOM:!0===e.sid_case_sensitive?"Yes":re?""!==e.content?"-":"No":null!==e.content?"-":"No",contentCaseDOM:!0===e.content_case_sensitive?"Yes":re?""!==e.sid?"-":"No":null!==e.sid?"-":"No",actions:null===e.id?Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",onClick:function(){return Oe(t)}}):Object(Ka.jsx)(k.a,{look:"flat",icon:"minus",onClick:function(){return ve(t,e.id)}})}}))}),[H,re,Oe,ve]);return Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(Yb,{show:F}),Object(Ka.jsxs)(S.a,{container:!0,className:"MainLayoutContentViewportShade",children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Details"})}),Object(Ka.jsx)(w.c,{children:!0===D?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsx)(lj,{controls:h,onControlsChange:je})})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)(w.a,{className:"Card--Transparent",children:[Object(Ka.jsx)(w.d,{children:Object(Ka.jsx)(w.f,{children:"Category Rules"})}),Object(Ka.jsx)(w.c,{children:!0===D?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[!0===s&&Object(Ka.jsx)(S.a,{item:!0,xs:4,children:Object(Ka.jsxs)(S.a,{container:!0,spacing:4,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"SIDs Configuration"}),Object(Ka.jsx)(lj,{controls:R,onControlsChange:fe})]}),Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[Object(Ka.jsx)("h4",{className:"SectionHeader SectionHeaderShort",children:"Content Configuration"}),Object(Ka.jsx)(lj,{controls:W,onControlsChange:he})]}),s&&Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{icon:"add",style:{width:"100%"},primary:!0,onClick:ge,disabled:!1===pe,children:"Add"})})]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,md:!0===s?8:12,children:Q?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsx)(Dm,{resizable:!0,filterable:!0,groupable:!1,style:{height:"500px"},skip:ie.skip,take:ie.take,sort:ie.sort,filter:ie.filter,columns:ye,data:Se,onDataStateChange:be,total:_})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){return u.push("/categorisations")},children:"Cancel"}),s&&Object(Ka.jsx)(k.a,{look:"flat",primary:!0,onClick:xe,children:"Save"})]})]})})]})]})}function JC(e){return null==e||0===e.length?"-":e}function YC(e){var t=zC[e];return JC(null==t?null:t.name)}function QC(e){return""!==e.sid.value}function XC(e){return""!==e.content.value}var $C=i.a.memo(KC),ZC={sort:[{dir:"asc",field:"priority"}]};function e_(){var e=b(),t=Object(d.h)(),n=Object(l.c)(),a=i.a.useState(0),c=Object(o.a)(a,2),r=c[0],s=c[1],u=i.a.useState(!0),j=Object(o.a)(u,2),f=j[0],h=j[1],p=i.a.useState(0),g=Object(o.a)(p,2),O=g[0],v=g[1],C=i.a.useState(ZC),_=Object(o.a)(C,2),y=_[0],E=_[1],I=i.a.useContext(Tm),D=I.setTitle,T=I.setBreadcrumbs,M=I.setContentTitle,N=i.a.useMemo((function(){return Object.assign({},ni(y),{size:20,page:r})}),[r,y]),R=i.a.useMemo((function(){return e.has("API:CATEGORY:WRITE")}),[e]),A=i.a.useMemo((function(){if(!1===R)return!1;var e=Object.assign({},N),t=ni(ZC);return["page","size"].forEach((function(n){delete e[n],delete t[n]})),JSON.stringify(e)===JSON.stringify(t)}),[R,N]),P=i.a.useCallback((function(e){var t=Object.assign({},e.dataState),n=t.sort,a=void 0===n?[]:n;!1===(1===a.length&&"priority"===a[0].field)&&(0===a.length?t.sort=ZC.sort:a.length>1&&(t.sort=a.filter((function(e){return"priority"!==e.field})))),E(t)}),[]),L=i.a.useCallback((function(e){n(Ui(e))}),[n]),F=Object(l.d)((function(e){return{categorisation:e.categorisation}})).categorisation,U=i.a.useCallback((function(e){if(!0!==f){var t=r+1;if(!(20*(t+1)>O)){var n=e.nativeEvent.target;n.scrollTop+n.clientHeight+100<n.scrollHeight||s(t)}}}),[r,f,O]),q=i.a.useCallback((function(e,t){var n=!0!==t.dataItem.modified?{}:{className:"".concat(e.props.className," ResponsiveGridRow--Info")};return i.a.cloneElement(e,n,e.props.children)}),[]),G=i.a.useReducer((function(e,t){switch(t.type){case"SET_DRAGGED_RECORD":return e.set("draggedRecordID",t.data.id);case"CLEAR_MODIFIED_PRIORITIES":return e.set("modifiedPriorities",new m.b);case"SUBMIT_DRAGGED_RECORD":return e.set("draggedRecordID",null).setIn(["modifiedPriorities",e.get("draggedRecordID")],t.data.priority);default:return e}}),new m.b({draggedRecordID:null,modifiedPriorities:new m.b})),H=Object(o.a)(G,2),B=H[0],V=H[1],z=i.a.useMemo((function(){return B.get("modifiedPriorities")}),[B]),W=i.a.useCallback((function(){V({type:"CLEAR_MODIFIED_PRIORITIES"})}),[V]),K=i.a.useMemo((function(){return(null==F?[]:Object(x.a)(F.values())).reduce((function(e,t){var n=!0===z.has(t.get("id"))?z.get(t.get("id")):t.get("priority");return e.push({id:t.get("id"),priority:null==n?1/0:n}),e}),[]).sort((function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0})).reduce((function(e,t){return e.set(t.id,t.priority)}),new m.c)}),[F,z]),J=i.a.useCallback((function(e){var t=Object(x.a)(K.keys()),n=t.indexOf(e),a=K.get(e),i=0===n?0:K.get(t[n-1]);return Math.round((a+i)/2)}),[K]),Y=i.a.useCallback((function(e,t){V({type:"SUBMIT_DRAGGED_RECORD",data:{priority:J(t.categoryID)}})}),[J,V]),Q=i.a.useCallback((function(e,t){V({type:"SET_DRAGGED_RECORD",data:{id:t.categoryID}})}),[V]),X=i.a.useCallback((function(){n(Jl())}),[n]),$=i.a.useCallback((function(e){return n($l(e)).then((function(e){v(e.total_records)}))}),[n]),Z=i.a.useCallback((function(){h(!0);var e=Object.assign({},N,{page:0,size:(N.page+1)*N.size});return $(e).then((function(){h(!1)})).catch((function(e){L({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[$,L,N]);i.a.useEffect((function(){return h(!0),$(N).then((function(){h(!1)})).catch((function(e){L({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),[L,$,N]),i.a.useEffect((function(){return function(){return X()}}),[X]),i.a.useEffect((function(){X()}),[y,X]),i.a.useEffect((function(){return D("Categorisation"),M("Categorisation"),T([{name:"Categorisation"}]),function(){D(null),T([]),M(null)}}),[D,T,M]);var ee=i.a.useCallback((function(){E(ZC)}),[]),te=sb({variant:"Input",props:{label:"ID"}}),ne=sb({variant:"Input",props:{label:"Name"}}),ae=sb({variant:"Date"}),ie=sb({variant:"Combobox",props:{label:"OA Profiling",data:i.a.useMemo((function(){return[{id:!0,name:"Enabled"},{id:!1,name:"Disabled"}]}),[])}}),ce=i.a.useMemo((function(){return[{field:"name",title:"Name",filterCell:ne},{field:"profiling",view:"profilingDOM",title:"OA Profiling",filterCell:ie},{field:"last_updated",title:"Last Updated",view:"dateDOM",width:"250px",filterCell:ae},{field:"id",title:"ID",view:"idDOM",width:"150px",filterCell:te},{field:"actions",width:"70px",locked:!0,sortable:!1,filterable:!1}]}),[ae,te,ne,ie]),re=i.a.useMemo((function(){return Object(x.a)(F.values()).map((function(e){var n=new window.Date(e.get("last_updated")),a=z.has(e.get("id"));return{id:e.get("id"),categoryID:e.get("id"),modified:a,reorder:!0===e.get("profiling"),idDOM:Object(Ka.jsx)(Id,{value:e.get("id")}),name:e.get("name"),last_updated:new window.Date(n.getFullYear(),n.getMonth(),n.getDate()),priority:!1===e.get("profiling")?1/0:!0===a?z.get(e.get("id")):e.get("priority"),profiling:e.get("profiling"),profilingDOM:!1===e.get("profiling")?"Disabled":"Enabled",dateDOM:Object(Ka.jsx)(Nd,{utc:e.get("last_updated")}),actions:Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsx)(k.a,{look:"flat",icon:"edit",title:"View ".concat(e.get("name")),"aria-label":"View ".concat(e.get("name")),onClick:function(){t.push("/categorisations/".concat(e.get("id")))}})})}}))}),[F,t,z]),se=i.a.useCallback((function(){h(!0),Promise.all(z.reduce((function(e,t,a){return e.push(n(to(a,{priority:t}))),e}),[])).then((function(){L({severity:"success",message:"Priorities Successfully Updated"}),W()})).catch((function(e){L({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return $()})).then((function(){return h(!1)}))}),[n,L,$,W,z]);return Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:Object(Ka.jsxs)(S.a,{item:!0,xs:12,md:12,children:[Object(Ka.jsx)(Yb,{show:z.size>0}),Object(Ka.jsxs)(w.a,{children:[Object(Ka.jsx)(w.c,{children:Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsxs)(S.a,{item:!0,xs:12,children:[R&&Object(Ka.jsx)(k.a,{icon:"add",primary:!0,style:{marginRight:"10px"},onClick:function(){t.push("/categorisations/new")},children:"Add Category"}),z.size>0&&Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(k.a,{icon:"save",primary:!0,onClick:se,style:{marginRight:"10px"},children:"Save Priorities"}),Object(Ka.jsx)(k.a,{icon:"undo",onClick:W,children:"Reset Priorities"})]})]}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Dm,{resizable:!0,groupable:!1,filterable:!0,pageable:!1,rowRender:q,onScroll:U,isLoading:0===r&&f,style:{height:"500px"},sort:y.sort,filter:y.filter,data:re,columns:ce,onReorderDrop:Y,onReorderStart:Q,onDataStateChange:P,reorderable:A})})]})}),Object(Ka.jsxs)(w.b,{layout:"stretched",children:[Object(Ka.jsx)(k.a,{look:"flat",onClick:Z,children:"Reload"}),Object(Ka.jsx)(k.a,{look:"flat",onClick:ee,children:"Clear Filters and Sorting"})]})]})]})})}var t_=i.a.memo(e_);function n_(e){var t=e.categoryID,n=i.a.useMemo((function(){return"/categorisations"}),[]);return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:n,exact:!0,children:Object(Ka.jsx)(t_,{categoryID:t})}),Object(Ka.jsx)(d.c,{path:"".concat(n,"/:categoryID"),children:Object(Ka.jsx)($C,{categoryID:t})})]})}var a_=i.a.memo(n_);function i_(){var e=b(),t=O("customer-portal");return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:"/download/:type/:id",children:Object(Ka.jsx)(Fb,{})}),e.has("FRONTEND:CLIENTS-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/clients",children:Object(Ka.jsx)(Uv,{})}),e.has("FRONTEND:SUPPLIER-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/suppliers/:id",children:Object(Ka.jsx)(Xh,{})}),e.has("FRONTEND:SUPPLIERS-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/suppliers",children:Object(Ka.jsx)(cp,{})}),e.has("FRONTEND:QOSES-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/quality-of-service",children:Object(Ka.jsx)(Yv,{})}),e.has("FRONTEND:LCRS-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/least-cost-routing",children:Object(Ka.jsx)(yx,{})}),e.has("FRONTEND:WHITELIST-SIDS-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/whitelist-sids",children:Object(Ka.jsx)(Vx,{})}),e.has("FRONTEND:ROUTES-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/routes",children:Object(Ka.jsx)(dg,{})}),e.has("FRONTEND:ROUTE-RULE-SCHEDULED-CHANGE-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/route-schedules/:scheduleID?",children:Object(Ka.jsx)(fx,{})}),e.has("FRONTEND:TRAFFIC-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/traffic",children:Object(Ka.jsx)(Pb,{})}),e.has("FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/virtual-numbers-traffic",children:Object(Ka.jsx)(iC,{})}),e.has("FRONTEND:STATISTICS-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/statistics",children:Object(Ka.jsx)(qg,{})}),e.has("FRONTEND:PRICING-MANAGER-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/pricing-manager",children:Object(Ka.jsx)(Tj,{})}),e.has("FRONTEND:CATEGORIES-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/categorisations",children:Object(Ka.jsx)(a_,{})}),e.has("FRONTEND:USER-MANAGEMENT-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/users",children:Object(Ka.jsx)(NC,{})}),e.has("FRONTEND:USER-MANAGEMENT-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/groups",children:Object(Ka.jsx)(VC,{})}),e.has("FRONTEND:AUDIT-SUPPLIER-RATES-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/audits/supplier-rates",exact:!0,children:Object(Ka.jsx)(zv,{})}),e.has("FRONTEND:AUDIT-CLIENT-RATES-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/audits/client-rates",exact:!0,children:Object(Ka.jsx)(Hv,{})}),e.has("FRONTEND:AUDIT-GENERAL-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/audits/general",exact:!0,children:Object(Ka.jsx)(Gm,{})}),!0===t?Object(Ka.jsx)(d.b,{to:"/clients"}):e.has("FRONTEND:DASHBOARD-PAGE-ACCESS")&&Object(Ka.jsx)(d.c,{path:"/",children:Object(Ka.jsx)(Ip,{})})]})}var c_=i.a.memo(i_),r_=n(858),s_=n(865);function l_(e){var t=e.breadcrumbs,n=void 0===t?[]:t,a=e.buttomGutter,c=void 0!==a&&a,r=i.a.useMemo((function(){return n.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.link,i=t.name;return null==i||e.push(null==a?Object(Ka.jsx)("span",{children:i},n):Object(Ka.jsx)(r_.a,{to:a,color:"inherit",component:s.b,children:i},n)),e}),[])}),[n]),l=i.a.useMemo((function(){var e=["Breadcrumbs"];return!0===c&&e.push("Breadcrumbs--BottomGutter"),e.join(" ")}),[c]);return r.length>0&&Object(Ka.jsx)("div",{className:l,children:Object(Ka.jsxs)(s_.a,{separator:"\u203a","aria-label":"Breadcrumbs",children:[Object(Ka.jsx)("div",{className:"BreadcrumbsLogo"}),r]})})}var o_=i.a.memo(l_);function u_(e){var t=e.onClose,n=i.a.useCallback((function(){"function"===typeof t&&t()}),[t]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)("div",{className:"TopBarPopover",children:e.children}),Object(Ka.jsx)("div",{className:"TopBarPopoverOverlay",onClick:n})]})}var d_=i.a.memo(u_);function m_(e){var t=e.avatar,n=e.username,a=e.actions,c=void 0===a?[]:a,r=i.a.useState(!1),s=Object(o.a)(r,2),l=s[0],u=s[1],d=i.a.useCallback((function(){u(!l)}),[l]),m=c.map((function(e){return Object(Ka.jsx)(k.a,{look:"flat",onClick:function(){d(),"function"===typeof e.onClick&&e.onClick()},className:"TopBarProfileAction",children:e.label},e.key)}));return Object(Ka.jsx)(i.a.Fragment,{children:Object(Ka.jsxs)("div",{className:"TopBarProfile",children:[Object(Ka.jsx)(k.a,{look:"flat",className:"TopBarProfileAvatar",onClick:d,children:t}),!0===l&&Object(Ka.jsxs)(d_,{onClose:d,children:[Object(Ka.jsxs)("div",{className:"TopBarProfileUsername",children:["User: ",n]}),Object(Ka.jsx)("hr",{}),Object(Ka.jsx)("div",{className:"TopBarProfileActions",children:m})]})]})})}var b_=i.a.memo(m_);function j_(e){var t=i.a.useState(!1),n=Object(o.a)(t,2),a=n[0],c=n[1],r=Object(l.d)((function(e){return e.systemVersion.version})),s=i.a.useCallback((function(){c(!a)}),[a]);return Object(Ka.jsxs)("div",{className:"TopBarVersion",children:[Object(Ka.jsx)(k.a,{look:"flat",icon:"info",title:"App Version","aria-label":"App Version",onClick:s}),!0===a&&Object(Ka.jsx)(d_,{onClose:s,children:Object(Ka.jsxs)("div",{className:"TopBarVersionContent",children:[Object(Ka.jsx)("strong",{children:"GUI Version"}),Object(Ka.jsx)("div",{children:j}),Object(Ka.jsx)("strong",{children:"System Version"}),Object(Ka.jsx)("div",{children:null==r?"N/A":r})]})})]})}var f_=i.a.memo(j_),h_=n.p+"static/media/user_thumb.5775df8b.png";function p_(e){var t=e.over,n=e.title,a=e.breadcrumbs,c=e.onSidebarToggleOpen,r=Object(d.h)(),s=Object(l.c)(),o=km("md","down"),u=Object(l.d)((function(e){return e.auth.get("username")})),m=i.a.useCallback((function(){"function"===typeof c&&c()}),[c]),b=i.a.useCallback((function(){s(ya()),r.push("/")}),[s,r]),j=i.a.useMemo((function(){return[{key:"logout",label:"Logout",onClick:b}]}),[b]),f=Object(Ka.jsx)("img",{src:h_,alt:"",className:"TopBarUserImage"}),h=i.a.useMemo((function(){var e=["TopBar"];return!0===t&&e.push("TopBar--Over"),e.join(" ")}),[t]),p=i.a.useMemo((function(){var e=["TopBarPageInfo"];return!0===t&&e.push("TopBarPageInfo--Visible"),e.join(" ")}),[t]);return Object(Ka.jsxs)("div",{className:h,children:[!0===o?Object(Ka.jsx)(k.a,{look:"flat",icon:"menu",onClick:m}):!0!==t?Object(Ka.jsx)("span",{}):Object(Ka.jsxs)("div",{className:p,children:[Object(Ka.jsx)("div",{className:"TopBarPageInfo--Title",children:n}),Object(Ka.jsx)(o_,{breadcrumbs:a})]}),Object(Ka.jsxs)("div",{className:"TopBarActions",children:[Object(Ka.jsx)("div",{className:"TopBarAction",children:Object(Ka.jsx)(f_,{})}),Object(Ka.jsx)("div",{className:"TopBarAction",children:Object(Ka.jsx)(k.a,{look:"flat",icon:"bell"})}),Object(Ka.jsx)("div",{className:"TopBarAction",children:Object(Ka.jsx)(b_,{username:u,avatar:f,actions:j})})]})]})}var g_=i.a.memo(p_);function O_(e){var t=e.message;return Object(Ka.jsx)("div",{className:"PageSpinner",children:Object(Ka.jsxs)("div",{className:"PageSpinnerContent",children:[Object(Ka.jsx)(Wm,{className:"loader"}),null!=t&&Object(Ka.jsx)("span",{className:"PageSpinnerContentLoadingMessage",children:t})]})})}var v_=i.a.memo(O_);function x_(e,t){var n=Object(d.i)().pathname;return i.a.useMemo((function(){return Ya(n,e,t)}),[n,e,t])}function C_(e){var t=e.icon,n=e.title,a=e.route,c=e.disabled,r=e.items,u=void 0===r?[]:r,m=e.match,b=void 0===m?[]:m,j=e.open,f=void 0!==j&&j,h=e.onOpenStateChange,p=Object(l.c)(),g=Object(d.i)().pathname,O=km("md","down"),v=x_([a].concat(Object(x.a)(b)),u),C=i.a.useState((function(){var e=u.find((function(e){var t=e.route,n=e.match,a=void 0===n?[]:n,i=e.items,c=void 0===i?[]:i;return Ya(g,[t].concat(Object(x.a)(a)),c)}));return null==e?null:e.key})),_=Object(o.a)(C,2),y=_[0],S=_[1],k=i.a.useCallback((function(){!0===O&&p(Gi())}),[p,O]),w=i.a.useCallback((function(e,t){!0===t&&S(e),!1===t&&y===e&&S(null)}),[y]),E=i.a.useCallback((function(e){"function"===typeof h&&h(e)}),[h]),I=i.a.useCallback((function(){E(!f)}),[f,E]),D=i.a.useMemo((function(){var e=["SidebarMenuItem"];return!0===c&&e.push("SidebarMenuItem--Disabled"),e.join(" ")}),[c]),T=i.a.useMemo((function(){var e=["SidebarMenuItemDetails"];return!0===v&&e.push("SidebarMenuItemDetails--Active"),e.join(" ")}),[v]);return Object(Ka.jsx)("li",{className:D,children:!0===c?Object(Ka.jsx)("div",{className:T,children:Object(Ka.jsxs)("span",{className:"SidebarMenuItemLabel",children:[Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarMenuItemIcon",children:t}),Object(Ka.jsx)("span",{className:"SidebarMenuItemTitle",children:n})]})}):null==a?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsxs)("button",{"aria-expanded":f,className:T,onClick:I,children:[Object(Ka.jsxs)("span",{className:"SidebarMenuItemLabel",children:[Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarMenuItemIcon",children:t}),Object(Ka.jsx)("span",{className:"SidebarMenuItemTitle",children:n})]}),u.length>0&&Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarMenuItemChevronIcon material-icons",children:!0===f?"expand_less":"expand_more"})]}),Object(Ka.jsx)("div",{className:"SidebarMenuItemMenu",children:u.length>0&&!0===f&&Object(Ka.jsx)(S_,{items:u,active:y,onActiveChange:w})})]}):Object(Ka.jsx)(s.b,{to:a,onClick:k,className:T,children:Object(Ka.jsxs)("span",{className:"SidebarMenuItemLabel",children:[Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarMenuItemIcon",children:t}),Object(Ka.jsx)("span",{className:"SidebarMenuItemTitle",children:n})]})})})}var __=i.a.memo(C_);function y_(e){var t=e.active,n=e.items,a=void 0===n?[]:n,c=e.onActiveChange,r=i.a.useCallback((function(e,t){"function"===typeof c&&c(e,t)}),[c]),s=a.reduce((function(e,n){return!1===n.visible||e.push(Object(Ka.jsx)(__,{icon:n.icon,title:n.title,route:n.route,items:n.items,match:n.match,disabled:n.disabled,open:n.key===t,onOpenStateChange:function(e){r(n.key,e)}},n.key)),e}),[]);return Object(Ka.jsx)("ul",{className:"SidebarMenu",children:s})}var S_=i.a.memo(y_);function k_(e){var t=e.icon,n=e.title,a=e.route,c=e.disabled,r=e.items,l=void 0===r?[]:r,u=e.match,d=void 0===u?[]:u,m=e.open,b=void 0!==m&&m,j=e.onOpenStateChange,f=i.a.useRef(null),h=i.a.useState({}),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState(null),C=Object(o.a)(v,2),_=C[0],y=C[1],S=x_([a].concat(Object(x.a)(d)),l);i.a.useEffect((function(){!1===b&&y(null)}),[b]);var k=i.a.useCallback((function(e,t){!0===t&&y(e),!1===t&&_===e&&y(null)}),[_]),w=i.a.useCallback((function(e){"function"===typeof j&&j(e)}),[j]),E=i.a.useCallback((function(){w(!b)}),[b,w]);i.a.useLayoutEffect((function(){if(null!=f.current){var e=f.current.getBoundingClientRect();O({top:e.top,left:e.right+5})}}),[]);var I=i.a.useMemo((function(){var e=["SidebarPopupMenuItem"];return!0===c&&e.push("SidebarPopupMenuItem--Disabled"),e.join(" ")}),[c]),D=i.a.useMemo((function(){var e=["SidebarPopupMenuItemDetails"];return!0===S&&e.push("SidebarPopupMenuItemDetails--Active"),e.join(" ")}),[S]);return Object(Ka.jsx)("li",{ref:f,className:I,children:!0===c?Object(Ka.jsx)("div",{className:D,children:Object(Ka.jsxs)("span",{className:"SidebarPopupMenuItemLabel",children:[Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarPopupMenuItemIcon",children:t}),Object(Ka.jsx)("span",{className:"SidebarPopupMenuItemTitle",children:n})]})}):null==a?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsxs)("button",{"aria-expanded":b,className:D,onClick:E,children:[Object(Ka.jsxs)("span",{className:"SidebarPopupMenuItemLabel",children:[Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarPopupMenuItemIcon",children:t}),Object(Ka.jsx)("span",{className:"SidebarPopupMenuItemTitle",children:n})]}),l.length>0&&Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarPopupMenuItemChevronIcon material-icons",children:"chevron_right"})]}),l.length>0&&!0===b&&Object(Ka.jsx)(I_,{items:l,offset:g,active:_,onActiveChange:k})]}):Object(Ka.jsx)(s.b,{to:a,className:D,children:Object(Ka.jsxs)("span",{className:"SidebarPopupMenuItemLabel",children:[Object(Ka.jsx)("span",{"aria-hidden":"true",className:"SidebarPopupMenuItemIcon material-icons",children:t}),Object(Ka.jsx)("span",{className:"SidebarPopupMenuItemTitle",children:n})]})})})}var w_=i.a.memo(k_);function E_(e){var t=e.title,n=e.active,a=e.items,c=void 0===a?[]:a,r=e.offset,s=void 0===r?{}:r,l=e.onActiveChange,u=null==s.left?0:s.left,d=i.a.useRef(null),m=i.a.useState(null==s.top?0:s.top),b=Object(o.a)(m,2),j=b[0],f=b[1];i.a.useEffect((function(){var e=window.innerHeight,t=null==s.top?0:s.top,n=d.current.clientHeight;n+t<e||f(t-(n+t-e)-20)}),[s.top]);var h=i.a.useCallback((function(e,t){"function"===typeof l&&l(e,t)}),[l]),p=c.reduce((function(e,t){return!1===t.visible||e.push(Object(Ka.jsx)(w_,{icon:t.icon,title:t.title,route:t.route,items:t.items,match:t.match,disabled:t.disabled,open:t.key===n,onOpenStateChange:function(e){h(t.key,e)}},t.key)),e}),[]);return Object(Ka.jsxs)("div",{ref:d,style:{top:j,left:u},className:"SidebarPopupMenu",children:[null!=t&&Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)("span",{className:"SidebarPopupMenuTitle",children:t}),Object(Ka.jsx)("hr",{className:"SidebarPopupMenuSeperator"})]}),Object(Ka.jsx)("ul",{className:"SidebarPopupMenuItems",children:p})]})}var I_=i.a.memo(E_);function D_(e){var t=e.icon,n=e.title,a=e.route,c=e.disabled,r=e.items,l=void 0===r?[]:r,u=e.match,d=void 0===u?[]:u,m=e.open,b=void 0!==m&&m,j=e.onOpenStateChange,f=i.a.useRef(null),h=i.a.useState(null),p=Object(o.a)(h,2),g=p[0],O=p[1],v=x_([a].concat(Object(x.a)(d)),l),C=i.a.useCallback((function(e,t){!0===t&&O(e),!1===t&&g===e&&O(null)}),[g]);i.a.useEffect((function(){!1===b&&O(null)}),[b]);var _=i.a.useCallback((function(e){"function"===typeof j&&j(e)}),[j]),y=i.a.useCallback((function(){_(!b)}),[b,_]),S=i.a.useCallback((function(){if(null!=f.current){var e=f.current.getBoundingClientRect();return{top:e.top,left:e.right+10}}}),[]),k=i.a.useMemo((function(){var e=["SidebarIconMenuItem"];return!0===c&&e.push("SidebarIconMenuItem--Disabled"),e.join(" ")}),[c]),w=i.a.useMemo((function(){var e=["SidebarIconMenuItemDetails"];return!0===v&&e.push("SidebarIconMenuItemDetails--Active"),e.join(" ")}),[v]);return Object(Ka.jsx)("li",{ref:f,className:k,children:!0===c?Object(Ka.jsx)("div",{className:w,children:Object(Ka.jsx)("span",{className:"SidebarIconMenuItemLabel",children:Object(Ka.jsx)("span",{title:n,"aria-hidden":"true",className:"SidebarIconMenuItemIcon",children:t})})}):null==a?Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)("button",{"aria-expanded":b,onClick:y,className:w,children:Object(Ka.jsx)("span",{className:"SidebarIconMenuItemLabel",children:Object(Ka.jsx)("span",{title:n,"aria-hidden":"true",className:"SidebarIconMenuItemIcon",children:t})})}),l.length>0&&!0===b&&Object(Ka.jsx)(I_,{title:n,items:l,offset:S(),active:g,onActiveChange:C})]}):Object(Ka.jsx)(s.b,{to:a,className:w,children:Object(Ka.jsx)("span",{className:"SidebarIconMenuItemLabel",children:Object(Ka.jsx)("span",{title:n,"aria-hidden":"true",className:"SidebarIconMenuItemIcon",children:t})})})})}var T_=i.a.memo(D_);function M_(e){var t=e.active,n=e.items,a=void 0===n?[]:n,c=e.onActiveChange,r=i.a.useCallback((function(e,t){"function"===typeof c&&c(e,t)}),[c]),s=a.reduce((function(e,n){return!1===n.visible||e.push(Object(Ka.jsx)(T_,{icon:n.icon,title:n.title,route:n.route,items:n.items,match:n.match,disabled:n.disabled,open:n.key===t,onOpenStateChange:function(e){r(n.key,e)}},n.key)),e}),[]);return Object(Ka.jsx)("ul",{className:"SidebarIconMenu",children:s})}var N_=i.a.memo(M_);function R_(e){var t=e.items,n=void 0===t?[]:t,a=Object(l.c)(),c=Object(d.i)().pathname,r=i.a.useState(null),s=Object(o.a)(r,2),u=s[0],m=s[1],b=Object(l.d)((function(e){return e.sidebar.open})),j=km("md","down"),f=!1===j&&!1===b,h=i.a.useCallback((function(){a(!0===b?Gi():qi())}),[a,b]),p=i.a.useCallback((function(e,t){!0===t&&m(e),!1===t&&u===e&&m(null)}),[u]),g=i.a.useCallback((function(){m(null)}),[]);i.a.useEffect((function(){if(!0!==f){var e=n.find((function(e){var t=e.route,n=e.match,a=void 0===n?[]:n,i=e.items,r=void 0===i?[]:i;return Ya(c,[t].concat(Object(x.a)(a)),r)}));m(null==e?null:e.key)}else m(null)}),[f,c,n]);var O=i.a.useMemo((function(){var e=["Sidebar"];return!1===b&&e.push(!0===f?"Sidebar--Iconbar":"Sidebar--Mobile-Hidden"),e.join(" ")}),[b,f]);return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsxs)("div",{className:O,"aria-hidden":!0===j&&!1===b,children:[Object(Ka.jsx)("header",{className:"SidebarHeader",children:!1===f?Object(Ka.jsx)("div",{className:"SidebarTitle"}):Object(Ka.jsx)("div",{className:"SidebarLogo"})}),Object(Ka.jsx)("nav",{className:"SidebarNavigation",children:!0===f?Object(Ka.jsx)(N_,{items:n,active:u,onActiveChange:p}):Object(Ka.jsx)(S_,{items:n,active:u,onActiveChange:p})}),Object(Ka.jsx)("footer",{className:"SidebarFooter",children:!0===j||!0===b?Object(Ka.jsx)(k.a,{look:"flat",onClick:h,icon:"arrow-chevron-left",className:"SidebarCollapse",children:"Collapse"}):Object(Ka.jsx)(k.a,{look:"flat",title:"Expand","aria-label":"Expand",onClick:h,icon:"arrow-chevron-right",className:"SidebarCollapse"})})]}),!0===f&&null!=u&&Object(Ka.jsx)("div",{title:"Close Sub Menu",className:"SidebarOverlay",onClick:g}),!0===j&&!0===b&&Object(Ka.jsx)("div",{title:"Collapse Sidebar",onClick:h,className:"SidebarOverlay SidebarOverlay--Obstructive"})]})}var A_=i.a.memo(R_);function P_(){var e=b(),t=Object(l.c)(),n=O("customer-portal"),a=i.a.useRef(null),c=i.a.useState(null),r=Object(o.a)(c,2),s=r[0],d=r[1],m=i.a.useState(!0),j=Object(o.a)(m,2),f=j[0],h=j[1],p=i.a.useState(),g=Object(o.a)(p,2),v=g[0],C=g[1],_=i.a.useState(),y=Object(o.a)(_,2),S=y[0],k=y[1],w=i.a.useState(!1),E=Object(o.a)(w,2),I=E[0],D=E[1],T=i.a.useState(null),M=Object(o.a)(T,2),N=M[0],R=M[1],A=Object(l.d)((function(e){return e.sidebar.open})),P=km("md","down"),L=i.a.useCallback((function(e){t(Ui(e))}),[t]);i.a.useEffect((function(){return h(!0),Promise.all([t(ec()),t((function(e){return Ki.get("/countries").then((function(t){return e(Qi.apply(void 0,Object(x.a)(t.data.countries))),t.data})).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})),t(zi()),t(Yi()),t(xd())]).catch((function(e){L({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){return h(!1)})),function(){t({type:ne}),t({type:ee}),t({type:Q}),t({type:$}),t({type:fa})}}),[t,L,e]),i.a.useEffect((function(){var e=window.setInterval((function(){t(ec()).catch((function(e){L({severity:"error",message:e.message,action:{label:"Dismiss"}})}))}),6e5);return function(){return window.clearInterval(e)}}),[t,L]);var F=i.a.useCallback((function(){t((!0===A?Gi:qi)())}),[t,A]),U=i.a.useCallback((function(){D(a.current.scrollTop>50)}),[]);i.a.useEffect((function(){t((!0===P?Gi:qi)())}),[t,P]);var q=i.a.useMemo((function(){var e=["MainLayout"];return!1===P&&e.push(!0===A?"MainLayout--MenuBar":"MainLayout--IconBar"),e.join(" ")}),[P,A]),G=e.has("FRONTEND:LCRS-PAGE-ACCESS"),H=e.has("FRONTEND:QOSES-PAGE-ACCESS"),B=e.has("FRONTEND:CATEGORIES-PAGE-ACCESS"),V=e.has("FRONTEND:WHITELIST-SIDS-PAGE-ACCESS"),z=e.has("FRONTEND:USER-MANAGEMENT-PAGE-ACCESS"),W=e.has("FRONTEND:AUDIT-GENERAL-PAGE-ACCESS"),K=e.has("FRONTEND:AUDIT-CLIENT-RATES-PAGE-ACCESS"),J=e.has("FRONTEND:AUDIT-SUPPLIER-RATES-PAGE-ACCESS"),Y=i.a.useMemo((function(){return!0===n?[{key:"clients",title:"Client Details",route:"/clients",match:["/clients/*"],icon:Object(Ka.jsx)("span",{className:"material-icons",children:"dns"}),visible:e.has("FRONTEND:CLIENTS-PAGE-ACCESS")},{key:"traffic",title:"Traffic",route:!0===e.has("FRONTEND:TRAFFIC-SEARCH-PAGE-ACCESS")?"/traffic/":"/traffic/export",match:["/traffic/*"],visible:e.has("FRONTEND:TRAFFIC-PAGE-ACCESS"),icon:Object(Ka.jsx)("span",{className:"material-icons",children:"compare_arrows"})},{key:"statistics",title:"Statistics",route:"/statistics/search",match:["/statistics/*"],visible:e.has("FRONTEND:STATISTICS-PAGE-ACCESS"),icon:Object(Ka.jsx)("span",{className:"material-icons",children:"assessment"})}]:[{key:"dashboard",title:"Dashboard",route:"/",icon:Object(Ka.jsx)("span",{className:"material-icons",children:"dashboard"}),visible:e.has("FRONTEND:DASHBOARD-PAGE-ACCESS")},{key:"clients",title:"Clients",route:"/clients",match:["/clients/*"],icon:Object(Ka.jsx)("span",{className:"material-icons",children:"dns"}),visible:e.has("FRONTEND:CLIENTS-PAGE-ACCESS")},{key:"suppliers",title:"Suppliers",route:"/suppliers",match:["/suppliers/*"],visible:e.has("FRONTEND:SUPPLIERS-PAGE-ACCESS"),icon:Object(Ka.jsx)("span",{className:"material-icons",children:"recent_actors"})},{key:"management",title:"Management",icon:Object(Ka.jsx)("span",{className:"material-icons",children:"work"}),match:["/categorisations/*","/quality-of-service/*","/least-cost-routing/*"],visible:!0===H||!0===G||!0===B||!0===V,items:[{key:"qos",visible:H,title:"Quality of Service",route:"/quality-of-service",icon:Object(Ka.jsx)("span",{className:"fas fa-concierge-bell"})},{key:"lcr",visible:G,title:"Least Cost Routing",route:"/least-cost-routing",match:["/least-cost-routing/*"],icon:Object(Ka.jsx)("span",{className:"fas fa-route"})},{key:"categorisation",title:"Categorisation",route:"/categorisations",match:["/categorisations/*"],visible:B,icon:Object(Ka.jsx)("span",{className:"material-icons",children:"content_copy"})},{key:"whitelist-sids",title:"SID Preregistration",route:"/whitelist-sids",match:["/whitelist-sids/*"],visible:V,icon:Object(Ka.jsx)("i",{className:"fas fa-tasks"})}]},{key:"routing",title:"Routing",route:"/routes",match:["/routing/*"],visible:e.has("FRONTEND:ROUTES-PAGE-ACCESS"),icon:Object(Ka.jsx)("span",{className:"material-icons",children:"call_merge"})},{key:"pricing-manager",title:"Pricing Manager",route:!0===e.has("FRONTEND:PRICING-MANAGER-CLIENT-PRICE-PLANS-PAGE-ACCESS")?"/pricing-manager/":"/pricing-manager/templates/",match:["/pricing-manager/*"],icon:Object(Ka.jsx)("span",{className:"fas fa-money-bill-alt"}),visible:e.has("FRONTEND:PRICING-MANAGER-PAGE-ACCESS")},{key:"traffic",title:"Traffic",route:!0===e.has("FRONTEND:TRAFFIC-SEARCH-PAGE-ACCESS")?"/traffic/":"/traffic/export",match:["/traffic/*"],visible:e.has("FRONTEND:TRAFFIC-PAGE-ACCESS"),icon:Object(Ka.jsx)("span",{className:"material-icons",children:"compare_arrows"})},{key:"virtual-numbers-traffic",title:"Virtual Numbers Traffic",route:!0===e.has("FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-SEARCH-PAGE-ACCESS")?"/virtual-numbers-traffic/":"/virtual-numbers-traffic/export",match:["/virtual-numbers-traffic/*"],visible:e.has("FRONTEND:VIRTUAL-NUMBERS-TRAFFIC-PAGE-ACCESS"),icon:Object(Ka.jsx)("span",{className:"material-icons",children:"compare_arrows"})},{key:"statistics",title:"Statistics",route:"/statistics/search",match:["/statistics/*"],visible:e.has("FRONTEND:STATISTICS-PAGE-ACCESS"),icon:Object(Ka.jsx)("span",{className:"material-icons",children:"assessment"})},{key:"audits",title:"Audit Reports",match:["/audits/*"],visible:!0===W||!0===K||!0===J,icon:Object(Ka.jsx)("span",{className:"material-icons",children:"import_contacts"}),items:[{key:"audits",title:"Audits",route:"/audits/general",match:["/audits/general"],icon:Object(Ka.jsx)("span",{className:"material-icons",children:"bookmarks"}),visible:W},{key:"auditClientRates",title:"Client Prices",route:"/audits/client-rates",match:["/audits/client-rates"],icon:Object(Ka.jsx)("span",{className:"material-icons",children:"bookmarks"}),visible:K},{key:"auditSupplierRates",title:"Supplier Prices",route:"/audits/supplier-rates",match:["/audits/supplier-rates"],icon:Object(Ka.jsx)("span",{className:"material-icons",children:"bookmarks"}),visible:J}]},{key:"settings",title:"Settings",match:["/users/*","/groups/*"],visible:z,icon:Object(Ka.jsx)("span",{className:"material-icons",children:"settings"}),items:[{key:"user-management",title:"User Management",route:"/users",match:["/users/*"],icon:Object(Ka.jsx)("span",{className:"material-icons",children:"person"}),visible:z},{key:"group-management",title:"Group Management",route:"/groups",match:["/groups/*"],icon:Object(Ka.jsx)("span",{className:"material-icons",children:"group"}),visible:z}]}]}),[e,n,G,H,B,V,z,W,K,J]);return!0===f?Object(Ka.jsx)(v_,{message:"We'll be right with you."}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsxs)(u.a,{children:[Object(Ka.jsx)("title",{children:null!=s?"".concat(s," - Smart XChange"):"Smart XChange"}),Object(Ka.jsx)("meta",{name:"description",content:v})]}),Object(Ka.jsxs)(Tm.Provider,{value:{setTitle:d,setDescription:C,setBreadcrumbs:k,setContentTitle:R},children:[Object(Ka.jsx)(A_,{items:Y}),Object(Ka.jsxs)("div",{className:q,children:[Object(Ka.jsx)(g_,{title:s,over:I,breadcrumbs:S,onSidebarToggleOpen:F}),Object(Ka.jsx)("div",{ref:a,onScroll:U,className:"MainLayoutContent",children:Object(Ka.jsxs)("main",{className:"MainLayoutContentViewport",children:[Object(Ka.jsxs)("header",{children:[Object(Ka.jsx)("h1",{children:N}),Object(Ka.jsx)(o_,{breadcrumbs:S,buttomGutter:!0})]}),Object(Ka.jsx)(c_,{})]})})]})]})]})}var L_=i.a.memo(P_);function F_(e){var t=e.action,n=e.message,a=e.severity,c=e.onActionClick,r=km("sm","down"),s=i.a.useCallback((function(){null!=t&&"function"===typeof t.onClick&&t.onClick(),"function"===typeof c&&c()}),[t,c]),l=i.a.useMemo((function(){var e=["Alert"];switch(!0===r&&e.push("Alert--Mobile"),a){case"success":e.push("Alert--Success");break;case"warning":e.push("Alert--Warning");break;case"error":e.push("Alert--Error");break;default:e.push("Alert--Info")}return e.join(" ")}),[r,a]);return Object(Ka.jsxs)("div",{className:l,role:"alert",children:[Object(Ka.jsx)("div",{className:"AlertMessage",children:n}),null!=t&&Object(Ka.jsx)("div",{className:"AlertAction",children:Object(Ka.jsx)(k.a,{look:"flat",onClick:s,children:t.label})})]})}var U_=i.a.memo(F_);function q_(){var e=Object(l.c)(),t=i.a.useState(null),n=Object(o.a)(t,2),a=n[0],c=n[1],r=Object(l.d)((function(e){var t=e.alerts.first();return null==t?null:{action:t.get("action"),message:t.get("message"),duration:t.get("duration"),severity:t.get("severity")}}));i.a.useEffect((function(){null!=r&&(e({type:re}),c(r))}),[e,r]);var s=i.a.useCallback((function(){c(null)}),[]);return i.a.useEffect((function(){if(null!=a){var e=null!=a.duration?a.duration:null==a.action?2750:null;if(null!=e){var t=window.setTimeout((function(){return s()}),e);return function(){return window.clearTimeout(t)}}}}),[s,a]),Object(Ka.jsx)("div",{className:"Alerts",children:null!=a&&Object(Ka.jsx)(U_,{onActionClick:s,action:a.action,message:a.message,severity:a.severity})})}var G_=i.a.memo(q_);function H_(e){var t=e.title,n=e.showHeader,a=void 0===n||n,c=km("md","down"),r=["AuthLayoutContent",!0===c?"AuthLayoutContent--Mobile":"AuthLayoutContent--Desktop"];return Object(Ka.jsxs)(i.a.Fragment,{children:[Object(Ka.jsx)(u.a,{children:Object(Ka.jsx)("title",{children:null!=t?"".concat(t," - Smart XChange"):"Smart XChange"})}),Object(Ka.jsxs)("div",{className:"AuthLayout",children:[Object(Ka.jsxs)("div",{className:"AuthLayoutBackground",children:[!1===c&&Object(Ka.jsx)("div",{className:"AuthLayoutBackgroundLeft"}),Object(Ka.jsx)("div",{className:"AuthLayoutBackgroundRight"})]}),Object(Ka.jsx)(w.a,{className:r.join(" "),children:Object(Ka.jsxs)(w.c,{children:[!0===a&&Object(Ka.jsx)("header",{className:"LoginHeader"}),e.children]})})]})]})}var B_=i.a.memo(H_);function V_(){var e=Object(l.c)(),t=i.a.useState(""),n=Object(o.a)(t,2),a=n[0],c=n[1],r=i.a.useState(""),s=Object(o.a)(r,2),u=s[0],d=s[1],m=i.a.useState(!1),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useState([]),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState([]),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useMemo((function(){return{required:!0}}),[]),w=i.a.useMemo((function(){return{required:!0}}),[]),E=Nm(i.a.useMemo((function(){return[{label:"Username",value:a,setErrors:O,validations:y},{label:"Password",value:u,setErrors:_,validations:w}]}),[a,O,y,u,_,w])),I=i.a.useCallback((function(t){e(Ui(t))}),[e]),D=i.a.useCallback((function(){var t=E();t.length>0?I({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}}):(f(!0),e(Sa(a,u)).catch((function(e){I({severity:"error",message:e.message,action:{label:"Dismiss"}}),f(!1)})))}),[e,a,u,I,E]),T=i.a.useCallback((function(e){13===e.keyCode&&D()}),[D]);return Object(Ka.jsx)(B_,{title:"Login",children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:!0===j?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{height:"100px",className:"loader"})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:"Welcome back, please login to your account."}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Username",value:a,onKeyDown:T,onChange:c,errors:g,validations:y,onErrorsChange:O})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",type:"password",label:"Password",value:u,onKeyDown:T,onChange:d,errors:C,validations:w,onErrorsChange:O})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:D,style:{width:"100%"},children:"Login"})})]})})})}var z_=i.a.memo(V_);function W_(){return Object(Ka.jsx)(z_,{})}var K_=i.a.memo(W_);function J_(){var e=Object(d.h)(),t=Object(l.c)(),n=i.a.useState(""),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useState(""),u=Object(o.a)(s,2),m=u[0],b=u[1],j=i.a.useState(!1),f=Object(o.a)(j,2),h=f[0],p=f[1],g=i.a.useState([]),O=Object(o.a)(g,2),v=O[0],x=O[1],C=i.a.useState([]),y=Object(o.a)(C,2),w=y[0],E=y[1],I=i.a.useMemo((function(){return{required:!0}}),[]),D=i.a.useMemo((function(){return{required:!0}}),[]),T=Nm(i.a.useMemo((function(){return[{label:"Username",value:c,setErrors:x,validations:I},{label:"Password",value:m,setErrors:E,validations:D}]}),[c,x,I,m,E,D])),M=i.a.useCallback((function(e){t(Ui(e))}),[t]),N=i.a.useCallback((function(){var e=T();e.length>0?M({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):(p(!0),t(Sa(c,m)).catch((function(e){M({severity:"error",message:e.message,action:{label:"Dismiss"}}),p(!1)})))}),[t,c,m,M,T]),R=i.a.useCallback((function(e){13===e.keyCode&&N()}),[N]),A=i.a.useCallback((function(){e.push("/forgot-password")}),[e]);return Object(Ka.jsx)(B_,{title:"Login",children:Object(Ka.jsx)(S.a,{container:!0,spacing:2,children:!0===h?Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(Wm,{height:"100px",className:"loader"})}):Object(Ka.jsxs)(Ka.Fragment,{children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:"Welcome back, please login to your account."}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Username",value:c,onKeyDown:R,onChange:r,errors:v,validations:I,onErrorsChange:x})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",type:"password",label:"Password",value:m,onKeyDown:R,onChange:b,errors:w,validations:D,onErrorsChange:x})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(_.a,{textAlign:"right",children:Object(Ka.jsx)(k.a,{role:"link",look:"flat","data-href":"/forgot-password",onClick:A,children:"Forgot Password"})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:N,style:{width:"100%"},children:"Login"})})]})})})}var Y_=i.a.memo(J_);function Q_(){return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(_.a,{p:2,textAlign:"center",children:Object(Ka.jsx)("i",{className:"fas fa-check fa-4x Text--Primary"})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:"Password was successfully updated."})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:Object(Ka.jsx)(s.b,{to:"/",className:"k-link",children:"Back"})})})]})}var X_=i.a.memo(Q_);function $_(){var e=Object(d.h)(),t=Object(d.i)(),n=Object(l.c)(),a=i.a.useState(""),c=Object(o.a)(a,2),r=c[0],u=c[1],m=i.a.useState(!0),b=Object(o.a)(m,2),j=b[0],f=b[1],h=i.a.useState(""),p=Object(o.a)(h,2),g=p[0],O=p[1],v=i.a.useState([]),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useState([]),w=Object(o.a)(y,2),E=w[0],I=w[1],D=i.a.useMemo((function(){return{required:!0,isPassword:!0}}),[]),T=i.a.useMemo((function(){return{required:!0}}),[]),M=i.a.useState(!1),N=Object(o.a)(M,2),R=N[0],A=N[1],P=i.a.useCallback((function(e){n(Ui(e))}),[n]),L=i.a.useMemo((function(){return new window.URLSearchParams(t.search).get("code")}),[t]);i.a.useEffect((function(){null!=L?(f(!0),n(function(e){return function(){return xa.get("/password/otp/validate",{params:{code:e}}).then((function(){return!0})).catch((function(e){if(400===e.response.status)return!1;throw new Error((e.response?e.response.data:e).message)}))}}(L)).then((function(t){!0!==t?e.push("/"):f(!1)})).catch((function(t){console.error(t),P({severity:"error",message:t.message,action:{label:"Dismiss"}}),e.push("/")}))):e.push("/")}),[L,e,n,P]);var F=Nm(i.a.useMemo((function(){return[{value:r,label:"Password",setErrors:_,validations:D},{value:g,label:"Confirm Password",setErrors:I,validations:T}]}),[r,g,_,D,T])),U=i.a.useCallback((function(){var e,t=F();(r!==g&&t.push("Password mismatch"),t.length>0)?P({message:Object(Ka.jsx)(Mm,{messageList:t}),severity:"error",action:{label:"Dismiss"}}):(f(!0),n((e={code:L,password:r},function(){return xa.patch("/password",e).catch((function(e){throw new Error((e.response?e.response.data:e).message)}))})).then((function(){A(!0)})).catch((function(e){f(!1),console.error(e),P({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){f(!1)})))}),[L,n,r,P,F,g]),q=i.a.useCallback((function(e){13===e.keyCode&&U()}),[U]);return Object(Ka.jsx)(B_,{title:"Reset Password",children:!0===R?Object(Ka.jsx)(X_,{}):!0===j?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:"Please enter a new password for your account."})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{type:"password",variant:"Input",label:"Password",value:r,onKeyDown:q,onChange:u,errors:C,onErrorsChange:_,validations:D})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{type:"password",variant:"Input",onKeyDown:q,label:"Confirm Password",value:g,onChange:O,errors:E,validations:T,onErrorsChange:I})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:U,style:{width:"100%"},children:"Submit"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:Object(Ka.jsx)(s.b,{to:"/",className:"k-link",children:"Back"})})})]})})}var Z_=i.a.memo($_);function ey(e){var t=e.user;return Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(_.a,{p:2,textAlign:"center",children:Object(Ka.jsx)("i",{className:"fas fa-paper-plane fa-4x Text--Primary"})})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsxs)("center",{children:["We have sent a reset password email to ",Object(Ka.jsx)("strong",{children:t}),". Please check your email."]})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:Object(Ka.jsx)(s.b,{to:"/",className:"k-link",children:"Back"})})})]})}var ty=i.a.memo(ey);function ny(e){var t=e.onShowUsernameForm,n=Object(l.c)(),a=i.a.useState(""),c=Object(o.a)(a,2),r=c[0],u=c[1],d=i.a.useState(!1),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useState([]),h=Object(o.a)(f,2),p=h[0],g=h[1],O=bm(t),v=i.a.useState(!1),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useMemo((function(){return{isEmail:!0,required:!0}}),[]),w=i.a.useCallback((function(e){n(Ui(e))}),[n]),E=Nm(i.a.useMemo((function(){return[{value:r,label:"Email",setErrors:g,validations:y}]}),[r,g,y])),I=i.a.useCallback((function(){var e=E();e.length>0?w({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):(j(!0),n(wa({email:r})).then((function(){_(!0)})).catch((function(e){console.error(e),w({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){j(!1)})))}),[n,r,w,E]),D=i.a.useCallback((function(e){13===e.keyCode&&I()}),[I]);return!0===C?Object(Ka.jsx)(ty,{user:r}):!0===b?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:"Please enter the email associated with your account. We will email you a link to reset your password."})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Email",value:r,onChange:u,errors:p,onKeyDown:D,validations:y,onErrorsChange:g})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:I,style:{width:"100%"},children:"Submit"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{look:"flat",onClick:O,style:{width:"100%"},children:"Reset Password Through Username"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:Object(Ka.jsx)(s.b,{to:"/",className:"k-link",children:"Back"})})})]})}var ay=i.a.memo(ny);function iy(e){var t=e.onShowEmailForm,n=Object(l.c)(),a=i.a.useState(""),c=Object(o.a)(a,2),r=c[0],u=c[1],d=i.a.useState(!1),m=Object(o.a)(d,2),b=m[0],j=m[1],f=i.a.useState([]),h=Object(o.a)(f,2),p=h[0],g=h[1],O=bm(t),v=i.a.useState(!1),x=Object(o.a)(v,2),C=x[0],_=x[1],y=i.a.useMemo((function(){return{required:!0}}),[]),w=i.a.useCallback((function(e){n(Ui(e))}),[n]),E=Nm(i.a.useMemo((function(){return[{value:r,label:"Username",setErrors:g,validations:y}]}),[r,g,y])),I=i.a.useCallback((function(){var e=E();e.length>0?w({message:Object(Ka.jsx)(Mm,{messageList:e}),severity:"error",action:{label:"Dismiss"}}):(j(!0),n(wa({username:r})).then((function(){_(!0)})).catch((function(e){console.error(e),w({severity:"error",message:e.message,action:{label:"Dismiss"}})})).then((function(){j(!1)})))}),[n,r,w,E]),D=i.a.useCallback((function(e){13===e.keyCode&&I()}),[I]);return!0===C?Object(Ka.jsx)(ty,{user:r}):!0===b?Object(Ka.jsx)(Wm,{className:"loader"}):Object(Ka.jsxs)(S.a,{container:!0,spacing:2,children:[Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:"Please enter the username associated with your account. We will email you a link to reset your password."})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(fm,{variant:"Input",label:"Username",value:r,onKeyDown:D,onChange:u,errors:p,validations:y,onErrorsChange:g})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{primary:!0,onClick:I,style:{width:"100%"},children:"Submit"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)(k.a,{look:"flat",onClick:O,style:{width:"100%"},children:"Reset Password Through Email"})}),Object(Ka.jsx)(S.a,{item:!0,xs:12,children:Object(Ka.jsx)("center",{children:Object(Ka.jsx)(s.b,{to:"/",className:"k-link",children:"Back"})})})]})}var cy=i.a.memo(iy),ry="email",sy="username";function ly(){var e=i.a.useState(sy),t=Object(o.a)(e,2),n=t[0],a=t[1],c=i.a.useCallback((function(){a(ry)}),[]),r=i.a.useCallback((function(){a(sy)}),[]),s=i.a.useMemo((function(){switch(n){case ry:return Object(Ka.jsx)(ay,{onShowUsernameForm:r});default:return Object(Ka.jsx)(cy,{onShowEmailForm:c})}}),[n,c,r]);return Object(Ka.jsx)(B_,{title:"Forgot Password",children:s})}var oy=i.a.memo(ly);function uy(){return Object(Ka.jsxs)(d.e,{children:[Object(Ka.jsx)(d.c,{path:"/reset-password",children:Object(Ka.jsx)(Z_,{})}),Object(Ka.jsx)(d.c,{path:"/forgot-password",children:Object(Ka.jsx)(oy,{})}),Object(Ka.jsx)(d.c,{children:Object(Ka.jsx)(Y_,{})})]})}var dy=i.a.memo(uy);function my(){return!0===O("customer-portal")?Object(Ka.jsx)(dy,{}):Object(Ka.jsx)(K_,{})}var by=i.a.memo(my);function jy(){var e=Object(l.c)(),t=i.a.useState(!0),n=Object(o.a)(t,2),a=n[0],c=n[1];i.a.useEffect((function(){e(ka()).catch((function(e){e!==Ca&&console.error(e)})).then((function(){c(!1)}))}),[e]);var r=Object(l.d)((function(e){return null!=e.auth.get("access_token")}));return!0===a?Object(Ka.jsx)(v_,{message:"Attempting to login."}):Object(Ka.jsxs)(i.a.Fragment,{children:[!0===r?Object(Ka.jsx)(L_,{}):Object(Ka.jsx)(by,{}),Object(Ka.jsx)(G_,{})]})}var fy=i.a.memo(jy);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var hy=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,868)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))},py=n(406),gy=n(13),Oy=Object.assign({},py),vy=localStorage.getItem("testSymbol"),xy=localStorage.getItem("testText");Oy.main.en.numbers.currencies[vy]={displayName:xy,"displayName-count-one":xy,"displayName-count-other":xy,symbol:vy},Object(gy.a)(Oy);var Cy=Object(Ka.jsx)(l.a,{store:za,children:Object(Ka.jsx)(s.a,{children:Object(Ka.jsx)(fy,{})})});r.a.render(Cy,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),hy()}},[[839,1,2]]]);
//# sourceMappingURL=main.0965e94e.chunk.js.map